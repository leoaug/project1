function paginationController(a,b,c,d,e){function f(a,b,c){return{number:a,text:b,active:c}}function g(a,b){var c=[],d=1,e=b,g=angular.isDefined(i)&&i<b;g&&(j?(d=Math.max(a-Math.floor(i/2),1),(e=d+i-1)>b&&(e=b,d=e-i+1)):(d=(Math.ceil(a/i)-1)*i+1,e=Math.min(d+i-1,b)));for(var h=d;h<=e;h+=1){var m=f(h,h,h===a);c.push(m)}if(g&&i>0&&(!j||k||l)){if(d>1){if(!l||d>3){var n=f(d-1,"...",!1);c.unshift(n)}if(l){if(3===d){var o=f(2,"2",!1);c.unshift(o)}var p=f(1,"1",!1);c.unshift(p)}}if(e<b){if(!l||e<b-2){var q=f(e+1,"...",!1);c.push(q)}if(l){if(e===b-2){var r=f(b-1,b-1,!1);c.push(r)}var s=f(b,b,!1);c.push(s)}}}return c}var h=this,i=angular.isDefined(b.bbMaxSize)?a.$parent.$eval(b.bbMaxSize):e.maxSize,j=angular.isDefined(b.bbRotate)?a.$parent.$eval(b.bbRotate):e.rotate,k=angular.isDefined(b.bbForceEllipses)?a.$parent.$eval(b.bbForceEllipses):e.forceEllipses,l=angular.isDefined(b.bbBoundaryLinkNumbers)?a.$parent.$eval(b.bbBoundaryLinkNumbers):e.boundaryLinkNumbers;a.boundaryLinks=angular.isDefined(b.bbBoundaryLinks)?a.$parent.$eval(b.bbBoundaryLinks):e.boundaryLinks,a.directionLinks=angular.isDefined(b.bbDirectionLinks)?a.$parent.$eval(b.bbDirectionLinks):e.directionLinks,d.create(this,a,b),b.bbMaxSize&&h._watchers.push(a.$parent.$watch(c(b.bbMaxSize),function(a){i=parseInt(a,10),h.render()}));var m=this.render;this.render=function(){m(),a.page>0&&a.page<=a.totalPages&&(a.pages=g(a.page,a.totalPages))}}function pagination(a,b){function c(a,c,d,e){var f=e[0],g=e[1];g&&f.init(g,b)}return{controller:"bbPaginationController",controllerAs:"pagination",link:c,replace:!0,require:["bbPagination","?ngModel"],scope:{totalItems:"=?bbTotalItems",firstText:"@?bbFirstText",previousText:"@?bbPreviousText",nextText:"@?bbNextText",lastText:"@?bbLastText",ngDisabled:"="},templateUrl:function(a,b){return b.bbTemplateUrl||"bb/pagination.html"}}}!function(){"use strict";angular.module("bb.accordion.tmpl",[]).run(["$templateCache",function(a){a.put("bb/accordion.html",'<div class="accordion__item" role="heading" ng-class="{\'is-open\': isOpenned}">\n    <div aria-label="{{itemTitle}}" tabindex="0" id="{{\'accordion\' + $id}}" \nrole="button" aria-controls="{{\'accordion__item\' + $id}}" \naria-expanded="{{isOpenned}}" aria-disabled="{{itemDisabled}}" \nclass="accordion__title" \nng-class="{\'accordion__title--left\': iconIsOnLeft, \'is-disabled\': itemDisabled}" \nng-click="toggleItem()">\n        <span ng-bind-html="itemTitle"></span>\n        <i ng-show="iconsType === \'class\'" class="accordion__icon {{icon}}" \nng-class="{\'accordion__icon--left\': iconIsOnLeft}"></i>\n        <img \nng-show="iconsType == \'url\'" alt="" class="accordion__image" \nng-class="{\'accordion__image--left\': iconIsOnLeft}" \nng-src="{{getIconUrl(iconsType)}}">\n    </div>\n    <div \nclass="accordion__body">\n        <div id="{{\'accordion__item\' + $id}}" \naria-labelledby="{{\'accordion\' + $id}}" role="region" \nclass="accordion__content" ng-transclude ng-show="isOpenned"></div>\n    </div>\n\n</div>\n')}])}(),function(){"use strict";function a(){return{controller:"bbAccordionController",restrict:"EA",replace:!0,scope:{oneAtATime:"@bbOneAtATime",closeIconUrl:"@bbCloseIconUrl",openIconUrl:"@bbOpenIconUrl",closeIconClass:"@bbCloseIconClass",openIconClass:"@bbOpenIconClass",iconPosition:"@bbIconPosition"},template:'<section class="accordion" ng-transclude></section>',transclude:!0}}function b(a){this.items=[],this.openItem=function(b,c,d){b.isOpenned=!0,a.oneAtATime&&JSON.parse(a.oneAtATime)&&angular.forEach(this.items,function(a){a.$id!==b.$id&&(a.isOpenned&&a.onClose(),a.isOpenned=!1,a.icon=a.closeIcon)})},this.addItem=function(b){this.items.push(b),void 0!==a.closeIconClass||void 0!==a.openIconClass?(b.iconsType="class",b.closeIcon=a.closeIconClass,b.openIcon=a.openIconClass):void 0===a.closeIconUrl&&void 0===a.openIconUrl||(b.iconsType="url",b.closeIcon=a.closeIconUrl,b.openIcon=a.openIconUrl),b.iconIsOnLeft="left"===a.iconPosition}}function c(){function a(a,b,c,d){a.isOpenned=!!a.initiallyOpen,d.addItem(a),a.isOpenned?a.icon=a.openIcon:a.icon=a.closeIcon;var e;b.on("click",function(a){e=a.target}),b.on("keydown",function(c){13!==c.keyCode&&32!==c.keyCode||a.isOpenned||a.$apply(function(){if(e=c.target,a.toggleItem(),!b[0].querySelector(".accordion__body").querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])').length){var d=b[0].querySelector(".accordion__content");angular.element(d).attr("tabindex","0")}}),a.isOpenned&&27===c.keyCode&&(a.toggleItem(),a.$apply(function(){e.focus()}))}),a.toggleItem=function(){a.itemDisabled||(a.isOpenned?(a.isOpenned=!1,a.icon=a.closeIcon,a.onClose()):(d.openItem(this,b,a),a.icon=a.openIcon,a.onOpen()))},a.getIconUrl=function(b){return"url"===b?a.icon:null}}return{link:a,require:"^bbAccordion",restrict:"EA",replace:!0,scope:{itemTitle:"@bbItemTitle",itemDisabled:"=bbItemDisabled",initiallyOpen:"=bbInitiallyOpen",onOpen:"&bbOnOpen",onClose:"&bbOnClose"},templateUrl:"bb/accordion.html",transclude:!0}}angular.module("bb.accordion",["bb.accordion.tmpl","ngSanitize"]).directive("bbAccordion",a).directive("bbAccordionItem",c).controller("bbAccordionController",b),b.$inject=["$scope"]}(),function(){"use strict";angular.module("bb.alert.tmpl",[]).run(["$templateCache",function(a){a.put("bb/alert-content.html",'<div class="alert__area">\n    <i class="{{ $parent.icon }}" \nng-show="$parent.icon" aria-hidden="true"></i>\n    <span class="sr-only">\nMensagem {{ $parent.type === \'success\' ? \'de sucesso\' : ($parent.type === \'info\' ? \'informativa\' : ($parent.type === \'error\' ? \'de erro\' : \'de alerta\')) }}.\n</span>\n    <div class="alert__desc" ng-transclude></div>\n    <button \nclass="alert__button" ng-click="$parent.vm.openDetails()" \nng-show="$parent.vm.details.hasTranscluded">\n        <i \nclass="{{$parent.vm.icons[$parent.vm.iconTheme].down}}" \nng-show="!$parent.vm.details.open"></i>\n        <i \nclass="{{$parent.vm.icons[$parent.vm.iconTheme].up}}" \nng-show="$parent.vm.details.open"></i>\n    </button>\n    <button \nclass="btn btn--xs btn--line btn--default alert__detail" \nng-click="$parent.vm.openDetails()" \nng-show="$parent.vm.details.hasTranscluded" aria-label="Detalhar alerta.">\nDetalhar</button>\n    <button type="button" class="alert__close" \nng-show="$parent.vm.closeable" ng-click="$parent.close({$event: $event})">\n        <span aria-hidden="true">&times;</span>\n        <span class="sr-only">\nFechar.</span>\n    </button>\n</div>\n'),a.put("bb/alert-details.html",'<span class="sr-only" ng-show="$parent.vm.details.open">Detalhamento do alerta:\n</span>\n<div class="alert__details" ng-transclude></div>'),a.put("bb/alert.html",'<div class="alert" ng-class="{\'is-open\': vm.details.open}" tabindex="0" \nng-transclude></div>\n')}])}(),function(){"use strict";function a(a,b,c,d,e,f){var g=this;g.iconTheme=f.getIconsTheme(),g.icons={gaw:{up:"ai2 ai2--keyboard__arrow-up",down:"ai2 ai2--keyboard__arrow-down"},apj:{up:"mi mi--keyboard-arrow-up",down:"mi mi--keyboard-arrow-up"}},g.closeable=!!c.bbClose,g.closeable&&b.addClass("alert--dismissible");var h=angular.isDefined(c.dismissOnTimeout)?d(c.dismissOnTimeout)(a.$parent):null;h&&e(function(){a.close()},parseInt(h,10)),e(function(){"string"==typeof a.type&&(a.type=a.type.toLowerCase()),b.addClass("alert--"+(a.type||"warn"))}),e(function(){if("false"===a.icon)a.icon=!1;else if(!a.icon)switch(a.type){case"success":a.icon="mi mi--check-circle";break;case"info":a.icon="mi mi--info";break;case"error":a.icon="mi mi--cancel";break;case"warn":a.icon="mi mi--warning"}}),"true"===a.square&&b.addClass("alert--square")}function b(){return{controller:"bbAlertController",controllerAs:"vm",replace:!0,scope:{type:"@?bbType",close:"&?bbClose",icon:"@?bbIcon",square:"@?bbSquare"},templateUrl:"bb/alert.html",transclude:!0}}function c(){function a(a,b,c,d){d.details={open:!1},d.openDetails=function(){d.details.open=!d.details.open}}return{link:a,require:"^bbAlert",replace:!0,scope:!1,templateUrl:"bb/alert-content.html",transclude:!0}}function d(){function a(a,b,c,d,e){e(function(a){a.length&&(d.details.hasTranscluded=!0)})}return{link:a,require:"^bbAlert",replace:!1,scope:!1,templateUrl:"bb/alert-details.html",transclude:!0}}function e(){function a(){function a(a){c.includes(a)&&(d=a)}function b(){return d}var c=["gaw","apj"],d="gaw";return{setIconsTheme:a,getIconsTheme:b}}this.$get=a}angular.module("bb.alert",["bb.alert.tmpl"]).controller("bbAlertController",a).directive("bbAlert",b).directive("bbAlertContent",c).directive("bbAlertDetails",d).provider("bbAlertThemeProvider",e),a.$inject=["$scope","$element","$attrs","$interpolate","$timeout","bbAlertThemeProvider"]}(),function(){"use strict";angular.module("bb.alertBag.tmpl",[]).run(["$templateCache",function(a){a.put("bb/alert-bag.html",'<div class="alert-bag" ng-class="{\'alert-bag--float\': floatBag}" \nng-show="alertBag && alertBag.length > 0">\n    <bb-alert \nng-repeat="alert in alertBag" bb-type="{{alert.type}}" \nbb-icon="{{alert.icon}}" bb-close="closeAlert(alert, $index)">\n        \n<bb-alert-content>\n            <p>{{alert.text}}</p>\n        \n</bb-alert-content>\n        <bb-alert-details ng-if="alert.details">\n            <p>{{alert.details}}</p>\n        </bb-alert-details>\n    \n</bb-alert>\n</div>\n')}])}(),function(){"use strict";function a(){function a(a,b,c,d,e){function f(b,c){a.alertBag.splice(c,1),angular.isFunction(b.close)&&b.close(b,c)}console.log(b.children()),a.closeAlert=f,a.floatBag=c.bbFloatBag&&JSON.parse(c.bbFloatBag),e(function(a){b.append(a)}),a.floatBag&&b.addClass("alert-bag--parent-relative")}return{restrict:"EA",templateUrl:"bb/alert-bag.html",transclude:!0,scope:{alertBag:"=bbAlertBag"},link:a}}angular.module("bb.alertBag",["bb.alertBag.tmpl","bb.alert"]).directive("bbAlertBag",a)}(),function(){"use strict";angular.module("bb.badge.tmpl",[]).run(["$templateCache",function(a){a.put("bb/badge.html",'<span class="badge">{{content}}</span>\n')}])}(),function(){"use strict";function a(){function a(a,b){if(a.position){var c=a.position.split(" ").map(function(a){return"badge--"+a}).join(" ");b.addClass(c),b.parent().css("position","relative"),"inline"===getComputedStyle(b.parent()[0],null).display&&b.parent().css("display","inline-block")}a.type&&b.addClass("badge--"+a.type)}return{link:a,replace:!0,restrict:"E",scope:{content:"@?bbContent",position:"@?bbPosition",type:"@?bbType"},templateUrl:"bb/badge.html"}}angular.module("bb.badge",["bb.badge.tmpl"]).directive("bbBadge",a)}(),function(a,b){"function"==typeof define&&define.amd?define("Chartist",[],function(){return a.Chartist=b()}):"object"==typeof exports?module.exports=b():a.Chartist=b()}(this,function(){var a={version:"0.10.0"};return function(a,b,c){"use strict";c.namespaces={svg:"http://www.w3.org/2000/svg",xmlns:"http://www.w3.org/2000/xmlns/",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",ct:"http://gionkunz.github.com/chartist-js/ct"},c.noop=function(a){return a},c.alphaNumerate=function(a){return String.fromCharCode(97+a%26)},c.extend=function(a){var b,d,e;for(a=a||{},b=1;b<arguments.length;b++){d=arguments[b];for(var f in d)e=d[f],"object"!=typeof e||null===e||e instanceof Array?a[f]=e:a[f]=c.extend(a[f],e)}return a},c.replaceAll=function(a,b,c){return a.replace(new RegExp(b,"g"),c)},c.ensureUnit=function(a,b){return"number"==typeof a&&(a+=b),a},c.quantity=function(a){if("string"==typeof a){var b=/^(\d+)\s*(.*)$/g.exec(a);return{value:+b[1],unit:b[2]||void 0}}return{value:a}},c.querySelector=function(a){return a instanceof Node?a:b.querySelector(a)},c.times=function(a){return Array.apply(null,new Array(a))},c.sum=function(a,b){return a+(b||0)},c.mapMultiply=function(a){return function(b){return b*a}},c.mapAdd=function(a){return function(b){return b+a}},c.serialMap=function(a,b){var d=[],e=Math.max.apply(null,a.map(function(a){return a.length}));return c.times(e).forEach(function(c,e){var f=a.map(function(a){return a[e]});d[e]=b.apply(null,f)}),d},c.roundWithPrecision=function(a,b){var d=Math.pow(10,b||c.precision);return Math.round(a*d)/d},c.precision=8,c.escapingMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"},c.serialize=function(a){return null===a||void 0===a?a:("number"==typeof a?a=""+a:"object"==typeof a&&(a=JSON.stringify({data:a})),Object.keys(c.escapingMap).reduce(function(a,b){return c.replaceAll(a,b,c.escapingMap[b])},a))},c.deserialize=function(a){if("string"!=typeof a)return a;a=Object.keys(c.escapingMap).reduce(function(a,b){return c.replaceAll(a,c.escapingMap[b],b)},a);try{a=JSON.parse(a),a=void 0!==a.data?a.data:a}catch(a){}return a},c.createSvg=function(a,b,d,e){var f;return b=b||"100%",d=d||"100%",Array.prototype.slice.call(a.querySelectorAll("svg")).filter(function(a){return a.getAttributeNS(c.namespaces.xmlns,"ct")}).forEach(function(b){a.removeChild(b)}),f=new c.Svg("svg").attr({width:b,height:d}).addClass(e).attr({style:"width: "+b+"; height: "+d+";"}),a.appendChild(f._node),f},c.normalizeData=function(a,b,d){var e,f={raw:a,normalized:{}};return f.normalized.series=c.getDataArray({series:a.series||[]},b,d),e=f.normalized.series.every(function(a){return a instanceof Array})?Math.max.apply(null,f.normalized.series.map(function(a){return a.length})):f.normalized.series.length,f.normalized.labels=(a.labels||[]).slice(),Array.prototype.push.apply(f.normalized.labels,c.times(Math.max(0,e-f.normalized.labels.length)).map(function(){return""})),b&&c.reverseData(f.normalized),f},c.safeHasProperty=function(a,b){return null!==a&&"object"==typeof a&&a.hasOwnProperty(b)},c.isDataHoleValue=function(a){return null===a||void 0===a||"number"==typeof a&&isNaN(a)},c.reverseData=function(a){a.labels.reverse(),a.series.reverse();for(var b=0;b<a.series.length;b++)"object"==typeof a.series[b]&&void 0!==a.series[b].data?a.series[b].data.reverse():a.series[b]instanceof Array&&a.series[b].reverse()},c.getDataArray=function(a,b,d){function e(a){if(c.safeHasProperty(a,"value"))return e(a.value);if(c.safeHasProperty(a,"data"))return e(a.data);if(a instanceof Array)return a.map(e);if(!c.isDataHoleValue(a)){if(d){var b={};return"string"==typeof d?b[d]=c.getNumberOrUndefined(a):b.y=c.getNumberOrUndefined(a),b.x=a.hasOwnProperty("x")?c.getNumberOrUndefined(a.x):b.x,b.y=a.hasOwnProperty("y")?c.getNumberOrUndefined(a.y):b.y,b}return c.getNumberOrUndefined(a)}}return a.series.map(e)},c.normalizePadding=function(a,b){return b=b||0,"number"==typeof a?{top:a,right:a,bottom:a,left:a}:{top:"number"==typeof a.top?a.top:b,right:"number"==typeof a.right?a.right:b,bottom:"number"==typeof a.bottom?a.bottom:b,left:"number"==typeof a.left?a.left:b}},c.getMetaData=function(a,b){var c=a.data?a.data[b]:a[b];return c?c.meta:void 0},c.orderOfMagnitude=function(a){return Math.floor(Math.log(Math.abs(a))/Math.LN10)},c.projectLength=function(a,b,c){return b/c.range*a},c.getAvailableHeight=function(a,b){return Math.max((c.quantity(b.height).value||a.height())-(b.chartPadding.top+b.chartPadding.bottom)-b.axisX.offset,0)},c.getHighLow=function(a,b,d){function e(a){if(void 0!==a)if(a instanceof Array)for(var b=0;b<a.length;b++)e(a[b]);else{var c=d?+a[d]:+a;g&&c>f.high&&(f.high=c),h&&c<f.low&&(f.low=c)}}b=c.extend({},b,d?b["axis"+d.toUpperCase()]:{});var f={high:void 0===b.high?-Number.MAX_VALUE:+b.high,low:void 0===b.low?Number.MAX_VALUE:+b.low},g=void 0===b.high,h=void 0===b.low;return(g||h)&&e(a),(b.referenceValue||0===b.referenceValue)&&(f.high=Math.max(b.referenceValue,f.high),f.low=Math.min(b.referenceValue,f.low)),f.high<=f.low&&(0===f.low?f.high=1:f.low<0?f.high=0:f.high>0?f.low=0:(f.high=1,f.low=0)),f},c.isNumeric=function(a){return null!==a&&isFinite(a)},c.isFalseyButZero=function(a){return!a&&0!==a},c.getNumberOrUndefined=function(a){return c.isNumeric(a)?+a:void 0},c.isMultiValue=function(a){return"object"==typeof a&&("x"in a||"y"in a)},c.getMultiValue=function(a,b){return c.isMultiValue(a)?c.getNumberOrUndefined(a[b||"y"]):c.getNumberOrUndefined(a)},c.rho=function(a){function b(a,c){return a%c==0?c:b(c,a%c)}function c(a){return a*a+1}if(1===a)return a;var d,e=2,f=2;if(a%2==0)return 2;do{e=c(e)%a,f=c(c(f))%a,d=b(Math.abs(e-f),a)}while(1===d);return d},c.getBounds=function(a,b,d,e){function f(a,b){return a===(a+=b)&&(a*=1+(b>0?o:-o)),a}var g,h,i,j=0,k={high:b.high,low:b.low};k.valueRange=k.high-k.low,k.oom=c.orderOfMagnitude(k.valueRange),k.step=Math.pow(10,k.oom),k.min=Math.floor(k.low/k.step)*k.step,k.max=Math.ceil(k.high/k.step)*k.step,k.range=k.max-k.min,k.numberOfSteps=Math.round(k.range/k.step);var l=c.projectLength(a,k.step,k),m=l<d,n=e?c.rho(k.range):0;if(e&&c.projectLength(a,1,k)>=d)k.step=1;else if(e&&n<k.step&&c.projectLength(a,n,k)>=d)k.step=n;else for(;;){if(m&&c.projectLength(a,k.step,k)<=d)k.step*=2;else{if(m||!(c.projectLength(a,k.step/2,k)>=d))break;if(k.step/=2,e&&k.step%1!=0){k.step*=2;break}}if(j++>1e3)throw new Error("Exceeded maximum number of iterations while optimizing scale step!")}var o=2.221e-16;for(k.step=Math.max(k.step,o),h=k.min,i=k.max;h+k.step<=k.low;)h=f(h,k.step);for(;i-k.step>=k.high;)i=f(i,-k.step);k.min=h,k.max=i,k.range=k.max-k.min;var p=[];for(g=k.min;g<=k.max;g=f(g,k.step)){var q=c.roundWithPrecision(g);q!==p[p.length-1]&&p.push(q)}return k.values=p,k},c.polarToCartesian=function(a,b,c,d){var e=(d-90)*Math.PI/180;return{x:a+c*Math.cos(e),y:b+c*Math.sin(e)}},c.createChartRect=function(a,b,d){var e=!(!b.axisX&&!b.axisY),f=e?b.axisY.offset:0,g=e?b.axisX.offset:0,h=a.width()||c.quantity(b.width).value||0,i=a.height()||c.quantity(b.height).value||0,j=c.normalizePadding(b.chartPadding,d);h=Math.max(h,f+j.left+j.right),i=Math.max(i,g+j.top+j.bottom);var k={padding:j,width:function(){return this.x2-this.x1},height:function(){return this.y1-this.y2}};return e?("start"===b.axisX.position?(k.y2=j.top+g,k.y1=Math.max(i-j.bottom,k.y2+1)):(k.y2=j.top,k.y1=Math.max(i-j.bottom-g,k.y2+1)),"start"===b.axisY.position?(k.x1=j.left+f,k.x2=Math.max(h-j.right,k.x1+1)):(k.x1=j.left,k.x2=Math.max(h-j.right-f,k.x1+1))):(k.x1=j.left,k.x2=Math.max(h-j.right,k.x1+1),k.y2=j.top,k.y1=Math.max(i-j.bottom,k.y2+1)),k},c.createGrid=function(a,b,d,e,f,g,h,i){var j={};j[d.units.pos+"1"]=a,j[d.units.pos+"2"]=a,j[d.counterUnits.pos+"1"]=e,j[d.counterUnits.pos+"2"]=e+f;var k=g.elem("line",j,h.join(" "));i.emit("draw",c.extend({type:"grid",axis:d,index:b,group:g,element:k},j))},c.createGridBackground=function(a,b,c,d){var e=a.elem("rect",{x:b.x1,y:b.y2,width:b.width(),height:b.height()},c,!0);d.emit("draw",{type:"gridBackground",group:a,element:e})},c.createLabel=function(a,b,d,e,f,g,h,i,j,k,l){var m,n={};if(n[f.units.pos]=a+h[f.units.pos],n[f.counterUnits.pos]=h[f.counterUnits.pos],n[f.units.len]=b,n[f.counterUnits.len]=Math.max(0,g-10),k){var o='<span class="'+j.join(" ")+'" style="'+f.units.len+": "+Math.round(n[f.units.len])+"px; "+f.counterUnits.len+": "+Math.round(n[f.counterUnits.len])+'px">'+e[d]+"</span>";m=i.foreignObject(o,c.extend({style:"overflow: visible;"},n))}else m=i.elem("text",n,j.join(" ")).text(e[d]);l.emit("draw",c.extend({type:"label",axis:f,index:d,group:i,element:m,text:e[d]},n))},c.getSeriesOption=function(a,b,c){if(a.name&&b.series&&b.series[a.name]){var d=b.series[a.name];return d.hasOwnProperty(c)?d[c]:b[c]}return b[c]},c.optionsProvider=function(b,d,e){function f(b){var f=h;if(h=c.extend({},j),d)for(i=0;i<d.length;i++){var g=a.matchMedia(d[i][0]);g.matches&&(h=c.extend(h,d[i][1]))}e&&b&&e.emit("optionsChanged",{previousOptions:f,currentOptions:h})}function g(){k.forEach(function(a){a.removeListener(f)})}var h,i,j=c.extend({},b),k=[];if(!a.matchMedia)throw"window.matchMedia not found! Make sure you're using a polyfill.";if(d)for(i=0;i<d.length;i++){var l=a.matchMedia(d[i][0]);l.addListener(f),k.push(l)}return f(),{removeMediaQueryListeners:g,getCurrentOptions:function(){return c.extend({},h)}}},c.splitIntoSegments=function(a,b,d){var e={increasingX:!1,fillHoles:!1};d=c.extend({},e,d);for(var f=[],g=!0,h=0;h<a.length;h+=2)void 0===c.getMultiValue(b[h/2].value)?d.fillHoles||(g=!0):(d.increasingX&&h>=2&&a[h]<=a[h-2]&&(g=!0),g&&(f.push({pathCoordinates:[],valueData:[]}),g=!1),f[f.length-1].pathCoordinates.push(a[h],a[h+1]),f[f.length-1].valueData.push(b[h/2]));return f}}(window,document,a),function(a,b,c){"use strict";c.Interpolation={},c.Interpolation.none=function(a){var b={fillHoles:!1};return a=c.extend({},b,a),function(b,d){for(var e=new c.Svg.Path,f=!0,g=0;g<b.length;g+=2){var h=b[g],i=b[g+1],j=d[g/2];void 0!==c.getMultiValue(j.value)?(f?e.move(h,i,!1,j):e.line(h,i,!1,j),f=!1):a.fillHoles||(f=!0)}return e}},c.Interpolation.simple=function(a){var b={divisor:2,fillHoles:!1};a=c.extend({},b,a);var d=1/Math.max(1,a.divisor);return function(b,e){for(var f,g,h,i=new c.Svg.Path,j=0;j<b.length;j+=2){var k=b[j],l=b[j+1],m=(k-f)*d,n=e[j/2];void 0!==n.value?(void 0===h?i.move(k,l,!1,n):i.curve(f+m,g,k-m,l,k,l,!1,n),f=k,g=l,h=n):a.fillHoles||(f=k=h=void 0)}return i}},c.Interpolation.cardinal=function(a){var b={tension:1,fillHoles:!1};a=c.extend({},b,a);var d=Math.min(1,Math.max(0,a.tension)),e=1-d;return function b(f,g){var h=c.splitIntoSegments(f,g,{fillHoles:a.fillHoles});if(h.length){if(h.length>1){var i=[];return h.forEach(function(a){i.push(b(a.pathCoordinates,a.valueData))}),c.Svg.Path.join(i)}if(f=h[0].pathCoordinates,g=h[0].valueData,f.length<=4)return c.Interpolation.none()(f,g);for(var j=(new c.Svg.Path).move(f[0],f[1],!1,g[0]),k=0,l=f.length;l-2>k;k+=2){var m=[{x:+f[k-2],y:+f[k-1]},{x:+f[k],y:+f[k+1]},{x:+f[k+2],y:+f[k+3]},{x:+f[k+4],y:+f[k+5]}];l-4===k?m[3]=m[2]:k||(m[0]={x:+f[k],y:+f[k+1]}),j.curve(d*(-m[0].x+6*m[1].x+m[2].x)/6+e*m[2].x,d*(-m[0].y+6*m[1].y+m[2].y)/6+e*m[2].y,d*(m[1].x+6*m[2].x-m[3].x)/6+e*m[2].x,d*(m[1].y+6*m[2].y-m[3].y)/6+e*m[2].y,m[2].x,m[2].y,!1,g[(k+2)/2])}return j}return c.Interpolation.none()([])}},c.Interpolation.monotoneCubic=function(a){var b={fillHoles:!1};return a=c.extend({},b,a),function b(d,e){var f=c.splitIntoSegments(d,e,{fillHoles:a.fillHoles,increasingX:!0});if(f.length){if(f.length>1){var g=[];return f.forEach(function(a){g.push(b(a.pathCoordinates,a.valueData))}),c.Svg.Path.join(g)}if(d=f[0].pathCoordinates,e=f[0].valueData,d.length<=4)return c.Interpolation.none()(d,e);var h,i,j=[],k=[],l=d.length/2,m=[],n=[],o=[],p=[];for(h=0;h<l;h++)j[h]=d[2*h],k[h]=d[2*h+1];for(h=0;h<l-1;h++)o[h]=k[h+1]-k[h],p[h]=j[h+1]-j[h],n[h]=o[h]/p[h];for(m[0]=n[0],m[l-1]=n[l-2],h=1;h<l-1;h++)0===n[h]||0===n[h-1]||n[h-1]>0!=n[h]>0?m[h]=0:(m[h]=3*(p[h-1]+p[h])/((2*p[h]+p[h-1])/n[h-1]+(p[h]+2*p[h-1])/n[h]),isFinite(m[h])||(m[h]=0));for(i=(new c.Svg.Path).move(j[0],k[0],!1,e[0]),h=0;h<l-1;h++)i.curve(j[h]+p[h]/3,k[h]+m[h]*p[h]/3,j[h+1]-p[h]/3,k[h+1]-m[h+1]*p[h]/3,j[h+1],k[h+1],!1,e[h+1]);return i}return c.Interpolation.none()([])}},c.Interpolation.step=function(a){var b={postpone:!0,fillHoles:!1};return a=c.extend({},b,a),function(b,d){for(var e,f,g,h=new c.Svg.Path,i=0;i<b.length;i+=2){var j=b[i],k=b[i+1],l=d[i/2];void 0!==l.value?(void 0===g?h.move(j,k,!1,l):(a.postpone?h.line(j,f,!1,g):h.line(e,k,!1,l),h.line(j,k,!1,l)),e=j,f=k,g=l):a.fillHoles||(e=f=g=void 0)}return h}}}(window,document,a),function(a,b,c){"use strict";c.EventEmitter=function(){function a(a,b){d[a]=d[a]||[],d[a].push(b)}function b(a,b){d[a]&&(b?(d[a].splice(d[a].indexOf(b),1),0===d[a].length&&delete d[a]):delete d[a])}function c(a,b){d[a]&&d[a].forEach(function(a){a(b)}),d["*"]&&d["*"].forEach(function(c){c(a,b)})}var d=[];return{addEventHandler:a,removeEventHandler:b,emit:c}}}(window,document,a),function(a,b,c){"use strict";function d(a){var b=[];if(a.length)for(var c=0;c<a.length;c++)b.push(a[c]);return b}function e(a,b){var d=b||this.prototype||c.Class,e=Object.create(d);c.Class.cloneDefinitions(e,a);var f=function(){var a,b=e.constructor||function(){};return a=this===c?Object.create(e):this,b.apply(a,Array.prototype.slice.call(arguments,0)),a};return f.prototype=e,f.super=d,f.extend=this.extend,f}function f(){var a=d(arguments),b=a[0];return a.splice(1,a.length-1).forEach(function(a){Object.getOwnPropertyNames(a).forEach(function(c){delete b[c],Object.defineProperty(b,c,Object.getOwnPropertyDescriptor(a,c))})}),b}c.Class={extend:e,cloneDefinitions:f}}(window,document,a),function(a,b,c){"use strict";function d(a,b,d){return a&&(this.data=a||{},this.data.labels=this.data.labels||[],this.data.series=this.data.series||[],this.eventEmitter.emit("data",{type:"update",data:this.data})),b&&(this.options=c.extend({},d?this.options:this.defaultOptions,b),this.initializeTimeoutId||(this.optionsProvider.removeMediaQueryListeners(),this.optionsProvider=c.optionsProvider(this.options,this.responsiveOptions,this.eventEmitter))),this.initializeTimeoutId||this.createChart(this.optionsProvider.getCurrentOptions()),this}function e(){return this.initializeTimeoutId?a.clearTimeout(this.initializeTimeoutId):(a.removeEventListener("resize",this.resizeListener),this.optionsProvider.removeMediaQueryListeners()),this}function f(a,b){return this.eventEmitter.addEventHandler(a,b),this}function g(a,b){return this.eventEmitter.removeEventHandler(a,b),this}function h(){a.addEventListener("resize",this.resizeListener),this.optionsProvider=c.optionsProvider(this.options,this.responsiveOptions,this.eventEmitter),this.eventEmitter.addEventHandler("optionsChanged",function(){this.update()}.bind(this)),this.options.plugins&&this.options.plugins.forEach(function(a){a instanceof Array?a[0](this,a[1]):a(this)}.bind(this)),this.eventEmitter.emit("data",{type:"initial",data:this.data}),this.createChart(this.optionsProvider.getCurrentOptions()),this.initializeTimeoutId=void 0}function i(a,b,d,e,f){this.container=c.querySelector(a),this.data=b||{},this.data.labels=this.data.labels||[],this.data.series=this.data.series||[],this.defaultOptions=d,this.options=e,this.responsiveOptions=f,this.eventEmitter=c.EventEmitter(),this.supportsForeignObject=c.Svg.isSupported("Extensibility"),this.supportsAnimations=c.Svg.isSupported("AnimationEventsAttribute"),this.resizeListener=function(){this.update()}.bind(this),this.container&&(this.container.__chartist__&&this.container.__chartist__.detach(),this.container.__chartist__=this),this.initializeTimeoutId=setTimeout(h.bind(this),0)}c.Base=c.Class.extend({constructor:i,optionsProvider:void 0,container:void 0,svg:void 0,eventEmitter:void 0,createChart:function(){throw new Error("Base chart type can't be instantiated!")},update:d,detach:e,on:f,off:g,version:c.version,supportsForeignObject:!1})}(window,document,a),function(a,b,c){"use strict";function d(a,d,e,f,g){a instanceof Element?this._node=a:(this._node=b.createElementNS(c.namespaces.svg,a),"svg"===a&&this.attr({"xmlns:ct":c.namespaces.ct})),d&&this.attr(d),e&&this.addClass(e),f&&(g&&f._node.firstChild?f._node.insertBefore(this._node,f._node.firstChild):f._node.appendChild(this._node))}function e(a,b){return"string"==typeof a?b?this._node.getAttributeNS(b,a):this._node.getAttribute(a):(Object.keys(a).forEach(function(b){if(void 0!==a[b])if(-1!==b.indexOf(":")){var d=b.split(":");this._node.setAttributeNS(c.namespaces[d[0]],b,a[b])}else this._node.setAttribute(b,a[b])}.bind(this)),this)}function f(a,b,d,e){return new c.Svg(a,b,d,this,e)}function g(){return this._node.parentNode instanceof SVGElement?new c.Svg(this._node.parentNode):null}function h(){for(var a=this._node;"svg"!==a.nodeName;)a=a.parentNode;return new c.Svg(a)}function i(a){var b=this._node.querySelector(a);return b?new c.Svg(b):null}function j(a){var b=this._node.querySelectorAll(a);return b.length?new c.Svg.List(b):null}function k(){return this._node}function l(a,d,e,f){if("string"==typeof a){var g=b.createElement("div");g.innerHTML=a,a=g.firstChild}a.setAttribute("xmlns",c.namespaces.xmlns);var h=this.elem("foreignObject",d,e,f);return h._node.appendChild(a),h}function m(a){return this._node.appendChild(b.createTextNode(a)),this}function n(){for(;this._node.firstChild;)this._node.removeChild(this._node.firstChild);return this}function o(){return this._node.parentNode.removeChild(this._node),this.parent()}function p(a){return this._node.parentNode.replaceChild(a._node,this._node),a}function q(a,b){return b&&this._node.firstChild?this._node.insertBefore(a._node,this._node.firstChild):this._node.appendChild(a._node),this}function r(){return this._node.getAttribute("class")?this._node.getAttribute("class").trim().split(/\s+/):[]}function s(a){return this._node.setAttribute("class",this.classes(this._node).concat(a.trim().split(/\s+/)).filter(function(a,b,c){return c.indexOf(a)===b}).join(" ")),this}function t(a){var b=a.trim().split(/\s+/);return this._node.setAttribute("class",this.classes(this._node).filter(function(a){return-1===b.indexOf(a)}).join(" ")),this}function u(){return this._node.setAttribute("class",""),this}function v(){return this._node.getBoundingClientRect().height}function w(){return this._node.getBoundingClientRect().width}function x(a,b,d){return void 0===b&&(b=!0),Object.keys(a).forEach(function(e){function f(a,b){var f,g,h,i={};a.easing&&(h=a.easing instanceof Array?a.easing:c.Svg.Easing[a.easing],delete a.easing),a.begin=c.ensureUnit(a.begin,"ms"),a.dur=c.ensureUnit(a.dur,"ms"),h&&(a.calcMode="spline",a.keySplines=h.join(" "),a.keyTimes="0;1"),b&&(a.fill="freeze",i[e]=a.from,this.attr(i),g=c.quantity(a.begin||0).value,a.begin="indefinite"),f=this.elem("animate",c.extend({attributeName:e},a)),b&&setTimeout(function(){try{f._node.beginElement()}catch(b){i[e]=a.to,this.attr(i),f.remove()}}.bind(this),g),d&&f._node.addEventListener("beginEvent",function(){d.emit("animationBegin",{element:this,animate:f._node,params:a})}.bind(this)),f._node.addEventListener("endEvent",function(){d&&d.emit("animationEnd",{element:this,animate:f._node,params:a}),b&&(i[e]=a.to,this.attr(i),f.remove())}.bind(this))}a[e]instanceof Array?a[e].forEach(function(a){f.bind(this)(a,!1)}.bind(this)):f.bind(this)(a[e],b)}.bind(this)),this}function y(a){var b=this;this.svgElements=[];for(var d=0;d<a.length;d++)this.svgElements.push(new c.Svg(a[d]));Object.keys(c.Svg.prototype).filter(function(a){return-1===["constructor","parent","querySelector","querySelectorAll","replace","append","classes","height","width"].indexOf(a)}).forEach(function(a){b[a]=function(){var d=Array.prototype.slice.call(arguments,0);return b.svgElements.forEach(function(b){c.Svg.prototype[a].apply(b,d)}),b}})}c.Svg=c.Class.extend({constructor:d,attr:e,elem:f,parent:g,root:h,querySelector:i,querySelectorAll:j,getNode:k,foreignObject:l,text:m,empty:n,remove:o,replace:p,append:q,classes:r,addClass:s,removeClass:t,removeAllClasses:u,height:v,width:w,animate:x}),c.Svg.isSupported=function(a){return b.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#"+a,"1.1")};var z={easeInSine:[.47,0,.745,.715],easeOutSine:[.39,.575,.565,1],easeInOutSine:[.445,.05,.55,.95],easeInQuad:[.55,.085,.68,.53],easeOutQuad:[.25,.46,.45,.94],easeInOutQuad:[.455,.03,.515,.955],easeInCubic:[.55,.055,.675,.19],easeOutCubic:[.215,.61,.355,1],easeInOutCubic:[.645,.045,.355,1],easeInQuart:[.895,.03,.685,.22],easeOutQuart:[.165,.84,.44,1],easeInOutQuart:[.77,0,.175,1],easeInQuint:[.755,.05,.855,.06],easeOutQuint:[.23,1,.32,1],easeInOutQuint:[.86,0,.07,1],easeInExpo:[.95,.05,.795,.035],easeOutExpo:[.19,1,.22,1],easeInOutExpo:[1,0,0,1],easeInCirc:[.6,.04,.98,.335],easeOutCirc:[.075,.82,.165,1],easeInOutCirc:[.785,.135,.15,.86],easeInBack:[.6,-.28,.735,.045],easeOutBack:[.175,.885,.32,1.275],easeInOutBack:[.68,-.55,.265,1.55]};c.Svg.Easing=z,c.Svg.List=c.Class.extend({constructor:y})}(window,document,a),function(a,b,c){"use strict";function d(a,b,d,e,f,g){var h=c.extend({command:f?a.toLowerCase():a.toUpperCase()},b,g?{data:g}:{});d.splice(e,0,h)}function e(a,b){a.forEach(function(c,d){u[c.command.toLowerCase()].forEach(function(e,f){b(c,e,d,f,a)})})}function f(a,b){this.pathElements=[],this.pos=0,this.close=a,this.options=c.extend({},v,b)}function g(a){return void 0!==a?(this.pos=Math.max(0,Math.min(this.pathElements.length,a)),this):this.pos}function h(a){
return this.pathElements.splice(this.pos,a),this}function i(a,b,c,e){return d("M",{x:+a,y:+b},this.pathElements,this.pos++,c,e),this}function j(a,b,c,e){return d("L",{x:+a,y:+b},this.pathElements,this.pos++,c,e),this}function k(a,b,c,e,f,g,h,i){return d("C",{x1:+a,y1:+b,x2:+c,y2:+e,x:+f,y:+g},this.pathElements,this.pos++,h,i),this}function l(a,b,c,e,f,g,h,i,j){return d("A",{rx:+a,ry:+b,xAr:+c,lAf:+e,sf:+f,x:+g,y:+h},this.pathElements,this.pos++,i,j),this}function m(a){var b=a.replace(/([A-Za-z])([0-9])/g,"$1 $2").replace(/([0-9])([A-Za-z])/g,"$1 $2").split(/[\s,]+/).reduce(function(a,b){return b.match(/[A-Za-z]/)&&a.push([]),a[a.length-1].push(b),a},[]);"Z"===b[b.length-1][0].toUpperCase()&&b.pop();var d=b.map(function(a){var b=a.shift(),d=u[b.toLowerCase()];return c.extend({command:b},d.reduce(function(b,c,d){return b[c]=+a[d],b},{}))}),e=[this.pos,0];return Array.prototype.push.apply(e,d),Array.prototype.splice.apply(this.pathElements,e),this.pos+=d.length,this}function n(){var a=Math.pow(10,this.options.accuracy);return this.pathElements.reduce(function(b,c){var d=u[c.command.toLowerCase()].map(function(b){return this.options.accuracy?Math.round(c[b]*a)/a:c[b]}.bind(this));return b+c.command+d.join(",")}.bind(this),"")+(this.close?"Z":"")}function o(a,b){return e(this.pathElements,function(c,d){c[d]*="x"===d[0]?a:b}),this}function p(a,b){return e(this.pathElements,function(c,d){c[d]+="x"===d[0]?a:b}),this}function q(a){return e(this.pathElements,function(b,c,d,e,f){var g=a(b,c,d,e,f);(g||0===g)&&(b[c]=g)}),this}function r(a){var b=new c.Svg.Path(a||this.close);return b.pos=this.pos,b.pathElements=this.pathElements.slice().map(function(a){return c.extend({},a)}),b.options=c.extend({},this.options),b}function s(a){var b=[new c.Svg.Path];return this.pathElements.forEach(function(d){d.command===a.toUpperCase()&&0!==b[b.length-1].pathElements.length&&b.push(new c.Svg.Path),b[b.length-1].pathElements.push(d)}),b}function t(a,b,d){for(var e=new c.Svg.Path(b,d),f=0;f<a.length;f++)for(var g=a[f],h=0;h<g.pathElements.length;h++)e.pathElements.push(g.pathElements[h]);return e}var u={m:["x","y"],l:["x","y"],c:["x1","y1","x2","y2","x","y"],a:["rx","ry","xAr","lAf","sf","x","y"]},v={accuracy:3};c.Svg.Path=c.Class.extend({constructor:f,position:g,remove:h,move:i,line:j,curve:k,arc:l,scale:o,translate:p,transform:q,parse:m,stringify:n,clone:r,splitByCommand:s}),c.Svg.Path.elementDescriptions=u,c.Svg.Path.join=t}(window,document,a),function(a,b,c){"use strict";function d(a,b,c,d){this.units=a,this.counterUnits=a===f.x?f.y:f.x,this.chartRect=b,this.axisLength=b[a.rectEnd]-b[a.rectStart],this.gridOffset=b[a.rectOffset],this.ticks=c,this.options=d}function e(a,b,d,e,f){var g=e["axis"+this.units.pos.toUpperCase()],h=this.ticks.map(this.projectValue.bind(this)),i=this.ticks.map(g.labelInterpolationFnc);h.forEach(function(j,k){var l,m={x:0,y:0};l=h[k+1]?h[k+1]-j:Math.max(this.axisLength-j,30),c.isFalseyButZero(i[k])&&""!==i[k]||("x"===this.units.pos?(j=this.chartRect.x1+j,m.x=e.axisX.labelOffset.x,"start"===e.axisX.position?m.y=this.chartRect.padding.top+e.axisX.labelOffset.y+(d?5:20):m.y=this.chartRect.y1+e.axisX.labelOffset.y+(d?5:20)):(j=this.chartRect.y1-j,m.y=e.axisY.labelOffset.y-(d?l:0),"start"===e.axisY.position?m.x=d?this.chartRect.padding.left+e.axisY.labelOffset.x:this.chartRect.x1-10:m.x=this.chartRect.x2+e.axisY.labelOffset.x+10),g.showGrid&&c.createGrid(j,k,this,this.gridOffset,this.chartRect[this.counterUnits.len](),a,[e.classNames.grid,e.classNames[this.units.dir]],f),g.showLabel&&c.createLabel(j,l,k,i,this,g.offset,m,b,[e.classNames.label,e.classNames[this.units.dir],"start"===g.position?e.classNames[g.position]:e.classNames.end],d,f))}.bind(this))}var f={x:{pos:"x",len:"width",dir:"horizontal",rectStart:"x1",rectEnd:"x2",rectOffset:"y2"},y:{pos:"y",len:"height",dir:"vertical",rectStart:"y2",rectEnd:"y1",rectOffset:"x1"}};c.Axis=c.Class.extend({constructor:d,createGridAndLabels:e,projectValue:function(a,b,c){throw new Error("Base axis can't be instantiated!")}}),c.Axis.units=f}(window,document,a),function(a,b,c){"use strict";function d(a,b,d,e){var f=e.highLow||c.getHighLow(b,e,a.pos);this.bounds=c.getBounds(d[a.rectEnd]-d[a.rectStart],f,e.scaleMinSpace||20,e.onlyInteger),this.range={min:this.bounds.min,max:this.bounds.max},c.AutoScaleAxis.super.constructor.call(this,a,d,this.bounds.values,e)}function e(a){return this.axisLength*(+c.getMultiValue(a,this.units.pos)-this.bounds.min)/this.bounds.range}c.AutoScaleAxis=c.Axis.extend({constructor:d,projectValue:e})}(window,document,a),function(a,b,c){"use strict";function d(a,b,d,e){var f=e.highLow||c.getHighLow(b,e,a.pos);this.divisor=e.divisor||1,this.ticks=e.ticks||c.times(this.divisor).map(function(a,b){return f.low+(f.high-f.low)/this.divisor*b}.bind(this)),this.ticks.sort(function(a,b){return a-b}),this.range={min:f.low,max:f.high},c.FixedScaleAxis.super.constructor.call(this,a,d,this.ticks,e),this.stepLength=this.axisLength/this.divisor}function e(a){return this.axisLength*(+c.getMultiValue(a,this.units.pos)-this.range.min)/(this.range.max-this.range.min)}c.FixedScaleAxis=c.Axis.extend({constructor:d,projectValue:e})}(window,document,a),function(a,b,c){"use strict";function d(a,b,d,e){c.StepAxis.super.constructor.call(this,a,d,e.ticks,e);var f=Math.max(1,e.ticks.length-(e.stretch?1:0));this.stepLength=this.axisLength/f}function e(a,b){return this.stepLength*b}c.StepAxis=c.Axis.extend({constructor:d,projectValue:e})}(window,document,a),function(a,b,c){"use strict";function d(a){var b=c.normalizeData(this.data,a.reverseData,!0);this.svg=c.createSvg(this.container,a.width,a.height,a.classNames.chart);var d,e,g=this.svg.elem("g").addClass(a.classNames.gridGroup),h=this.svg.elem("g"),i=this.svg.elem("g").addClass(a.classNames.labelGroup),j=c.createChartRect(this.svg,a,f.padding);d=void 0===a.axisX.type?new c.StepAxis(c.Axis.units.x,b.normalized.series,j,c.extend({},a.axisX,{ticks:b.normalized.labels,stretch:a.fullWidth})):a.axisX.type.call(c,c.Axis.units.x,b.normalized.series,j,a.axisX),e=void 0===a.axisY.type?new c.AutoScaleAxis(c.Axis.units.y,b.normalized.series,j,c.extend({},a.axisY,{high:c.isNumeric(a.high)?a.high:a.axisY.high,low:c.isNumeric(a.low)?a.low:a.axisY.low})):a.axisY.type.call(c,c.Axis.units.y,b.normalized.series,j,a.axisY),d.createGridAndLabels(g,i,this.supportsForeignObject,a,this.eventEmitter),e.createGridAndLabels(g,i,this.supportsForeignObject,a,this.eventEmitter),a.showGridBackground&&c.createGridBackground(g,j,a.classNames.gridBackground,this.eventEmitter),b.raw.series.forEach(function(f,g){var i=h.elem("g");i.attr({"ct:series-name":f.name,"ct:meta":c.serialize(f.meta)}),i.addClass([a.classNames.series,f.className||a.classNames.series+"-"+c.alphaNumerate(g)].join(" "));var k=[],l=[];b.normalized.series[g].forEach(function(a,h){var i={x:j.x1+d.projectValue(a,h,b.normalized.series[g]),y:j.y1-e.projectValue(a,h,b.normalized.series[g])};k.push(i.x,i.y),l.push({value:a,valueIndex:h,meta:c.getMetaData(f,h)})}.bind(this));var m={lineSmooth:c.getSeriesOption(f,a,"lineSmooth"),showPoint:c.getSeriesOption(f,a,"showPoint"),showLine:c.getSeriesOption(f,a,"showLine"),showArea:c.getSeriesOption(f,a,"showArea"),areaBase:c.getSeriesOption(f,a,"areaBase")},n="function"==typeof m.lineSmooth?m.lineSmooth:m.lineSmooth?c.Interpolation.monotoneCubic():c.Interpolation.none(),o=n(k,l);if(m.showPoint&&o.pathElements.forEach(function(b){var h=i.elem("line",{x1:b.x,y1:b.y,x2:b.x+.01,y2:b.y},a.classNames.point).attr({"ct:value":[b.data.value.x,b.data.value.y].filter(c.isNumeric).join(","),"ct:meta":c.serialize(b.data.meta)});this.eventEmitter.emit("draw",{type:"point",value:b.data.value,index:b.data.valueIndex,meta:b.data.meta,series:f,seriesIndex:g,axisX:d,axisY:e,group:i,element:h,x:b.x,y:b.y})}.bind(this)),m.showLine){var p=i.elem("path",{d:o.stringify()},a.classNames.line,!0);this.eventEmitter.emit("draw",{type:"line",values:b.normalized.series[g],path:o.clone(),chartRect:j,index:g,series:f,seriesIndex:g,seriesMeta:f.meta,axisX:d,axisY:e,group:i,element:p})}if(m.showArea&&e.range){var q=Math.max(Math.min(m.areaBase,e.range.max),e.range.min),r=j.y1-e.projectValue(q);o.splitByCommand("M").filter(function(a){return a.pathElements.length>1}).map(function(a){var b=a.pathElements[0],c=a.pathElements[a.pathElements.length-1];return a.clone(!0).position(0).remove(1).move(b.x,r).line(b.x,b.y).position(a.pathElements.length+1).line(c.x,r)}).forEach(function(c){var h=i.elem("path",{d:c.stringify()},a.classNames.area,!0);this.eventEmitter.emit("draw",{type:"area",values:b.normalized.series[g],path:c.clone(),series:f,seriesIndex:g,axisX:d,axisY:e,chartRect:j,index:g,group:i,element:h})}.bind(this))}}.bind(this)),this.eventEmitter.emit("created",{bounds:e.bounds,chartRect:j,axisX:d,axisY:e,svg:this.svg,options:a})}function e(a,b,d,e){c.Line.super.constructor.call(this,a,b,f,c.extend({},f,d),e)}var f={axisX:{offset:30,position:"end",labelOffset:{x:0,y:0},showLabel:!0,showGrid:!0,labelInterpolationFnc:c.noop,type:void 0},axisY:{offset:40,position:"start",labelOffset:{x:0,y:0},showLabel:!0,showGrid:!0,labelInterpolationFnc:c.noop,type:void 0,scaleMinSpace:20,onlyInteger:!1},width:void 0,height:void 0,showLine:!0,showPoint:!0,showArea:!1,areaBase:0,lineSmooth:!0,showGridBackground:!1,low:void 0,high:void 0,chartPadding:{top:15,right:15,bottom:5,left:10},fullWidth:!1,reverseData:!1,classNames:{chart:"ct-chart-line",label:"ct-label",labelGroup:"ct-labels",series:"ct-series",line:"ct-line",point:"ct-point",area:"ct-area",grid:"ct-grid",gridGroup:"ct-grids",gridBackground:"ct-grid-background",vertical:"ct-vertical",horizontal:"ct-horizontal",start:"ct-start",end:"ct-end"}};c.Line=c.Base.extend({constructor:e,createChart:d})}(window,document,a),function(a,b,c){"use strict";function d(a){var b,d;a.distributeSeries?(b=c.normalizeData(this.data,a.reverseData,a.horizontalBars?"x":"y"),b.normalized.series=b.normalized.series.map(function(a){return[a]})):b=c.normalizeData(this.data,a.reverseData,a.horizontalBars?"x":"y"),this.svg=c.createSvg(this.container,a.width,a.height,a.classNames.chart+(a.horizontalBars?" "+a.classNames.horizontalBars:""));var e=this.svg.elem("g").addClass(a.classNames.gridGroup),g=this.svg.elem("g"),h=this.svg.elem("g").addClass(a.classNames.labelGroup);if(a.stackBars&&0!==b.normalized.series.length){var i=c.serialMap(b.normalized.series,function(){return Array.prototype.slice.call(arguments).map(function(a){return a}).reduce(function(a,b){return{x:a.x+(b&&b.x)||0,y:a.y+(b&&b.y)||0}},{x:0,y:0})});d=c.getHighLow([i],a,a.horizontalBars?"x":"y")}else d=c.getHighLow(b.normalized.series,a,a.horizontalBars?"x":"y");d.high=+a.high||(0===a.high?0:d.high),d.low=+a.low||(0===a.low?0:d.low);var j,k,l,m,n,o=c.createChartRect(this.svg,a,f.padding);k=a.distributeSeries&&a.stackBars?b.normalized.labels.slice(0,1):b.normalized.labels,a.horizontalBars?(j=m=void 0===a.axisX.type?new c.AutoScaleAxis(c.Axis.units.x,b.normalized.series,o,c.extend({},a.axisX,{highLow:d,referenceValue:0})):a.axisX.type.call(c,c.Axis.units.x,b.normalized.series,o,c.extend({},a.axisX,{highLow:d,referenceValue:0})),l=n=void 0===a.axisY.type?new c.StepAxis(c.Axis.units.y,b.normalized.series,o,{ticks:k}):a.axisY.type.call(c,c.Axis.units.y,b.normalized.series,o,a.axisY)):(l=m=void 0===a.axisX.type?new c.StepAxis(c.Axis.units.x,b.normalized.series,o,{ticks:k}):a.axisX.type.call(c,c.Axis.units.x,b.normalized.series,o,a.axisX),j=n=void 0===a.axisY.type?new c.AutoScaleAxis(c.Axis.units.y,b.normalized.series,o,c.extend({},a.axisY,{highLow:d,referenceValue:0})):a.axisY.type.call(c,c.Axis.units.y,b.normalized.series,o,c.extend({},a.axisY,{highLow:d,referenceValue:0})));var p=a.horizontalBars?o.x1+j.projectValue(0):o.y1-j.projectValue(0),q=[];l.createGridAndLabels(e,h,this.supportsForeignObject,a,this.eventEmitter),j.createGridAndLabels(e,h,this.supportsForeignObject,a,this.eventEmitter),a.showGridBackground&&c.createGridBackground(e,o,a.classNames.gridBackground,this.eventEmitter),b.raw.series.forEach(function(d,e){var f,h,i=e-(b.raw.series.length-1)/2;f=a.distributeSeries&&!a.stackBars?l.axisLength/b.normalized.series.length/2:a.distributeSeries&&a.stackBars?l.axisLength/2:l.axisLength/b.normalized.series[e].length/2,h=g.elem("g"),h.attr({"ct:series-name":d.name,"ct:meta":c.serialize(d.meta)}),h.addClass([a.classNames.series,d.className||a.classNames.series+"-"+c.alphaNumerate(e)].join(" ")),b.normalized.series[e].forEach(function(g,k){var r,s,t,u;if(u=a.distributeSeries&&!a.stackBars?e:a.distributeSeries&&a.stackBars?0:k,r=a.horizontalBars?{x:o.x1+j.projectValue(g&&g.x?g.x:0,k,b.normalized.series[e]),y:o.y1-l.projectValue(g&&g.y?g.y:0,u,b.normalized.series[e])}:{x:o.x1+l.projectValue(g&&g.x?g.x:0,u,b.normalized.series[e]),y:o.y1-j.projectValue(g&&g.y?g.y:0,k,b.normalized.series[e])},l instanceof c.StepAxis&&(l.options.stretch||(r[l.units.pos]+=f*(a.horizontalBars?-1:1)),r[l.units.pos]+=a.stackBars||a.distributeSeries?0:i*a.seriesBarDistance*(a.horizontalBars?-1:1)),t=q[k]||p,q[k]=t-(p-r[l.counterUnits.pos]),void 0!==g){var v={};v[l.units.pos+"1"]=r[l.units.pos],v[l.units.pos+"2"]=r[l.units.pos],!a.stackBars||"accumulate"!==a.stackMode&&a.stackMode?(v[l.counterUnits.pos+"1"]=p,v[l.counterUnits.pos+"2"]=r[l.counterUnits.pos]):(v[l.counterUnits.pos+"1"]=t,v[l.counterUnits.pos+"2"]=q[k]),v.x1=Math.min(Math.max(v.x1,o.x1),o.x2),v.x2=Math.min(Math.max(v.x2,o.x1),o.x2),v.y1=Math.min(Math.max(v.y1,o.y2),o.y1),v.y2=Math.min(Math.max(v.y2,o.y2),o.y1);var w=c.getMetaData(d,k);s=h.elem("line",v,a.classNames.bar).attr({"ct:value":[g.x,g.y].filter(c.isNumeric).join(","),"ct:meta":c.serialize(w)}),this.eventEmitter.emit("draw",c.extend({type:"bar",value:g,index:k,meta:w,series:d,seriesIndex:e,axisX:m,axisY:n,chartRect:o,group:h,element:s},v))}}.bind(this))}.bind(this)),this.eventEmitter.emit("created",{bounds:j.bounds,chartRect:o,axisX:m,axisY:n,svg:this.svg,options:a})}function e(a,b,d,e){c.Bar.super.constructor.call(this,a,b,f,c.extend({},f,d),e)}var f={axisX:{offset:30,position:"end",labelOffset:{x:0,y:0},showLabel:!0,showGrid:!0,labelInterpolationFnc:c.noop,scaleMinSpace:30,onlyInteger:!1},axisY:{offset:40,position:"start",labelOffset:{x:0,y:0},showLabel:!0,showGrid:!0,labelInterpolationFnc:c.noop,scaleMinSpace:20,onlyInteger:!1},width:void 0,height:void 0,high:void 0,low:void 0,referenceValue:0,chartPadding:{top:15,right:15,bottom:5,left:10},seriesBarDistance:15,stackBars:!1,stackMode:"accumulate",horizontalBars:!1,distributeSeries:!1,reverseData:!1,showGridBackground:!1,classNames:{chart:"ct-chart-bar",horizontalBars:"ct-horizontal-bars",label:"ct-label",labelGroup:"ct-labels",series:"ct-series",bar:"ct-bar",grid:"ct-grid",gridGroup:"ct-grids",gridBackground:"ct-grid-background",vertical:"ct-vertical",horizontal:"ct-horizontal",start:"ct-start",end:"ct-end"}};c.Bar=c.Base.extend({constructor:e,createChart:d})}(window,document,a),function(a,b,c){"use strict";function d(a,b,c){var d=b.x>a.x;return d&&"explode"===c||!d&&"implode"===c?"start":d&&"implode"===c||!d&&"explode"===c?"end":"middle"}function e(a){var b,e,f,h,i,j=c.normalizeData(this.data),k=[],l=a.startAngle;this.svg=c.createSvg(this.container,a.width,a.height,a.donut?a.classNames.chartDonut:a.classNames.chartPie),e=c.createChartRect(this.svg,a,g.padding),f=Math.min(e.width()/2,e.height()/2),i=a.total||j.normalized.series.reduce(function(a,b){return a+b},0);var m=c.quantity(a.donutWidth);"%"===m.unit&&(m.value*=f/100),f-=a.donut?m.value/2:0,h="outside"===a.labelPosition||a.donut?f:"center"===a.labelPosition?0:f/2,h+=a.labelOffset;var n={x:e.x1+e.width()/2,y:e.y2+e.height()/2},o=1===j.raw.series.filter(function(a){return a.hasOwnProperty("value")?0!==a.value:0!==a}).length;j.raw.series.forEach(function(a,b){k[b]=this.svg.elem("g",null,null)}.bind(this)),a.showLabel&&(b=this.svg.elem("g",null,null)),j.raw.series.forEach(function(e,g){if(0!==j.normalized.series[g]||!a.ignoreEmptyValues){k[g].attr({"ct:series-name":e.name}),k[g].addClass([a.classNames.series,e.className||a.classNames.series+"-"+c.alphaNumerate(g)].join(" "));var p=i>0?l+j.normalized.series[g]/i*360:0,q=Math.max(0,l-(0===g||o?0:.2));p-q>=359.99&&(p=q+359.99);var r=c.polarToCartesian(n.x,n.y,f,q),s=c.polarToCartesian(n.x,n.y,f,p),t=new c.Svg.Path(!a.donut).move(s.x,s.y).arc(f,f,0,p-l>180,0,r.x,r.y);a.donut||t.line(n.x,n.y);var u=k[g].elem("path",{d:t.stringify()},a.donut?a.classNames.sliceDonut:a.classNames.slicePie);if(u.attr({"ct:value":j.normalized.series[g],"ct:meta":c.serialize(e.meta)}),a.donut&&u.attr({style:"stroke-width: "+m.value+"px"}),this.eventEmitter.emit("draw",{type:"slice",value:j.normalized.series[g],totalDataSum:i,index:g,meta:e.meta,series:e,group:k[g],element:u,path:t.clone(),center:n,radius:f,startAngle:l,endAngle:p}),a.showLabel){var v;v=1===j.raw.series.length?{x:n.x,y:n.y}:c.polarToCartesian(n.x,n.y,h,l+(p-l)/2);var w;w=j.normalized.labels&&!c.isFalseyButZero(j.normalized.labels[g])?j.normalized.labels[g]:j.normalized.series[g];var x=a.labelInterpolationFnc(w,g);if(x||0===x){var y=b.elem("text",{dx:v.x,dy:v.y,"text-anchor":d(n,v,a.labelDirection)},a.classNames.label).text(""+x);this.eventEmitter.emit("draw",{type:"label",index:g,group:b,element:y,text:""+x,x:v.x,y:v.y})}}l=p}}.bind(this)),this.eventEmitter.emit("created",{chartRect:e,svg:this.svg,options:a})}function f(a,b,d,e){c.Pie.super.constructor.call(this,a,b,g,c.extend({},g,d),e)}var g={width:void 0,height:void 0,chartPadding:5,classNames:{chartPie:"ct-chart-pie",chartDonut:"ct-chart-donut",series:"ct-series",slicePie:"ct-slice-pie",sliceDonut:"ct-slice-donut",label:"ct-label"},startAngle:0,total:void 0,donut:!1,donutWidth:60,showLabel:!0,labelOffset:0,labelPosition:"inside",labelInterpolationFnc:c.noop,labelDirection:"neutral",reverseData:!1,ignoreEmptyValues:!1};c.Pie=c.Base.extend({constructor:f,createChart:e,determineAnchorPosition:d})}(window,document,a),a}),function(a,b){"function"==typeof define&&define.amd?define(["chartist"],b):"object"==typeof exports?module.exports=b(require("chartist")):a["Chartist.plugins.fillDonut"]=b(a.Chartist)}(this,function(a){return function(a,b){"use strict";var c={fillClass:"ct-fill-donut",label:{html:"div",class:"ct-fill-donut-label"},items:[{}]};b.plugins=b.plugins||{},b.plugins.fillDonut=function(d){return d=b.extend({},c,d),function(c){if(c instanceof b.Pie){var e=c.container;e.style.position="relative";var f,g=function(a){if("slice"===a.type){0===a.index&&(f=e.querySelector("svg"));var b=a.group._node.cloneNode(!0);d.fillClass.split(" ").forEach(function(a){b.setAttribute("class",b.getAttribute("class")+" "+a)}),[].forEach.call(b.querySelectorAll("path"),function(a){[].forEach.call(a.querySelectorAll("animate"),function(a){a.parentNode.removeChild(a)}),a.removeAttribute("stroke-dashoffset")}),f.insertBefore(b,f.childNodes[0])}};c.on("draw",function(a){g(a)}),c.on("created",function(f){var h=0;c.options.fillDonutOptions&&(d=b.extend({},d,c.options.fillDonutOptions),g(f)),[].forEach.call(d.items,function(c){var f=a.createElement(d.label.html);d.label.class.split(" ").forEach(function(a){f.classList?f.classList.add(a):f.className+=" "+a});var g=b.extend({},{class:"",id:"",content:"fillText",position:"center",offsetY:0,offsetX:0},c);g.id.length>0&&f.setAttribute("id",g.id),g.class.length>0&&f.setAttribute("class",g.class),[].forEach.call(e.querySelectorAll('*[data-fill-index$="fdid-'+h+'"]'),function(a){a.parentNode.removeChild(a)}),f.setAttribute("data-fill-index","fdid-"+h),h+=1,f.insertAdjacentHTML("beforeend",g.content),f.style.position="absolute",e.appendChild(f);var i=Math.ceil(e.offsetWidth/2),j=Math.ceil(e.clientHeight/2),k=Math.ceil(f.offsetWidth/2),l=Math.ceil(f.clientHeight/2),m={bottom:{bottom:0+g.offsetY+"px",left:i-k+g.offsetX+"px"},top:{top:0+g.offsetY+"px",left:i-k+g.offsetX+"px"},left:{top:j-l+g.offsetY+"px",left:0+g.offsetX+"px"},right:{top:j-l+g.offsetY+"px",right:0+g.offsetX+"px"},center:{top:j-l+g.offsetY+"px",left:i-k+g.offsetX+"px"}};b.extend(f.style,m[g.position])})})}}}}(document,a),a.plugins.fillDonut}),function(){"use strict";function a(){function a(a){this.$timeout=a}function c(a,c,d,e){r[a.type].required.forEach(function(c){if(!b(a.params[c]))throw new Error("Parmetro `"+c+"`  obrigatrio.")}),r[a.type].init.apply(this,arguments)}var d={restrict:"E",replace:!0,transclude:!0,controller:a,templateUrl:function(a,b){if(!b.bbType||!r[b.bbType])throw new Error('Voc precisa definir um tipo existente para o grafico. Ex: bb-type="goal"');return r[b.bbType].template},scope:{type:"@bbType",desc:"@bbDesc",animate:"@bbAnimate",params:"=bbParams"},link:c};return a.$inject=["$timeout"],d}function b(a){return!angular.isUndefined(a)}function c(a,b,c,d,e){var f="\\d(?=(\\d{"+(c||3)+"})+"+(b>0?"\\D":"$")+")",g=a.toFixed(Math.max(0,b));return(e?g.replace(".",e):g).replace(new RegExp(f,"g"),"$&"+(d||","))}function d(a){var b=e(a.value/a.total*100,2,!0);return b.length>3?'<span class="chart--label"><small>'+b+"%</small></span>":'<span class="chart--label">'+b+"%</span>"}function e(a,b,d){return d&&(b=a<0?1:b),b=angular.isUndefined(b)?2:b,c(a,b,3,".",",").replace(/,?0+$/,"")}function f(a){return c(a,2,3,".",",")}function g(a,b){a[0].id="chart"+u,b.id=u,u+=1}function h(a,b,c,e){var f=angular.element(b[0]),h=a.params||{};g(b,a),h.size&&f.addClass("chart--"+h.size),f.addClass("chart--donut"),i(new Chartist.Pie("#chart"+a.id,{series:[{value:h.value<0?0:h.value,className:h.className},{value:h.value>h.total?h.value:h.total-h.value}]},{width:s[h.size]+"px",height:s[h.size]+"px",donut:!0,donutWidth:t[h.size],total:h.total,showLabel:!1,plugins:[Chartist.plugins.fillDonut({items:[{content:d(h)}]})]}))}function i(a){a.on("draw",function(a){if("slice"===a.type&&0===a.index){var b=a.element._node.getTotalLength();a.element.attr({"stroke-dasharray":b+"px "+b+"px"});var c={"stroke-dashoffset":{id:"anim"+a.index,dur:1200,from:-b+"px",to:"0px",easing:Chartist.Svg.Easing.easeOutQuint,fill:"freeze"}};a.element.attr({"stroke-dashoffset":-b+"px"}),a.element.animate(c,!0)}})}function j(a,b,c,d){g(b,a);var e=a.params||{},f=angular.extend({},v,e.options);return f.donut=!1,f.width=(f.width||s[e.size||"default"])+"px",f.height=(f.height||s[e.size||"default"])+"px",f.classNames={chartPie:"ct-chart-pie",chartDonut:"ct-chart-donut",series:"ct-series",slicePie:"ct-slice-pie",sliceDonut:"ct-slice-donut",label:"ct-label"},new Chartist.Pie("#chart"+a.id,{series:e.series,labels:e.labels},f)}function k(a,b,c,d){var e=a.params||{},f=e.energyLeft/e.total*100,g=b[0];g.querySelector(".chart--stack__consumed").style.flexBasis=100-f+"%",g.querySelector(".chart--stack__energy-left").style.flexBasis=f+"%",e.style&&(e.style.height&&(g.style.height=e.style.height),e.style.width&&(g.style.width=e.style.width),e.style.energyLeftColor&&(g.querySelector(".chart--stack__energy-left").style.backgroundColor=e.style.energyLeftColor),e.style.energyConsumedColor&&(g.querySelector(".chart--stack__consumed").style.backgroundColor=e.style.energyConsumedColor),e.style.divisorLinesBgColor&&angular.element(g.querySelectorAll(".chart--stack__lines")).css("background-color",e.style.divisorLinesBgColor))}function l(a,b,c,d){var e=angular.element(b[0]),f=a.params||{};f.total=f.total||1,g(b,a),e.addClass("chart--gauge");var h=200,i=h/8;f.style&&f.style.height&&(h=f.style.height,i=f.style.gaugeWidth||h/8);var j=angular.extend({},v,f.options,{donut:!0,donutWidth:i,startAngle:270,total:2*(f.achieved<f.total?f.total:f.achieved),showLabel:!1});e[0].style.width=h+"px",e[0].style.height=h/2+2+"px",j.width=h+"px",j.height=h+"px";var k=f.achieved<0?0:f.achieved,l=m(k,f.expectation)||0,p=n(k,l,f.total);j.plugins=[Chartist.plugins.fillGauge({items:[{content:o(f.achieved,f.measureUnit,f.measureUnitPosition,h,a.params.isMoneyMeasure)}]})],new Chartist.Pie("#chart"+a.id,{series:[{value:k,className:f.className||"chart--primary"},{value:l,className:"chart--expectation"},{value:p,className:"chart--total"}],labels:f.labels},j)}function m(a,b){return a>b?0:b-a}function n(a,b,c){return a>c?0:c-a-b}function o(a,b,c,d,g){a=g?f(a):e(a);var h=d/10;return b=b||"","before"===c?'<span class="chart--label" style="font-size:'+h+'px">'+b+" "+a+"</span>":'<span class="chart--label" style="font-size:'+h+'px">'+a+" "+b+"</span>"}function p(a,b,c,d){a.achieved=e(a.params.achieved),a.params.isMoneyMeasure?(a.displayAchieved=f(a.params.achieved||0),a.displayExpectation=f(a.params.expectation||0),a.displayTotal=f(a.params.total||0)):(a.displayAchieved=e(a.params.achieved||0),a.displayExpectation=e(a.params.expectation||0),a.displayTotal=e(a.params.total||0));var g=b[0],h={achieved:angular.element(g.querySelector(".chart--goal__bar--achieved")),expectation:angular.element(g.querySelector(".chart--goal__bar--expectation")),projection:angular.element(g.querySelector(".chart--goal__bar--projection"))};a.params.expectation||h.expectation.css("display","none"),a.params.projection||h.projection.css("display","none"),a.params.style&&a.params.style.height&&angular.element(g.querySelector(".chart--goal")).css("height",a.params.style.height),a.animate&&(angular.element(g.querySelectorAll(".chart--goal__bar")).css("transition","width 1s ease-in-out"),angular.element(g.querySelectorAll(".chart--goal__bar__info")).css("transition","opacity 1s ease-in-out")),a.params.achievedAdditionalInfo&&(a.params.achievedAdditionalInfo=a.params.achievedAdditionalInfo.slice(0,10)),a.params.expectationAdditionalInfo&&(a.params.expectationAdditionalInfo=a.params.expectationAdditionalInfo.slice(0,10)),a.params.totalAdditionalInfo&&(a.params.totalAdditionalInfo=a.params.totalAdditionalInfo.slice(0,10)),d.setBarInfoToRight=function(a,b){(b<=30||isNaN(b))&&angular.element(a[0].querySelectorAll(".chart--goal__bar__info")).addClass("chart--goal__bar__info--right")},d.$timeout(function(){var b=a.params.achieved/a.params.total*100,c=a.params.expectation/a.params.total*100,e=a.params.projection/a.params.total*100;h.achieved.css("width",b>100?"100%":b+"%"),h.expectation.css("width",c>100?"100%":c+"%"),h.projection.css("width",e>100?"100%":e+"%"),d.setBarInfoToRight(h.achieved,b),d.setBarInfoToRight(h.expectation,c),d.setBarInfoToRight(h.projection,e)},0),"before"===a.params.measureUnitPosition&&(angular.element(g.querySelectorAll(".chart--goal__bar__info__label__measure-unit")).css("order","1"),angular.element(g.querySelectorAll(".chart--goal__bar__info__label__value")).css("order","2"),angular.element(g.querySelectorAll(".chart--goal__bar__info__label__additional-info")).css("order","3")),d.$timeout(function(){angular.element(g.querySelectorAll(".chart--goal__bar__info")).css("opacity","1")},1e3)}function q(a,b,c,d){var e=(angular.element(b[0]),a.params||{});g(b,a);var f=angular.extend({},w,e.options,{classNames:{chart:"ct-chart-line",label:"ct-label",labelGroup:"ct-labels",series:"ct-series",line:"ct-line",point:"ct-point",area:"ct-area",grid:"ct-grid",gridGroup:"ct-grids",gridBackground:"ct-grid-background",vertical:"ct-vertical",horizontal:"ct-horizontal",start:"ct-start",end:"ct-end"}});new Chartist.Line("#chart"+a.id,{labels:e.labels,series:e.series},f)}angular.module("bb.charts",["bb.charts.tmpl"]).directive("bbCharts",a);var r={donut:{init:h,template:"bb/charts.html",required:["value","total"]},gauge:{init:l,template:"bb/charts.html",required:["achieved","total"]},goal:{init:p,template:"bb/goal.html",required:["achieved","total"]},line:{init:q,template:"bb/charts.html",required:["series"]},pie:{init:j,template:"bb/charts.html",required:["series"]},stack:{init:k,template:"bb/stack.html",required:[]}},s={sm:48,md:56,lg:64,big:80,default:200},t={sm:4,md:5,lg:6,big:7,default:4},u=0,v={width:200,height:200,chartPadding:5,classNames:{chartPie:"ct-chart-pie",chartDonut:"ct-chart-donut",series:"ct-series",slicePie:"ct-slice-pie",sliceDonut:"ct-slice-donut",label:"ct-label"},startAngle:0,total:void 0,donut:!1,donutWidth:60,showLabel:!0,labelOffset:0,labelPosition:"inside",labelInterpolationFnc:Chartist.noop,labelDirection:"neutral",reverseData:!1,ignoreEmptyValues:!1},w={axisX:{offset:30,position:"end",labelOffset:{x:0,y:0},showLabel:!0,showGrid:!0,labelInterpolationFnc:Chartist.noop,type:void 0},axisY:{offset:40,position:"start",labelOffset:{x:0,y:0},showLabel:!0,showGrid:!0,labelInterpolationFnc:Chartist.noop,type:void 0,scaleMinSpace:20,onlyInteger:!1},width:400,height:200,showLine:!0,showPoint:!0,showArea:!1,areaBase:0,lineSmooth:!0,showGridBackground:!1,low:void 0,high:void 0,chartPadding:{top:15,right:15,bottom:5,left:10},fullWidth:!1,reverseData:!1,classNames:{chart:"ct-chart-line",label:"ct-label",labelGroup:"ct-labels",series:"ct-series",line:"ct-line",point:"ct-point",area:"ct-area",grid:"ct-grid",gridGroup:"ct-grids",gridBackground:"ct-grid-background",vertical:"ct-vertical",horizontal:"ct-horizontal",start:"ct-start",end:"ct-end"}}}(),function(){"use strict";angular.module("bb.charts.tmpl",[]).run(["$templateCache",function(a){a.put("bb/charts.html",'<div class="chart" tabindex="0" \n'+"aria-label=\"Grfico do tipo {{ type === 'line' ? 'linha' : (type === 'donut' ? 'porcentagem' : (type === 'gauge' ? 'meta' : (type === 'pie' ? 'pizza' : '' ))) }}: {{desc ? desc : 'No h descrio disponvel' }}.\">\n</div>"),a.put("bb/goal.html",'<div class="chart--goal" tabindex="0" \naria-label="Grfico do tipo meta: {{desc ? desc : \'No h descrio disponvel\' }}.">\n    <div class="chart--goal__bar chart--goal__bar--achieved">\n        <div \nclass="chart--goal__bar__info">\n            <span \nclass="chart--goal__bar__info__label chart--goal__bar__info__label--top chart--goal__bar__info__label--main">\n                <span class="chart--goal__bar__info__label__value">\n{{ displayAchieved }}</span>\n                <span \nclass="chart--goal__bar__info__label__measure-unit">{{ params.measureUnit }}\n</span>\n                <span \nclass="chart--goal__bar__info__label__additional-info">\n{{ params.achievedAdditionalInfo }}</span>\n            </span>\n\n            \n<div class="chart--goal__arrow chart--goal__arrow--top"></div>\n        </div>\n    </div>\n\n    <div class="chart--goal__bar chart--goal__bar--expectation">\n        <div class="chart--goal__bar__info chart--goal__bar__info--bottom">\n            <span \nclass="chart--goal__bar__info__label chart--goal__bar__info__label--bottom">\n                <span class="chart--goal__bar__info__label__value">\n{{ displayExpectation }}</span>\n                <span \nclass="chart--goal__bar__info__label__measure-unit">{{ params.measureUnit }}\n</span>\n                <span \nclass="chart--goal__bar__info__label__additional-info">\n{{ params.expectationAdditionalInfo }}</span>\n            </span>\n            \n<div class="chart--goal__arrow chart--goal__arrow--bottom"></div>\n        \n</div>\n    </div>\n\n    <div \nclass="chart--goal__bar chart--goal__bar--projection"></div>\n\n    <div \nclass="chart--goal__bar__info chart--goal__bar__info--bottom">\n        <span \nclass="chart--goal__bar__info__label chart--goal__bar__info__label--bottom chart--goal__bar__info__label--last">\n            <span class="chart--goal__bar__info__label__value">\n{{ displayTotal }}</span>\n            <span \nclass="chart--goal__bar__info__label__measure-unit">{{ params.measureUnit }}\n</span>\n            <span \nclass="chart--goal__bar__info__label__additional-info">\n{{ params.totalAdditionalInfo }}</span>\n        </span>\n        <div \nclass="chart--goal__arrow chart--goal__arrow--bottom chart--goal__arrow--last">\n\n        </div>\n    </div>\n</div>\n'),a.put("bb/stack.html",'<div class="chart--stack" tabindex="0" \naria-label="Grfico do tipo pilha: {{desc ? desc : \'No h descrio disponvel\' }}.">\n    <div class="chart--stack__consumed"></div>\n    <div \nclass="chart--stack__energy-left"></div>\n\n    <div \nclass="chart--stack__lines chart--stack__lines-a"></div>\n    <div \nclass="chart--stack__lines chart--stack__lines-b"></div>\n    <div \nclass="chart--stack__lines chart--stack__lines-c"></div>\n</div>\n')}])}(),function(a,b){
"function"==typeof define&&define.amd?define(["chartist"],b):"object"==typeof exports?module.exports=b(require("chartist")):a["Chartist.plugins.fillGauge"]=b(a.Chartist)}(this,function(a){return function(a,b){var c={fillClass:"ct-fill-donut",label:{html:"div",class:"ct-fill-donut-label"},items:[{}]};b.plugins=b.plugins||{},b.plugins.fillGauge=function(d){return d=b.extend({},c,d),function(c){if(c instanceof b.Pie){var e=c.container;e.style.position="relative";var f,g=function(a){if("slice"===a.type){0===a.index&&(f=e.querySelector("svg"));var b=a.group._node.cloneNode(!0);d.fillClass.split(" ").forEach(function(a){b.setAttribute("class",b.getAttribute("class")+" "+a)}),[].forEach.call(b.querySelectorAll("path"),function(a){[].forEach.call(a.querySelectorAll("animate"),function(a){a.parentNode.removeChild(a)}),a.removeAttribute("stroke-dashoffset")}),f.insertBefore(b,f.childNodes[0])}};c.on("draw",function(a){g(a)}),c.on("created",function(f){var h=0;c.options.fillGaugeOptions&&(d=b.extend({},d,c.options.fillGaugeOptions),g(f)),[].forEach.call(d.items,function(c){var f=a.createElement(d.label.html);d.label.class.split(" ").forEach(function(a){f.classList?f.classList.add(a):f.className+=" "+a});var g=b.extend({},{class:"",id:"",content:"fillText",position:"center",offsetY:-3,offsetX:0},c);g.id.length>0&&f.setAttribute("id",g.id),g.class.length>0&&f.setAttribute("class",g.class),[].forEach.call(e.querySelectorAll('*[data-fill-index$="fdid-'+h+'"]'),function(a){a.parentNode.removeChild(a)}),f.setAttribute("data-fill-index","fdid-"+h),h+=1,f.insertAdjacentHTML("beforeend",g.content),f.style.position="absolute",e.appendChild(f);var i={center:{top:e.clientHeight-f.clientHeight+g.offsetY+"px",left:"5px"}};f.style.borderBottom="solid 1px #e0e0e0",f.style.width=e.offsetWidth-10+"px",f.style.textAlign="center",b.extend(f.style,i[g.position])})})}}}}(document,a),a.plugins.fillGauge}),function(){"use strict";angular.module("bb.chip.tmpl",[]).run(["$templateCache",function(a){a.put("bb/chip.html",'<div class="chip" tabindex="0" \naria-label="{{ type === \'updown\' ? desc : title }}: {{mediaText}} {{type === \'updown\' ? title : desc}}">\n    <figure ng-if="icon">\n        <i class="{{icon}}"></i>\n    </figure>\n    \n<figure ng-class="mediaClass" ng-if="img || mediaText">\n        <img \nng-src="{{img}}" alt="" ng-if="img" onerror="this.style.display = \'none\';">\n        <span ng-bind-html="mediaText" ng-if="mediaText"></span>\n    </figure>\n\n    <div ng-transclude ng-if="!icon && !img && !mediaText && hasTranscluded">\n</div>\n\n    <span>\n        <small class="chip__title" ng-if="title" \nbb-bind-html-compile="title"></small>\n        <span class="chip__desc" \nng-if="desc" bb-bind-html-compile="desc"></span>\n    </span>\n\n</div>\n')}])}(),function(){"use strict";function a(){function a(a,b,c,d,e){var f=b.parent().length?b.parent()[0].localName:null;if(e(function(b){var c=1===b.length&&"#text"===b[0].nodeName&&!!b[0].data.trim();b.length&&(b.length>1||c)&&(a.hasTranscluded=!0)}),"a"===f&&b.parent().css("text-decoration","none"),"td"===f&&b.css("padding-bottom",".25rem").css("padding-top",".25rem"),a.size&&b.addClass("chip--"+a.size),a.type){var g=a.type.split(" ").map(function(a){return"chip--"+a}).join(" ");b.addClass(g)}if(a.img?a.mediaClass=[]:a.mediaClass=["media"],a.media){var h=a.media.split(" ").map(function(a){return"media--"+a}).join(" ");a.mediaClass.push(h)}a.mediaText&&a.mediaClass.push("media--text"),a.type&&a.type.indexOf("dark")>=0&&a.mediaClass.push("media--dark")}return{link:a,restrict:"E",replace:!0,scope:{size:"@?bbSize",type:"@?bbType",icon:"@?bbIcon",img:"@?bbImg",title:"@?bbTitle",desc:"@?bbDesc",media:"@?bbMedia",mediaText:"@?bbMediaText"},templateUrl:"bb/chip.html",transclude:!0}}function b(a){function b(b,c,d){b.$watch(function(){return b.$eval(d.bbBindHtmlCompile)},function(e){c.html(e&&e.toString());var f=b;d.bbBindHtmlScope&&(f=b.$eval(d.bbBindHtmlScope)),a(c.contents())(f)})}return{link:b,restrict:"A"}}angular.module("bb.chip",["bb.chip.tmpl","ngSanitize"]).directive("bbChip",a).directive("bbBindHtmlCompile",b),b.$inject=["$compile"]}(),function(){"use strict";function a(a,b,c,d){function e(a,b){var c=[],e=a.split(""),f=a.indexOf("'");if(f>-1){var g=!1;a=a.split("");for(var h=f;h<a.length;h+=1)g?("'"===a[h]&&(h+1<a.length&&"'"===a[h+1]?(a[h+1]="$",e[h+1]=""):(e[h]="",g=!1)),a[h]="$"):"'"===a[h]&&(a[h]="$",e[h]="",g=!0);a=a.join("")}return angular.forEach(o,function(d){var f=a.indexOf(d.key);if(f>-1){a=a.split(""),e[f]="("+d.regex+")",a[f]="$";for(var g=f+1,h=f+d.key.length;g<h;g+=1)e[g]="",a[g]="$";a=a.join(""),c.push({index:f,key:d.key,apply:d[b],matcher:d.regex})}}),{regex:new RegExp("^"+e.join("")+"$"),map:d(c,"index")}}function f(a,b,c){return!(c<1)&&(1===b&&c>28?29===c&&(a%4==0&&a%100!=0||a%400==0):3!==b&&5!==b&&8!==b&&10!==b||c<31)}function g(a){return parseInt(a,10)}function h(a,b){return a&&b?l(a,b):a}function i(a,b){return a&&b?l(a,b,!0):a}function j(a,b){var c=Date.parse("Jan 01, 1970 00:00:00 "+a)/6e4;return isNaN(c)?b:c}function k(a,b){return a=new Date(a.getTime()),a.setMinutes(a.getMinutes()+b),a}function l(a,b,c){return c=c?-1:1,k(a,c*(j(b,a.getTimezoneOffset())-a.getTimezoneOffset()))}function m(a,b){if("pt-br"!=b)return a;switch(a){case"January":return"Janeiro";case"February":return"Fevereiro";case"March":return"Maro";case"April":return"Abril";case"May":return"Maio";case"June":return"Junho";case"July":return"Julho";case"August":return"Agosto";case"September":return"Setembro";case"October":return"Outubro";case"November":return"Novembro";case"Dezember":return"Dezembro";default:return a}}var n,o,p=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;this.init=function(){n=b.id,this.parsers={},this.formatters={},o=[{key:"yyyy",regex:"\\d{4}",apply:function(a){this.year=+a},formatter:function(a){var b=new Date;return b.setFullYear(Math.abs(a.getFullYear())),c(b,"yyyy")}},{key:"yy",regex:"\\d{2}",apply:function(a){this.year=+a+2e3},formatter:function(a){var b=new Date;return b.setFullYear(Math.abs(a.getFullYear())),c(b,"yy")}},{key:"y",regex:"\\d{1,4}",apply:function(a){this.year=+a},formatter:function(a){var b=new Date;return b.setFullYear(Math.abs(a.getFullYear())),c(b,"y")}},{key:"M!",regex:"0?[1-9]|1[0-2]",apply:function(a){this.month=a-1},formatter:function(a){return/^[0-9]$/.test(a.getMonth())?c(a,"MM"):c(a,"M")}},{key:"MMMM",regex:b.DATETIME_FORMATS.MONTH.join("|"),apply:function(a){this.month=b.DATETIME_FORMATS.MONTH.indexOf(a)},formatter:function(a){return c(a,"MMMM")}},{key:"MMM",regex:b.DATETIME_FORMATS.SHORTMONTH.join("|"),apply:function(a){this.month=b.DATETIME_FORMATS.SHORTMONTH.indexOf(a)},formatter:function(a){return c(a,"MMM")}},{key:"MM",regex:"0[1-9]|1[0-2]",apply:function(a){this.month=a-1},formatter:function(a){return c(a,"MM")}},{key:"M",regex:"[1-9]|1[0-2]",apply:function(a){this.month=a-1},formatter:function(a){return c(a,"M")}},{key:"d!",regex:"[0-2]?[0-9]{1}|3[0-1]{1}",apply:function(a){this.date=+a},formatter:function(a){return/^[1-9]$/.test(a.getDate())?c(a,"dd"):c(a,"d")}},{key:"dd",regex:"[0-2][0-9]{1}|3[0-1]{1}",apply:function(a){this.date=+a},formatter:function(a){return c(a,"dd")}},{key:"d",regex:"[1-2]?[0-9]{1}|3[0-1]{1}",apply:function(a){this.date=+a},formatter:function(a){return c(a,"d")}},{key:"EEEE",regex:b.DATETIME_FORMATS.DAY.join("|"),formatter:function(a){return c(a,"EEEE")}},{key:"EEE",regex:b.DATETIME_FORMATS.SHORTDAY.join("|"),formatter:function(a){return c(a,"EEE")}},{key:"HH",regex:"(?:0|1)[0-9]|2[0-3]",apply:function(a){this.hours=+a},formatter:function(a){return c(a,"HH")}},{key:"hh",regex:"0[0-9]|1[0-2]",apply:function(a){this.hours=+a},formatter:function(a){return c(a,"hh")}},{key:"H",regex:"1?[0-9]|2[0-3]",apply:function(a){this.hours=+a},formatter:function(a){return c(a,"H")}},{key:"h",regex:"[0-9]|1[0-2]",apply:function(a){this.hours=+a},formatter:function(a){return c(a,"h")}},{key:"mm",regex:"[0-5][0-9]",apply:function(a){this.minutes=+a},formatter:function(a){return c(a,"mm")}},{key:"m",regex:"[0-9]|[1-5][0-9]",apply:function(a){this.minutes=+a},formatter:function(a){return c(a,"m")}},{key:"sss",regex:"[0-9][0-9][0-9]",apply:function(a){this.milliseconds=+a},formatter:function(a){return c(a,"sss")}},{key:"ss",regex:"[0-5][0-9]",apply:function(a){this.seconds=+a},formatter:function(a){return c(a,"ss")}},{key:"s",regex:"[0-9]|[1-5][0-9]",apply:function(a){this.seconds=+a},formatter:function(a){return c(a,"s")}},{key:"a",regex:b.DATETIME_FORMATS.AMPMS.join("|"),apply:function(a){12===this.hours&&(this.hours=0),"PM"===a&&(this.hours+=12)},formatter:function(a){return c(a,"a")}},{key:"Z",regex:"[+-]\\d{4}",apply:function(a){var b=a.match(/([+-])(\d{2})(\d{2})/),c=b[1],d=b[2],e=b[3];this.hours+=g(c+d),this.minutes+=g(c+e)},formatter:function(a){return c(a,"Z")}},{key:"ww",regex:"[0-4][0-9]|5[0-3]",formatter:function(a){return c(a,"ww")}},{key:"w",regex:"[0-9]|[1-4][0-9]|5[0-3]",formatter:function(a){return c(a,"w")}},{key:"GGGG",regex:b.DATETIME_FORMATS.ERANAMES.join("|").replace(/\s/g,"\\s"),formatter:function(a){return c(a,"GGGG")}},{key:"GGG",regex:b.DATETIME_FORMATS.ERAS.join("|"),formatter:function(a){return c(a,"GGG")}},{key:"GG",regex:b.DATETIME_FORMATS.ERAS.join("|"),formatter:function(a){return c(a,"GG")}},{key:"G",regex:b.DATETIME_FORMATS.ERAS.join("|"),formatter:function(a){return c(a,"G")}}]},this.init(),this.filter=function(a,c,d){if(!angular.isDate(a)||isNaN(a)||!c)return"";c=b.DATETIME_FORMATS[c]||c,b.id!==n&&this.init(),this.formatters[c]||(this.formatters[c]=e(c,"formatter"));var f=this.formatters[c],g=f.map,h=c;return g.reduce(function(b,c,e){var f=h.match(new RegExp("(.*)"+c.key));f&&angular.isString(f[1])&&(b+=f[1],h=h.replace(f[1]+c.key,""));var i=e===g.length-1?h:"";return c.apply?m(b+c.apply.call(null,a)+i,d):b+i},"")},this.parse=function(c,d,g){if(!angular.isString(c)||!d)return c;d=b.DATETIME_FORMATS[d]||d,d=d.replace(p,"\\$&"),b.id!==n&&this.init(),this.parsers[d]||(this.parsers[d]=e(d,"apply"));var h=this.parsers[d],i=h.regex,j=h.map,k=c.match(i),l=!1;if(k&&k.length){var m,o;angular.isDate(g)&&!isNaN(g.getTime())?m={year:g.getFullYear(),month:g.getMonth(),date:g.getDate(),hours:g.getHours(),minutes:g.getMinutes(),seconds:g.getSeconds(),milliseconds:g.getMilliseconds()}:(g&&a.warn("dateparser:","baseDate is not a valid date"),m={year:1900,month:0,date:1,hours:0,minutes:0,seconds:0,milliseconds:0});for(var q=1,r=k.length;q<r;q+=1){var s=j[q-1];"Z"===s.matcher&&(l=!0),s.apply&&s.apply.call(m,k[q])}var t=l?Date.prototype.setUTCFullYear:Date.prototype.setFullYear,u=l?Date.prototype.setUTCHours:Date.prototype.setHours;return f(m.year,m.month,m.date)&&(!angular.isDate(g)||isNaN(g.getTime())||l?(o=new Date(0),t.call(o,m.year,m.month,m.date),u.call(o,m.hours||0,m.minutes||0,m.seconds||0,m.milliseconds||0)):(o=new Date(g),t.call(o,m.year,m.month,m.date),u.call(o,m.hours,m.minutes,m.seconds,m.milliseconds))),o}},this.toTimezone=h,this.fromTimezone=i,this.timezoneToOffset=j,this.addDateMinutes=k,this.convertTimezoneToLocal=l}angular.module("bb.dateparser",[]).service("bbDateParser",a),a.$inject=["$log","$locale","dateFilter","orderByFilter"]}(),function(){"use strict";angular.module("bb.datepicker.tmpl",[]).run(["$templateCache",function(a){a.put("bb/datepicker.day.html",'<table class="datepicker-daypicker" role="grid" \naria-labelledby="{{::uniqueId}}-title" \naria-activedescendant="{{activeDateId}}">\n    <thead>\n        <tr>\n            \n<th>\n                <button type="button" class="btn btn--sm" tabindex="-1" \nng-click="move(-1)">\n                    <i class="mi mi--keyboard-arrow-left">\n</i>\n                </button>\n            </th>\n            <th \nclass="ta-center" colspan="{{::5 + showWeeks}}">\n                <button \nid="{{::uniqueId}}-title" type="button" class="btn btn--block btn--sm" \ntabindex="-1" role="heading" aria-live="assertive" aria-atomic="true" \nng-click="toggleMode()" ng-disabled="datepickerMode === maxMode">\n                    <strong>{{title}}</strong>\n                </button>\n            </th>\n            <th class="ta-right">\n                <button \ntype="button" class="btn btn--sm" tabindex="-1" ng-click="move(1)">\n                    <i class="mi mi--keyboard-arrow-right"></i>\n                </button>\n            </th>\n        </tr>\n        <tr>\n            <th class="ta-center" ng-if="showWeeks"></th>\n            <th \nclass="ta-center" ng-repeat="label in ::labels track by $index">\n                <small aria-label="{{::label.full}}">{{::label.abbr}}</small>\n            </th>\n        </tr>\n    </thead>\n    <tbody>\n        <tr \nclass="datepicker-weeks" ng-repeat="row in rows track by $index">\n            \n<td class="ta-center" ng-if="showWeeks">\n                <em>\n{{weekNumbers[$index]}}</em>\n            </td>\n            <td \nclass="datepicker-day ta-center" role="gridcell" id="{{::dt.uid}}" \nng-repeat="dt in row" ng-class="::dt.customClass">\n                <button \ntype="button" class="btn btn--sm" tabindex="-1" \nbb-is-class="\'selected-day\' for selectedDt, \'is-active\' for activeDt on dt" \nng-click="select(dt.date)" aria-disabled="{{dt.disabled}}" \nng-disabled="::dt.disabled">\n                    <span \nng-class="::{\'tx-muted\': dt.secondary, \'current-day\': dt.current}">\n{{::dt.label}}</span>\n                </button>\n            </td>\n        </tr>\n\n    </tbody>\n</table>\n'),a.put("bb/datepicker.html",'<div class="datepicker" role="application" ng-switch="datepickerMode" \nng-keydown="keydown($event)">\n    <bb-daypicker ng-switch-when="day" \ntabindex="0"></bb-daypicker>\n    <bb-monthpicker ng-switch-when="month" \ntabindex="0"></bb-monthpicker>\n    <bb-yearpicker ng-switch-when="year" \ntabindex="0"></bb-yearpicker>\n</div>\n'),a.put("bb/datepicker.month.html",'<table class="monthpicker" role="grid" aria-labelledby="{{::uniqueId}}-title" \naria-activedescendant="{{activeDateId}}">\n    <thead>\n        <tr>\n            \n<th>\n                <button type="button" class="btn btn--sm" tabindex="-1" \nng-click="move(-1)">\n                    <i class="mi mi--keyboard-arrow-left">\n</i>\n                </button>\n            </th>\n            <th>\n                <button id="{{::uniqueId}}-title" type="button" \nclass="btn btn--sm" role="heading" tabindex="-1" aria-live="assertive" \naria-atomic="true" ng-click="toggleMode()" \nng-disabled="datepickerMode === maxMode">\n                    <strong>{{title}}\n</strong>\n                </button>\n            </th>\n            <th>\n                <button type="button" class="btn btn--sm" tabindex="-1" \nng-click="move(1)">\n                    <i class="mi mi--keyboard-arrow-right">\n</i>\n                </button>\n            </th>\n        </tr>\n    </thead>\n    <tbody>\n        <tr class="months" \nng-repeat="row in rows track by $index">\n            <td id="{{::dt.uid}}" \nclass="month ta-center" role="gridcell" ng-repeat="dt in row" \nng-class="::dt.customClass">\n                <button type="button" \nclass="btn btn-default" tabindex="-1" \nbb-is-class="\'btn--info\' for selectedDt, \'is-active\' for activeDt on dt" \nng-click="select(dt.date)" ng-disabled="::dt.disabled">\n                    \n<span ng-class="::{\'text-info\': dt.current}">{{::dt.label}}</span>\n                </button>\n            </td>\n        </tr>\n    </tbody>\n\n</table>\n'),a.put("bb/datepicker.popup.html",'<div>\n    <ul class="datepicker-popup dropdown-menu" dropdown-nested \nng-if="isOpen" ng-style="{top: position.top+\'px\', left: position.left+\'px\'}" \nng-keydown="keydown($event)" ng-click="$event.stopPropagation()">\n        <li \nng-transclude></li>\n        <li ng-if="showButtonBar" class="button-bar">\n            <span class="btn-group pull-left">\n                <button \ntype="button" class="btn btn--default btn--sm btn--info datepicker-current" \nng-click="select(\'today\', $event)" ng-disabled="isDisabled(\'today\')">\n{{ getText(\'current\') }}</button>\n                <button type="button" \nclass="btn btn--default btn--sm btn-danger clear" \nng-click="select(null, $event)">{{ getText(\'clear\') }}</button>\n            \n</span>\n            <button type="button" \nclass="btn btn--default btn--sm btn-success pull-right close" \nng-click="close($event)">{{ getText(\'close\') }}</button>\n        </li>\n    \n</ul>\n</div>\n'),a.put("bb/datepicker.year.html",'<table class="yearpicker" role="grid" aria-labelledby="{{::uniqueId}}-title" \naria-activedescendant="{{activeDateId}}">\n    <thead>\n        <tr>\n            \n<th>\n                <button type="button" class="btn btn--sm pull-left left" \nng-click="move(-1)" tabindex="-1">\n                    <i \nclass="mi mi--keyboard-arrow-left"></i>\n                </button>\n            \n</th>\n            <th colspan="{{::columns - 2}}">\n                <button \nid="{{::uniqueId}}-title" role="heading" aria-live="assertive" \naria-atomic="true" type="button" class="btn btn--default btn--sm title" \nng-click="toggleMode()" ng-disabled="datepickerMode === maxMode" tabindex="-1">\n                    <strong>{{title}}</strong>\n                </button>\n            </th>\n            <th>\n                <button type="button" \nclass="btn btn--sm pull-right right" ng-click="move(1)" tabindex="-1">\n                    <i class="mi mi--keyboard-arrow-right"></i>\n                </button>\n            </th>\n        </tr>\n    </thead>\n    \n<tbody>\n        <tr class="years" ng-repeat="row in rows track by $index">\n            <td ng-repeat="dt in row" class="year ta-center" role="gridcell" \nid="{{::dt.uid}}" ng-class="::dt.customClass">\n                <button \ntype="button" class="btn btn-default" \nbb-is-class="\'btn--info\' for selectedDt, \'is-active\' for activeDt on dt" \nng-click="select(dt.date)" ng-disabled="::dt.disabled" tabindex="-1">\n                    <span ng-class="::{\'text-info\': dt.current}">\n{{::dt.label}}</span>\n                </button>\n            </td>\n        </tr>\n\n    </tbody>\n</table>\n')}])}(),function(){"use strict";function a(a,b,c,d,e,f,g,h,i,j,k){var l=this,m={$setViewValue:angular.noop},n={},o=[],p={};l.modes=["day","month","year"],b.datepickerOptions?angular.forEach(["formatDay","formatDayHeader","formatDayTitle","formatMonth","formatMonthTitle","formatYear","initDate","maxDate","maxMode","minDate","minMode","showWeeks","shortcutPropagation","startingDay","yearColumns","yearRows","locale"],function(b){switch(b){case"formatDay":case"formatDayHeader":case"formatDayTitle":case"formatMonth":case"formatMonthTitle":case"formatYear":case"locale":l[b]=angular.isDefined(a.datepickerOptions[b])?d(a.datepickerOptions[b])(a.$parent):h[b];break;case"showWeeks":case"shortcutPropagation":case"yearColumns":case"yearRows":l[b]=angular.isDefined(a.datepickerOptions[b])?a.datepickerOptions[b]:h[b];break;case"startingDay":angular.isDefined(a.datepickerOptions.startingDay)?l.startingDay=a.datepickerOptions.startingDay:angular.isNumber(h.startingDay)?l.startingDay=h.startingDay:l.startingDay=(e.DATETIME_FORMATS.FIRSTDAYOFWEEK+8)%7;break;case"maxDate":case"minDate":a.datepickerOptions[b]?a.$watch(function(){return a.datepickerOptions[b]},function(a){a?angular.isDate(a)?l[b]=k.fromTimezone(new Date(a),n.timezone):l[b]=new Date(g(a,"medium")):l[b]=null,l.refreshView()}):l[b]=h[b]?k.fromTimezone(new Date(h[b]),n.timezone):null;break;case"maxMode":case"minMode":a.datepickerOptions[b]?a.$watch(function(){return a.datepickerOptions[b]},function(c){l[b]=a[b]=angular.isDefined(c)?c:p[b],("minMode"===b&&l.modes.indexOf(a.datepickerMode)<l.modes.indexOf(l[b])||"maxMode"===b&&l.modes.indexOf(a.datepickerMode)>l.modes.indexOf(l[b]))&&(a.datepickerMode=l[b])}):l[b]=a[b]=h[b]||null;break;case"initDate":a.datepickerOptions.initDate?(l.activeDate=k.fromTimezone(a.datepickerOptions.initDate,n.timezone)||new Date,a.$watch(function(){return a.datepickerOptions.initDate},function(a){a&&(m.$isEmpty(m.$modelValue)||m.$invalid)&&(l.activeDate=k.fromTimezone(a,n.timezone),l.refreshView())})):l.activeDate=new Date}}):(angular.forEach(["formatDay","formatMonth","formatYear","formatDayHeader","formatDayTitle","formatMonthTitle","locale"],function(c){l[c]=angular.isDefined(b[c])?d(b[c])(a.$parent):h[c]}),angular.forEach(["showWeeks","yearRows","yearColumns","shortcutPropagation"],function(c){l[c]=angular.isDefined(b[c])?a.$parent.$eval(b[c]):h[c]}),angular.isDefined(b.startingDay)?l.startingDay=a.$parent.$eval(b.startingDay):angular.isNumber(h.startingDay)?l.startingDay=h.startingDay:l.startingDay=(e.DATETIME_FORMATS.FIRSTDAYOFWEEK+8)%7,angular.forEach(["minDate","maxDate"],function(c){b[c]?o.push(a.$parent.$watch(b[c],function(a){a?angular.isDate(a)?l[c]=k.fromTimezone(new Date(a),n.timezone):l[c]=new Date(g(a,"medium")):l[c]=null,l.refreshView()})):l[c]=h[c]?k.fromTimezone(new Date(h[c]),n.timezone):null}),angular.forEach(["minMode","maxMode"],function(c){b[c]?o.push(a.$parent.$watch(b[c],function(d){l[c]=a[c]=angular.isDefined(d)?d:b[c],("minMode"===c&&l.modes.indexOf(a.datepickerMode)<l.modes.indexOf(l[c])||"maxMode"===c&&l.modes.indexOf(a.datepickerMode)>l.modes.indexOf(l[c]))&&(a.datepickerMode=l[c])})):l[c]=a[c]=h[c]||null}),angular.isDefined(b.initDate)?(this.activeDate=k.fromTimezone(a.$parent.$eval(b.initDate),n.timezone)||new Date,o.push(a.$parent.$watch(b.initDate,function(a){a&&(m.$isEmpty(m.$modelValue)||m.$invalid)&&(l.activeDate=k.fromTimezone(a,n.timezone),l.refreshView())}))):this.activeDate=new Date),a.datepickerMode=a.datepickerMode||h.datepickerMode,a.uniqueId="datepicker-"+a.$id+"-"+Math.floor(1e4*Math.random()),a.disabled=angular.isDefined(b.disabled)||!1,angular.isDefined(b.ngDisabled)&&o.push(a.$parent.$watch(b.ngDisabled,function(b){a.disabled=b,l.refreshView()})),a.isActive=function(b){return 0===l.compare(b.date,l.activeDate)&&(a.activeDateId=b.uid,!0)},this.init=function(a){m=a,n=a.$options||h.ngModelOptions,this.activeDate=m.$modelValue?new Date(m.$modelValue.getTime()):new Date,m.$render=function(){l.render()}},this.render=function(){if(m.$viewValue){var a=new Date(m.$viewValue),b=!isNaN(a);console.log(m.$viewValue),b?this.activeDate=k.fromTimezone(a,n.timezone):i||f.error('Datepicker directive: "ng-model" value must be a Date object')}this.refreshView()},this.refreshView=function(){if(this.element){a.selectedDt=null,this._refreshView(),a.activeDt&&(a.activeDateId=a.activeDt.uid);var b=m.$viewValue?new Date(m.$viewValue):null;b=k.fromTimezone(b,n.timezone),m.$setValidity("dateDisabled",!b||this.element&&!this.isDisabled(b))}},this.createDateObject=function(b,c){var d=m.$viewValue?new Date(m.$viewValue):null;d=k.fromTimezone(d,n.timezone);var e={date:b,label:k.filter(b,c,l.locale),selected:d&&0===this.compare(b,d),disabled:this.isDisabled(b),current:0===this.compare(b,new Date),customClass:this.customClass(b)||null};return d&&0===this.compare(b,d)&&(a.selectedDt=e),l.activeDate&&0===this.compare(e.date,l.activeDate)&&(a.activeDt=e),e},this.isDisabled=function(c){return a.disabled||this.minDate&&this.compare(c,this.minDate)<0||this.maxDate&&this.compare(c,this.maxDate)>0||b.dateDisabled&&a.dateDisabled({date:c,mode:a.datepickerMode})},this.customClass=function(b){return a.customClass({date:b,mode:a.datepickerMode})},this.split=function(a,b){for(var c=[];a.length>0;)c.push(a.splice(0,b));return c},a.select=function(b){if(a.datepickerMode===l.minMode){var c=m.$viewValue?k.fromTimezone(new Date(m.$viewValue),n.timezone):new Date(0,0,0,0,0,0,0);c.setFullYear(b.getFullYear(),b.getMonth(),b.getDate()),c=k.toTimezone(c,n.timezone),m.$setViewValue(c),m.$render()}else l.activeDate=b,a.datepickerMode=l.modes[l.modes.indexOf(a.datepickerMode)-1],a.$emit("bb:datepicker.mode")},a.move=function(a){var b=l.activeDate.getFullYear()+a*(l.step.years||0),c=l.activeDate.getMonth()+a*(l.step.months||0);l.activeDate.setFullYear(b,c,1),l.refreshView()},a.toggleMode=function(b){b=b||1,a.datepickerMode===l.maxMode&&1===b||a.datepickerMode===l.minMode&&-1===b||(a.datepickerMode=l.modes[l.modes.indexOf(a.datepickerMode)+b],a.$emit("bb:datepicker.mode"))},a.keys={13:"enter",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down"};var q=function(){l.element[0].focus()};a.$on("bb:datepicker.focus",q),a.keydown=function(b){var c=a.keys[b.which];if(c&&!b.shiftKey&&!b.altKey&&!a.disabled)if(b.preventDefault(),l.shortcutPropagation||b.stopPropagation(),"enter"===c||"space"===c){if(l.isDisabled(l.activeDate))return;a.select(l.activeDate),setTimeout(function(){a.$broadcast("bb:datepicker.focus")},10)}else!b.ctrlKey||"up"!==c&&"down"!==c?(l.handleKeyDown(c,b),l.refreshView()):(a.toggleMode("up"===c?1:-1),setTimeout(function(){a.$broadcast("bb:datepicker.focus")},10))},a.$on("$destroy",function(){for(;o.length;)o.shift()()})}function b(a,b,c){function d(a,b){return 1!==b||a%4!=0||a%100==0&&a%400!=0?g[b]:29}function e(a){var b=new Date(a);b.setDate(b.getDate()+4-(b.getDay()||7));var c=b.getTime();return b.setMonth(0),b.setDate(1),Math.floor(Math.round((c-b)/864e5)/7)+1}function f(a,b){if("pt-br"!=b)return a;switch(a){case"January":return"Janeiro";case"February":return"Fevereiro";case"March":return"Maro";case"April":return"Abril";case"May":return"Maio";case"June":return"Junho";case"July":return"Julho";case"August":return"Agosto";case"September":return"Setembro";case"October":return"Outubro";case"November":return"Novembro";case"Dezember":return"Dezembro";case"Sun":return"Dom";case"Mon":return"Seg";case"Tue":return"Ter";case"Wed":return"Qua";case"Thu":return"Qui";case"Fri":return"Sex";case"Sat":return"Sab";default:return a}}var g=[31,28,31,30,31,30,31,31,30,31,30,31];this.step={months:1},this.element=b,this.init=function(b){angular.extend(b,this),a.showWeeks=b.showWeeks,a.locale=b.locale,b.refreshView()},this.getDates=function(a,b){for(var c,d=new Array(b),e=new Date(a),f=0;f<b;)c=new Date(e),d[f]=c,f+=1,e.setDate(e.getDate()+1);return d},this._refreshView=function(){var b=this.activeDate.getFullYear(),d=this.activeDate.getMonth(),g=new Date(this.activeDate);g.setFullYear(b,d,1);var h=this.startingDay-g.getDay(),i=h>0?7-h:-h,j=new Date(g);i>0&&j.setDate(1-i);for(var k=this.getDates(j,42),l=0;l<42;l+=1)k[l]=angular.extend(this.createDateObject(k[l],this.formatDay),{secondary:k[l].getMonth()!==d,uid:a.uniqueId+"-"+l});a.labels=new Array(7);for(var m=0;m<7;m+=1)a.labels[m]={abbr:f(c(k[m].date,this.formatDayHeader),a.locale),full:f(c(k[m].date,"EEEE"),a.locale)};a.title=c(this.activeDate,this.formatDayTitle);var d=c(this.activeDate,"MMMM");if(a.title=a.title.replace(d,f(d,a.locale)),a.rows=this.split(k,7),a.showWeeks){a.weekNumbers=[];for(var n=(11-this.startingDay)%7,o=a.rows.length,p=0;p<o;p+=1)a.weekNumbers.push(e(a.rows[p][n].date))}},this.compare=function(a,b){var c=new Date(a.getFullYear(),a.getMonth(),a.getDate()),d=new Date(b.getFullYear(),b.getMonth(),b.getDate());return c.setFullYear(a.getFullYear()),d.setFullYear(b.getFullYear()),c-d},this.handleKeyDown=function(a){var b=this.activeDate.getDate();if("left"===a)b-=1;else if("up"===a)b-=7;else if("right"===a)b+=1;else if("down"===a)b+=7;else if("pageup"===a||"pagedown"===a){var c=this.activeDate.getMonth()+("pageup"===a?-1:1);this.activeDate.setMonth(c,1),b=Math.min(d(this.activeDate.getFullYear(),this.activeDate.getMonth()),b)}else"home"===a?b=1:"end"===a&&(b=d(this.activeDate.getFullYear(),this.activeDate.getMonth()));this.activeDate.setDate(b)}}function c(a,b,c){this.step={years:1},this.element=b,this.init=function(a){angular.extend(a,this),a.refreshView()},this._refreshView=function(){for(var b,d=new Array(12),e=this.activeDate.getFullYear(),f=0;f<12;f+=1)b=new Date(this.activeDate),b.setFullYear(e,f,1),d[f]=angular.extend(this.createDateObject(b,this.formatMonth),{uid:a.uniqueId+"-"+f});a.title=c(this.activeDate,this.formatMonthTitle),a.rows=this.split(d,3)},this.compare=function(a,b){var c=new Date(a.getFullYear(),a.getMonth()),d=new Date(b.getFullYear(),b.getMonth());return c.setFullYear(a.getFullYear()),d.setFullYear(b.getFullYear()),c-d},this.handleKeyDown=function(a){var b=this.activeDate.getMonth();if("left"===a)b-=1;else if("up"===a)b-=3;else if("right"===a)b+=1;else if("down"===a)b+=3;else if("pageup"===a||"pagedown"===a){var c=this.activeDate.getFullYear()+("pageup"===a?-1:1);this.activeDate.setFullYear(c)}else"home"===a?b=0:"end"===a&&(b=11);this.activeDate.setMonth(b)}}function d(a,b){function c(a){return parseInt((a-1)/e,10)*e+1}var d,e;this.element=b,this.yearpickerInit=function(){d=this.yearColumns,e=this.yearRows*d,this.step={years:e}},this._refreshView=function(){for(var b,f=new Array(e),g=0,h=c(this.activeDate.getFullYear());g<e;g+=1)b=new Date(this.activeDate),b.setFullYear(h+g,0,1),f[g]=angular.extend(this.createDateObject(b,this.formatYear),{uid:a.uniqueId+"-"+g});a.title=[f[0].label,f[e-1].label].join(" - "),a.rows=this.split(f,d),a.columns=d},this.compare=function(a,b){return a.getFullYear()-b.getFullYear()},this.handleKeyDown=function(a){var b=this.activeDate.getFullYear();"left"===a?b-=1:"up"===a?b-=d:"right"===a?b+=1:"down"===a?b+=d:"pageup"===a||"pagedown"===a?b+=("pageup"===a?-1:1)*e:"home"===a?b=c(this.activeDate.getFullYear()):"end"===a&&(b=c(this.activeDate.getFullYear())+e-1),this.activeDate.setFullYear(b)}}function e(){return{replace:!0,templateUrl:function(a,b){return b.templateUrl||"bb/datepicker.html"},scope:{datepickerMode:"=?",datepickerOptions:"=?",dateDisabled:"&",customClass:"&",shortcutPropagation:"&?"},require:["bbDatepicker","^ngModel"],controller:"bbDatepickerController",controllerAs:"datepicker",link:function(a,b,c,d){var e=d[0],f=d[1];e.init(f)}}}function f(){return{replace:!0,templateUrl:function(a,b){return b.templateUrl||"bb/datepicker.day.html"},require:["^bbDatepicker","bbDaypicker"],controller:"bbDaypickerController",link:function(a,b,c,d){var e=d[0];d[1].init(e)}}}function g(){return{replace:!0,templateUrl:function(a,b){return b.templateUrl||"bb/datepicker.month.html"},require:["^bbDatepicker","bbMonthpicker"],controller:"bbMonthpickerController",link:function(a,b,c,d){var e=d[0];d[1].init(e)}}}function h(){return{replace:!0,templateUrl:function(a,b){return b.templateUrl||"bb/datepicker.year.html"},require:["^bbDatepicker","bbYearpicker"],controller:"bbYearpickerController",link:function(a,b,c,d){var e=d[0];angular.extend(e,d[1]),e.yearpickerInit(),e.refreshView()}}}function i(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){function p(a){return a.replace(/([A-Z])/g,function(a){return"-"+a.toLowerCase()})}function q(b){var c=l.parse(b,w,a.date);if(isNaN(c))for(var d=0;d<I.length;d+=1)if(c=l.parse(b,I[d],a.date),!isNaN(c))return c;return c}function r(a){if(angular.isNumber(a)&&(a=new Date(a)),!a)return null;if(angular.isDate(a)&&!isNaN(a))return a;if(angular.isString(a)){var b=q(a);if(!isNaN(b))return l.toTimezone(b,G.timezone)}return F.$options&&F.$options.allowInvalid?a:void 0}function s(a,b){var d=a||b;return!c.ngRequired&&!d||(angular.isNumber(d)&&(d=new Date(d)),!d||(!(!angular.isDate(d)||isNaN(d))||!!angular.isString(d)&&!isNaN(q(b))))}function t(c){if(a.isOpen||!a.disabled){var d=H[0],e=b[0].contains(c.target),f=void 0!==d.contains&&d.contains(c.target);!a.isOpen||e||f||a.$apply(function(){a.isOpen=!1})}}function u(c){27===c.which&&a.isOpen?(c.preventDefault(),c.stopPropagation(),a.$apply(function(){a.isOpen=!1}),b[0].focus()):40!==c.which||a.isOpen||(c.preventDefault(),c.stopPropagation(),a.$apply(function(){a.isOpen=!0}))}function v(){if(a.isOpen){var d=H[0].querySelector(".datepicker-popup"),e=c.popupPlacement?c.popupPlacement:m.placement,f=j.positionElements(b,d,e,y);angular.element(d).css({top:f.top+"px",left:f.left+"px",visibility:"visible"})}}var w,x,y,z,A,B,C,D,E,F,G,H,I,J={},K=!1,L=[];a.watchData={},this.init=function(e){if(F=e,G=e.$options||o.ngModelOptions,angular.isDefined(a.datepickerOptions)?(x=angular.isDefined(a.datepickerOptions.closeOnDateSelection)?a.datepickerOptions.closeOnDateSelection:m.closeOnDateSelection,
y=angular.isDefined(a.datepickerOptions.datepickerAppendToBody)?a.datepickerOptions.datepickerAppendToBody:m.datepickerAppendToBody,z=angular.isDefined(a.datepickerOptions.onOpenFocus)?a.datepickerOptions.onOpenFocus:m.onOpenFocus,A=angular.isDefined(a.datepickerOptions.datepickerPopupTemplateUrl)?a.datepickerOptions.datepickerPopupTemplateUrl:m.datepickerPopupTemplateUrl,B=angular.isDefined(a.datepickerOptions.datepickerTemplateUrl)?a.datepickerOptions.datepickerTemplateUrl:m.datepickerTemplateUrl,I=angular.isDefined(a.datepickerOptions.altInputFormats)?a.datepickerOptions.altInputFormats:m.altInputFormats):(x=angular.isDefined(c.closeOnDateSelection)?a.$parent.$eval(c.closeOnDateSelection):m.closeOnDateSelection,y=angular.isDefined(c.datepickerAppendToBody)?a.$parent.$eval(c.datepickerAppendToBody):m.appendToBody,z=angular.isDefined(c.onOpenFocus)?a.$parent.$eval(c.onOpenFocus):m.onOpenFocus,A=angular.isDefined(c.datepickerPopupTemplateUrl)?c.datepickerPopupTemplateUrl:m.datepickerPopupTemplateUrl,B=angular.isDefined(c.datepickerTemplateUrl)?c.datepickerTemplateUrl:m.datepickerTemplateUrl,I=angular.isDefined(c.altInputFormats)?a.$parent.$eval(c.altInputFormats):m.altInputFormats,a.showButtonBar=angular.isDefined(c.showButtonBar)?a.$parent.$eval(c.showButtonBar):m.showButtonBar),m.html5Types[c.type]?(w=m.html5Types[c.type],K=!0):(w=c.bbDatepickerPopup||m.datepickerPopup,c.$observe("bbDatepickerPopup",function(a){var b=a||m.datepickerPopup;if(b!==w&&(w=b,F.$modelValue=null,!w))throw new Error("bbDatepickerPopup must have a date format specified.")})),!w)throw new Error("bbDatepickerPopup must have a date format specified.");if(K&&c.bbDatepickerPopup)throw new Error("HTML5 date input types do not support custom formats.");C=angular.element('<div bb-datepicker-popup-wrap class="datepicker-popup-wrap"><div bb-datepicker></div></div>'),a.ngModelOptions=angular.copy(G),a.ngModelOptions.timezone=null,C.attr({"ng-model":"date","ng-model-options":"ngModelOptions","ng-change":"dateSelection(date)","template-url":A}),D=angular.element(C.children()[0]),D.attr("template-url",B),K&&"month"===c.type&&(D.attr("datepicker-mode",'"month"'),D.attr("min-mode","month")),a.datepickerOptions&&(D.attr("datepicker-options","datepickerOptions"),angular.isDefined(a.datepickerOptions.datepickerMode)&&D.attr("datepicker-mode","datepickerOptions.datepickerMode")),angular.forEach(["minMode","maxMode","datepickerMode","shortcutPropagation"],function(b){if(c[b]){var d=f(c[b]),e={get:function(){return d(a.$parent)}};if(D.attr(p(b),"watchData."+b),"datepickerMode"===b){var g=d.assign;e.set=function(b){g(a.$parent,b)}}Object.defineProperty(a.watchData,b,e)}}),angular.forEach(["minDate","maxDate","initDate"],function(b){if(c[b]){var d=f(c[b]);L.push(a.$parent.$watch(d,function(c){if("minDate"===b||"maxDate"===b)null===c?J[b]=null:angular.isDate(c)?J[b]=l.fromTimezone(new Date(c),G.timezone):J[b]=new Date(k(c,"medium")),a.watchData[b]=null===c?null:J[b];else{var d=c?new Date(c):new Date;a.watchData[b]=l.fromTimezone(d,G.timezone)}})),D.attr(p(b),"watchData."+b)}}),c.dateDisabled&&D.attr("date-disabled","dateDisabled({ date: date, mode: mode })"),angular.forEach(["formatDay","formatMonth","formatYear","formatDayHeader","formatDayTitle","formatMonthTitle","showWeeks","startingDay","yearRows","yearColumns"],function(a){angular.isDefined(c[a])&&D.attr(p(a),c[a])}),c.customClass&&D.attr("custom-class","customClass({ date: date, mode: mode })"),K?F.$formatters.push(function(b){return a.date=l.fromTimezone(b,G.timezone),b}):(F.$$parserName="date",F.$validators.date=s,F.$parsers.unshift(r),F.$formatters.push(function(b){return F.$isEmpty(b)?(a.date=b,b):(a.date=l.fromTimezone(b,G.timezone),angular.isNumber(a.date)&&(a.date=new Date(a.date)),l.filter(a.date,w))})),F.$viewChangeListeners.push(function(){a.date=q(F.$viewValue)}),b.on("keydown",u),H=d(C)(a),C.remove(),y?h.find("body").append(H):b.after(H),a.$on("$destroy",function(){for(!0===a.isOpen&&(i.$$phase||a.$apply(function(){a.isOpen=!1})),H.remove(),b.off("keydown",u),h.off("click",t),E&&E.off("scroll",v),angular.element(g).off("resize",v);L.length;)L.shift()()})},a.getText=function(b){return a[b+"Text"]||m[b+"Text"]},a.isDisabled=function(b){return"today"===b&&(b=new Date),a.watchData.minDate&&a.compare(b,J.minDate)<0||a.watchData.maxDate&&a.compare(b,J.maxDate)>0},a.compare=function(a,b){return new Date(a.getFullYear(),a.getMonth(),a.getDate())-new Date(b.getFullYear(),b.getMonth(),b.getDate())},a.dateSelection=function(c){angular.isDefined(c)&&(a.date=c);var d=a.date?l.filter(a.date,w):null;b.val(d),F.$setViewValue(d),x&&(a.isOpen=!1,b[0].focus())},a.keydown=function(c){27===c.which&&(c.stopPropagation(),a.isOpen=!1,b[0].focus())},a.select=function(b,c){if(c.stopPropagation(),"today"===b){var d=new Date;angular.isDate(a.date)?(b=new Date(a.date),b.setFullYear(d.getFullYear(),d.getMonth(),d.getDate())):b=new Date(d.setHours(0,0,0,0))}a.dateSelection(b)},a.close=function(c){c.stopPropagation(),a.isOpen=!1,b[0].focus()},a.disabled=angular.isDefined(c.disabled)||!1,c.ngDisabled&&L.push(a.$parent.$watch(f(c.ngDisabled),function(b){a.disabled=b})),a.$watch("isOpen",function(d){d?a.disabled?a.isOpen=!1:n(function(){v(),z&&a.$broadcast("bb:datepicker.focus"),h.on("click",t);var d=c.popupPlacement?c.popupPlacement:m.placement;y||j.parsePlacement(d)[2]?(E=E||angular.element(j.scrollParent(b)))&&E.on("scroll",v):E=null,angular.element(g).on("resize",v)},0,!1):(h.off("click",t),E&&E.off("scroll",v),angular.element(g).off("resize",v))}),a.$on("bb:datepicker.mode",function(){n(v,0,!1)})}function j(){return{require:["ngModel","bbDatepickerPopup"],controller:"bbDatepickerPopupController",scope:{datepickerOptions:"=?",isOpen:"=?",currentText:"@",clearText:"@",closeText:"@",dateDisabled:"&",customClass:"&"},link:function(a,b,c,d){var e=d[0];d[1].init(e)}}}function k(){return{replace:!0,transclude:!0,templateUrl:function(a,b){return b.templateUrl||"bb/datepicker.popup.html"}}}angular.module("bb.datepicker",["bb.datepicker.tmpl","bb.dateparser","bb.isClass","bb.position"]).value("$datepickerSuppressError",!1).value("bbDatepickerAttributeWarning",!0).constant("bbDatepickerConfig",{datepickerMode:"day",formatDay:"dd",formatMonth:"MMMM",formatYear:"yyyy",formatDayHeader:"EEE",formatDayTitle:"MMMM yyyy",formatMonthTitle:"yyyy",maxDate:null,maxMode:"year",minDate:null,minMode:"day",ngModelOptions:{},shortcutPropagation:!1,showWeeks:!0,yearColumns:5,yearRows:4,locale:"en"}).controller("bbDatepickerController",a).controller("bbDaypickerController",b).controller("bbMonthpickerController",c).controller("bbYearpickerController",d).directive("bbDatepicker",e).directive("bbDaypicker",f).directive("bbMonthpicker",g).directive("bbYearpicker",h).value("bbDatepickerPopupAttributeWarning",!0).constant("bbDatepickerPopupConfig",{altInputFormats:[],appendToBody:!1,clearText:"Limpar",closeOnDateSelection:!0,closeText:"Fechar",currentText:"Hoje",datepickerPopup:"yyyy-MM-dd",datepickerPopupTemplateUrl:"bb/datepicker.popup.html",datepickerTemplateUrl:"bb/datepicker.html",html5Types:{date:"yyyy-MM-dd","datetime-local":"yyyy-MM-ddTHH:mm:ss.sss",month:"yyyy-MM"},onOpenFocus:!0,showButtonBar:!0,placement:"auto bottom-left"}).controller("bbDatepickerPopupController",i).directive("bbDatepickerPopup",j).directive("bbDatepickerPopupWrap",k),a.$inject=["$scope","$attrs","$parse","$interpolate","$locale","$log","dateFilter","bbDatepickerConfig","$datepickerSuppressError","bbDatepickerAttributeWarning","bbDateParser"],b.$inject=["$scope","$element","dateFilter"],c.$inject=["$scope","$element","dateFilter"],d.$inject=["$scope","$element","dateFilter"],i.$inject=["$scope","$element","$attrs","$compile","$log","$parse","$window","$document","$rootScope","$bbPosition","dateFilter","bbDateParser","bbDatepickerPopupConfig","$timeout","bbDatepickerConfig"]}(),function(){"use strict";function a(a){return function(b,c){var d;return function(){var e=this,f=Array.prototype.slice.call(arguments);d&&a.cancel(d),d=a(function(){b.apply(e,f)},c)}}}angular.module("bb.debounce",[]).factory("$$debounce",a),a.$inject=["$timeout"]}(),function(){"use strict";function a(a,b){var c=null,d=function(a){if(c&&!(a&&"disabled"===c.getAutoClose()||a&&3===a.which)){var d=c.getToggleElement();if(!(a&&d&&d[0].contains(a.target))){var e=c.getDropdownElement();a&&"outsideClick"===c.getAutoClose()&&e&&e[0].contains(a.target)||(c.isOpen=!1,b.$$phase||c.$apply())}}},e=function(a){27===a.which?(c.focusToggleElement(),d()):-1!==[9,38,40].indexOf(a.which)&&c.isOpen&&(a.preventDefault(),a.stopPropagation(),c.focusDropdownEntry(a,a.which))};this.open=function(b){c||(a.on("click",d),a.on("keydown",e)),c&&c!==b&&(c.isOpen=!1),c=b},this.close=function(b){c===b&&(c=null,a.off("click",d),a.off("keydown",e))}}function b(a,b,c,d,e,f,g,h,i,j,k,l){var m,n,o,p=this,q=a.$new(),r=e.appendToOpenClass,s=e.openClass,t=angular.noop,u=c.bbOnToggle?d(c.bbOnToggle):angular.noop,v=!1,w=null,x=i.find("body");b.addClass("dropdown"),this.init=function(){c.bbAlign&&b.addClass("dropdown--"+c.bbAlign),c.bbPlacement&&b.addClass("dropdown--"+c.bbPlacement),"true"===c.bbNoArrow&&b.addClass("dropdown--no-arrow"),c.bbIsOpen&&(n=d(c.bbIsOpen),t=n.assign,a.$watch(n,function(a){q.isOpen=!!a})),c.bbDropdownFollowCursor&&(o=d(c.bbDropdownFollowCursor),a.$watch(o,function(a){q.currentEvent=a})),angular.isDefined(c.bbAppendTo)&&(w=angular.element(document.querySelector(c.bbAppendTo))),v=angular.isDefined(c.bbAppendToBody)&&"false"!==c.bbAppendToBody,v&&!w&&(w=x),w&&p.dropdownMenu&&(w.append(p.dropdownMenu),b.on("$destroy",function(){p.dropdownMenu.remove()}))},this.toggle=function(a){return q.isOpen=arguments.length?!!a:!q.isOpen},this.isOpen=function(){return q.isOpen},this.isAppendedToBody=function(){return v},q.getToggleElement=function(){return p.toggleElement},q.getAutoClose=function(){return c.bbAutoClose||"always"},q.getElement=function(){return b},q.focusDropdownEntry=function(a,b){var c,d=angular.element(p.dropdownMenu).find("li"),e=angular.element(p.dropdownMenu).find("a");switch(c=e.length?e:d.length?d:p.dropdownMenu,b=a.shiftKey&&9===b?38:b){case 9:case 40:p.selectedOption=p.selectedOption=angular.isNumber(p.selectedOption)?(p.selectedOption+1)%c.length:0;break;case 38:p.selectedOption=(p.selectedOption+c.length-1)%c.length}c[p.selectedOption].focus()},q.getDropdownElement=function(){return p.dropdownMenu},q.focusToggleElement=function(){var a=angular.element(p.dropdownMenu).find("li"),b=angular.element(p.dropdownMenu).find("a");b.length?angular.forEach(b,function(a){angular.element(a).attr("tabindex","0")}):a.length&&angular.forEach(a,function(a){angular.element(a).attr("tabindex","0")}),p.toggleElement&&p.toggleElement[0].focus()},q.$watch("isOpen",function(d,e){if(w&&p.dropdownMenu){p.dropdownMenu.removeClass("dropdown__menu--right"),p.dropdownMenu.removeClass("dropdown__menu--bottom"),p.dropdownMenu.css({top:"initial",left:"initial",right:"initial",width:"initial",bottom:"initial"});var i,l,n=h.positionElements(b,p.dropdownMenu,"bottom-left",!0);if(i={top:n.top+"px",display:d?"block":"none"},l=p.dropdownMenu.hasClass("dropdown__menu--right"),l?(i.left="auto",i.right=window.innerWidth-(n.left+b.prop("offsetWidth"))+"px"):(i.left=n.left+"px",i.right="auto"),!v){var o=h.offset(w);i.top=n.top-o.top+"px",l?i.right=window.innerWidth-(n.left-o.left+b.prop("offsetWidth"))+"px":i.left=n.left-o.left+"px"}if(angular.isDefined(c.bbDropdownFollowCursor)&&q.currentEvent){i.top=window.scrollY+q.currentEvent.clientY+15+"px",i.left=q.currentEvent.clientX-25+"px",i.width="auto",p.dropdownMenu.css(i);var x=p.dropdownMenu[0].getBoundingClientRect(),y=document.body.getBoundingClientRect();x.width+x.left>y.width&&(p.dropdownMenu.addClass("dropdown__menu--right"),i.left="auto",i.right=y.width-q.currentEvent.clientX-25+"px");x.height+x.top>window.innerHeight&&(p.dropdownMenu.addClass("dropdown__menu--bottom"),i.top=window.scrollY+q.currentEvent.clientY-x.height-25+"px")}p.dropdownMenu.css(i)}var z=w||b,A=w?r:s,B=z.hasClass(A);if(B===!d){g[d?"addClass":"removeClass"](z,A).then(function(){angular.isDefined(d)&&d!==e&&u(a,{open:!!d})})}if(d)p.dropdownMenuTemplateUrl&&k(p.dropdownMenuTemplateUrl).then(function(a){m=q.$new(),j(a.trim())(m,function(a){var b=a;p.dropdownMenu.replaceWith(b),p.dropdownMenu=b})}),q.focusToggleElement(),f.open(q);else{if(p.dropdownMenuTemplateUrl){m&&m.$destroy();var C=angular.element('<ul class="dropdown__menu"></ul>');p.dropdownMenu.replaceWith(C),p.dropdownMenu=C}f.close(q),p.selectedOption=null}angular.isFunction(t)&&t(a,d)}),a.$on("$locationChangeSuccess",function(){"disabled"!==q.getAutoClose()&&(q.isOpen=!1)})}function c(a){function b(b,c,d,e){var f=!1,g=function(b){b.preventDefault(),c.hasClass("is-disabled")||d.disabled||(f=!0,e.toggle(!0),a(function(){f=!1},300))},h=function(a){a.preventDefault();var b=!c[0].contains(a.relatedTarget),g=e.isAppendedToBody()&&a.relatedTarget.hasAttribute("bb-dropdown-menu");c.hasClass("is-disabled")||d.disabled||!b&&f||g||e.toggle(!1)};"true"===d.bbOpenOnHover&&(c.bind("mouseover",g),c.bind("mouseout",h)),e.init()}return{controller:"bbDropdownController",link:b}}function d(){function a(a,b,c,d){if(d&&!angular.isDefined(c.bbNested)){d.btnHasMargin&&b.css("margin-top",0),b.addClass("dropdown__menu");var e=c.bbTemplateUrl;e&&(d.dropdownMenuTemplateUrl=e),d.dropdownMenu||(d.dropdownMenu=b)}}return{link:a,require:"?^bbDropdown",restrict:"A"}}function e(a,b){function c(c,d,e,f){if(f){var g=0,h=a.getComputedStyle(d[0],null);h&&(g=h.getPropertyValue("margin-bottom").replace("px","")),g>0&&(f.btnHasMargin=!0),d.addClass("dropdown__toggle"),f.toggleElement=d;var i=function(a){a.preventDefault(),d.hasClass("is-disabled")||e.disabled||b(function(){"ontouchstart"in document.documentElement||f.toggle()})};d.attr({"aria-haspopup":!0,"aria-expanded":!1}),c.$watch(f.isOpen,function(a){d.attr("aria-expanded",!!a)}),d[0].parentElement.hasAttribute("bb-open-on-hover")&&"true"===d[0].parentElement.attributes["bb-open-on-hover"].value||(d.bind("click",i),c.$on("$destroy",function(){d.unbind("click",i)}))}}return{link:c,require:"?^bbDropdown"}}angular.module("bb.dropdown",["bb.position"]).constant("bbDropdownConfig",{appendToOpenClass:"bb-dropdown-open",openClass:"is-open"}).service("bbDropdownService",a).controller("bbDropdownController",b).directive("bbDropdown",c).directive("bbDropdownMenu",d).directive("bbDropdownToggle",e),a.$inject=["$document","$rootScope"],b.$inject=["$scope","$element","$attrs","$parse","bbDropdownConfig","bbDropdownService","$animate","$bbPosition","$document","$compile","$templateRequest","$timeout"],c.$inject=["$timeout"],e.$inject=["$window","$timeout"]}(),function(){"use strict";angular.module("bb.droplist.tmpl",[]).run(["$templateCache",function(a){a.put("bb/droplist.html",'<div class="droplist" \nng-class="{\'is-open\': vm.isOpen, \'has-content\': content || hasTranscluded}">\n    <div class="droplist__inner">\n        <span role="button" tabindex="0" \naria-expanded="{{vm.isOpen}}" ng-click="vm.open()">\n            <i \nng-class="icon" ng-if="icon"></i>\n            <span ng-bind-html="title" \nclass="droplist__title" ng-class="{\'blur\': vm.isOpen}"></span>\n            <i \nclass="droplist__arrow" ng-class="arrow" ng-if="arrow"></i>\n        </span>\n        <div ng-show="vm.isOpen" class="droplist__content" \nng-style="vm.style">\n            <p ng-bind-html="content" ng-if="content"></p>\n\n            <ng-transclude></ng-transclude>\n        </div>\n    </div>\n</div>\n')}])}(),function(){"use strict";function a(){var a=this;a.isOpen=!1,a.open=function(){a.isOpen=!a.isOpen}}function b(a){function b(a,b,d,e,f){function g(){c(b,a,e)}a.style="",a.isOpen=!1,a.clickCount=0,a.hasTranscluded=!1,f(function(b){b.length&&(a.hasTranscluded=!0)});var h="mi mi--arrow-drop-down";void 0===d.bbArrow&&(d.bbArrow=h),a.isReverse&&angular.element(b[0].querySelector(".droplist__inner")).addClass("droplist__reverse"),a.closeOnSelect||(a.closeOnSelect=!1),d.$observe("bbArrow",function(b){b||(a.arrow=h)});var i=function(){a.$apply(function(){e.isOpen=!1})},j=function(c){b===c.target||b[0].contains(c.target)||i(),b[0].contains(c.target)?(a.isOpen&&a.closeOnSelect&&(0===a.clickCount?(a.clickCount=1,i()):a.clickCount=0),0===a.clickCount&&(a.isOpen=!a.isOpen)):(a.isOpen=!1,a.clickCount=0)};angular.element(b[0].children).find("span").on("keydown",function(c){13===c.keyCode&&a.$apply(function(){e.isOpen=!e.isOpen}),b[0].children[0].children[1].querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])').length||angular.element(b[0].querySelector(".droplist__content")).attr("tabindex","0")}),b.on("keydown",function(c){27===c.keyCode&&a.$apply(function(){e.isOpen=!1,angular.element(b[0].children).find("span")[0].focus()})}),angular.element(b).on("click",j),angular.element(b).on("keydown",j),angular.element(b).on("click",g),a.$on("$destroy",function(){angular.element(b).off("click",j)})}function c(a,b,c){if(b.isReverse){var d=a[0].querySelectorAll("li").length,e=2.5*d+.5;c.style={top:-(e>13?13:e)+"rem"},b.$apply()}}return{controller:"bbDroplistController",controllerAs:"vm",link:b,replace:!0,restrict:"E",scope:{icon:"@?bbIcon",title:"@bbTitle",arrow:"@?bbArrow",content:"@?bbContent",isReverse:"=?bbIsReverse",closeOnSelect:"=?bbCloseOnSelect"},templateUrl:"bb/droplist.html",transclude:!0}}angular.module("bb.droplist",["bb.droplist.tmpl","ngSanitize"]).controller("bbDroplistController",a).directive("bbDroplist",b),b.$inject=["$document"]}(),function(){"use strict";angular.module("bb.fileUpload.tmpl",[]).run(["$templateCache",function(a){a.put("bb/file-upload.html",'<span class="form-field">\n    <span class="file-upload--title">{{label}}</span>\n    <div class="file-placeholder">\n        <div class="row">\n            <div \nclass="col-md-12">\n                <span>\n{{picFile && picFile.name ? picFile.name : selectLabel}}</span>\n            \n</div>\n            <div class="col-md-10" style="margin: auto">\n                <span ng-show="picFile.progress >= 0" style="width: 100%">\n                    <div id="infofileupload" role="alert" \naria-label="{{picFile.progress + \'% carregado\'}}" aria-live="polite" \naria-atomic="true" class="label label--primary" \nstyle="width: {{picFile.progress}}%" ng-bind="picFile.progress + \'%\'"></div>\n                </span>\n            </div>\n            <div \nclass="col-md-2 btn--remove" style="margin: auto">\n                <a href \naria-label="excluir arquivo" class="btn btn--icon" ng-show="picFile" \nng-click="remove()">    \n                    <i class="mi" \nng-class="(urlUpload && picFile.progress != 100) ? \'mi--close\' : \'mi--delete-forever\'">\n</i>\n                </a>\n            </div>\n        </div>\n    </div>\n    \n<span class="help-block tx-danger" ng-show="form.$error.required">\nPor favor, selecione uma imagem.</span>\n    <span class="help-block tx-danger" \nng-show="form.$error.maxSize">\nArquivo muito grande {{errorFile.size / 1000000|number:2}}MB: max {{errorFile.$errorParam}}\n</span>\n    <span class="help-block tx-danger" ng-show="form.$error.minSize">\nArquivo muito pequeno {{errorFile.size / 1000000|number:2}}MB: min {{errorFile.$errorParam}}\n</span>\n    <label for="fileUpload" class="file-upload">\n        <a \naria-controls="infofileupload" href class="custom-file-btn btn btn--link" \nng-model="picFile" type="file">\n            <i class="mi mi--attach-file"></i>\n            {{btnLabel}}\n        </a>\n    </label>\n    <span \nclass="help-block tx-danger" ng-show="errorMsg" ng-bind-html="errorMsg">\n{{errorMsg}}</span>\n</span>\n')}])}(),function(){"use strict";function a(a,b){function c(c,e,f,g){c.form=g;var h=e[0],i=angular.element(h.getElementsByClassName("custom-file-btn"));[].slice.call(h.attributes).forEach(function(a){a.name.match(/^ngf-/)&&i.attr(a.name,a.value)}),d(c.urlUpload)?i.attr("ngf-select","uploadPic(picFile)"):i.attr("ngf-select",""),i.attr("ngf-model-invalid","errorFile"),b(i)(c),c.uploadPic=function(b){c.errorMsg="",b&&(b.upload=a.upload({url:c.urlUpload,data:{file:b}}),b.upload.then(function(a){b.result=a.data,c.finish&&c.finish({$data:b.result})},function(a){a.status>0&&(c.errorMsg=a.data,console.log(a),c.picFile=null)},function(a){b.progress=Math.min(100,parseInt(100*a.loaded/a.total))}))},c.$watch("picFile",function(){c.file=c.picFile}),c.remove=function(){c.remover(c.picFile),c.picFile=null}}function d(a){return null!==a&&void 0!==a}return{link:c,replace:!0,restrict:"E",scope:{label:"@?bbTitleLabel",selectLabel:"@?bbSelectLabel",btnLabel:"@?bbBtnLabel",urlUpload:"@?bbUrlUpload",remover:"&?bbRemover",finish:"&?bbOnFinish",file:"=?bbFile"},templateUrl:"bb/file-upload.html"}}angular.module("bb.fileUpload",["ngFileUpload","bb.fileUpload.tmpl","ngSanitize"]).directive("bbFileUpload",a),a.$inject=["Upload","$compile"]}(),function(){"use strict";angular.module("bb.filter.tmpl",[]).run(["$templateCache",function(a){a.put("bb/filter.html",'<section class="filter" role="application" tabindex="0" \naria-label="Componente de filtro. {{ tagMessage }}.">\n    <div \nclass="filter__header" \nng-class="{\'filter__header--vertical\': (type === \'vertical\')}">\n        <div \nclass="filter__header__title">\n            <span class="fz-xs" \nrole="contentinfo" tabindex="0" aria-label="Status: {{ tagMessage }}.">\n{{ tagMessage }}</span>\n        </div>\n        <div \nclass="filter__header__tags">\n            <span \nclass="filter__header__tags__tag" ng-repeat="tag in validFields" \nng-hide="tag.empty" ng-click="edit(tag.model,tag.value)" tabindex="0" \naria-label="{{tag.title}}: {{tag.label}}.">\n                <i>{{tag.title}}: \n</i>\n                <b>{{tag.label}}</b>\n                <i \nclass="mi mi--close fz-sm" ng-click="remove(tag.model,tag.value)"></i>\n            </span>\n        </div>\n        <div class="filter__header__tools">\n            <div class="btn-inline">\n                <button href \nclass="btn btn--default btn--sm btn--dark" ng-disabled="checkValidFields()" \nng-click="resetForm()" aria-label="Apagar todos os filtros.">\n                    <i class="mi mi--delete"></i>\n                </button>\n                <button class="btn btn--default btn--sm btn--primary" \nng-disabled="step === \'config\'" ng-click="changeStep(\'config\')" \naria-label="Editar filtros.">\n                    <i class="mi mi--tune"></i>\n                </button>\n            </div>\n        </div>\n    </div>\n    \n<div class="filter__config" ng-show="step === \'config\'">\n        <form \nname="filterForm">\n            <div class="filter__fields" ng-transclude></div>\n        </form>\n        <div class="filter__apply ta-right">\n            \n<button class="btn btn--primary btn--sm" ng-click="apply(\'apply\')" \nng-class="{\'btn--block\': (type === \'vertical\')}">Aplicar filtros</button>\n\n        </div>\n    </div>\n</section>')}])}(),function(){"use strict";function a(a,b){return{restrict:"E",templateUrl:"bb/filter.html",transclude:!0,scope:{bbFilterOnApply:"&",bbFilterValidFilters:"=",bbFilterType:"@",bbFilterState:"="},controller:"bbFilterController",link:function(c,d,e,f,g){function h(a,b,d,e){c.validFields.push({model:a,value:b,title:d,label:e})}var i=this;c.tagMessage="Nenhum filtro",c.step=c.bbFilterState||"config",c.validFields=[],e.$observe("bbFilterState",function(a){i.applyState(a)}),i.applyState=function(b){a(function(){c.apply(b)})},c.buildValidFields=function(){c.validFields=[],c.registered.ctrl.forEach(function(a,b){var d=!1;if(a.$modelValue&&a.$modelValue.toString().length>0){var e=c.registered.attr[b].ngModel,f=a.$modelValue;!0===f&&(f=a.$ngTrueValue);var g=e,i=f;f instanceof Date&&(i=a.$viewValue),c.titles[e]&&(g=c.titles[e]),Array.isArray(f)?(i="",a.$modelValue.forEach(function(a,b){i+=c.labels[e+"[$index]"][a]+", "}),i=i.slice(0,-2)):c.labels[e]&&(i=c.labels[e][f]);for(var j in c.validFields)c.validFields[j].model===e&&c.validFields[j].value===f&&(d=!0);d||h(e,f,g,i)}});var a=c.validFields.length;0===a?(c.tagMessage="Nenhum filtro",c.registered.ctrl[0].$$parentForm.$setPristine()):c.tagMessage=1===a?"Filtro ativo":"Filtros ativos",c.bbFilterValidFilters=c.validFields},c.apply=function(a){c.step=a,c.buildValidFields(),c.bbFilterOnApply()},c.checkValidFields=function(){return!(c.validFields.length>0)},c.changeStep=function(a){c.step=a},b.register(i)}}}function b(a){var b;return{register:function(a){b=a},update:function(){a(function(){try{b.applyState("apply")}catch(a){console.log(a)}},1e3)}}}function c(a,b){a.registered={},a.registered.ctrl=[],a.registered.attr=[],a.registered.elem=[],a.titles=[],a.labels=[],a.type=a.bbFilterType,"horizontal"!==a.type&&"vertical"!==a.type&&(a.type="horizontal"),this.register=function(b,c,d){a.registered.ctrl.push(b),a.registered.attr.push(c),a.registered.elem.push(d),a.titles[c.ngModel]=c.bbFilterTitle},this.registerLabel=function(b,c,d){a.labels[b]||(a.labels[b]=[]),a.labels[b][c]=d},a.resetForm=function(){a.registered.ctrl.forEach(function(a,b){a.$setViewValue(void 0),a.$setPristine(),a.$$parentForm.$setPristine(),a.$render()}),a.apply("config")},a.edit=function(c,d){a.registered.ctrl.forEach(function(e,f){a.registered.attr[f].ngModel===c&&("radio"!==a.registered.attr[f].type&&e.$modelValue===d||"radio"===a.registered.attr[f].type&&a.registered.attr[f].value===d)&&(b(function(){a.registered.elem[f][0].focus()}),a.step="config")})},a.remove=function(b,c){console.log("key "+b+" value "+c),a.registered.ctrl.forEach(function(d,e){console.log("yey "+a.registered.attr[e].ngModel+" value "+d.$modelValue),a.registered.attr[e].ngModel===b&&d.$modelValue===c&&(console.log(!0),d.$setViewValue(void 0),d.$setPristine(),d.$render())}),a.apply("apply")}}function d(){return{restrict:"A",require:["^bbFilter","ngModel"],link:function(a,b,c,d){d[0].register(d[1],c,b)}}}function e(){return{restrict:"A",require:["^bbFilter","^ngModel"],link:function(a,b,c,d){var e=c.ngModel;e||(e=b.parent().attr("ng-model"));var f=c.value;f||(f=c.ngTrueValue);var g=c.bbFilterLabel;d[0].registerLabel(e,f,g)}}}angular.module("bb.filter",["bb.filter.tmpl"]).directive("bbFilter",a).directive("bbFilterTitle",d).directive("bbFilterLabel",e).factory("bbFilterService",b).controller("bbFilterController",c),a.$inject=["$timeout","bbFilterService"],b.$inject=["$timeout"],c.$inject=["$scope","$timeout"]}(),function(){"use strict";function a(a,b){return function(c,d){if(c){if("string"==typeof c)return c;void 0===d&&(d={});var e=c.length,f=a("limitTo")(c,d.limit,d.begin-1),g=f.length;c=b.trustAsHtml(f.map(function(a){return'<span class="label">'+a.title+"</span>"}).join(" "));var h=e-g;return d.showCounter&&h?c+'<span class="label">+'+h+"</span>":c}}}angular.module("bb.filters",["ngSanitize"]).filter("tags",a),a.$inject=["$filter","$sce"]}(),function(){"use strict";angular.module("bb.gridline.tmpl",[]).run(["$templateCache",function(a){a.put("bb/gridline-item.html","<li ng-transclude></li>\n"),a.put("bb/gridline.html",'<ul class="gridline" ng-transclude></ul>\n')}])}(),function(){"use strict";function a(){function a(a,b){if(a.type){var c=a.type.split(" ").map(function(a){return"gridline--"+a}).join(" ");b.addClass(c)}}return{link:a,replace:!0,scope:{type:"@?bbType"},templateUrl:"bb/gridline.html",transclude:!0}}function b(){return{replace:!0,templateUrl:"bb/gridline-item.html",transclude:!0}}angular.module("bb.gridline",["bb.gridline.tmpl"]).directive("bbGridline",a).directive("bbGridlineItem",b)}(),function(){"use strict";angular.module("bb.inputTag.tmpl",[]).run(["$templateCache",function(a){a.put("bb/auto-complete-match.html",'<span ng-bind-html="$highlight($getDisplayText())"></span>'),a.put("bb/auto-complete.html",'<div class="autocomplete" ng-if="suggestionList.visible">\n  <ul \nclass="suggestion-list">\n    <li class="suggestion-item" \nng-repeat="item in suggestionList.items track by track(item)" \nng-class="getSuggestionClass(item, $index)" \nng-mousedown="addSuggestionByIndex($index)" \nng-mouseenter="suggestionList.select($index)">\n      <ti-autocomplete-match \nscope="templateScope" data="::item"></ti-autocomplete-match>\n    </li>\n  </ul>\n\n</div>\n'),a.put("bb/input-tag.html",'<div class="host" ng-click="eventHandlers.host.click()" ti-transclude-append>\n  <div class="tags" ng-class="{focused: hasFocus}" tabindex="0" \naria-label="Lista de tags.">\n    <ul class="tag-list" aria-live="polite" \naria-atomic="true" aria-role="list">\n      <li class="tag-item" \naria-role="listitem" ng-repeat="tag in tagList.items track by track(tag)" \nng-class="getTagClass(tag, $index)" ng-click="eventHandlers.tag.click(tag)" \ntabindex="0">\n        <ti-tag-item scope="templateScope" data="::tag">\n</ti-tag-item>\n      </li>\n    </ul>\n    <input class="input" \naria-label="{{options.bbPlaceholder}}. Digite a tag a ser includa e pressione enter." \nautocomplete="off" ng-model="newTag.text" \nng-model-options="{getterSetter: true}" \nng-keydown="eventHandlers.input.keydown($event)" \nng-focus="eventHandlers.input.focus($event)" \nng-blur="eventHandlers.input.blur($event)" \nng-paste="eventHandlers.input.paste($event)" ng-trim="false" \nng-class="{\'invalid-tag\': newTag.invalid}" ng-disabled="disabled" \nti-bind-attrs="{type: options.bbType, placeholder: options.bbPlaceholder, tabindex: options.bbTabindex, spellcheck: options.bbSpellcheck}" \nti-autosize>\n  </div>\n</div>\n'),a.put("bb/tag-item.html",'<span ng-bind="$getDisplayText()" \naria-label="Tag: {{$getDisplayText()}}. Pressione tab e em seguida Enter para ">\n</span>\n<a href class="remove-button" ng-click="$removeTag()" \nng-bind="::$$removeTagSymbol" \naria-label="remover a tag \'{{$getDisplayText()}}\'."></a>')}])}(),function(a){"use strict";function b(){var b={},c={},d=3;this.setDefaults=function(a,c){return b[a]=c,this},this.setActiveInterpolation=function(a,b){return c[a]=b,this},this.setTextAutosizeThreshold=function(a){return d=a,this},this.$get=["$interpolate",function(e){var f={};return f[String]=function(a){return a},f[Number]=function(a){return parseInt(a,10)},f[Boolean]=function(a){return"true"===a.toLowerCase()},f[RegExp]=function(a){return new RegExp(a)},{load:function(d,g,h,i){var j=function(){return!0};g.options={},a.forEach(i,function(i,k){var l,m,n,o,p,q;l=i[0],m=i[1],n=i[2]||j,o=f[l],p=function(){var c=b[d]&&b[d][k];return a.isDefined(c)?c:m},q=function(b){a.isUndefined(b)||""!==b?g.options[k]=b&&n(b)?o(b):p():g.options[k]=o(b)},c[d]&&c[d][k]?h.$observe(k,function(a){q(a),g.events.trigger("option-change",{name:k,newValue:a})}):q(h[k]&&e(h[k])(g.$parent))})},getTextAutosizeThreshold:function(){return d}}}]}function c(b,c){var d={};return d.debounce=function(a,c){var d;return function(){var e=arguments;b.cancel(d),d=b(function(){a.apply(null,e)},c)}},d.makeObjectArray=function(b,c){if(!a.isArray(b)||0===b.length||a.isObject(b[0]))return b;var d=[];return b.forEach(function(a){var b={};b[c]=a,d.push(b)}),d},d.findInObjectArray=function(a,b,c,e){var f=null;return e=e||d.defaultComparer,a.some(function(a){if(e(a[c],b[c]))return f=a,!0}),f},d.defaultComparer=function(a,b){return d.safeToString(a).toLowerCase()===d.safeToString(b).toLowerCase()},d.safeHighlight=function(a,b){if(!b)return a;a=d.encodeHTML(a),b=d.encodeHTML(b);var c=new RegExp("&[^;]+;|"+function(a){return a.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}(b),"gi");return a.replace(c,function(a){return a.toLowerCase()===b.toLowerCase()?"<em>"+a+"</em>":a})},d.safeToString=function(b){return a.isUndefined(b)||null==b?"":b.toString().trim()},d.encodeHTML=function(a){return d.safeToString(a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},d.handleUndefinedResult=function(b,c){return function(){var d=b.apply(null,arguments);return a.isUndefined(d)?c:d}},d.replaceSpacesWithDashes=function(a){return d.safeToString(a).replace(/\s/g,"-")},d.isModifierOn=function(a){return a.shiftKey||a.ctrlKey||a.altKey||a.metaKey},d.promisifyValue=function(b){
return b=!!a.isUndefined(b)||b,c[b?"when":"reject"]()},d.simplePubSub=function(){var a={};return{on:function(b,c,d){return b.split(" ").forEach(function(b){a[b]||(a[b]=[]),(d?[].unshift:[].push).call(a[b],c)}),this},trigger:function(b,c){return(a[b]||[]).every(function(a){return d.handleUndefinedResult(a,!0)(c)}),this}}},d}function d(b,c,d,e,f,g){function h(a,b,c,d){var f,h,i,j,k={};return f=function(b){return g.safeToString(b[a.bbDisplayProperty])},h=function(b,c){b[a.bbDisplayProperty]=c},i=function(b){var d=f(b),h=d&&d.length>=a.bbMinLength&&d.length<=a.bbMaxLength&&a.bbAllowedTagsPattern.test(d)&&!g.findInObjectArray(k.items,b,a.bbKeyProperty||a.bbDisplayProperty);return e.when(h&&c({$tag:b})).then(g.promisifyValue)},j=function(a){return e.when(d({$tag:a})).then(g.promisifyValue)},k.items=[],k.addText=function(a){var b={};return h(b,a),k.add(b)},k.add=function(c){var d=f(c);return a.bbReplaceSpacesWithDashes&&(d=g.replaceSpacesWithDashes(d)),h(c,d),i(c).then(function(){k.items.push(c),b.trigger("tag-added",{$tag:c})}).catch(function(){d&&b.trigger("invalid-tag",{$tag:c})})},k.remove=function(a){var c=k.items[a];return j(c).then(function(){return k.items.splice(a,1),k.clearSelection(),b.trigger("tag-removed",{$tag:c}),c})},k.select=function(a){a<0?a=k.items.length-1:a>=k.items.length&&(a=0),k.index=a,k.selected=k.items[a]},k.selectPrior=function(){k.select(--k.index)},k.selectNext=function(){k.select(++k.index)},k.removeSelected=function(){return k.remove(k.index)},k.clearSelection=function(){k.selected=null,k.index=-1},k.clearSelection(),k}function i(a){return-1!==m.indexOf(a)}function j(e,f,h,i){var j,l,m=[k.enter,k.comma,k.space,k.backspace,k.delete,k.left,k.right],n=e.tagList,o=e.events,p=e.options,q=f.find("input"),r=["bbMinTags","bbMaxTags","bbAllowLeftoverText"];j=function(){i.$setValidity("maxTags",n.items.length<=p.bbMaxTags),i.$setValidity("minTags",n.items.length>=p.bbMinTags),i.$setValidity("leftoverText",!(!e.hasFocus&&!p.bbAllowLeftoverText)||!e.newTag.text())},l=function(){b(function(){q[0].focus()})},i.$isEmpty=function(a){return!a||!a.length},e.newTag={text:function(b){if(!a.isDefined(b))return e.text||"";e.text=b,o.trigger("input-change",b)},invalid:null},e.track=function(a){return a[p.bbKeyProperty||p.bbDisplayProperty]},e.getTagClass=function(a,b){var c=a===n.selected;return[e.tagClass({$tag:a,$index:b,$selected:c}),{selected:c}]},e.$watch("tags",function(a){a?(n.items=g.makeObjectArray(a,p.bbDisplayProperty),e.tags=n.items):n.items=[]}),e.$watch("tags.length",function(){j(),i.$validate()}),h.$observe("disabled",function(a){e.disabled=a}),e.eventHandlers={input:{keydown:function(a){o.trigger("input-keydown",a)},focus:function(){e.hasFocus||(e.hasFocus=!0,o.trigger("input-focus"))},blur:function(){b(function(){var a=c.prop("activeElement"),b=a===q[0],d=f[0].contains(a);!b&&d||(e.hasFocus=!1,o.trigger("input-blur"))})},paste:function(a){a.getTextData=function(){var b=a.clipboardData||a.originalEvent&&a.originalEvent.clipboardData;return b?b.getData("text/plain"):d.clipboardData.getData("Text")},o.trigger("input-paste",a)}},host:{click:function(){e.disabled||l()}},tag:{click:function(a){o.trigger("tag-clicked",{$tag:a})}}},o.on("tag-added",e.onTagAdded).on("invalid-tag",e.onInvalidTag).on("tag-removed",e.onTagRemoved).on("tag-clicked",e.onTagClicked).on("tag-added",function(){e.newTag.text("")}).on("tag-added tag-removed",function(){e.tags=n.items,i.$setDirty(),l()}).on("invalid-tag",function(){e.newTag.invalid=!0}).on("option-change",function(a){-1!==r.indexOf(a.name)&&j()}).on("input-change",function(){n.clearSelection(),e.newTag.invalid=null}).on("input-focus",function(){f.triggerHandler("focus"),i.$setValidity("leftoverText",!0)}).on("input-blur",function(){p.bbAddOnBlur&&!p.bbAddFromAutocompleteOnly&&n.addText(e.newTag.text()),f.triggerHandler("blur"),j()}).on("input-keydown",function(a){var b,c,d,f,h=a.keyCode||a.which,i={};g.isModifierOn(a)||-1===m.indexOf(h)||(i[k.enter]=p.bbAddOnEnter,i[k.comma]=p.bbAddOnComma,i[k.space]=p.bbAddOnSpace,b=!p.bbAddFromAutocompleteOnly&&i[h],c=(h===k.backspace||h===k.delete)&&n.selected,f=h===k.backspace&&0===e.newTag.text().length&&p.bbEnableEditingLastTag,d=(h===k.backspace||h===k.left||h===k.right)&&0===e.newTag.text().length&&!p.bbEnableEditingLastTag,b?n.addText(e.newTag.text()):f?(n.selectPrior(),n.removeSelected().then(function(a){a&&e.newTag.text(a[p.bbDisplayProperty])})):c?n.removeSelected():d&&(h===k.left||h===k.backspace?n.selectPrior():h===k.right&&n.selectNext()),(b||d||c||f)&&a.preventDefault())}).on("input-paste",function(a){if(p.bbAddOnPaste){var b=a.getTextData(),c=b.split(p.bbPasteSplitPattern);c.length>1&&(c.forEach(function(a){n.addText(a)}),a.preventDefault())}})}function n(a,b,c){a.events=g.simplePubSub(),f.load("bbInputTag",a,b,{bbTemplate:[String,"bb/tag-item.html"],bbType:[String,"text",i],bbPlaceholder:[String,"Adicione uma tag"],bbTabindex:[Number,null],bbRemoveTagSymbol:[String,String.fromCharCode(215)],bbReplaceSpacesWithDashes:[Boolean,!0],bbMinLength:[Number,3],bbMaxLength:[Number,l],bbAddOnEnter:[Boolean,!0],bbAddOnSpace:[Boolean,!1],bbAddOnComma:[Boolean,!0],bbAddOnBlur:[Boolean,!0],bbAddOnPaste:[Boolean,!1],bbPasteSplitPattern:[RegExp,/,/],bbAllowedTagsPattern:[RegExp,/.+/],bbEnableEditingLastTag:[Boolean,!1],bbMinTags:[Number,0],bbMaxTags:[Number,l],bbDisplayProperty:[String,"text"],bbKeyProperty:[String,""],bbAllowLeftoverText:[Boolean,!1],bbAddFromAutocompleteOnly:[Boolean,!1],bbSpellcheck:[Boolean,!0]}),a.tagList=new h(a.options,a.events,g.handleUndefinedResult(a.onTagAdding,!0),g.handleUndefinedResult(a.onTagRemoving,!0)),this.registerAutocomplete=function(){c.find("input");return{addTag:function(b){return a.tagList.add(b)},getTags:function(){return a.tagList.items},getCurrentTagText:function(){return a.newTag.text()},getOptions:function(){return a.options},getTemplateScope:function(){return a.templateScope},on:function(b,c){return a.events.on(b,c,!0),this}}},this.registerTagItem=function(){return{getOptions:function(){return a.options},removeTag:function(b){a.disabled||a.tagList.remove(b)}}}}var o={restrict:"E",require:"ngModel",scope:{tags:"=ngModel",text:"=?bbText",templateScope:"=?bbTemplateScope",tagClass:"&bbTagClass",onTagAdding:"&bbOnTagAdding",onTagAdded:"&bbOnTagAdded",onInvalidTag:"&bbOnInvalidTag",onTagRemoving:"&bbOnTagRemoving",onTagRemoved:"&bbOnTagRemoved",onTagClicked:"&bbOnTagClicked"},replace:!1,transclude:!0,templateUrl:"bb/input-tag.html",controller:n,link:j};return n.$inject=["$scope","$attrs","$element"],o}function e(a){function b(b,c,d,e){var f=e.registerTagItem(),g=f.getOptions();b.$$template=g.bbTemplate,b.$$removeTagSymbol=g.bbRemoveTagSymbol,b.$getDisplayText=function(){return a.safeToString(b.data[g.bbDisplayProperty])},b.$removeTag=function(){f.removeTag(b.$index)},b.$watch("$parent.$index",function(a){b.$index=a})}return{restrict:"E",require:"^bbInputTag",template:'<ng-include src="$$template"></ng-include>',scope:{$scope:"=scope",data:"="},link:b}}function f(){return function(a,b,c,d,e){e(function(a){b.append(a)})}}function g(){return function(b,c,d){b.$watch(d.tiBindAttrs,function(b){a.forEach(b,function(a,b){d.$set(b,a)})},!0)}}function h(b){function c(c,d,e,f){var g,h,i=b.getTextAutosizeThreshold();g=a.element('<span class="input"></span>'),g.css("display","none").css("visibility","hidden").css("width","auto").css("white-space","pre"),d.parent().append(g),h=function(b){var c,f=b;return a.isString(f)&&0===f.length&&(f=e.bbPlaceholder),f&&(g.text(f),g.css("display",""),c=g.prop("offsetWidth"),g.css("display","none")),d.css("width",c?c+i+"px":""),b},f.$parsers.unshift(h),f.$formatters.unshift(h),e.$observe("bbPlaceholder",function(a){f.$modelValue||h(a)})}return{restrict:"A",require:"ngModel",link:c}}function i(b,c,d,e,f,g){function h(a,b,c){var d,f,h,i={};return h=function(){return b.bbInputTag.bbKeyProperty||b.bbInputTag.bbDisplayProperty},d=function(a,c){return a.filter(function(a){return!g.findInObjectArray(c,a,h(),function(a,c){return b.bbInputTag.bbReplaceSpacesWithDashes&&(a=g.replaceSpacesWithDashes(a),c=g.replaceSpacesWithDashes(c)),g.defaultComparer(a,c)})})},i.reset=function(){f=null,i.items=[],i.visible=!1,i.index=-1,i.selected=null,i.query=null},i.show=function(){b.bbSelectFirstMatch?i.select(0):i.selected=null,i.visible=!0},i.load=g.debounce(function(c,j){i.query=c;var k=e.when(a({$query:c}));f=k,k.then(function(a){k===f&&(a=g.makeObjectArray(a.data||a,h()),a=d(a,j),i.items=a.slice(0,b.bbMaxResultsToShow),i.items.length>0?i.show():i.reset())})},b.bbDebounceDelay),i.selectNext=function(){i.select(++i.index)},i.selectPrior=function(){i.select(--i.index)},i.select=function(a){a<0?a=i.items.length-1:a>=i.items.length&&(a=0),i.index=a,i.selected=i.items[a],c.trigger("suggestion-selected",a)},i.reset(),i}function i(a,b){var c=a.find("li").eq(b),d=c.parent(),e=c.prop("offsetTop"),f=c.prop("offsetHeight"),g=d.prop("clientHeight"),h=d.prop("scrollTop");e<h?d.prop("scrollTop",e):e+f>g+h&&d.prop("scrollTop",e+f-g)}function j(b,c,d,e){var f,h=[k.enter,k.tab,k.escape,k.up,k.down],j=b.suggestionList,l=e.registerAutocomplete(),m=b.options,n=b.events;m.bbInputTag=l.getOptions(),f=function(a){return a&&a.length>=m.bbMinLength||!a&&m.bbLoadOnEmpty},b.bbTemplateScope=l.getTemplateScope(),b.addSuggestionByIndex=function(a){j.select(a),b.addSuggestion()},b.addSuggestion=function(){var b=!1;return j.selected&&(l.addTag(a.copy(j.selected)),j.reset(),b=!0),b},b.track=function(a){return a[m.bbInputTag.bbKeyProperty||m.bbInputTag.bbDisplayProperty]},b.getSuggestionClass=function(a,c){var d=a===j.selected;return[b.matchClass({$match:a,$index:c,$selected:d}),{selected:d}]},l.on("tag-added tag-removed invalid-tag input-blur",function(){j.reset()}).on("input-change",function(a){f(a)?j.load(a,l.getTags()):j.reset()}).on("input-focus",function(){var a=l.getCurrentTagText();m.bbLoadOnFocus&&f(a)&&j.load(a,l.getTags())}).on("input-keydown",function(a){var c=a.keyCode||a.which,d=!1;if(!g.isModifierOn(a)&&-1!==h.indexOf(c))return j.visible?c===k.down?(j.selectNext(),d=!0):c===k.up?(j.selectPrior(),d=!0):c===k.escape?(j.reset(),d=!0):c!==k.enter&&c!==k.tab||(d=b.addSuggestion()):c===k.down&&b.options.bbLoadOnDownArrow&&(j.load(l.getCurrentTagText(),l.getTags()),d=!0),d?(a.preventDefault(),a.stopImmediatePropagation(),!1):void 0}),n.on("suggestion-selected",function(a){i(c,a)})}function l(a,b,c){a.events=g.simplePubSub(),f.load("bbAutoComplete",a,c,{bbTemplate:[String,"bb/auto-complete-match.html"],bbDebounceDelay:[Number,100],bbMinLength:[Number,3],bbHighlightMatchedText:[Boolean,!0],bbMaxResultsToShow:[Number,10],bbLoadOnDownArrow:[Boolean,!1],bbLoadOnEmpty:[Boolean,!1],bbLoadOnFocus:[Boolean,!1],bbSelectFirstMatch:[Boolean,!0],bbDisplayProperty:[String,""]}),a.suggestionList=new h(a.source,a.options,a.events),this.registerAutocompleteMatch=function(){return{getOptions:function(){return a.options},getQuery:function(){return a.suggestionList.query}}}}var m={restrict:"E",require:"^bbInputTag",scope:{source:"&bbSource",matchClass:"&bbMatchClass"},templateUrl:"bb/auto-complete.html",controller:l,link:j};return l.$inject=["$scope","$element","$attrs"],m}function j(a,b){function c(c,d,e,f){var g=f.registerAutocompleteMatch(),h=g.getOptions();c.$$template=h.bbTemplate,c.$index=c.$parent.$index,c.$highlight=function(c){return h.bbHighlightMatchedText&&(c=b.safeHighlight(c,g.getQuery())),a.trustAsHtml(c)},c.$getDisplayText=function(){return b.safeToString(c.data[h.bbDisplayProperty||h.bbInputTag.bbDisplayProperty])}}return{restrict:"E",require:"^bbAutoComplete",template:'<ng-include src="$$template"></ng-include>',scope:{$scope:"=scope",data:"="},link:c}}a.module("bb.inputTag",["bb.inputTag.tmpl"]).provider("inputTagsConfig",b).factory("tiUtil",c).directive("bbInputTag",d).directive("bbAutoComplete",i).directive("tiTagItem",e).directive("tiTranscludeAppend",f).directive("tiBindAttrs",g).directive("tiAutosize",h).directive("tiAutocompleteMatch",j);var k={backspace:8,tab:9,enter:13,escape:27,space:32,up:38,down:40,left:37,right:39,delete:46,comma:188},l=9007199254740991,m=["text","email","url"];c.$inject=["$timeout","$q"],d.$inject=["$timeout","$document","$window","$q","inputTagsConfig","tiUtil"],e.$inject=["tiUtil"],h.$inject=["inputTagsConfig"],i.$inject=["$document","$timeout","$sce","$q","inputTagsConfig","tiUtil"],j.$inject=["$sce","tiUtil"]}(angular),function(){"use strict";function a(a){function b(b,e){function f(a,b){i.push(a),j.push({scope:a,element:b}),o.forEach(function(b){g(b.trim(),a)}),a.$on("$destroy",h)}function g(b,c){var e=b.match(d),f=c.$eval(e[1]),g=e[2],h=k[b];if(!h){var i=function(b){var c=null;j.some(function(a){var d=a.scope.$eval(m);if(angular.equals(d,b))return c=a,!0}),h.lastActivated!==c&&(h.lastActivated&&a.removeClass(h.lastActivated.element,f),c&&a.addClass(c.element,f),h.lastActivated=c)};k[b]=h={lastActivated:null,scope:c,watchFn:i,compareWithExp:g,watcher:c.$watch(g,i)}}h.watchFn(c.$eval(g))}function h(a){var b=a.targetScope,c=i.indexOf(b);if(i.splice(c,1),j.splice(c,1),i.length){var d=i[0];angular.forEach(k,function(a){a.scope===b&&(a.watcher=d.$watch(a.compareWithExp,a.watchFn),a.scope=d)})}else k={}}var i=[],j=[],k={},l=e.bbIsClass.match(c),m=l[2],n=l[1],o=n.split(",");return f}var c=/^\s*([\s\S]+?)\s+on\s+([\s\S]+?)\s*$/,d=/^\s*([\s\S]+?)\s+for\s+([\s\S]+?)\s*$/;return{compile:b,restrict:"A"}}angular.module("bb.isClass",[]).directive("bbIsClass",a),a.$inject=["$animate"]}(),function(a,b){"object"==typeof exports&&"undefined"!=typeof module?module.exports=b():"function"==typeof define&&define.amd?define(b):a.CodeMirror=b()}(this,function(){"use strict";function a(a){return new RegExp("(^|\\s)"+a+"(?:$|\\s)\\s*")}function b(a){for(var b=a.childNodes.length;b>0;--b)a.removeChild(a.firstChild);return a}function c(a,c){return b(a).appendChild(c)}function d(a,b,c,d){var e=document.createElement(a);if(c&&(e.className=c),d&&(e.style.cssText=d),"string"==typeof b)e.appendChild(document.createTextNode(b));else if(b)for(var f=0;f<b.length;++f)e.appendChild(b[f]);return e}function e(a,b,c,e){var f=d(a,b,c,e);return f.setAttribute("role","presentation"),f}function f(a,b){if(3==b.nodeType&&(b=b.parentNode),a.contains)return a.contains(b);do{if(11==b.nodeType&&(b=b.host),b==a)return!0}while(b=b.parentNode)}function g(){var a;try{a=document.activeElement}catch(b){a=document.body||null}for(;a&&a.shadowRoot&&a.shadowRoot.activeElement;)a=a.shadowRoot.activeElement;return a}function h(b,c){var d=b.className;a(c).test(d)||(b.className+=(d?" ":"")+c)}function i(b,c){for(var d=b.split(" "),e=0;e<d.length;e++)d[e]&&!a(d[e]).test(c)&&(c+=" "+d[e]);return c}function j(a){var b=Array.prototype.slice.call(arguments,1);return function(){return a.apply(null,b)}}function k(a,b,c){b||(b={});for(var d in a)!a.hasOwnProperty(d)||!1===c&&b.hasOwnProperty(d)||(b[d]=a[d]);return b}function l(a,b,c,d,e){null==b&&-1==(b=a.search(/[^\s\u00a0]/))&&(b=a.length);for(var f=d||0,g=e||0;;){var h=a.indexOf("\t",f);if(h<0||h>=b)return g+(b-f);g+=h-f,g+=c-g%c,f=h+1}}function m(a,b){for(var c=0;c<a.length;++c)if(a[c]==b)return c;return-1}function n(a,b,c){for(var d=0,e=0;;){var f=a.indexOf("\t",d);-1==f&&(f=a.length);var g=f-d;if(f==a.length||e+g>=b)return d+Math.min(g,b-e);if(e+=f-d,e+=c-e%c,d=f+1,e>=b)return d}}function o(a){for(;Vg.length<=a;)Vg.push(p(Vg)+" ");return Vg[a]}function p(a){return a[a.length-1]}function q(a,b){for(var c=[],d=0;d<a.length;d++)c[d]=b(a[d],d);return c}function r(a,b,c){for(var d=0,e=c(b);d<a.length&&c(a[d])<=e;)d++;a.splice(d,0,b)}function s(){}function t(a,b){var c;return Object.create?c=Object.create(a):(s.prototype=a,c=new s),b&&k(b,c),c}function u(a){return/\w/.test(a)||a>""&&(a.toUpperCase()!=a.toLowerCase()||Wg.test(a))}function v(a,b){return b?!!(b.source.indexOf("\\w")>-1&&u(a))||b.test(a):u(a)}function w(a){for(var b in a)if(a.hasOwnProperty(b)&&a[b])return!1;return!0}function x(a){return a.charCodeAt(0)>=768&&Xg.test(a)}function y(a,b,c){for(;(c<0?b>0:b<a.length)&&x(a.charAt(b));)b+=c;return b}function z(a,b,c){for(var d=b>c?-1:1;;){if(b==c)return b;var e=(b+c)/2,f=d<0?Math.ceil(e):Math.floor(e);if(f==b)return a(f)?b:c;a(f)?c=f:b=f+d}}function A(a,b,c,d){if(!a)return d(b,c,"ltr",0);for(var e=!1,f=0;f<a.length;++f){var g=a[f];(g.from<c&&g.to>b||b==c&&g.to==b)&&(d(Math.max(g.from,b),Math.min(g.to,c),1==g.level?"rtl":"ltr",f),e=!0)}e||d(b,c,"ltr")}function B(a,b,c){var d;Yg=null;for(var e=0;e<a.length;++e){var f=a[e];if(f.from<b&&f.to>b)return e;f.to==b&&(f.from!=f.to&&"before"==c?d=e:Yg=e),f.from==b&&(f.from!=f.to&&"before"!=c?d=e:Yg=e)}return null!=d?d:Yg}function C(a,b){var c=a.order;return null==c&&(c=a.order=Zg(a.text,b)),c}function D(a,b){return a._handlers&&a._handlers[b]||$g}function E(a,b,c){if(a.removeEventListener)a.removeEventListener(b,c,!1);else if(a.detachEvent)a.detachEvent("on"+b,c);else{var d=a._handlers,e=d&&d[b];if(e){var f=m(e,c);f>-1&&(d[b]=e.slice(0,f).concat(e.slice(f+1)))}}}function F(a,b){var c=D(a,b);if(c.length)for(var d=Array.prototype.slice.call(arguments,2),e=0;e<c.length;++e)c[e].apply(null,d)}function G(a,b,c){return"string"==typeof b&&(b={type:b,preventDefault:function(){this.defaultPrevented=!0}}),F(a,c||b.type,a,b),M(b)||b.codemirrorIgnore}function H(a){var b=a._handlers&&a._handlers.cursorActivity;if(b)for(var c=a.curOp.cursorActivityHandlers||(a.curOp.cursorActivityHandlers=[]),d=0;d<b.length;++d)-1==m(c,b[d])&&c.push(b[d])}function I(a,b){return D(a,b).length>0}function J(a){a.prototype.on=function(a,b){_g(this,a,b)},a.prototype.off=function(a,b){E(this,a,b)}}function K(a){a.preventDefault?a.preventDefault():a.returnValue=!1}function L(a){a.stopPropagation?a.stopPropagation():a.cancelBubble=!0}function M(a){return null!=a.defaultPrevented?a.defaultPrevented:0==a.returnValue}function N(a){K(a),L(a)}function O(a){return a.target||a.srcElement}function P(a){var b=a.which;return null==b&&(1&a.button?b=1:2&a.button?b=3:4&a.button&&(b=2)),Eg&&a.ctrlKey&&1==b&&(b=3),b}function Q(a){if(null==Og){var b=d("span","");c(a,d("span",[b,document.createTextNode("x")])),0!=a.firstChild.offsetHeight&&(Og=b.offsetWidth<=1&&b.offsetHeight>2&&!(sg&&tg<8))}var e=Og?d("span",""):d("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px");return e.setAttribute("cm-text",""),e}function R(a){if(null!=Pg)return Pg;var d=c(a,document.createTextNode("AA")),e=Ig(d,0,1).getBoundingClientRect(),f=Ig(d,1,2).getBoundingClientRect();return b(a),!(!e||e.left==e.right)&&(Pg=f.right-e.right<3)}function S(a){if(null!=eh)return eh;var b=c(a,d("span","x")),e=b.getBoundingClientRect(),f=Ig(b,0,1).getBoundingClientRect();return eh=Math.abs(e.left-f.left)>1}function T(a,b){arguments.length>2&&(b.dependencies=Array.prototype.slice.call(arguments,2)),fh[a]=b}function U(a,b){gh[a]=b}function V(a){if("string"==typeof a&&gh.hasOwnProperty(a))a=gh[a];else if(a&&"string"==typeof a.name&&gh.hasOwnProperty(a.name)){var b=gh[a.name];"string"==typeof b&&(b={name:b}),a=t(b,a),a.name=b.name}else{if("string"==typeof a&&/^[\w\-]+\/[\w\-]+\+xml$/.test(a))return V("application/xml");if("string"==typeof a&&/^[\w\-]+\/[\w\-]+\+json$/.test(a))return V("application/json")}return"string"==typeof a?{name:a}:a||{name:"null"}}function W(a,b){b=V(b);var c=fh[b.name];if(!c)return W(a,"text/plain");var d=c(a,b);if(hh.hasOwnProperty(b.name)){var e=hh[b.name];for(var f in e)e.hasOwnProperty(f)&&(d.hasOwnProperty(f)&&(d["_"+f]=d[f]),d[f]=e[f])}if(d.name=b.name,b.helperType&&(d.helperType=b.helperType),b.modeProps)for(var g in b.modeProps)d[g]=b.modeProps[g];return d}function X(a,b){k(b,hh.hasOwnProperty(a)?hh[a]:hh[a]={})}function Y(a,b){if(!0===b)return b;if(a.copyState)return a.copyState(b);var c={};for(var d in b){var e=b[d];e instanceof Array&&(e=e.concat([])),c[d]=e}return c}function Z(a,b){for(var c;a.innerMode&&(c=a.innerMode(b))&&c.mode!=a;)b=c.state,a=c.mode;return c||{mode:a,state:b}}function $(a,b,c){return!a.startState||a.startState(b,c)}function _(a,b){if((b-=a.first)<0||b>=a.size)throw new Error("There is no line "+(b+a.first)+" in the document.");for(var c=a;!c.lines;)for(var d=0;;++d){var e=c.children[d],f=e.chunkSize();if(b<f){c=e;break}b-=f}return c.lines[b]}function aa(a,b,c){var d=[],e=b.line;return a.iter(b.line,c.line+1,function(a){var f=a.text;e==c.line&&(f=f.slice(0,c.ch)),e==b.line&&(f=f.slice(b.ch)),d.push(f),++e}),d}function ba(a,b,c){var d=[];return a.iter(b,c,function(a){d.push(a.text)}),d}function ca(a,b){var c=b-a.height;if(c)for(var d=a;d;d=d.parent)d.height+=c}function da(a){if(null==a.parent)return null;for(var b=a.parent,c=m(b.lines,a),d=b.parent;d;b=d,d=d.parent)for(var e=0;d.children[e]!=b;++e)c+=d.children[e].chunkSize();return c+b.first}function ea(a,b){var c=a.first;a:do{for(var d=0;d<a.children.length;++d){var e=a.children[d],f=e.height;if(b<f){a=e;continue a}b-=f,c+=e.chunkSize()}return c}while(!a.lines);for(var g=0;g<a.lines.length;++g){var h=a.lines[g],i=h.height;if(b<i)break;b-=i}return c+g}function fa(a,b){return b>=a.first&&b<a.first+a.size}function ga(a,b){return String(a.lineNumberFormatter(b+a.firstLineNumber))}function ha(a,b,c){if(void 0===c&&(c=null),!(this instanceof ha))return new ha(a,b,c);this.line=a,this.ch=b,this.sticky=c}function ia(a,b){return a.line-b.line||a.ch-b.ch}function ja(a,b){return a.sticky==b.sticky&&0==ia(a,b)}function ka(a){return ha(a.line,a.ch)}function la(a,b){return ia(a,b)<0?b:a}function ma(a,b){return ia(a,b)<0?a:b}function na(a,b){return Math.max(a.first,Math.min(b,a.first+a.size-1))}function oa(a,b){if(b.line<a.first)return ha(a.first,0);var c=a.first+a.size-1;return b.line>c?ha(c,_(a,c).text.length):pa(b,_(a,b.line).text.length)}function pa(a,b){var c=a.ch;return null==c||c>b?ha(a.line,b):c<0?ha(a.line,0):a}function qa(a,b){for(var c=[],d=0;d<b.length;d++)c[d]=oa(a,b[d]);return c}function ra(a,b,c,d){var e=[a.state.modeGen],f={};za(a,b.text,a.doc.mode,c,function(a,b){return e.push(a,b)},f,d);for(var g=c.state,h=0;h<a.state.overlays.length;++h)!function(d){c.baseTokens=e;var h=a.state.overlays[d],i=1,j=0;c.state=!0,za(a,b.text,h.mode,c,function(a,b){for(var c=i;j<a;){var d=e[i];d>a&&e.splice(i,1,a,e[i+1],d),i+=2,j=Math.min(a,d)}if(b)if(h.opaque)e.splice(c,i-c,a,"overlay "+b),i=c+2;else for(;c<i;c+=2){var f=e[c+1];e[c+1]=(f?f+" ":"")+"overlay "+b}},f),c.state=g,c.baseTokens=null,c.baseTokenPos=1}(h);return{styles:e,classes:f.bgClass||f.textClass?f:null}}function sa(a,b,c){if(!b.styles||b.styles[0]!=a.state.modeGen){var d=ta(a,da(b)),e=b.text.length>a.options.maxHighlightLength&&Y(a.doc.mode,d.state),f=ra(a,b,d);e&&(d.state=e),b.stateAfter=d.save(!e),b.styles=f.styles,f.classes?b.styleClasses=f.classes:b.styleClasses&&(b.styleClasses=null),c===a.doc.highlightFrontier&&(a.doc.modeFrontier=Math.max(a.doc.modeFrontier,++a.doc.highlightFrontier))}return b.styles}function ta(a,b,c){var d=a.doc,e=a.display;if(!d.mode.startState)return new kh(d,!0,b);var f=Aa(a,b,c),g=f>d.first&&_(d,f-1).stateAfter,h=g?kh.fromSaved(d,g,f):new kh(d,$(d.mode),f);return d.iter(f,b,function(c){ua(a,c.text,h);var d=h.line;c.stateAfter=d==b-1||d%5==0||d>=e.viewFrom&&d<e.viewTo?h.save():null,h.nextLine()}),c&&(d.modeFrontier=h.line),h}function ua(a,b,c,d){var e=a.doc.mode,f=new ih(b,a.options.tabSize,c);for(f.start=f.pos=d||0,""==b&&va(e,c.state);!f.eol();)wa(e,f,c.state),f.start=f.pos}function va(a,b){if(a.blankLine)return a.blankLine(b);if(a.innerMode){var c=Z(a,b);return c.mode.blankLine?c.mode.blankLine(c.state):void 0}}function wa(a,b,c,d){for(var e=0;e<10;e++){d&&(d[0]=Z(a,c).mode);var f=a.token(b,c);if(b.pos>b.start)return f}throw new Error("Mode "+a.name+" failed to advance stream.")}function xa(a,b,c,d){var e,f=a.doc,g=f.mode;b=oa(f,b);var h,i=_(f,b.line),j=ta(a,b.line,c),k=new ih(i.text,a.options.tabSize,j);for(d&&(h=[]);(d||k.pos<b.ch)&&!k.eol();)k.start=k.pos,e=wa(g,k,j.state),d&&h.push(new lh(k,e,Y(f.mode,j.state)));return d?h:new lh(k,e,j.state)}function ya(a,b){if(a)for(;;){var c=a.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!c)break;a=a.slice(0,c.index)+a.slice(c.index+c[0].length);var d=c[1]?"bgClass":"textClass";null==b[d]?b[d]=c[2]:new RegExp("(?:^|s)"+c[2]+"(?:$|s)").test(b[d])||(b[d]+=" "+c[2])}return a}function za(a,b,c,d,e,f,g){var h=c.flattenSpans;null==h&&(h=a.options.flattenSpans);var i,j=0,k=null,l=new ih(b,a.options.tabSize,d),m=a.options.addModeClass&&[null];for(""==b&&ya(va(c,d.state),f);!l.eol();){if(l.pos>a.options.maxHighlightLength?(h=!1,g&&ua(a,b,d,l.pos),l.pos=b.length,i=null):i=ya(wa(c,l,d.state,m),f),m){var n=m[0].name;n&&(i="m-"+(i?n+" "+i:n))}if(!h||k!=i){for(;j<l.start;)j=Math.min(l.start,j+5e3),e(j,k);k=i}l.start=l.pos}for(;j<l.pos;){var o=Math.min(l.pos,j+5e3);e(o,k),j=o}}function Aa(a,b,c){for(var d,e,f=a.doc,g=c?-1:b-(a.doc.mode.innerMode?1e3:100),h=b;h>g;--h){if(h<=f.first)return f.first;var i=_(f,h-1),j=i.stateAfter;if(j&&(!c||h+(j instanceof jh?j.lookAhead:0)<=f.modeFrontier))return h;var k=l(i.text,null,a.options.tabSize);(null==e||d>k)&&(e=h-1,d=k)}return e}function Ba(a,b){if(a.modeFrontier=Math.min(a.modeFrontier,b),!(a.highlightFrontier<b-10)){for(var c=a.first,d=b-1;d>c;d--){var e=_(a,d).stateAfter;if(e&&(!(e instanceof jh)||d+e.lookAhead<b)){c=d+1;break}}a.highlightFrontier=Math.min(a.highlightFrontier,c)}}function Ca(){mh=!0}function Da(){nh=!0}function Ea(a,b,c){this.marker=a,this.from=b,this.to=c}function Fa(a,b){if(a)for(var c=0;c<a.length;++c){var d=a[c];if(d.marker==b)return d}}function Ga(a,b){for(var c,d=0;d<a.length;++d)a[d]!=b&&(c||(c=[])).push(a[d]);return c}function Ha(a,b){a.markedSpans=a.markedSpans?a.markedSpans.concat([b]):[b],b.marker.attachLine(a)}function Ia(a,b,c){var d;if(a)for(var e=0;e<a.length;++e){var f=a[e],g=f.marker,h=null==f.from||(g.inclusiveLeft?f.from<=b:f.from<b);if(h||f.from==b&&"bookmark"==g.type&&(!c||!f.marker.insertLeft)){var i=null==f.to||(g.inclusiveRight?f.to>=b:f.to>b);(d||(d=[])).push(new Ea(g,f.from,i?null:f.to))}}return d}function Ja(a,b,c){var d;if(a)for(var e=0;e<a.length;++e){var f=a[e],g=f.marker,h=null==f.to||(g.inclusiveRight?f.to>=b:f.to>b);if(h||f.from==b&&"bookmark"==g.type&&(!c||f.marker.insertLeft)){var i=null==f.from||(g.inclusiveLeft?f.from<=b:f.from<b);(d||(d=[])).push(new Ea(g,i?null:f.from-b,null==f.to?null:f.to-b))}}return d}function Ka(a,b){if(b.full)return null;var c=fa(a,b.from.line)&&_(a,b.from.line).markedSpans,d=fa(a,b.to.line)&&_(a,b.to.line).markedSpans;if(!c&&!d)return null;var e=b.from.ch,f=b.to.ch,g=0==ia(b.from,b.to),h=Ia(c,e,g),i=Ja(d,f,g),j=1==b.text.length,k=p(b.text).length+(j?e:0);if(h)for(var l=0;l<h.length;++l){var m=h[l];if(null==m.to){var n=Fa(i,m.marker);n?j&&(m.to=null==n.to?null:n.to+k):m.to=e}}if(i)for(var o=0;o<i.length;++o){var q=i[o];if(null!=q.to&&(q.to+=k),null==q.from){var r=Fa(h,q.marker);r||(q.from=k,j&&(h||(h=[])).push(q))}else q.from+=k,j&&(h||(h=[])).push(q)}h&&(h=La(h)),i&&i!=h&&(i=La(i));var s=[h];if(!j){var t,u=b.text.length-2;if(u>0&&h)for(var v=0;v<h.length;++v)null==h[v].to&&(t||(t=[])).push(new Ea(h[v].marker,null,null));for(var w=0;w<u;++w)s.push(t);s.push(i)}return s}function La(a){for(var b=0;b<a.length;++b){var c=a[b];null!=c.from&&c.from==c.to&&!1!==c.marker.clearWhenEmpty&&a.splice(b--,1)}return a.length?a:null}function Ma(a,b,c){var d=null;if(a.iter(b.line,c.line+1,function(a){if(a.markedSpans)for(var b=0;b<a.markedSpans.length;++b){var c=a.markedSpans[b].marker;!c.readOnly||d&&-1!=m(d,c)||(d||(d=[])).push(c)}}),!d)return null;for(var e=[{from:b,to:c}],f=0;f<d.length;++f)for(var g=d[f],h=g.find(0),i=0;i<e.length;++i){var j=e[i];if(!(ia(j.to,h.from)<0||ia(j.from,h.to)>0)){var k=[i,1],l=ia(j.from,h.from),n=ia(j.to,h.to);(l<0||!g.inclusiveLeft&&!l)&&k.push({from:j.from,to:h.from}),(n>0||!g.inclusiveRight&&!n)&&k.push({from:h.to,to:j.to}),e.splice.apply(e,k),i+=k.length-3}}return e}function Na(a){var b=a.markedSpans;if(b){for(var c=0;c<b.length;++c)b[c].marker.detachLine(a);a.markedSpans=null}}function Oa(a,b){if(b){for(var c=0;c<b.length;++c)b[c].marker.attachLine(a);a.markedSpans=b}}function Pa(a){return a.inclusiveLeft?-1:0}function Qa(a){return a.inclusiveRight?1:0}function Ra(a,b){var c=a.lines.length-b.lines.length;if(0!=c)return c;var d=a.find(),e=b.find(),f=ia(d.from,e.from)||Pa(a)-Pa(b);return f?-f:ia(d.to,e.to)||Qa(a)-Qa(b)||b.id-a.id}function Sa(a,b){var c,d=nh&&a.markedSpans;if(d)for(var e=void 0,f=0;f<d.length;++f)e=d[f],e.marker.collapsed&&null==(b?e.from:e.to)&&(!c||Ra(c,e.marker)<0)&&(c=e.marker);return c}function Ta(a){return Sa(a,!0)}function Ua(a){return Sa(a,!1)}function Va(a,b){var c,d=nh&&a.markedSpans;if(d)for(var e=0;e<d.length;++e){var f=d[e];f.marker.collapsed&&(null==f.from||f.from<b)&&(null==f.to||f.to>b)&&(!c||Ra(c,f.marker)<0)&&(c=f.marker)}return c}function Wa(a,b,c,d,e){var f=_(a,b),g=nh&&f.markedSpans;if(g)for(var h=0;h<g.length;++h){var i=g[h];if(i.marker.collapsed){var j=i.marker.find(0),k=ia(j.from,c)||Pa(i.marker)-Pa(e),l=ia(j.to,d)||Qa(i.marker)-Qa(e);if(!(k>=0&&l<=0||k<=0&&l>=0)&&(k<=0&&(i.marker.inclusiveRight&&e.inclusiveLeft?ia(j.to,c)>=0:ia(j.to,c)>0)||k>=0&&(i.marker.inclusiveRight&&e.inclusiveLeft?ia(j.from,d)<=0:ia(j.from,d)<0)))return!0}}}function Xa(a){for(var b;b=Ta(a);)a=b.find(-1,!0).line;return a}function Ya(a){for(var b;b=Ua(a);)a=b.find(1,!0).line;return a}function Za(a){for(var b,c;b=Ua(a);)a=b.find(1,!0).line,(c||(c=[])).push(a);return c}function $a(a,b){var c=_(a,b),d=Xa(c);return c==d?b:da(d)}function _a(a,b){if(b>a.lastLine())return b;var c,d=_(a,b);if(!ab(a,d))return b;for(;c=Ua(d);)d=c.find(1,!0).line;return da(d)+1}function ab(a,b){var c=nh&&b.markedSpans;if(c)for(var d=void 0,e=0;e<c.length;++e)if(d=c[e],d.marker.collapsed){if(null==d.from)return!0;if(!d.marker.widgetNode&&0==d.from&&d.marker.inclusiveLeft&&bb(a,b,d))return!0}}function bb(a,b,c){if(null==c.to){var d=c.marker.find(1,!0);return bb(a,d.line,Fa(d.line.markedSpans,c.marker))}if(c.marker.inclusiveRight&&c.to==b.text.length)return!0;for(var e=void 0,f=0;f<b.markedSpans.length;++f)if(e=b.markedSpans[f],e.marker.collapsed&&!e.marker.widgetNode&&e.from==c.to&&(null==e.to||e.to!=c.from)&&(e.marker.inclusiveLeft||c.marker.inclusiveRight)&&bb(a,b,e))return!0}function cb(a){a=Xa(a);for(var b=0,c=a.parent,d=0;d<c.lines.length;++d){var e=c.lines[d];if(e==a)break;b+=e.height}for(var f=c.parent;f;c=f,f=c.parent)for(var g=0;g<f.children.length;++g){var h=f.children[g];if(h==c)break;b+=h.height}return b}function db(a){if(0==a.height)return 0;for(var b,c=a.text.length,d=a;b=Ta(d);){var e=b.find(0,!0);d=e.from.line,c+=e.from.ch-e.to.ch}for(d=a;b=Ua(d);){var f=b.find(0,!0);c-=d.text.length-f.from.ch,d=f.to.line,c+=d.text.length-f.to.ch}return c}function eb(a){var b=a.display,c=a.doc;b.maxLine=_(c,c.first),b.maxLineLength=db(b.maxLine),b.maxLineChanged=!0,c.iter(function(a){var c=db(a);c>b.maxLineLength&&(b.maxLineLength=c,b.maxLine=a)})}function fb(a,b,c,d){a.text=b,a.stateAfter&&(a.stateAfter=null),a.styles&&(a.styles=null),null!=a.order&&(a.order=null),Na(a),Oa(a,c);var e=d?d(a):1;e!=a.height&&ca(a,e)}function gb(a){a.parent=null,Na(a)}function hb(a,b){if(!a||/^\s*$/.test(a))return null;var c=b.addModeClass?rh:qh;return c[a]||(c[a]=a.replace(/\S+/g,"cm-$&"))}function ib(a,b){var c=e("span",null,null,ug?"padding-right: .1px":null),d={pre:e("pre",[c],"CodeMirror-line"),content:c,col:0,pos:0,cm:a,trailingSpace:!1,splitSpaces:a.getOption("lineWrapping")};b.measure={};for(var f=0;f<=(b.rest?b.rest.length:0);f++){var g=f?b.rest[f-1]:b.line,h=void 0;d.pos=0,d.addToken=kb,R(a.display.measure)&&(h=C(g,a.doc.direction))&&(d.addToken=mb(d.addToken,h)),d.map=[],ob(g,d,sa(a,g,b!=a.display.externalMeasured&&da(g))),g.styleClasses&&(g.styleClasses.bgClass&&(d.bgClass=i(g.styleClasses.bgClass,d.bgClass||"")),g.styleClasses.textClass&&(d.textClass=i(g.styleClasses.textClass,d.textClass||""))),0==d.map.length&&d.map.push(0,0,d.content.appendChild(Q(a.display.measure))),0==f?(b.measure.map=d.map,b.measure.cache={}):((b.measure.maps||(b.measure.maps=[])).push(d.map),(b.measure.caches||(b.measure.caches=[])).push({}))}if(ug){var j=d.content.lastChild
;(/\bcm-tab\b/.test(j.className)||j.querySelector&&j.querySelector(".cm-tab"))&&(d.content.className="cm-tab-wrap-hack")}return F(a,"renderLine",a,b.line,d.pre),d.pre.className&&(d.textClass=i(d.pre.className,d.textClass||"")),d}function jb(a){var b=d("span","","cm-invalidchar");return b.title="\\u"+a.charCodeAt(0).toString(16),b.setAttribute("aria-label",b.title),b}function kb(a,b,c,e,f,g,h){if(b){var i,j=a.splitSpaces?lb(b,a.trailingSpace):b,k=a.cm.state.specialChars,l=!1;if(k.test(b)){i=document.createDocumentFragment();for(var m=0;;){k.lastIndex=m;var n=k.exec(b),p=n?n.index-m:b.length-m;if(p){var q=document.createTextNode(j.slice(m,m+p));sg&&tg<9?i.appendChild(d("span",[q])):i.appendChild(q),a.map.push(a.pos,a.pos+p,q),a.col+=p,a.pos+=p}if(!n)break;m+=p+1;var r=void 0;if("\t"==n[0]){var s=a.cm.options.tabSize,t=s-a.col%s;r=i.appendChild(d("span",o(t),"cm-tab")),r.setAttribute("role","presentation"),r.setAttribute("cm-text","\t"),a.col+=t}else"\r"==n[0]||"\n"==n[0]?(r=i.appendChild(d("span","\r"==n[0]?"":"","cm-invalidchar")),r.setAttribute("cm-text",n[0]),a.col+=1):(r=a.cm.options.specialCharPlaceholder(n[0]),r.setAttribute("cm-text",n[0]),sg&&tg<9?i.appendChild(d("span",[r])):i.appendChild(r),a.col+=1);a.map.push(a.pos,a.pos+1,r),a.pos++}}else a.col+=b.length,i=document.createTextNode(j),a.map.push(a.pos,a.pos+b.length,i),sg&&tg<9&&(l=!0),a.pos+=b.length;if(a.trailingSpace=32==j.charCodeAt(b.length-1),c||e||f||l||g){var u=c||"";e&&(u+=e),f&&(u+=f);var v=d("span",[i],u,g);if(h)for(var w in h)h.hasOwnProperty(w)&&"style"!=w&&"class"!=w&&v.setAttribute(w,h[w]);return a.content.appendChild(v)}a.content.appendChild(i)}}function lb(a,b){if(a.length>1&&!/  /.test(a))return a;for(var c=b,d="",e=0;e<a.length;e++){var f=a.charAt(e);" "!=f||!c||e!=a.length-1&&32!=a.charCodeAt(e+1)||(f=" "),d+=f,c=" "==f}return d}function mb(a,b){return function(c,d,e,f,g,h,i){e=e?e+" cm-force-border":"cm-force-border";for(var j=c.pos,k=j+d.length;;){for(var l=void 0,m=0;m<b.length&&(l=b[m],!(l.to>j&&l.from<=j));m++);if(l.to>=k)return a(c,d,e,f,g,h,i);a(c,d.slice(0,l.to-j),e,f,null,h,i),f=null,d=d.slice(l.to-j),j=l.to}}}function nb(a,b,c,d){var e=!d&&c.widgetNode;e&&a.map.push(a.pos,a.pos+b,e),!d&&a.cm.display.input.needsContentAttribute&&(e||(e=a.content.appendChild(document.createElement("span"))),e.setAttribute("cm-marker",c.id)),e&&(a.cm.display.input.setUneditable(e),a.content.appendChild(e)),a.pos+=b,a.trailingSpace=!1}function ob(a,b,c){var d=a.markedSpans,e=a.text,f=0;if(d)for(var g,h,i,j,k,l,m,n=e.length,o=0,p=1,q="",r=0;;){if(r==o){i=j=k=h="",m=null,l=null,r=1/0;for(var s=[],t=void 0,u=0;u<d.length;++u){var v=d[u],w=v.marker;if("bookmark"==w.type&&v.from==o&&w.widgetNode)s.push(w);else if(v.from<=o&&(null==v.to||v.to>o||w.collapsed&&v.to==o&&v.from==o)){if(null!=v.to&&v.to!=o&&r>v.to&&(r=v.to,j=""),w.className&&(i+=" "+w.className),w.css&&(h=(h?h+";":"")+w.css),w.startStyle&&v.from==o&&(k+=" "+w.startStyle),w.endStyle&&v.to==r&&(t||(t=[])).push(w.endStyle,v.to),w.title&&((m||(m={})).title=w.title),w.attributes)for(var x in w.attributes)(m||(m={}))[x]=w.attributes[x];w.collapsed&&(!l||Ra(l.marker,w)<0)&&(l=v)}else v.from>o&&r>v.from&&(r=v.from)}if(t)for(var y=0;y<t.length;y+=2)t[y+1]==r&&(j+=" "+t[y]);if(!l||l.from==o)for(var z=0;z<s.length;++z)nb(b,0,s[z]);if(l&&(l.from||0)==o){if(nb(b,(null==l.to?n+1:l.to)-o,l.marker,null==l.from),null==l.to)return;l.to==o&&(l=!1)}}if(o>=n)break;for(var A=Math.min(n,r);;){if(q){var B=o+q.length;if(!l){var C=B>A?q.slice(0,A-o):q;b.addToken(b,C,g?g+i:i,k,o+C.length==r?j:"",h,m)}if(B>=A){q=q.slice(A-o),o=A;break}o=B,k=""}q=e.slice(f,f=c[p++]),g=hb(c[p++],b.cm.options)}}else for(var D=1;D<c.length;D+=2)b.addToken(b,e.slice(f,f=c[D]),hb(c[D+1],b.cm.options))}function pb(a,b,c){this.line=b,this.rest=Za(b),this.size=this.rest?da(p(this.rest))-c+1:1,this.node=this.text=null,this.hidden=ab(a,b)}function qb(a,b,c){for(var d,e=[],f=b;f<c;f=d){var g=new pb(a.doc,_(a.doc,f),f);d=f+g.size,e.push(g)}return e}function rb(a){sh?sh.ops.push(a):a.ownsGroup=sh={ops:[a],delayedCallbacks:[]}}function sb(a){var b=a.delayedCallbacks,c=0;do{for(;c<b.length;c++)b[c].call(null);for(var d=0;d<a.ops.length;d++){var e=a.ops[d];if(e.cursorActivityHandlers)for(;e.cursorActivityCalled<e.cursorActivityHandlers.length;)e.cursorActivityHandlers[e.cursorActivityCalled++].call(null,e.cm)}}while(c<b.length)}function tb(a,b){var c=a.ownsGroup;if(c)try{sb(c)}finally{sh=null,b(c)}}function ub(a,b){var c=D(a,b);if(c.length){var d,e=Array.prototype.slice.call(arguments,2);sh?d=sh.delayedCallbacks:th?d=th:(d=th=[],setTimeout(vb,0));for(var f=0;f<c.length;++f)!function(a){d.push(function(){return c[a].apply(null,e)})}(f)}}function vb(){var a=th;th=null;for(var b=0;b<a.length;++b)a[b]()}function wb(a,b,c,d){for(var e=0;e<b.changes.length;e++){var f=b.changes[e];"text"==f?Ab(a,b):"gutter"==f?Cb(a,b,c,d):"class"==f?Bb(a,b):"widget"==f&&Db(a,b,d)}b.changes=null}function xb(a){return a.node==a.text&&(a.node=d("div",null,null,"position: relative"),a.text.parentNode&&a.text.parentNode.replaceChild(a.node,a.text),a.node.appendChild(a.text),sg&&tg<8&&(a.node.style.zIndex=2)),a.node}function yb(a,b){var c=b.bgClass?b.bgClass+" "+(b.line.bgClass||""):b.line.bgClass;if(c&&(c+=" CodeMirror-linebackground"),b.background)c?b.background.className=c:(b.background.parentNode.removeChild(b.background),b.background=null);else if(c){var e=xb(b);b.background=e.insertBefore(d("div",null,c),e.firstChild),a.display.input.setUneditable(b.background)}}function zb(a,b){var c=a.display.externalMeasured;return c&&c.line==b.line?(a.display.externalMeasured=null,b.measure=c.measure,c.built):ib(a,b)}function Ab(a,b){var c=b.text.className,d=zb(a,b);b.text==b.node&&(b.node=d.pre),b.text.parentNode.replaceChild(d.pre,b.text),b.text=d.pre,d.bgClass!=b.bgClass||d.textClass!=b.textClass?(b.bgClass=d.bgClass,b.textClass=d.textClass,Bb(a,b)):c&&(b.text.className=c)}function Bb(a,b){yb(a,b),b.line.wrapClass?xb(b).className=b.line.wrapClass:b.node!=b.text&&(b.node.className="");var c=b.textClass?b.textClass+" "+(b.line.textClass||""):b.line.textClass;b.text.className=c||""}function Cb(a,b,c,e){if(b.gutter&&(b.node.removeChild(b.gutter),b.gutter=null),b.gutterBackground&&(b.node.removeChild(b.gutterBackground),b.gutterBackground=null),b.line.gutterClass){var f=xb(b);b.gutterBackground=d("div",null,"CodeMirror-gutter-background "+b.line.gutterClass,"left: "+(a.options.fixedGutter?e.fixedPos:-e.gutterTotalWidth)+"px; width: "+e.gutterTotalWidth+"px"),a.display.input.setUneditable(b.gutterBackground),f.insertBefore(b.gutterBackground,b.text)}var g=b.line.gutterMarkers;if(a.options.lineNumbers||g){var h=xb(b),i=b.gutter=d("div",null,"CodeMirror-gutter-wrapper","left: "+(a.options.fixedGutter?e.fixedPos:-e.gutterTotalWidth)+"px");if(a.display.input.setUneditable(i),h.insertBefore(i,b.text),b.line.gutterClass&&(i.className+=" "+b.line.gutterClass),!a.options.lineNumbers||g&&g["CodeMirror-linenumbers"]||(b.lineNumber=i.appendChild(d("div",ga(a.options,c),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+e.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+a.display.lineNumInnerWidth+"px"))),g)for(var j=0;j<a.display.gutterSpecs.length;++j){var k=a.display.gutterSpecs[j].className,l=g.hasOwnProperty(k)&&g[k];l&&i.appendChild(d("div",[l],"CodeMirror-gutter-elt","left: "+e.gutterLeft[k]+"px; width: "+e.gutterWidth[k]+"px"))}}}function Db(a,b,c){b.alignable&&(b.alignable=null);for(var d=b.node.firstChild,e=void 0;d;d=e)e=d.nextSibling,"CodeMirror-linewidget"==d.className&&b.node.removeChild(d);Fb(a,b,c)}function Eb(a,b,c,d){var e=zb(a,b);return b.text=b.node=e.pre,e.bgClass&&(b.bgClass=e.bgClass),e.textClass&&(b.textClass=e.textClass),Bb(a,b),Cb(a,b,c,d),Fb(a,b,d),b.node}function Fb(a,b,c){if(Gb(a,b.line,b,c,!0),b.rest)for(var d=0;d<b.rest.length;d++)Gb(a,b.rest[d],b,c,!1)}function Gb(a,b,c,e,f){if(b.widgets)for(var g=xb(c),h=0,i=b.widgets;h<i.length;++h){var j=i[h],k=d("div",[j.node],"CodeMirror-linewidget");j.handleMouseEvents||k.setAttribute("cm-ignore-events","true"),Hb(j,k,c,e),a.display.input.setUneditable(k),f&&j.above?g.insertBefore(k,c.gutter||c.text):g.appendChild(k),ub(j,"redraw")}}function Hb(a,b,c,d){if(a.noHScroll){(c.alignable||(c.alignable=[])).push(b);var e=d.wrapperWidth;b.style.left=d.fixedPos+"px",a.coverGutter||(e-=d.gutterTotalWidth,b.style.paddingLeft=d.gutterTotalWidth+"px"),b.style.width=e+"px"}a.coverGutter&&(b.style.zIndex=5,b.style.position="relative",a.noHScroll||(b.style.marginLeft=-d.gutterTotalWidth+"px"))}function Ib(a){if(null!=a.height)return a.height;var b=a.doc.cm;if(!b)return 0;if(!f(document.body,a.node)){var e="position: relative;";a.coverGutter&&(e+="margin-left: -"+b.display.gutters.offsetWidth+"px;"),a.noHScroll&&(e+="width: "+b.display.wrapper.clientWidth+"px;"),c(b.display.measure,d("div",[a.node],null,e))}return a.height=a.node.parentNode.offsetHeight}function Jb(a,b){for(var c=O(b);c!=a.wrapper;c=c.parentNode)if(!c||1==c.nodeType&&"true"==c.getAttribute("cm-ignore-events")||c.parentNode==a.sizer&&c!=a.mover)return!0}function Kb(a){return a.lineSpace.offsetTop}function Lb(a){return a.mover.offsetHeight-a.lineSpace.offsetHeight}function Mb(a){if(a.cachedPaddingH)return a.cachedPaddingH;var b=c(a.measure,d("pre","x")),e=window.getComputedStyle?window.getComputedStyle(b):b.currentStyle,f={left:parseInt(e.paddingLeft),right:parseInt(e.paddingRight)};return isNaN(f.left)||isNaN(f.right)||(a.cachedPaddingH=f),f}function Nb(a){return Qg-a.display.nativeBarWidth}function Ob(a){return a.display.scroller.clientWidth-Nb(a)-a.display.barWidth}function Pb(a){return a.display.scroller.clientHeight-Nb(a)-a.display.barHeight}function Qb(a,b,c){var d=a.options.lineWrapping,e=d&&Ob(a);if(!b.measure.heights||d&&b.measure.width!=e){var f=b.measure.heights=[];if(d){b.measure.width=e;for(var g=b.text.firstChild.getClientRects(),h=0;h<g.length-1;h++){var i=g[h],j=g[h+1];Math.abs(i.bottom-j.bottom)>2&&f.push((i.bottom+j.top)/2-c.top)}}f.push(c.bottom-c.top)}}function Rb(a,b,c){if(a.line==b)return{map:a.measure.map,cache:a.measure.cache};for(var d=0;d<a.rest.length;d++)if(a.rest[d]==b)return{map:a.measure.maps[d],cache:a.measure.caches[d]};for(var e=0;e<a.rest.length;e++)if(da(a.rest[e])>c)return{map:a.measure.maps[e],cache:a.measure.caches[e],before:!0}}function Sb(a,b){b=Xa(b);var d=da(b),e=a.display.externalMeasured=new pb(a.doc,b,d);e.lineN=d;var f=e.built=ib(a,e);return e.text=f.pre,c(a.display.lineMeasure,f.pre),e}function Tb(a,b,c,d){return Wb(a,Vb(a,b),c,d)}function Ub(a,b){if(b>=a.display.viewFrom&&b<a.display.viewTo)return a.display.view[zc(a,b)];var c=a.display.externalMeasured;return c&&b>=c.lineN&&b<c.lineN+c.size?c:void 0}function Vb(a,b){var c=da(b),d=Ub(a,c);d&&!d.text?d=null:d&&d.changes&&(wb(a,d,c,uc(a)),a.curOp.forceUpdate=!0),d||(d=Sb(a,b));var e=Rb(d,b,c);return{line:b,view:d,rect:null,map:e.map,cache:e.cache,before:e.before,hasHeights:!1}}function Wb(a,b,c,d,e){b.before&&(c=-1);var f,g=c+(d||"");return b.cache.hasOwnProperty(g)?f=b.cache[g]:(b.rect||(b.rect=b.view.text.getBoundingClientRect()),b.hasHeights||(Qb(a,b.view,b.rect),b.hasHeights=!0),f=Zb(a,b,c,d),f.bogus||(b.cache[g]=f)),{left:f.left,right:f.right,top:e?f.rtop:f.top,bottom:e?f.rbottom:f.bottom}}function Xb(a,b,c){for(var d,e,f,g,h,i,j=0;j<a.length;j+=3)if(h=a[j],i=a[j+1],b<h?(e=0,f=1,g="left"):b<i?(e=b-h,f=e+1):(j==a.length-3||b==i&&a[j+3]>b)&&(f=i-h,e=f-1,b>=i&&(g="right")),null!=e){if(d=a[j+2],h==i&&c==(d.insertLeft?"left":"right")&&(g=c),"left"==c&&0==e)for(;j&&a[j-2]==a[j-3]&&a[j-1].insertLeft;)d=a[2+(j-=3)],g="left";if("right"==c&&e==i-h)for(;j<a.length-3&&a[j+3]==a[j+4]&&!a[j+5].insertLeft;)d=a[(j+=3)+2],g="right";break}return{node:d,start:e,end:f,collapse:g,coverStart:h,coverEnd:i}}function Yb(a,b){var c=uh;if("left"==b)for(var d=0;d<a.length&&(c=a[d]).left==c.right;d++);else for(var e=a.length-1;e>=0&&(c=a[e]).left==c.right;e--);return c}function Zb(a,b,c,d){var e,f=Xb(b.map,c,d),g=f.node,h=f.start,i=f.end,j=f.collapse;if(3==g.nodeType){for(var k=0;k<4;k++){for(;h&&x(b.line.text.charAt(f.coverStart+h));)--h;for(;f.coverStart+i<f.coverEnd&&x(b.line.text.charAt(f.coverStart+i));)++i;if(e=sg&&tg<9&&0==h&&i==f.coverEnd-f.coverStart?g.parentNode.getBoundingClientRect():Yb(Ig(g,h,i).getClientRects(),d),e.left||e.right||0==h)break;i=h,h-=1,j="right"}sg&&tg<11&&(e=$b(a.display.measure,e))}else{h>0&&(j=d="right");var l;e=a.options.lineWrapping&&(l=g.getClientRects()).length>1?l["right"==d?l.length-1:0]:g.getBoundingClientRect()}if(sg&&tg<9&&!h&&(!e||!e.left&&!e.right)){var m=g.parentNode.getClientRects()[0];e=m?{left:m.left,right:m.left+tc(a.display),top:m.top,bottom:m.bottom}:uh}for(var n=e.top-b.rect.top,o=e.bottom-b.rect.top,p=(n+o)/2,q=b.view.measure.heights,r=0;r<q.length-1&&!(p<q[r]);r++);var s=r?q[r-1]:0,t=q[r],u={left:("right"==j?e.right:e.left)-b.rect.left,right:("left"==j?e.left:e.right)-b.rect.left,top:s,bottom:t};return e.left||e.right||(u.bogus=!0),a.options.singleCursorHeightPerLine||(u.rtop=n,u.rbottom=o),u}function $b(a,b){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!S(a))return b;var c=screen.logicalXDPI/screen.deviceXDPI,d=screen.logicalYDPI/screen.deviceYDPI;return{left:b.left*c,right:b.right*c,top:b.top*d,bottom:b.bottom*d}}function _b(a){if(a.measure&&(a.measure.cache={},a.measure.heights=null,a.rest))for(var b=0;b<a.rest.length;b++)a.measure.caches[b]={}}function ac(a){a.display.externalMeasure=null,b(a.display.lineMeasure);for(var c=0;c<a.display.view.length;c++)_b(a.display.view[c])}function bc(a){ac(a),a.display.cachedCharWidth=a.display.cachedTextHeight=a.display.cachedPaddingH=null,a.options.lineWrapping||(a.display.maxLineChanged=!0),a.display.lineNumChars=null}function cc(){return wg&&Cg?-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function dc(){return wg&&Cg?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function ec(a){var b=0;if(a.widgets)for(var c=0;c<a.widgets.length;++c)a.widgets[c].above&&(b+=Ib(a.widgets[c]));return b}function fc(a,b,c,d,e){if(!e){var f=ec(b);c.top+=f,c.bottom+=f}if("line"==d)return c;d||(d="local");var g=cb(b);if("local"==d?g+=Kb(a.display):g-=a.display.viewOffset,"page"==d||"window"==d){var h=a.display.lineSpace.getBoundingClientRect();g+=h.top+("window"==d?0:dc());var i=h.left+("window"==d?0:cc());c.left+=i,c.right+=i}return c.top+=g,c.bottom+=g,c}function gc(a,b,c){if("div"==c)return b;var d=b.left,e=b.top;if("page"==c)d-=cc(),e-=dc();else if("local"==c||!c){var f=a.display.sizer.getBoundingClientRect();d+=f.left,e+=f.top}var g=a.display.lineSpace.getBoundingClientRect();return{left:d-g.left,top:e-g.top}}function hc(a,b,c,d,e){return d||(d=_(a.doc,b.line)),fc(a,d,Tb(a,d,b.ch,e),c)}function ic(a,b,c,d,e,f){function g(b,g){var h=Wb(a,e,b,g?"right":"left",f);return g?h.left=h.right:h.right=h.left,fc(a,d,h,c)}function h(a,b,c){var d=i[b],e=1==d.level;return g(c?a-1:a,e!=c)}d=d||_(a.doc,b.line),e||(e=Vb(a,d));var i=C(d,a.doc.direction),j=b.ch,k=b.sticky;if(j>=d.text.length?(j=d.text.length,k="before"):j<=0&&(j=0,k="after"),!i)return g("before"==k?j-1:j,"before"==k);var l=B(i,j,k),m=Yg,n=h(j,l,"before"==k);return null!=m&&(n.other=h(j,m,"before"!=k)),n}function jc(a,b){var c=0;b=oa(a.doc,b),a.options.lineWrapping||(c=tc(a.display)*b.ch);var d=_(a.doc,b.line),e=cb(d)+Kb(a.display);return{left:c,right:c,top:e,bottom:e+d.height}}function kc(a,b,c,d,e){var f=ha(a,b,c);return f.xRel=e,d&&(f.outside=!0),f}function lc(a,b,c){var d=a.doc;if((c+=a.display.viewOffset)<0)return kc(d.first,0,null,!0,-1);var e=ea(d,c),f=d.first+d.size-1;if(e>f)return kc(d.first+d.size-1,_(d,f).text.length,null,!0,1);b<0&&(b=0);for(var g=_(d,e);;){var h=pc(a,g,e,b,c),i=Va(g,h.ch+(h.xRel>0?1:0));if(!i)return h;var j=i.find(1);if(j.line==e)return j;g=_(d,e=j.line)}}function mc(a,b,c,d){d-=ec(b);var e=b.text.length,f=z(function(b){return Wb(a,c,b-1).bottom<=d},e,0);return e=z(function(b){return Wb(a,c,b).top>d},f,e),{begin:f,end:e}}function nc(a,b,c,d){return c||(c=Vb(a,b)),mc(a,b,c,fc(a,b,Wb(a,c,d),"line").top)}function oc(a,b,c,d){return!(a.bottom<=c)&&(a.top>c||(d?a.left:a.right)>b)}function pc(a,b,c,d,e){e-=cb(b);var f=Vb(a,b),g=ec(b),h=0,i=b.text.length,j=!0,k=C(b,a.doc.direction);if(k){var l=(a.options.lineWrapping?rc:qc)(a,b,c,f,k,d,e);j=1!=l.level,h=j?l.from:l.to-1,i=j?l.to:l.from-1}var m,n,o=null,p=null,q=z(function(b){var c=Wb(a,f,b);return c.top+=g,c.bottom+=g,!!oc(c,d,e,!1)&&(c.top<=e&&c.left<=d&&(o=b,p=c),!0)},h,i),r=!1;if(p){var s=d-p.left<p.right-d,t=s==j;q=o+(t?0:1),n=t?"after":"before",m=s?p.left:p.right}else{j||q!=i&&q!=h||q++,n=0==q?"after":q==b.text.length?"before":Wb(a,f,q-(j?1:0)).bottom+g<=e==j?"after":"before";var u=ic(a,ha(c,q,n),"line",b,f);m=u.left,r=e<u.top||e>=u.bottom}return q=y(b.text,q,1),kc(c,q,n,r,d-m)}function qc(a,b,c,d,e,f,g){var h=z(function(h){var i=e[h],j=1!=i.level;return oc(ic(a,ha(c,j?i.to:i.from,j?"before":"after"),"line",b,d),f,g,!0)},0,e.length-1),i=e[h];if(h>0){var j=1!=i.level,k=ic(a,ha(c,j?i.from:i.to,j?"after":"before"),"line",b,d);oc(k,f,g,!0)&&k.top>g&&(i=e[h-1])}return i}function rc(a,b,c,d,e,f,g){var h=mc(a,b,d,g),i=h.begin,j=h.end;/\s/.test(b.text.charAt(j-1))&&j--;for(var k=null,l=null,m=0;m<e.length;m++){var n=e[m];if(!(n.from>=j||n.to<=i)){var o=1!=n.level,p=Wb(a,d,o?Math.min(j,n.to)-1:Math.max(i,n.from)).right,q=p<f?f-p+1e9:p-f;(!k||l>q)&&(k=n,l=q)}}return k||(k=e[e.length-1]),k.from<i&&(k={from:i,to:k.to,level:k.level}),k.to>j&&(k={from:k.from,to:j,level:k.level}),k}function sc(a){if(null!=a.cachedTextHeight)return a.cachedTextHeight;if(null==ph){ph=d("pre");for(var e=0;e<49;++e)ph.appendChild(document.createTextNode("x")),ph.appendChild(d("br"));ph.appendChild(document.createTextNode("x"))}c(a.measure,ph);var f=ph.offsetHeight/50;return f>3&&(a.cachedTextHeight=f),b(a.measure),f||1}function tc(a){if(null!=a.cachedCharWidth)return a.cachedCharWidth;var b=d("span","xxxxxxxxxx"),e=d("pre",[b]);c(a.measure,e);var f=b.getBoundingClientRect(),g=(f.right-f.left)/10;return g>2&&(a.cachedCharWidth=g),g||10}function uc(a){for(var b=a.display,c={},d={},e=b.gutters.clientLeft,f=b.gutters.firstChild,g=0;f;f=f.nextSibling,++g){var h=a.display.gutterSpecs[g].className;c[h]=f.offsetLeft+f.clientLeft+e,d[h]=f.clientWidth}return{fixedPos:vc(b),gutterTotalWidth:b.gutters.offsetWidth,gutterLeft:c,gutterWidth:d,wrapperWidth:b.wrapper.clientWidth}}function vc(a){return a.scroller.getBoundingClientRect().left-a.sizer.getBoundingClientRect().left}function wc(a){var b=sc(a.display),c=a.options.lineWrapping,d=c&&Math.max(5,a.display.scroller.clientWidth/tc(a.display)-3);return function(e){if(ab(a.doc,e))return 0;var f=0;if(e.widgets)for(var g=0;g<e.widgets.length;g++)e.widgets[g].height&&(f+=e.widgets[g].height);return c?f+(Math.ceil(e.text.length/d)||1)*b:f+b}}function xc(a){var b=a.doc,c=wc(a);b.iter(function(a){var b=c(a);b!=a.height&&ca(a,b)})}function yc(a,b,c,d){var e=a.display;if(!c&&"true"==O(b).getAttribute("cm-not-content"))return null;var f,g,h=e.lineSpace.getBoundingClientRect();try{f=b.clientX-h.left,g=b.clientY-h.top}catch(b){return null}var i,j=lc(a,f,g);if(d&&1==j.xRel&&(i=_(a.doc,j.line).text).length==j.ch){var k=l(i,i.length,a.options.tabSize)-i.length;j=ha(j.line,Math.max(0,Math.round((f-Mb(a.display).left)/tc(a.display))-k))}return j}function zc(a,b){if(b>=a.display.viewTo)return null;if((b-=a.display.viewFrom)<0)return null;for(var c=a.display.view,d=0;d<c.length;d++)if((b-=c[d].size)<0)return d}function Ac(a,b,c,d){null==b&&(b=a.doc.first),null==c&&(c=a.doc.first+a.doc.size),d||(d=0);var e=a.display;if(d&&c<e.viewTo&&(null==e.updateLineNumbers||e.updateLineNumbers>b)&&(e.updateLineNumbers=b),a.curOp.viewChanged=!0,b>=e.viewTo)nh&&$a(a.doc,b)<e.viewTo&&Cc(a);else if(c<=e.viewFrom)nh&&_a(a.doc,c+d)>e.viewFrom?Cc(a):(e.viewFrom+=d,e.viewTo+=d);else if(b<=e.viewFrom&&c>=e.viewTo)Cc(a);else if(b<=e.viewFrom){var f=Dc(a,c,c+d,1);f?(e.view=e.view.slice(f.index),e.viewFrom=f.lineN,e.viewTo+=d):Cc(a)}else if(c>=e.viewTo){var g=Dc(a,b,b,-1);g?(e.view=e.view.slice(0,g.index),e.viewTo=g.lineN):Cc(a)}else{var h=Dc(a,b,b,-1),i=Dc(a,c,c+d,1);h&&i?(e.view=e.view.slice(0,h.index).concat(qb(a,h.lineN,i.lineN)).concat(e.view.slice(i.index)),e.viewTo+=d):Cc(a)}var j=e.externalMeasured;j&&(c<j.lineN?j.lineN+=d:b<j.lineN+j.size&&(e.externalMeasured=null))}function Bc(a,b,c){a.curOp.viewChanged=!0;var d=a.display,e=a.display.externalMeasured;if(e&&b>=e.lineN&&b<e.lineN+e.size&&(d.externalMeasured=null),!(b<d.viewFrom||b>=d.viewTo)){var f=d.view[zc(a,b)];if(null!=f.node){var g=f.changes||(f.changes=[]);-1==m(g,c)&&g.push(c)}}}function Cc(a){a.display.viewFrom=a.display.viewTo=a.doc.first,a.display.view=[],a.display.viewOffset=0}function Dc(a,b,c,d){var e,f=zc(a,b),g=a.display.view;if(!nh||c==a.doc.first+a.doc.size)return{index:f,lineN:c};for(var h=a.display.viewFrom,i=0;i<f;i++)h+=g[i].size;if(h!=b){if(d>0){if(f==g.length-1)return null;e=h+g[f].size-b,f++}else e=h-b;b+=e,c+=e}for(;$a(a.doc,c)!=c;){if(f==(d<0?0:g.length-1))return null;c+=d*g[f-(d<0?1:0)].size,f+=d}return{index:f,lineN:c}}function Ec(a,b,c){var d=a.display;0==d.view.length||b>=d.viewTo||c<=d.viewFrom?(d.view=qb(a,b,c),d.viewFrom=b):(d.viewFrom>b?d.view=qb(a,b,d.viewFrom).concat(d.view):d.viewFrom<b&&(d.view=d.view.slice(zc(a,b))),d.viewFrom=b,d.viewTo<c?d.view=d.view.concat(qb(a,d.viewTo,c)):d.viewTo>c&&(d.view=d.view.slice(0,zc(a,c)))),d.viewTo=c}function Fc(a){for(var b=a.display.view,c=0,d=0;d<b.length;d++){var e=b[d];e.hidden||e.node&&!e.changes||++c}return c}function Gc(a){a.display.input.showSelection(a.display.input.prepareSelection())}function Hc(a,b){void 0===b&&(b=!0);for(var c=a.doc,d={},e=d.cursors=document.createDocumentFragment(),f=d.selection=document.createDocumentFragment(),g=0;g<c.sel.ranges.length;g++)if(b||g!=c.sel.primIndex){var h=c.sel.ranges[g];if(!(h.from().line>=a.display.viewTo||h.to().line<a.display.viewFrom)){var i=h.empty();(i||a.options.showCursorWhenSelecting)&&Ic(a,h.head,e),i||Kc(a,h,f)}}return d}function Ic(a,b,c){var e=ic(a,b,"div",null,null,!a.options.singleCursorHeightPerLine),f=c.appendChild(d("div"," ","CodeMirror-cursor"));if(f.style.left=e.left+"px",f.style.top=e.top+"px",f.style.height=Math.max(0,e.bottom-e.top)*a.options.cursorHeight+"px",e.other){var g=c.appendChild(d("div"," ","CodeMirror-cursor CodeMirror-secondarycursor"));g.style.display="",g.style.left=e.other.left+"px",g.style.top=e.other.top+"px",g.style.height=.85*(e.other.bottom-e.other.top)+"px"}}function Jc(a,b){return a.top-b.top||a.left-b.left}function Kc(a,b,c){function e(a,b,c,e){b<0&&(b=0),b=Math.round(b),e=Math.round(e),i.appendChild(d("div",null,"CodeMirror-selected","position: absolute; left: "+a+"px;\n                             top: "+b+"px; width: "+(null==c?l-a:c)+"px;\n                             height: "+(e-b)+"px"))}function f(b,c,d){function f(c,d){return hc(a,ha(b,c),"div",n,d)}function g(b,c,d){var e=nc(a,n,null,b),g="ltr"==c==("after"==d)?"left":"right";return f("after"==d?e.begin:e.end-(/\s/.test(n.text.charAt(e.end-1))?2:1),g)[g]}var i,j,n=_(h,b),o=n.text.length,p=C(n,h.direction);return A(p,c||0,null==d?o:d,function(a,b,h,n){var q="ltr"==h,r=f(a,q?"left":"right"),s=f(b-1,q?"right":"left"),t=null==c&&0==a,u=null==d&&b==o,v=0==n,w=!p||n==p.length-1;if(s.top-r.top<=3){var x=(m?t:u)&&v,y=(m?u:t)&&w,z=x?k:(q?r:s).left,A=y?l:(q?s:r).right;e(z,r.top,A-z,r.bottom)}else{var B,C,D,E;q?(B=m&&t&&v?k:r.left,C=m?l:g(a,h,"before"),D=m?k:g(b,h,"after"),E=m&&u&&w?l:s.right):(B=m?g(a,h,"before"):k,C=!m&&t&&v?l:r.right,D=!m&&u&&w?k:s.left,E=m?g(b,h,"after"):l),e(B,r.top,C-B,r.bottom),r.bottom<s.top&&e(k,r.bottom,null,s.top),e(D,s.top,E-D,s.bottom)}(!i||Jc(r,i)<0)&&(i=r),Jc(s,i)<0&&(i=s),(!j||Jc(r,j)<0)&&(j=r),Jc(s,j)<0&&(j=s)}),{start:i,end:j}}var g=a.display,h=a.doc,i=document.createDocumentFragment(),j=Mb(a.display),k=j.left,l=Math.max(g.sizerWidth,Ob(a)-g.sizer.offsetLeft)-j.right,m="ltr"==h.direction,n=b.from(),o=b.to();if(n.line==o.line)f(n.line,n.ch,o.ch);else{var p=_(h,n.line),q=_(h,o.line),r=Xa(p)==Xa(q),s=f(n.line,n.ch,r?p.text.length+1:null).end,t=f(o.line,r?0:null,o.ch).start;r&&(s.top<t.top-2?(e(s.right,s.top,null,s.bottom),e(k,t.top,t.left,t.bottom)):e(s.right,s.top,t.left-s.right,s.bottom)),s.bottom<t.top&&e(k,s.bottom,null,t.top)}c.appendChild(i)}function Lc(a){if(a.state.focused){var b=a.display;clearInterval(b.blinker);var c=!0;b.cursorDiv.style.visibility="",a.options.cursorBlinkRate>0?b.blinker=setInterval(function(){return b.cursorDiv.style.visibility=(c=!c)?"":"hidden"},a.options.cursorBlinkRate):a.options.cursorBlinkRate<0&&(b.cursorDiv.style.visibility="hidden")}}function Mc(a){a.state.focused||(a.display.input.focus(),Oc(a))}function Nc(a){a.state.delayingBlurEvent=!0,setTimeout(function(){a.state.delayingBlurEvent&&(a.state.delayingBlurEvent=!1,Pc(a))},100)}function Oc(a,b){a.state.delayingBlurEvent&&(a.state.delayingBlurEvent=!1),"nocursor"!=a.options.readOnly&&(a.state.focused||(F(a,"focus",a,b),a.state.focused=!0,h(a.display.wrapper,"CodeMirror-focused"),a.curOp||a.display.selForContextMenu==a.doc.sel||(a.display.input.reset(),ug&&setTimeout(function(){return a.display.input.reset(!0)},20)),a.display.input.receivedFocus()),Lc(a))}function Pc(a,b){a.state.delayingBlurEvent||(a.state.focused&&(F(a,"blur",a,b),a.state.focused=!1,Lg(a.display.wrapper,"CodeMirror-focused")),clearInterval(a.display.blinker),setTimeout(function(){a.state.focused||(a.display.shift=!1)},150))}function Qc(a){for(var b=a.display,c=b.lineDiv.offsetTop,d=0;d<b.view.length;d++){var e=b.view[d],f=a.options.lineWrapping,g=void 0,h=0;if(!e.hidden){if(sg&&tg<8){var i=e.node.offsetTop+e.node.offsetHeight;g=i-c,c=i}else{var j=e.node.getBoundingClientRect();g=j.bottom-j.top,!f&&e.text.firstChild&&(h=e.text.firstChild.getBoundingClientRect().right-j.left-1)}var k=e.line.height-g;if((k>.005||k<-.005)&&(ca(e.line,g),Rc(e.line),e.rest))for(var l=0;l<e.rest.length;l++)Rc(e.rest[l]);if(h>a.display.sizerWidth){var m=Math.ceil(h/tc(a.display));m>a.display.maxLineLength&&(a.display.maxLineLength=m,a.display.maxLine=e.line,a.display.maxLineChanged=!0)}}}}function Rc(a){if(a.widgets)for(var b=0;b<a.widgets.length;++b){var c=a.widgets[b],d=c.node.parentNode;d&&(c.height=d.offsetHeight)}}function Sc(a,b,c){var d=c&&null!=c.top?Math.max(0,c.top):a.scroller.scrollTop;d=Math.floor(d-Kb(a));var e=c&&null!=c.bottom?c.bottom:d+a.wrapper.clientHeight,f=ea(b,d),g=ea(b,e);if(c&&c.ensure){var h=c.ensure.from.line,i=c.ensure.to.line;h<f?(f=h,g=ea(b,cb(_(b,h))+a.wrapper.clientHeight)):Math.min(i,b.lastLine())>=g&&(f=ea(b,cb(_(b,i))-a.wrapper.clientHeight),g=i)}return{from:f,to:Math.max(g,f+1)}}function Tc(a,b){if(!G(a,"scrollCursorIntoView")){var c=a.display,e=c.sizer.getBoundingClientRect(),f=null;if(b.top+e.top<0?f=!0:b.bottom+e.top>(window.innerHeight||document.documentElement.clientHeight)&&(f=!1),null!=f&&!Ag){var g=d("div","",null,"position: absolute;\n                         top: "+(b.top-c.viewOffset-Kb(a.display))+"px;\n                         height: "+(b.bottom-b.top+Nb(a)+c.barHeight)+"px;\n                         left: "+b.left+"px; width: "+Math.max(2,b.right-b.left)+"px;");a.display.lineSpace.appendChild(g),g.scrollIntoView(f),a.display.lineSpace.removeChild(g)}}}function Uc(a,b,c,d){null==d&&(d=0);var e;a.options.lineWrapping||b!=c||(b=b.ch?ha(b.line,"before"==b.sticky?b.ch-1:b.ch,"after"):b,c="before"==b.sticky?ha(b.line,b.ch+1,"before"):b);for(var f=0;f<5;f++){var g=!1,h=ic(a,b),i=c&&c!=b?ic(a,c):h;e={left:Math.min(h.left,i.left),top:Math.min(h.top,i.top)-d,right:Math.max(h.left,i.left),bottom:Math.max(h.bottom,i.bottom)+d};var j=Wc(a,e),k=a.doc.scrollTop,l=a.doc.scrollLeft;if(null!=j.scrollTop&&(bd(a,j.scrollTop),Math.abs(a.doc.scrollTop-k)>1&&(g=!0)),null!=j.scrollLeft&&(dd(a,j.scrollLeft),Math.abs(a.doc.scrollLeft-l)>1&&(g=!0)),!g)break}return e}function Vc(a,b){var c=Wc(a,b);null!=c.scrollTop&&bd(a,c.scrollTop),null!=c.scrollLeft&&dd(a,c.scrollLeft)}function Wc(a,b){var c=a.display,d=sc(a.display);b.top<0&&(b.top=0);var e=a.curOp&&null!=a.curOp.scrollTop?a.curOp.scrollTop:c.scroller.scrollTop,f=Pb(a),g={};b.bottom-b.top>f&&(b.bottom=b.top+f);var h=a.doc.height+Lb(c),i=b.top<d,j=b.bottom>h-d;if(b.top<e)g.scrollTop=i?0:b.top;else if(b.bottom>e+f){var k=Math.min(b.top,(j?h:b.bottom)-f);k!=e&&(g.scrollTop=k)}var l=a.curOp&&null!=a.curOp.scrollLeft?a.curOp.scrollLeft:c.scroller.scrollLeft,m=Ob(a)-(a.options.fixedGutter?c.gutters.offsetWidth:0),n=b.right-b.left>m;return n&&(b.right=b.left+m),b.left<10?g.scrollLeft=0:b.left<l?g.scrollLeft=Math.max(0,b.left-(n?0:10)):b.right>m+l-3&&(g.scrollLeft=b.right+(n?0:10)-m),g}function Xc(a,b){null!=b&&(_c(a),a.curOp.scrollTop=(null==a.curOp.scrollTop?a.doc.scrollTop:a.curOp.scrollTop)+b)}function Yc(a){_c(a);var b=a.getCursor();a.curOp.scrollToPos={from:b,to:b,margin:a.options.cursorScrollMargin}}function Zc(a,b,c){null==b&&null==c||_c(a),null!=b&&(a.curOp.scrollLeft=b),null!=c&&(a.curOp.scrollTop=c)}function $c(a,b){_c(a),a.curOp.scrollToPos=b}function _c(a){var b=a.curOp.scrollToPos;b&&(a.curOp.scrollToPos=null,ad(a,jc(a,b.from),jc(a,b.to),b.margin))}function ad(a,b,c,d){var e=Wc(a,{left:Math.min(b.left,c.left),top:Math.min(b.top,c.top)-d,right:Math.max(b.right,c.right),bottom:Math.max(b.bottom,c.bottom)+d});Zc(a,e.scrollLeft,e.scrollTop)}function bd(a,b){Math.abs(a.doc.scrollTop-b)<2||(og||Bd(a,{top:b}),cd(a,b,!0),og&&Bd(a),ud(a,100))}function cd(a,b,c){b=Math.min(a.display.scroller.scrollHeight-a.display.scroller.clientHeight,b),(a.display.scroller.scrollTop!=b||c)&&(a.doc.scrollTop=b,a.display.scrollbars.setScrollTop(b),a.display.scroller.scrollTop!=b&&(a.display.scroller.scrollTop=b))}function dd(a,b,c,d){b=Math.min(b,a.display.scroller.scrollWidth-a.display.scroller.clientWidth),(c?b==a.doc.scrollLeft:Math.abs(a.doc.scrollLeft-b)<2)&&!d||(a.doc.scrollLeft=b,Fd(a),a.display.scroller.scrollLeft!=b&&(a.display.scroller.scrollLeft=b),a.display.scrollbars.setScrollLeft(b))}function ed(a){var b=a.display,c=b.gutters.offsetWidth,d=Math.round(a.doc.height+Lb(a.display));return{clientHeight:b.scroller.clientHeight,viewHeight:b.wrapper.clientHeight,scrollWidth:b.scroller.scrollWidth,clientWidth:b.scroller.clientWidth,viewWidth:b.wrapper.clientWidth,barLeft:a.options.fixedGutter?c:0,docHeight:d,scrollHeight:d+Nb(a)+b.barHeight,nativeBarWidth:b.nativeBarWidth,gutterWidth:c}}function fd(a,b){b||(b=ed(a));var c=a.display.barWidth,d=a.display.barHeight;gd(a,b);for(var e=0;e<4&&c!=a.display.barWidth||d!=a.display.barHeight;e++)c!=a.display.barWidth&&a.options.lineWrapping&&Qc(a),gd(a,ed(a)),c=a.display.barWidth,d=a.display.barHeight}function gd(a,b){var c=a.display,d=c.scrollbars.update(b);c.sizer.style.paddingRight=(c.barWidth=d.right)+"px",c.sizer.style.paddingBottom=(c.barHeight=d.bottom)+"px",c.heightForcer.style.borderBottom=d.bottom+"px solid transparent",d.right&&d.bottom?(c.scrollbarFiller.style.display="block",c.scrollbarFiller.style.height=d.bottom+"px",c.scrollbarFiller.style.width=d.right+"px"):c.scrollbarFiller.style.display="",d.bottom&&a.options.coverGutterNextToScrollbar&&a.options.fixedGutter?(c.gutterFiller.style.display="block",c.gutterFiller.style.height=d.bottom+"px",c.gutterFiller.style.width=b.gutterWidth+"px"):c.gutterFiller.style.display=""}function hd(a){a.display.scrollbars&&(a.display.scrollbars.clear(),a.display.scrollbars.addClass&&Lg(a.display.wrapper,a.display.scrollbars.addClass)),a.display.scrollbars=new xh[a.options.scrollbarStyle](function(b){a.display.wrapper.insertBefore(b,a.display.scrollbarFiller),_g(b,"mousedown",function(){a.state.focused&&setTimeout(function(){return a.display.input.focus()},0)}),b.setAttribute("cm-not-content","true")},function(b,c){"horizontal"==c?dd(a,b):bd(a,b)},a),a.display.scrollbars.addClass&&h(a.display.wrapper,a.display.scrollbars.addClass)}
function id(a){a.curOp={cm:a,viewChanged:!1,startHeight:a.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++yh},rb(a.curOp)}function jd(a){var b=a.curOp;b&&tb(b,function(a){for(var b=0;b<a.ops.length;b++)a.ops[b].cm.curOp=null;kd(a)})}function kd(a){for(var b=a.ops,c=0;c<b.length;c++)ld(b[c]);for(var d=0;d<b.length;d++)md(b[d]);for(var e=0;e<b.length;e++)nd(b[e]);for(var f=0;f<b.length;f++)od(b[f]);for(var g=0;g<b.length;g++)pd(b[g])}function ld(a){var b=a.cm,c=b.display;wd(b),a.updateMaxLine&&eb(b),a.mustUpdate=a.viewChanged||a.forceUpdate||null!=a.scrollTop||a.scrollToPos&&(a.scrollToPos.from.line<c.viewFrom||a.scrollToPos.to.line>=c.viewTo)||c.maxLineChanged&&b.options.lineWrapping,a.update=a.mustUpdate&&new zh(b,a.mustUpdate&&{top:a.scrollTop,ensure:a.scrollToPos},a.forceUpdate)}function md(a){a.updatedDisplay=a.mustUpdate&&zd(a.cm,a.update)}function nd(a){var b=a.cm,c=b.display;a.updatedDisplay&&Qc(b),a.barMeasure=ed(b),c.maxLineChanged&&!b.options.lineWrapping&&(a.adjustWidthTo=Tb(b,c.maxLine,c.maxLine.text.length).left+3,b.display.sizerWidth=a.adjustWidthTo,a.barMeasure.scrollWidth=Math.max(c.scroller.clientWidth,c.sizer.offsetLeft+a.adjustWidthTo+Nb(b)+b.display.barWidth),a.maxScrollLeft=Math.max(0,c.sizer.offsetLeft+a.adjustWidthTo-Ob(b))),(a.updatedDisplay||a.selectionChanged)&&(a.preparedSelection=c.input.prepareSelection())}function od(a){var b=a.cm;null!=a.adjustWidthTo&&(b.display.sizer.style.minWidth=a.adjustWidthTo+"px",a.maxScrollLeft<b.doc.scrollLeft&&dd(b,Math.min(b.display.scroller.scrollLeft,a.maxScrollLeft),!0),b.display.maxLineChanged=!1);var c=a.focus&&a.focus==g();a.preparedSelection&&b.display.input.showSelection(a.preparedSelection,c),(a.updatedDisplay||a.startHeight!=b.doc.height)&&fd(b,a.barMeasure),a.updatedDisplay&&Ed(b,a.barMeasure),a.selectionChanged&&Lc(b),b.state.focused&&a.updateInput&&b.display.input.reset(a.typing),c&&Mc(a.cm)}function pd(a){var b=a.cm,c=b.display,d=b.doc;a.updatedDisplay&&Ad(b,a.update),null==c.wheelStartX||null==a.scrollTop&&null==a.scrollLeft&&!a.scrollToPos||(c.wheelStartX=c.wheelStartY=null),null!=a.scrollTop&&cd(b,a.scrollTop,a.forceScroll),null!=a.scrollLeft&&dd(b,a.scrollLeft,!0,!0),a.scrollToPos&&Tc(b,Uc(b,oa(d,a.scrollToPos.from),oa(d,a.scrollToPos.to),a.scrollToPos.margin));var e=a.maybeHiddenMarkers,f=a.maybeUnhiddenMarkers;if(e)for(var g=0;g<e.length;++g)e[g].lines.length||F(e[g],"hide");if(f)for(var h=0;h<f.length;++h)f[h].lines.length&&F(f[h],"unhide");c.wrapper.offsetHeight&&(d.scrollTop=b.display.scroller.scrollTop),a.changeObjs&&F(b,"changes",b,a.changeObjs),a.update&&a.update.finish()}function qd(a,b){if(a.curOp)return b();id(a);try{return b()}finally{jd(a)}}function rd(a,b){return function(){if(a.curOp)return b.apply(a,arguments);id(a);try{return b.apply(a,arguments)}finally{jd(a)}}}function sd(a){return function(){if(this.curOp)return a.apply(this,arguments);id(this);try{return a.apply(this,arguments)}finally{jd(this)}}}function td(a){return function(){var b=this.cm;if(!b||b.curOp)return a.apply(this,arguments);id(b);try{return a.apply(this,arguments)}finally{jd(b)}}}function ud(a,b){a.doc.highlightFrontier<a.display.viewTo&&a.state.highlight.set(b,j(vd,a))}function vd(a){var b=a.doc;if(!(b.highlightFrontier>=a.display.viewTo)){var c=+new Date+a.options.workTime,d=ta(a,b.highlightFrontier),e=[];b.iter(d.line,Math.min(b.first+b.size,a.display.viewTo+500),function(f){if(d.line>=a.display.viewFrom){var g=f.styles,h=f.text.length>a.options.maxHighlightLength?Y(b.mode,d.state):null,i=ra(a,f,d,!0);h&&(d.state=h),f.styles=i.styles;var j=f.styleClasses,k=i.classes;k?f.styleClasses=k:j&&(f.styleClasses=null);for(var l=!g||g.length!=f.styles.length||j!=k&&(!j||!k||j.bgClass!=k.bgClass||j.textClass!=k.textClass),m=0;!l&&m<g.length;++m)l=g[m]!=f.styles[m];l&&e.push(d.line),f.stateAfter=d.save(),d.nextLine()}else f.text.length<=a.options.maxHighlightLength&&ua(a,f.text,d),f.stateAfter=d.line%5==0?d.save():null,d.nextLine();if(+new Date>c)return ud(a,a.options.workDelay),!0}),b.highlightFrontier=d.line,b.modeFrontier=Math.max(b.modeFrontier,d.line),e.length&&qd(a,function(){for(var b=0;b<e.length;b++)Bc(a,e[b],"text")})}}function wd(a){var b=a.display;!b.scrollbarsClipped&&b.scroller.offsetWidth&&(b.nativeBarWidth=b.scroller.offsetWidth-b.scroller.clientWidth,b.heightForcer.style.height=Nb(a)+"px",b.sizer.style.marginBottom=-b.nativeBarWidth+"px",b.sizer.style.borderRightWidth=Nb(a)+"px",b.scrollbarsClipped=!0)}function xd(a){if(a.hasFocus())return null;var b=g();if(!b||!f(a.display.lineDiv,b))return null;var c={activeElt:b};if(window.getSelection){var d=window.getSelection();d.anchorNode&&d.extend&&f(a.display.lineDiv,d.anchorNode)&&(c.anchorNode=d.anchorNode,c.anchorOffset=d.anchorOffset,c.focusNode=d.focusNode,c.focusOffset=d.focusOffset)}return c}function yd(a){if(a&&a.activeElt&&a.activeElt!=g()&&(a.activeElt.focus(),a.anchorNode&&f(document.body,a.anchorNode)&&f(document.body,a.focusNode))){var b=window.getSelection(),c=document.createRange();c.setEnd(a.anchorNode,a.anchorOffset),c.collapse(!1),b.removeAllRanges(),b.addRange(c),b.extend(a.focusNode,a.focusOffset)}}function zd(a,c){var d=a.display,e=a.doc;if(c.editorIsHidden)return Cc(a),!1;if(!c.force&&c.visible.from>=d.viewFrom&&c.visible.to<=d.viewTo&&(null==d.updateLineNumbers||d.updateLineNumbers>=d.viewTo)&&d.renderedView==d.view&&0==Fc(a))return!1;Gd(a)&&(Cc(a),c.dims=uc(a));var f=e.first+e.size,g=Math.max(c.visible.from-a.options.viewportMargin,e.first),h=Math.min(f,c.visible.to+a.options.viewportMargin);d.viewFrom<g&&g-d.viewFrom<20&&(g=Math.max(e.first,d.viewFrom)),d.viewTo>h&&d.viewTo-h<20&&(h=Math.min(f,d.viewTo)),nh&&(g=$a(a.doc,g),h=_a(a.doc,h));var i=g!=d.viewFrom||h!=d.viewTo||d.lastWrapHeight!=c.wrapperHeight||d.lastWrapWidth!=c.wrapperWidth;Ec(a,g,h),d.viewOffset=cb(_(a.doc,d.viewFrom)),a.display.mover.style.top=d.viewOffset+"px";var j=Fc(a);if(!i&&0==j&&!c.force&&d.renderedView==d.view&&(null==d.updateLineNumbers||d.updateLineNumbers>=d.viewTo))return!1;var k=xd(a);return j>4&&(d.lineDiv.style.display="none"),Cd(a,d.updateLineNumbers,c.dims),j>4&&(d.lineDiv.style.display=""),d.renderedView=d.view,yd(k),b(d.cursorDiv),b(d.selectionDiv),d.gutters.style.height=d.sizer.style.minHeight=0,i&&(d.lastWrapHeight=c.wrapperHeight,d.lastWrapWidth=c.wrapperWidth,ud(a,400)),d.updateLineNumbers=null,!0}function Ad(a,b){for(var c=b.viewport,d=!0;(d&&a.options.lineWrapping&&b.oldDisplayWidth!=Ob(a)||(c&&null!=c.top&&(c={top:Math.min(a.doc.height+Lb(a.display)-Pb(a),c.top)}),b.visible=Sc(a.display,a.doc,c),!(b.visible.from>=a.display.viewFrom&&b.visible.to<=a.display.viewTo)))&&zd(a,b);d=!1){Qc(a);var e=ed(a);Gc(a),fd(a,e),Ed(a,e),b.force=!1}b.signal(a,"update",a),a.display.viewFrom==a.display.reportedViewFrom&&a.display.viewTo==a.display.reportedViewTo||(b.signal(a,"viewportChange",a,a.display.viewFrom,a.display.viewTo),a.display.reportedViewFrom=a.display.viewFrom,a.display.reportedViewTo=a.display.viewTo)}function Bd(a,b){var c=new zh(a,b);if(zd(a,c)){Qc(a),Ad(a,c);var d=ed(a);Gc(a),fd(a,d),Ed(a,d),c.finish()}}function Cd(a,c,d){function e(b){var c=b.nextSibling;return ug&&Eg&&a.display.currentWheelTarget==b?b.style.display="none":b.parentNode.removeChild(b),c}for(var f=a.display,g=a.options.lineNumbers,h=f.lineDiv,i=h.firstChild,j=f.view,k=f.viewFrom,l=0;l<j.length;l++){var n=j[l];if(n.hidden);else if(n.node&&n.node.parentNode==h){for(;i!=n.node;)i=e(i);var o=g&&null!=c&&c<=k&&n.lineNumber;n.changes&&(m(n.changes,"gutter")>-1&&(o=!1),wb(a,n,k,d)),o&&(b(n.lineNumber),n.lineNumber.appendChild(document.createTextNode(ga(a.options,k)))),i=n.node.nextSibling}else{var p=Eb(a,n,k,d);h.insertBefore(p,i)}k+=n.size}for(;i;)i=e(i)}function Dd(a){var b=a.gutters.offsetWidth;a.sizer.style.marginLeft=b+"px"}function Ed(a,b){a.display.sizer.style.minHeight=b.docHeight+"px",a.display.heightForcer.style.top=b.docHeight+"px",a.display.gutters.style.height=b.docHeight+a.display.barHeight+Nb(a)+"px"}function Fd(a){var b=a.display,c=b.view;if(b.alignWidgets||b.gutters.firstChild&&a.options.fixedGutter){for(var d=vc(b)-b.scroller.scrollLeft+a.doc.scrollLeft,e=b.gutters.offsetWidth,f=d+"px",g=0;g<c.length;g++)if(!c[g].hidden){a.options.fixedGutter&&(c[g].gutter&&(c[g].gutter.style.left=f),c[g].gutterBackground&&(c[g].gutterBackground.style.left=f));var h=c[g].alignable;if(h)for(var i=0;i<h.length;i++)h[i].style.left=f}a.options.fixedGutter&&(b.gutters.style.left=d+e+"px")}}function Gd(a){if(!a.options.lineNumbers)return!1;var b=a.doc,c=ga(a.options,b.first+b.size-1),e=a.display;if(c.length!=e.lineNumChars){var f=e.measure.appendChild(d("div",[d("div",c)],"CodeMirror-linenumber CodeMirror-gutter-elt")),g=f.firstChild.offsetWidth,h=f.offsetWidth-g;return e.lineGutter.style.width="",e.lineNumInnerWidth=Math.max(g,e.lineGutter.offsetWidth-h)+1,e.lineNumWidth=e.lineNumInnerWidth+h,e.lineNumChars=e.lineNumInnerWidth?c.length:-1,e.lineGutter.style.width=e.lineNumWidth+"px",Dd(a.display),!0}return!1}function Hd(a,b){for(var c=[],d=!1,e=0;e<a.length;e++){var f=a[e],g=null;if("string"!=typeof f&&(g=f.style,f=f.className),"CodeMirror-linenumbers"==f){if(!b)continue;d=!0}c.push({className:f,style:g})}return b&&!d&&c.push({className:"CodeMirror-linenumbers",style:null}),c}function Id(a){var c=a.gutters,e=a.gutterSpecs;b(c),a.lineGutter=null;for(var f=0;f<e.length;++f){var g=e[f],h=g.className,i=g.style,j=c.appendChild(d("div",null,"CodeMirror-gutter "+h));i&&(j.style.cssText=i),"CodeMirror-linenumbers"==h&&(a.lineGutter=j,j.style.width=(a.lineNumWidth||1)+"px")}c.style.display=e.length?"":"none",Dd(a)}function Jd(a){Id(a.display),Ac(a),Fd(a)}function Kd(a,b,c,f){var g=this;this.input=c,g.scrollbarFiller=d("div",null,"CodeMirror-scrollbar-filler"),g.scrollbarFiller.setAttribute("cm-not-content","true"),g.gutterFiller=d("div",null,"CodeMirror-gutter-filler"),g.gutterFiller.setAttribute("cm-not-content","true"),g.lineDiv=e("div",null,"CodeMirror-code"),g.selectionDiv=d("div",null,null,"position: relative; z-index: 1"),g.cursorDiv=d("div",null,"CodeMirror-cursors"),g.measure=d("div",null,"CodeMirror-measure"),g.lineMeasure=d("div",null,"CodeMirror-measure"),g.lineSpace=e("div",[g.measure,g.lineMeasure,g.selectionDiv,g.cursorDiv,g.lineDiv],null,"position: relative; outline: none");var h=e("div",[g.lineSpace],"CodeMirror-lines");g.mover=d("div",[h],null,"position: relative"),g.sizer=d("div",[g.mover],"CodeMirror-sizer"),g.sizerWidth=null,g.heightForcer=d("div",null,null,"position: absolute; height: "+Qg+"px; width: 1px;"),g.gutters=d("div",null,"CodeMirror-gutters"),g.lineGutter=null,g.scroller=d("div",[g.sizer,g.heightForcer,g.gutters],"CodeMirror-scroll"),g.scroller.setAttribute("tabIndex","-1"),g.wrapper=d("div",[g.scrollbarFiller,g.gutterFiller,g.scroller],"CodeMirror"),sg&&tg<8&&(g.gutters.style.zIndex=-1,g.scroller.style.paddingRight=0),ug||og&&Dg||(g.scroller.draggable=!0),a&&(a.appendChild?a.appendChild(g.wrapper):a(g.wrapper)),g.viewFrom=g.viewTo=b.first,g.reportedViewFrom=g.reportedViewTo=b.first,g.view=[],g.renderedView=null,g.externalMeasured=null,g.viewOffset=0,g.lastWrapHeight=g.lastWrapWidth=0,g.updateLineNumbers=null,g.nativeBarWidth=g.barHeight=g.barWidth=0,g.scrollbarsClipped=!1,g.lineNumWidth=g.lineNumInnerWidth=g.lineNumChars=null,g.alignWidgets=!1,g.cachedCharWidth=g.cachedTextHeight=g.cachedPaddingH=null,g.maxLine=null,g.maxLineLength=0,g.maxLineChanged=!1,g.wheelDX=g.wheelDY=g.wheelStartX=g.wheelStartY=null,g.shift=!1,g.selForContextMenu=null,g.activeTouch=null,g.gutterSpecs=Hd(f.gutters,f.lineNumbers),Id(g),c.init(g)}function Ld(a){var b=a.wheelDeltaX,c=a.wheelDeltaY;return null==b&&a.detail&&a.axis==a.HORIZONTAL_AXIS&&(b=a.detail),null==c&&a.detail&&a.axis==a.VERTICAL_AXIS?c=a.detail:null==c&&(c=a.wheelDelta),{x:b,y:c}}function Md(a){var b=Ld(a);return b.x*=Bh,b.y*=Bh,b}function Nd(a,b){var c=Ld(b),d=c.x,e=c.y,f=a.display,g=f.scroller,h=g.scrollWidth>g.clientWidth,i=g.scrollHeight>g.clientHeight;if(d&&h||e&&i){if(e&&Eg&&ug)a:for(var j=b.target,k=f.view;j!=g;j=j.parentNode)for(var l=0;l<k.length;l++)if(k[l].node==j){a.display.currentWheelTarget=j;break a}if(d&&!og&&!xg&&null!=Bh)return e&&i&&bd(a,Math.max(0,g.scrollTop+e*Bh)),dd(a,Math.max(0,g.scrollLeft+d*Bh)),(!e||e&&i)&&K(b),void(f.wheelStartX=null);if(e&&null!=Bh){var m=e*Bh,n=a.doc.scrollTop,o=n+f.wrapper.clientHeight;m<0?n=Math.max(0,n+m-50):o=Math.min(a.doc.height,o+m+50),Bd(a,{top:n,bottom:o})}Ah<20&&(null==f.wheelStartX?(f.wheelStartX=g.scrollLeft,f.wheelStartY=g.scrollTop,f.wheelDX=d,f.wheelDY=e,setTimeout(function(){if(null!=f.wheelStartX){var a=g.scrollLeft-f.wheelStartX,b=g.scrollTop-f.wheelStartY,c=b&&f.wheelDY&&b/f.wheelDY||a&&f.wheelDX&&a/f.wheelDX;f.wheelStartX=f.wheelStartY=null,c&&(Bh=(Bh*Ah+c)/(Ah+1),++Ah)}},200)):(f.wheelDX+=d,f.wheelDY+=e))}}function Od(a,b,c){var d=a&&a.options.selectionsMayTouch,e=b[c];b.sort(function(a,b){return ia(a.from(),b.from())}),c=m(b,e);for(var f=1;f<b.length;f++){var g=b[f],h=b[f-1],i=ia(h.to(),g.from());if(d&&!g.empty()?i>0:i>=0){var j=ma(h.from(),g.from()),k=la(h.to(),g.to()),l=h.empty()?g.from()==g.head:h.from()==h.head;f<=c&&--c,b.splice(--f,2,new Dh(l?k:j,l?j:k))}}return new Ch(b,c)}function Pd(a,b){return new Ch([new Dh(a,b||a)],0)}function Qd(a){return a.text?ha(a.from.line+a.text.length-1,p(a.text).length+(1==a.text.length?a.from.ch:0)):a.to}function Rd(a,b){if(ia(a,b.from)<0)return a;if(ia(a,b.to)<=0)return Qd(b);var c=a.line+b.text.length-(b.to.line-b.from.line)-1,d=a.ch;return a.line==b.to.line&&(d+=Qd(b).ch-b.to.ch),ha(c,d)}function Sd(a,b){for(var c=[],d=0;d<a.sel.ranges.length;d++){var e=a.sel.ranges[d];c.push(new Dh(Rd(e.anchor,b),Rd(e.head,b)))}return Od(a.cm,c,a.sel.primIndex)}function Td(a,b,c){return a.line==b.line?ha(c.line,a.ch-b.ch+c.ch):ha(c.line+(a.line-b.line),a.ch)}function Ud(a,b,c){for(var d=[],e=ha(a.first,0),f=e,g=0;g<b.length;g++){var h=b[g],i=Td(h.from,e,f),j=Td(Qd(h),e,f);if(e=h.to,f=j,"around"==c){var k=a.sel.ranges[g],l=ia(k.head,k.anchor)<0;d[g]=new Dh(l?j:i,l?i:j)}else d[g]=new Dh(i,i)}return new Ch(d,a.sel.primIndex)}function Vd(a){a.doc.mode=W(a.options,a.doc.modeOption),Wd(a)}function Wd(a){a.doc.iter(function(a){a.stateAfter&&(a.stateAfter=null),a.styles&&(a.styles=null)}),a.doc.modeFrontier=a.doc.highlightFrontier=a.doc.first,ud(a,100),a.state.modeGen++,a.curOp&&Ac(a)}function Xd(a,b){return 0==b.from.ch&&0==b.to.ch&&""==p(b.text)&&(!a.cm||a.cm.options.wholeLineUpdateBefore)}function Yd(a,b,c,d){function e(a){return c?c[a]:null}function f(a,c,e){fb(a,c,e,d),ub(a,"change",a,b)}function g(a,b){for(var c=[],f=a;f<b;++f)c.push(new oh(j[f],e(f),d));return c}var h=b.from,i=b.to,j=b.text,k=_(a,h.line),l=_(a,i.line),m=p(j),n=e(j.length-1),o=i.line-h.line;if(b.full)a.insert(0,g(0,j.length)),a.remove(j.length,a.size-j.length);else if(Xd(a,b)){var q=g(0,j.length-1);f(l,l.text,n),o&&a.remove(h.line,o),q.length&&a.insert(h.line,q)}else if(k==l)if(1==j.length)f(k,k.text.slice(0,h.ch)+m+k.text.slice(i.ch),n);else{var r=g(1,j.length-1);r.push(new oh(m+k.text.slice(i.ch),n,d)),f(k,k.text.slice(0,h.ch)+j[0],e(0)),a.insert(h.line+1,r)}else if(1==j.length)f(k,k.text.slice(0,h.ch)+j[0]+l.text.slice(i.ch),e(0)),a.remove(h.line+1,o);else{f(k,k.text.slice(0,h.ch)+j[0],e(0)),f(l,m+l.text.slice(i.ch),n);var s=g(1,j.length-1);o>1&&a.remove(h.line+1,o-1),a.insert(h.line+1,s)}ub(a,"change",a,b)}function Zd(a,b,c){function d(a,e,f){if(a.linked)for(var g=0;g<a.linked.length;++g){var h=a.linked[g];if(h.doc!=e){var i=f&&h.sharedHist;c&&!i||(b(h.doc,i),d(h.doc,a,i))}}}d(a,null,!0)}function $d(a,b){if(b.cm)throw new Error("This document is already in use.");a.doc=b,b.cm=a,xc(a),Vd(a),_d(a),a.options.lineWrapping||eb(a),a.options.mode=b.modeOption,Ac(a)}function _d(a){("rtl"==a.doc.direction?h:Lg)(a.display.lineDiv,"CodeMirror-rtl")}function ae(a){qd(a,function(){_d(a),Ac(a)})}function be(a){this.done=[],this.undone=[],this.undoDepth=1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=a||1}function ce(a,b){var c={from:ka(b.from),to:Qd(b),text:aa(a,b.from,b.to)};return je(a,c,b.from.line,b.to.line+1),Zd(a,function(a){return je(a,c,b.from.line,b.to.line+1)},!0),c}function de(a){for(;a.length&&p(a).ranges;)a.pop()}function ee(a,b){return b?(de(a.done),p(a.done)):a.done.length&&!p(a.done).ranges?p(a.done):a.done.length>1&&!a.done[a.done.length-2].ranges?(a.done.pop(),p(a.done)):void 0}function fe(a,b,c,d){var e=a.history;e.undone.length=0;var f,g,h=+new Date;if((e.lastOp==d||e.lastOrigin==b.origin&&b.origin&&("+"==b.origin.charAt(0)&&e.lastModTime>h-(a.cm?a.cm.options.historyEventDelay:500)||"*"==b.origin.charAt(0)))&&(f=ee(e,e.lastOp==d)))g=p(f.changes),0==ia(b.from,b.to)&&0==ia(b.from,g.to)?g.to=Qd(b):f.changes.push(ce(a,b));else{var i=p(e.done);for(i&&i.ranges||ie(a.sel,e.done),f={changes:[ce(a,b)],generation:e.generation},e.done.push(f);e.done.length>e.undoDepth;)e.done.shift(),e.done[0].ranges||e.done.shift()}e.done.push(c),e.generation=++e.maxGeneration,e.lastModTime=e.lastSelTime=h,e.lastOp=e.lastSelOp=d,e.lastOrigin=e.lastSelOrigin=b.origin,g||F(a,"historyAdded")}function ge(a,b,c,d){var e=b.charAt(0);return"*"==e||"+"==e&&c.ranges.length==d.ranges.length&&c.somethingSelected()==d.somethingSelected()&&new Date-a.history.lastSelTime<=(a.cm?a.cm.options.historyEventDelay:500)}function he(a,b,c,d){var e=a.history,f=d&&d.origin;c==e.lastSelOp||f&&e.lastSelOrigin==f&&(e.lastModTime==e.lastSelTime&&e.lastOrigin==f||ge(a,f,p(e.done),b))?e.done[e.done.length-1]=b:ie(b,e.done),e.lastSelTime=+new Date,e.lastSelOrigin=f,e.lastSelOp=c,d&&!1!==d.clearRedo&&de(e.undone)}function ie(a,b){var c=p(b);c&&c.ranges&&c.equals(a)||b.push(a)}function je(a,b,c,d){var e=b["spans_"+a.id],f=0;a.iter(Math.max(a.first,c),Math.min(a.first+a.size,d),function(c){c.markedSpans&&((e||(e=b["spans_"+a.id]={}))[f]=c.markedSpans),++f})}function ke(a){if(!a)return null;for(var b,c=0;c<a.length;++c)a[c].marker.explicitlyCleared?b||(b=a.slice(0,c)):b&&b.push(a[c]);return b?b.length?b:null:a}function le(a,b){var c=b["spans_"+a.id];if(!c)return null;for(var d=[],e=0;e<b.text.length;++e)d.push(ke(c[e]));return d}function me(a,b){var c=le(a,b),d=Ka(a,b);if(!c)return d;if(!d)return c;for(var e=0;e<c.length;++e){var f=c[e],g=d[e];if(f&&g)a:for(var h=0;h<g.length;++h){for(var i=g[h],j=0;j<f.length;++j)if(f[j].marker==i.marker)continue a;f.push(i)}else g&&(c[e]=g)}return c}function ne(a,b,c){for(var d=[],e=0;e<a.length;++e){var f=a[e];if(f.ranges)d.push(c?Ch.prototype.deepCopy.call(f):f);else{var g=f.changes,h=[];d.push({changes:h});for(var i=0;i<g.length;++i){var j=g[i],k=void 0;if(h.push({from:j.from,to:j.to,text:j.text}),b)for(var l in j)(k=l.match(/^spans_(\d+)$/))&&m(b,Number(k[1]))>-1&&(p(h)[l]=j[l],delete j[l])}}}return d}function oe(a,b,c,d){if(d){var e=a.anchor;if(c){var f=ia(b,e)<0;f!=ia(c,e)<0?(e=b,b=c):f!=ia(b,c)<0&&(b=c)}return new Dh(e,b)}return new Dh(c||b,b)}function pe(a,b,c,d,e){null==e&&(e=a.cm&&(a.cm.display.shift||a.extend)),ve(a,new Ch([oe(a.sel.primary(),b,c,e)],0),d)}function qe(a,b,c){for(var d=[],e=a.cm&&(a.cm.display.shift||a.extend),f=0;f<a.sel.ranges.length;f++)d[f]=oe(a.sel.ranges[f],b[f],null,e);ve(a,Od(a.cm,d,a.sel.primIndex),c)}function re(a,b,c,d){var e=a.sel.ranges.slice(0);e[b]=c,ve(a,Od(a.cm,e,a.sel.primIndex),d)}function se(a,b,c,d){ve(a,Pd(b,c),d)}function te(a,b,c){var d={ranges:b.ranges,update:function(b){var c=this;this.ranges=[];for(var d=0;d<b.length;d++)c.ranges[d]=new Dh(oa(a,b[d].anchor),oa(a,b[d].head))},origin:c&&c.origin};return F(a,"beforeSelectionChange",a,d),a.cm&&F(a.cm,"beforeSelectionChange",a.cm,d),d.ranges!=b.ranges?Od(a.cm,d.ranges,d.ranges.length-1):b}function ue(a,b,c){var d=a.history.done,e=p(d);e&&e.ranges?(d[d.length-1]=b,we(a,b,c)):ve(a,b,c)}function ve(a,b,c){we(a,b,c),he(a,a.sel,a.cm?a.cm.curOp.id:NaN,c)}function we(a,b,c){(I(a,"beforeSelectionChange")||a.cm&&I(a.cm,"beforeSelectionChange"))&&(b=te(a,b,c)),xe(a,ze(a,b,c&&c.bias||(ia(b.primary().head,a.sel.primary().head)<0?-1:1),!0)),c&&!1===c.scroll||!a.cm||Yc(a.cm)}function xe(a,b){b.equals(a.sel)||(a.sel=b,a.cm&&(a.cm.curOp.updateInput=1,a.cm.curOp.selectionChanged=!0,H(a.cm)),ub(a,"cursorActivity",a))}function ye(a){xe(a,ze(a,a.sel,null,!1))}function ze(a,b,c,d){for(var e,f=0;f<b.ranges.length;f++){var g=b.ranges[f],h=b.ranges.length==a.sel.ranges.length&&a.sel.ranges[f],i=Be(a,g.anchor,h&&h.anchor,c,d),j=Be(a,g.head,h&&h.head,c,d);(e||i!=g.anchor||j!=g.head)&&(e||(e=b.ranges.slice(0,f)),e[f]=new Dh(i,j))}return e?Od(a.cm,e,b.primIndex):b}function Ae(a,b,c,d,e){var f=_(a,b.line);if(f.markedSpans)for(var g=0;g<f.markedSpans.length;++g){var h=f.markedSpans[g],i=h.marker;if((null==h.from||(i.inclusiveLeft?h.from<=b.ch:h.from<b.ch))&&(null==h.to||(i.inclusiveRight?h.to>=b.ch:h.to>b.ch))){if(e&&(F(i,"beforeCursorEnter"),i.explicitlyCleared)){if(f.markedSpans){--g;continue}break}if(!i.atomic)continue;if(c){var j=i.find(d<0?1:-1),k=void 0;if((d<0?i.inclusiveRight:i.inclusiveLeft)&&(j=Ce(a,j,-d,j&&j.line==b.line?f:null)),j&&j.line==b.line&&(k=ia(j,c))&&(d<0?k<0:k>0))return Ae(a,j,b,d,e)}var l=i.find(d<0?-1:1);return(d<0?i.inclusiveLeft:i.inclusiveRight)&&(l=Ce(a,l,d,l.line==b.line?f:null)),l?Ae(a,l,b,d,e):null}}return b}function Be(a,b,c,d,e){var f=d||1;return Ae(a,b,c,f,e)||!e&&Ae(a,b,c,f,!0)||Ae(a,b,c,-f,e)||!e&&Ae(a,b,c,-f,!0)||(a.cantEdit=!0,ha(a.first,0))}function Ce(a,b,c,d){return c<0&&0==b.ch?b.line>a.first?oa(a,ha(b.line-1)):null:c>0&&b.ch==(d||_(a,b.line)).text.length?b.line<a.first+a.size-1?ha(b.line+1,0):null:new ha(b.line,b.ch+c)}function De(a){a.setSelection(ha(a.firstLine(),0),ha(a.lastLine()),Sg)}function Ee(a,b,c){var d={canceled:!1,from:b.from,to:b.to,text:b.text,origin:b.origin,cancel:function(){return d.canceled=!0}};return c&&(d.update=function(b,c,e,f){b&&(d.from=oa(a,b)),c&&(d.to=oa(a,c)),e&&(d.text=e),void 0!==f&&(d.origin=f)}),F(a,"beforeChange",a,d),a.cm&&F(a.cm,"beforeChange",a.cm,d),d.canceled?(a.cm&&(a.cm.curOp.updateInput=2),null):{from:d.from,to:d.to,text:d.text,origin:d.origin}}function Fe(a,b,c){if(a.cm){if(!a.cm.curOp)return rd(a.cm,Fe)(a,b,c);if(a.cm.state.suppressEdits)return}if(!(I(a,"beforeChange")||a.cm&&I(a.cm,"beforeChange"))||(b=Ee(a,b,!0))){var d=mh&&!c&&Ma(a,b.from,b.to);if(d)for(var e=d.length-1;e>=0;--e)Ge(a,{from:d[e].from,to:d[e].to,text:e?[""]:b.text,origin:b.origin});else Ge(a,b)}}function Ge(a,b){if(1!=b.text.length||""!=b.text[0]||0!=ia(b.from,b.to)){var c=Sd(a,b);fe(a,b,c,a.cm?a.cm.curOp.id:NaN),Je(a,b,c,Ka(a,b));var d=[];Zd(a,function(a,c){c||-1!=m(d,a.history)||(Oe(a.history,b),d.push(a.history)),Je(a,b,null,Ka(a,b))})}}function He(a,b,c){var d=a.cm&&a.cm.state.suppressEdits;if(!d||c){for(var e,f=a.history,g=a.sel,h="undo"==b?f.done:f.undone,i="undo"==b?f.undone:f.done,j=0;j<h.length&&(e=h[j],c?!e.ranges||e.equals(a.sel):e.ranges);j++);if(j!=h.length){for(f.lastOrigin=f.lastSelOrigin=null;;){if(e=h.pop(),!e.ranges){if(d)return void h.push(e);break}if(ie(e,i),c&&!e.equals(a.sel))return void ve(a,e,{clearRedo:!1});g=e}var k=[];ie(g,i),i.push({changes:k,generation:f.generation}),f.generation=e.generation||++f.maxGeneration;for(var l=I(a,"beforeChange")||a.cm&&I(a.cm,"beforeChange"),n=e.changes.length-1;n>=0;--n){var o=function(c){var d=e.changes[c];if(d.origin=b,l&&!Ee(a,d,!1))return h.length=0,{};k.push(ce(a,d));var f=c?Sd(a,d):p(h);Je(a,d,f,me(a,d)),!c&&a.cm&&a.cm.scrollIntoView({from:d.from,to:Qd(d)});var g=[];Zd(a,function(a,b){b||-1!=m(g,a.history)||(Oe(a.history,d),g.push(a.history)),Je(a,d,null,me(a,d))})}(n);if(o)return o.v}}}}function Ie(a,b){if(0!=b&&(a.first+=b,a.sel=new Ch(q(a.sel.ranges,function(a){return new Dh(ha(a.anchor.line+b,a.anchor.ch),ha(a.head.line+b,a.head.ch))}),a.sel.primIndex),a.cm)){Ac(a.cm,a.first,a.first-b,b);for(var c=a.cm.display,d=c.viewFrom;d<c.viewTo;d++)Bc(a.cm,d,"gutter")}}function Je(a,b,c,d){if(a.cm&&!a.cm.curOp)return rd(a.cm,Je)(a,b,c,d);if(b.to.line<a.first)return void Ie(a,b.text.length-1-(b.to.line-b.from.line));if(!(b.from.line>a.lastLine())){if(b.from.line<a.first){var e=b.text.length-1-(a.first-b.from.line);Ie(a,e),b={from:ha(a.first,0),to:ha(b.to.line+e,b.to.ch),text:[p(b.text)],origin:b.origin}}var f=a.lastLine();b.to.line>f&&(b={from:b.from,to:ha(f,_(a,f).text.length),text:[b.text[0]],origin:b.origin}),b.removed=aa(a,b.from,b.to),c||(c=Sd(a,b)),a.cm?Ke(a.cm,b,d):Yd(a,b,d),we(a,c,Sg)}}function Ke(a,b,c){var d=a.doc,e=a.display,f=b.from,g=b.to,h=!1,i=f.line;a.options.lineWrapping||(i=da(Xa(_(d,f.line))),d.iter(i,g.line+1,function(a){if(a==e.maxLine)return h=!0,!0})),d.sel.contains(b.from,b.to)>-1&&H(a),Yd(d,b,c,wc(a)),a.options.lineWrapping||(d.iter(i,f.line+b.text.length,function(a){var b=db(a);b>e.maxLineLength&&(e.maxLine=a,e.maxLineLength=b,e.maxLineChanged=!0,h=!1)}),h&&(a.curOp.updateMaxLine=!0)),Ba(d,f.line),ud(a,400);var j=b.text.length-(g.line-f.line)-1;b.full?Ac(a):f.line!=g.line||1!=b.text.length||Xd(a.doc,b)?Ac(a,f.line,g.line+1,j):Bc(a,f.line,"text");var k=I(a,"changes"),l=I(a,"change");if(l||k){var m={from:f,to:g,text:b.text,removed:b.removed,origin:b.origin};l&&ub(a,"change",a,m),k&&(a.curOp.changeObjs||(a.curOp.changeObjs=[])).push(m)}a.display.selForContextMenu=null}function Le(a,b,c,d,e){var f;d||(d=c),ia(d,c)<0&&(f=[d,c],c=f[0],d=f[1]),"string"==typeof b&&(b=a.splitLines(b)),Fe(a,{from:c,to:d,text:b,origin:e})}function Me(a,b,c,d){c<a.line?a.line+=d:b<a.line&&(a.line=b,a.ch=0)}function Ne(a,b,c,d){for(var e=0;e<a.length;++e){var f=a[e],g=!0;if(f.ranges){f.copied||(f=a[e]=f.deepCopy(),f.copied=!0);for(var h=0;h<f.ranges.length;h++)Me(f.ranges[h].anchor,b,c,d),Me(f.ranges[h].head,b,c,d)}else{for(var i=0;i<f.changes.length;++i){var j=f.changes[i];if(c<j.from.line)j.from=ha(j.from.line+d,j.from.ch),j.to=ha(j.to.line+d,j.to.ch);else if(b<=j.to.line){g=!1;break}}g||(a.splice(0,e+1),e=0)}}}function Oe(a,b){var c=b.from.line,d=b.to.line,e=b.text.length-(d-c)-1;Ne(a.done,c,d,e),Ne(a.undone,c,d,e)}function Pe(a,b,c,d){var e=b,f=b;return"number"==typeof b?f=_(a,na(a,b)):e=da(b),null==e?null:(d(f,e)&&a.cm&&Bc(a.cm,e,c),f)}function Qe(a){var b=this;this.lines=a,this.parent=null;for(var c=0,d=0;d<a.length;++d)a[d].parent=b,c+=a[d].height;this.height=c}function Re(a){var b=this;this.children=a;for(var c=0,d=0,e=0;e<a.length;++e){var f=a[e];c+=f.chunkSize(),d+=f.height,f.parent=b}this.size=c,this.height=d,this.parent=null}function Se(a,b,c){cb(b)<(a.curOp&&a.curOp.scrollTop||a.doc.scrollTop)&&Xc(a,c)}function Te(a,b,c,d){var e=new Eh(a,c,d),f=a.cm;return f&&e.noHScroll&&(f.display.alignWidgets=!0),Pe(a,b,"widget",function(b){var c=b.widgets||(b.widgets=[]);if(null==e.insertAt?c.push(e):c.splice(Math.min(c.length-1,Math.max(0,e.insertAt)),0,e),e.line=b,f&&!ab(a,b)){var d=cb(b)<a.scrollTop;ca(b,b.height+Ib(e)),d&&Xc(f,e.height),f.curOp.forceUpdate=!0}return!0}),f&&ub(f,"lineWidgetAdded",f,e,"number"==typeof b?b:da(b)),e}function Ue(a,b,c,d,f){if(d&&d.shared)return Ve(a,b,c,d,f);if(a.cm&&!a.cm.curOp)return rd(a.cm,Ue)(a,b,c,d,f);var g=new Gh(a,f),h=ia(b,c);if(d&&k(d,g,!1),h>0||0==h&&!1!==g.clearWhenEmpty)return g;if(g.replacedWith&&(g.collapsed=!0,g.widgetNode=e("span",[g.replacedWith],"CodeMirror-widget"),d.handleMouseEvents||g.widgetNode.setAttribute("cm-ignore-events","true"),d.insertLeft&&(g.widgetNode.insertLeft=!0)),g.collapsed){if(Wa(a,b.line,b,c,g)||b.line!=c.line&&Wa(a,c.line,b,c,g))throw new Error("Inserting collapsed marker partially overlapping an existing one");Da()}g.addToHistory&&fe(a,{from:b,to:c,origin:"markText"},a.sel,NaN);var i,j=b.line,l=a.cm;if(a.iter(j,c.line+1,function(a){l&&g.collapsed&&!l.options.lineWrapping&&Xa(a)==l.display.maxLine&&(i=!0),g.collapsed&&j!=b.line&&ca(a,0),Ha(a,new Ea(g,j==b.line?b.ch:null,j==c.line?c.ch:null)),++j}),g.collapsed&&a.iter(b.line,c.line+1,function(b){ab(a,b)&&ca(b,0)}),g.clearOnEnter&&_g(g,"beforeCursorEnter",function(){return g.clear()}),g.readOnly&&(Ca(),(a.history.done.length||a.history.undone.length)&&a.clearHistory()),g.collapsed&&(g.id=++Fh,g.atomic=!0),l){if(i&&(l.curOp.updateMaxLine=!0),g.collapsed)Ac(l,b.line,c.line+1);else if(g.className||g.startStyle||g.endStyle||g.css||g.attributes||g.title)for(var m=b.line;m<=c.line;m++)Bc(l,m,"text");g.atomic&&ye(l.doc),ub(l,"markerAdded",l,g)}return g}function Ve(a,b,c,d,e){d=k(d),d.shared=!1;var f=[Ue(a,b,c,d,e)],g=f[0],h=d.widgetNode;return Zd(a,function(a){h&&(d.widgetNode=h.cloneNode(!0)),f.push(Ue(a,oa(a,b),oa(a,c),d,e));for(var i=0;i<a.linked.length;++i)if(a.linked[i].isParent)return;g=p(f)}),new Hh(f,g)}function We(a){return a.findMarks(ha(a.first,0),a.clipPos(ha(a.lastLine())),function(a){return a.parent})}function Xe(a,b){for(var c=0;c<b.length;c++){var d=b[c],e=d.find(),f=a.clipPos(e.from),g=a.clipPos(e.to);if(ia(f,g)){var h=Ue(a,f,g,d.primary,d.primary.type);d.markers.push(h),h.parent=d}}}function Ye(a){for(var b=0;b<a.length;b++)!function(b){var c=a[b],d=[c.primary.doc];Zd(c.primary.doc,function(a){return d.push(a)});for(var e=0;e<c.markers.length;e++){var f=c.markers[e];-1==m(d,f.doc)&&(f.parent=null,c.markers.splice(e--,1))}}(b)}function Ze(a){var b=this;if(af(b),!G(b,a)&&!Jb(b.display,a)){K(a),sg&&(Kh=+new Date);var c=yc(b,a,!0),d=a.dataTransfer.files;if(c&&!b.isReadOnly())if(d&&d.length&&window.FileReader&&window.File)for(var e=d.length,f=Array(e),g=0,h=0;h<e;++h)!function(a,d){if(!b.options.allowDropFileTypes||-1!=m(b.options.allowDropFileTypes,a.type)){var h=new FileReader;h.onload=rd(b,function(){var a=h.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(a)&&(a=""),f[d]=a,++g==e){c=oa(b.doc,c);var i={from:c,to:c,text:b.doc.splitLines(f.join(b.doc.lineSeparator())),origin:"paste"};Fe(b.doc,i),ue(b.doc,Pd(c,Qd(i)))}}),h.readAsText(a)}}(d[h],h);else{if(b.state.draggingText&&b.doc.sel.contains(c)>-1)return b.state.draggingText(a),void setTimeout(function(){return b.display.input.focus()},20);try{var i=a.dataTransfer.getData("Text");if(i){var j;if(b.state.draggingText&&!b.state.draggingText.copy&&(j=b.listSelections()),we(b.doc,Pd(c,c)),j)for(var k=0;k<j.length;++k)Le(b.doc,"",j[k].anchor,j[k].head,"drag");b.replaceSelection(i,"around","paste"),b.display.input.focus()}}catch(a){}}}}function $e(a,b){if(sg&&(!a.state.draggingText||+new Date-Kh<100))return void N(b);if(!G(a,b)&&!Jb(a.display,b)&&(b.dataTransfer.setData("Text",a.getSelection()),b.dataTransfer.effectAllowed="copyMove",b.dataTransfer.setDragImage&&!yg)){var c=d("img",null,null,"position: fixed; left: 0; top: 0;");c.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",xg&&(c.width=c.height=1,a.display.wrapper.appendChild(c),c._top=c.offsetTop),b.dataTransfer.setDragImage(c,0,0),xg&&c.parentNode.removeChild(c)}}function _e(a,b){var e=yc(a,b);if(e){var f=document.createDocumentFragment();Ic(a,e,f),a.display.dragCursor||(a.display.dragCursor=d("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),a.display.lineSpace.insertBefore(a.display.dragCursor,a.display.cursorDiv)),c(a.display.dragCursor,f)}}function af(a){a.display.dragCursor&&(a.display.lineSpace.removeChild(a.display.dragCursor),a.display.dragCursor=null)}function bf(a){if(document.getElementsByClassName){for(var b=document.getElementsByClassName("CodeMirror"),c=[],d=0;d<b.length;d++){var e=b[d].CodeMirror;e&&c.push(e)}c.length&&c[0].operation(function(){for(var b=0;b<c.length;b++)a(c[b])})}}function cf(){Lh||(df(),Lh=!0)}function df(){var a;_g(window,"resize",function(){null==a&&(a=setTimeout(function(){a=null,bf(ef)},100))}),_g(window,"blur",function(){return bf(Pc)})}function ef(a){var b=a.display;b.cachedCharWidth=b.cachedTextHeight=b.cachedPaddingH=null,b.scrollbarsClipped=!1,a.setSize()}function ff(a){var b=a.split(/-(?!$)/);a=b[b.length-1];for(var c,d,e,f,g=0;g<b.length-1;g++){var h=b[g];if(/^(cmd|meta|m)$/i.test(h))f=!0;else if(/^a(lt)?$/i.test(h))c=!0;else if(/^(c|ctrl|control)$/i.test(h))d=!0;else{if(!/^s(hift)?$/i.test(h))throw new Error("Unrecognized modifier name: "+h);e=!0}}
return c&&(a="Alt-"+a),d&&(a="Ctrl-"+a),f&&(a="Cmd-"+a),e&&(a="Shift-"+a),a}function gf(a){var b={};for(var c in a)if(a.hasOwnProperty(c)){var d=a[c];if(/^(name|fallthrough|(de|at)tach)$/.test(c))continue;if("..."==d){delete a[c];continue}for(var e=q(c.split(" "),ff),f=0;f<e.length;f++){var g=void 0,h=void 0;f==e.length-1?(h=e.join(" "),g=d):(h=e.slice(0,f+1).join(" "),g="...");var i=b[h];if(i){if(i!=g)throw new Error("Inconsistent bindings for "+h)}else b[h]=g}delete a[c]}for(var j in b)a[j]=b[j];return a}function hf(a,b,c,d){b=mf(b);var e=b.call?b.call(a,d):b[a];if(!1===e)return"nothing";if("..."===e)return"multi";if(null!=e&&c(e))return"handled";if(b.fallthrough){if("[object Array]"!=Object.prototype.toString.call(b.fallthrough))return hf(a,b.fallthrough,c,d);for(var f=0;f<b.fallthrough.length;f++){var g=hf(a,b.fallthrough[f],c,d);if(g)return g}}}function jf(a){var b="string"==typeof a?a:Mh[a.keyCode];return"Ctrl"==b||"Alt"==b||"Shift"==b||"Mod"==b}function kf(a,b,c){var d=a;return b.altKey&&"Alt"!=d&&(a="Alt-"+a),(Jg?b.metaKey:b.ctrlKey)&&"Ctrl"!=d&&(a="Ctrl-"+a),(Jg?b.ctrlKey:b.metaKey)&&"Cmd"!=d&&(a="Cmd-"+a),!c&&b.shiftKey&&"Shift"!=d&&(a="Shift-"+a),a}function lf(a,b){if(xg&&34==a.keyCode&&a.char)return!1;var c=Mh[a.keyCode];return null!=c&&!a.altGraphKey&&(3==a.keyCode&&a.code&&(c=a.code),kf(c,a,b))}function mf(a){return"string"==typeof a?Qh[a]:a}function nf(a,b){for(var c=a.doc.sel.ranges,d=[],e=0;e<c.length;e++){for(var f=b(c[e]);d.length&&ia(f.from,p(d).to)<=0;){var g=d.pop();if(ia(g.from,f.from)<0){f.from=g.from;break}}d.push(f)}qd(a,function(){for(var b=d.length-1;b>=0;b--)Le(a.doc,"",d[b].from,d[b].to,"+delete");Yc(a)})}function of(a,b,c){var d=y(a.text,b+c,c);return d<0||d>a.text.length?null:d}function pf(a,b,c){var d=of(a,b.ch,c);return null==d?null:new ha(b.line,d,c<0?"after":"before")}function qf(a,b,c,d,e){if(a){var f=C(c,b.doc.direction);if(f){var g,h=e<0?p(f):f[0],i=e<0==(1==h.level),j=i?"after":"before";if(h.level>0||"rtl"==b.doc.direction){var k=Vb(b,c);g=e<0?c.text.length-1:0;var l=Wb(b,k,g).top;g=z(function(a){return Wb(b,k,a).top==l},e<0==(1==h.level)?h.from:h.to-1,g),"before"==j&&(g=of(c,g,1))}else g=e<0?h.to:h.from;return new ha(d,g,j)}}return new ha(d,e<0?c.text.length:0,e<0?"before":"after")}function rf(a,b,c,d){var e=C(b,a.doc.direction);if(!e)return pf(b,c,d);c.ch>=b.text.length?(c.ch=b.text.length,c.sticky="before"):c.ch<=0&&(c.ch=0,c.sticky="after");var f=B(e,c.ch,c.sticky),g=e[f];if("ltr"==a.doc.direction&&g.level%2==0&&(d>0?g.to>c.ch:g.from<c.ch))return pf(b,c,d);var h,i=function(a,c){return of(b,a instanceof ha?a.ch:a,c)},j=function(c){return a.options.lineWrapping?(h=h||Vb(a,b),nc(a,b,h,c)):{begin:0,end:b.text.length}},k=j("before"==c.sticky?i(c,-1):c.ch);if("rtl"==a.doc.direction||1==g.level){var l=1==g.level==d<0,m=i(c,l?1:-1);if(null!=m&&(l?m<=g.to&&m<=k.end:m>=g.from&&m>=k.begin)){var n=l?"before":"after";return new ha(c.line,m,n)}}var o=function(a,b,d){for(var f=function(a,b){return b?new ha(c.line,i(a,1),"before"):new ha(c.line,a,"after")};a>=0&&a<e.length;a+=b){var g=e[a],h=b>0==(1!=g.level),j=h?d.begin:i(d.end,-1);if(g.from<=j&&j<g.to)return f(j,h);if(j=h?g.from:i(g.to,-1),d.begin<=j&&j<d.end)return f(j,h)}},p=o(f+d,d,k);if(p)return p;var q=d>0?k.end:i(k.begin,-1);return null==q||d>0&&q==b.text.length||!(p=o(d>0?0:e.length-1,d,j(q)))?null:p}function sf(a,b){var c=_(a.doc,b),d=Xa(c);return d!=c&&(b=da(d)),qf(!0,a,d,b,1)}function tf(a,b){var c=_(a.doc,b),d=Ya(c);return d!=c&&(b=da(d)),qf(!0,a,c,b,-1)}function uf(a,b){var c=sf(a,b.line),d=_(a.doc,c.line),e=C(d,a.doc.direction);if(!e||0==e[0].level){var f=Math.max(0,d.text.search(/\S/)),g=b.line==c.line&&b.ch<=f&&b.ch;return ha(c.line,g?0:f,c.sticky)}return c}function vf(a,b,c){if("string"==typeof b&&!(b=Rh[b]))return!1;a.display.input.ensurePolled();var d=a.display.shift,e=!1;try{a.isReadOnly()&&(a.state.suppressEdits=!0),c&&(a.display.shift=!1),e=b(a)!=Rg}finally{a.display.shift=d,a.state.suppressEdits=!1}return e}function wf(a,b,c){for(var d=0;d<a.state.keyMaps.length;d++){var e=hf(b,a.state.keyMaps[d],c,a);if(e)return e}return a.options.extraKeys&&hf(b,a.options.extraKeys,c,a)||hf(b,a.options.keyMap,c,a)}function xf(a,b,c,d){var e=a.state.keySeq;if(e){if(jf(b))return"handled";if(/\'$/.test(b)?a.state.keySeq=null:Sh.set(50,function(){a.state.keySeq==e&&(a.state.keySeq=null,a.display.input.reset())}),yf(a,e+" "+b,c,d))return!0}return yf(a,b,c,d)}function yf(a,b,c,d){var e=wf(a,b,d);return"multi"==e&&(a.state.keySeq=b),"handled"==e&&ub(a,"keyHandled",a,b,c),"handled"!=e&&"multi"!=e||(K(c),Lc(a)),!!e}function zf(a,b){var c=lf(b,!0);return!!c&&(b.shiftKey&&!a.state.keySeq?xf(a,"Shift-"+c,b,function(b){return vf(a,b,!0)})||xf(a,c,b,function(b){if("string"==typeof b?/^go[A-Z]/.test(b):b.motion)return vf(a,b)}):xf(a,c,b,function(b){return vf(a,b)}))}function Af(a,b,c){return xf(a,"'"+c+"'",b,function(b){return vf(a,b,!0)})}function Bf(a){var b=this;if(b.curOp.focus=g(),!G(b,a)){sg&&tg<11&&27==a.keyCode&&(a.returnValue=!1);var c=a.keyCode;b.display.shift=16==c||a.shiftKey;var d=zf(b,a);xg&&(Th=d?c:null,!d&&88==c&&!dh&&(Eg?a.metaKey:a.ctrlKey)&&b.replaceSelection("",null,"cut")),18!=c||/\bCodeMirror-crosshair\b/.test(b.display.lineDiv.className)||Cf(b)}}function Cf(a){function b(a){18!=a.keyCode&&a.altKey||(Lg(c,"CodeMirror-crosshair"),E(document,"keyup",b),E(document,"mouseover",b))}var c=a.display.lineDiv;h(c,"CodeMirror-crosshair"),_g(document,"keyup",b),_g(document,"mouseover",b)}function Df(a){16==a.keyCode&&(this.doc.sel.shift=!1),G(this,a)}function Ef(a){var b=this;if(!(Jb(b.display,a)||G(b,a)||a.ctrlKey&&!a.altKey||Eg&&a.metaKey)){var c=a.keyCode,d=a.charCode;if(xg&&c==Th)return Th=null,void K(a);if(!xg||a.which&&!(a.which<10)||!zf(b,a)){var e=String.fromCharCode(null==d?c:d);"\b"!=e&&(Af(b,a,e)||b.display.input.onKeyPress(a))}}}function Ff(a,b){var c=+new Date;return Wh&&Wh.compare(c,a,b)?(Vh=Wh=null,"triple"):Vh&&Vh.compare(c,a,b)?(Wh=new Uh(c,a,b),Vh=null,"double"):(Vh=new Uh(c,a,b),Wh=null,"single")}function Gf(a){var b=this,c=b.display;if(!(G(b,a)||c.activeTouch&&c.input.supportsTouch())){if(c.input.ensurePolled(),c.shift=a.shiftKey,Jb(c,a))return void(ug||(c.scroller.draggable=!1,setTimeout(function(){return c.scroller.draggable=!0},100)));if(!Pf(b,a)){var d=yc(b,a),e=P(a),f=d?Ff(d,e):"single";window.focus(),1==e&&b.state.selectingText&&b.state.selectingText(a),d&&Hf(b,e,d,f,a)||(1==e?d?Jf(b,d,f,a):O(a)==c.scroller&&K(a):2==e?(d&&pe(b.doc,d),setTimeout(function(){return c.input.focus()},20)):3==e&&(Kg?b.display.input.onContextMenu(a):Nc(b)))}}}function Hf(a,b,c,d,e){var f="Click";return"double"==d?f="Double"+f:"triple"==d&&(f="Triple"+f),f=(1==b?"Left":2==b?"Middle":"Right")+f,xf(a,kf(f,e),e,function(b){if("string"==typeof b&&(b=Rh[b]),!b)return!1;var d=!1;try{a.isReadOnly()&&(a.state.suppressEdits=!0),d=b(a,c)!=Rg}finally{a.state.suppressEdits=!1}return d})}function If(a,b,c){var d=a.getOption("configureMouse"),e=d?d(a,b,c):{};if(null==e.unit){var f=Fg?c.shiftKey&&c.metaKey:c.altKey;e.unit=f?"rectangle":"single"==b?"char":"double"==b?"word":"line"}return(null==e.extend||a.doc.extend)&&(e.extend=a.doc.extend||c.shiftKey),null==e.addNew&&(e.addNew=Eg?c.metaKey:c.ctrlKey),null==e.moveOnDrag&&(e.moveOnDrag=!(Eg?c.altKey:c.ctrlKey)),e}function Jf(a,b,c,d){sg?setTimeout(j(Mc,a),0):a.curOp.focus=g();var e,f=If(a,c,d),h=a.doc.sel;a.options.dragDrop&&ah&&!a.isReadOnly()&&"single"==c&&(e=h.contains(b))>-1&&(ia((e=h.ranges[e]).from(),b)<0||b.xRel>0)&&(ia(e.to(),b)>0||b.xRel<0)?Kf(a,d,b,f):Mf(a,d,b,f)}function Kf(a,b,c,d){var e=a.display,f=!1,g=rd(a,function(b){ug&&(e.scroller.draggable=!1),a.state.draggingText=!1,E(e.wrapper.ownerDocument,"mouseup",g),E(e.wrapper.ownerDocument,"mousemove",h),E(e.scroller,"dragstart",i),E(e.scroller,"drop",g),f||(K(b),d.addNew||pe(a.doc,c,null,null,d.extend),ug||sg&&9==tg?setTimeout(function(){e.wrapper.ownerDocument.body.focus(),e.input.focus()},20):e.input.focus())}),h=function(a){f=f||Math.abs(b.clientX-a.clientX)+Math.abs(b.clientY-a.clientY)>=10},i=function(){return f=!0};ug&&(e.scroller.draggable=!0),a.state.draggingText=g,g.copy=!d.moveOnDrag,e.scroller.dragDrop&&e.scroller.dragDrop(),_g(e.wrapper.ownerDocument,"mouseup",g),_g(e.wrapper.ownerDocument,"mousemove",h),_g(e.scroller,"dragstart",i),_g(e.scroller,"drop",g),Nc(a),setTimeout(function(){return e.input.focus()},20)}function Lf(a,b,c){if("char"==c)return new Dh(b,b);if("word"==c)return a.findWordAt(b);if("line"==c)return new Dh(ha(b.line,0),oa(a.doc,ha(b.line+1,0)));var d=c(a,b);return new Dh(d.from,d.to)}function Mf(a,b,c,d){function e(b){if(0!=ia(r,b))if(r=b,"rectangle"==d.unit){for(var e=[],f=a.options.tabSize,g=l(_(j,c.line).text,c.ch,f),h=l(_(j,b.line).text,b.ch,f),i=Math.min(g,h),p=Math.max(g,h),q=Math.min(c.line,b.line),s=Math.min(a.lastLine(),Math.max(c.line,b.line));q<=s;q++){var t=_(j,q).text,u=n(t,i,f);i==p?e.push(new Dh(ha(q,u),ha(q,u))):t.length>u&&e.push(new Dh(ha(q,u),ha(q,n(t,p,f))))}e.length||e.push(new Dh(c,c)),ve(j,Od(a,o.ranges.slice(0,m).concat(e),m),{origin:"*mouse",scroll:!1}),a.scrollIntoView(b)}else{var v,w=k,x=Lf(a,b,d.unit),y=w.anchor;ia(x.anchor,y)>0?(v=x.head,y=ma(w.from(),x.anchor)):(v=x.anchor,y=la(w.to(),x.head));var z=o.ranges.slice(0);z[m]=Nf(a,new Dh(oa(j,y),v)),ve(j,Od(a,z,m),Tg)}}function f(b){var c=++t,h=yc(a,b,!0,"rectangle"==d.unit);if(h)if(0!=ia(h,r)){a.curOp.focus=g(),e(h);var k=Sc(i,j);(h.line>=k.to||h.line<k.from)&&setTimeout(rd(a,function(){t==c&&f(b)}),150)}else{var l=b.clientY<s.top?-20:b.clientY>s.bottom?20:0;l&&setTimeout(rd(a,function(){t==c&&(i.scroller.scrollTop+=l,f(b))}),50)}}function h(b){a.state.selectingText=!1,t=1/0,b&&(K(b),i.input.focus()),E(i.wrapper.ownerDocument,"mousemove",u),E(i.wrapper.ownerDocument,"mouseup",v),j.history.lastSelOrigin=null}var i=a.display,j=a.doc;K(b);var k,m,o=j.sel,p=o.ranges;if(d.addNew&&!d.extend?(m=j.sel.contains(c),k=m>-1?p[m]:new Dh(c,c)):(k=j.sel.primary(),m=j.sel.primIndex),"rectangle"==d.unit)d.addNew||(k=new Dh(c,c)),c=yc(a,b,!0,!0),m=-1;else{var q=Lf(a,c,d.unit);k=d.extend?oe(k,q.anchor,q.head,d.extend):q}d.addNew?-1==m?(m=p.length,ve(j,Od(a,p.concat([k]),m),{scroll:!1,origin:"*mouse"})):p.length>1&&p[m].empty()&&"char"==d.unit&&!d.extend?(ve(j,Od(a,p.slice(0,m).concat(p.slice(m+1)),0),{scroll:!1,origin:"*mouse"}),o=j.sel):re(j,m,k,Tg):(m=0,ve(j,new Ch([k],0),Tg),o=j.sel);var r=c,s=i.wrapper.getBoundingClientRect(),t=0,u=rd(a,function(a){0!==a.buttons&&P(a)?f(a):h(a)}),v=rd(a,h);a.state.selectingText=v,_g(i.wrapper.ownerDocument,"mousemove",u),_g(i.wrapper.ownerDocument,"mouseup",v)}function Nf(a,b){var c=b.anchor,d=b.head,e=_(a.doc,c.line);if(0==ia(c,d)&&c.sticky==d.sticky)return b;var f=C(e);if(!f)return b;var g=B(f,c.ch,c.sticky),h=f[g];if(h.from!=c.ch&&h.to!=c.ch)return b;var i=g+(h.from==c.ch==(1!=h.level)?0:1);if(0==i||i==f.length)return b;var j;if(d.line!=c.line)j=(d.line-c.line)*("ltr"==a.doc.direction?1:-1)>0;else{var k=B(f,d.ch,d.sticky),l=k-g||(d.ch-c.ch)*(1==h.level?-1:1);j=k==i-1||k==i?l<0:l>0}var m=f[i+(j?-1:0)],n=j==(1==m.level),o=n?m.from:m.to,p=n?"after":"before";return c.ch==o&&c.sticky==p?b:new Dh(new ha(c.line,o,p),d)}function Of(a,b,c,d){var e,f;if(b.touches)e=b.touches[0].clientX,f=b.touches[0].clientY;else try{e=b.clientX,f=b.clientY}catch(b){return!1}if(e>=Math.floor(a.display.gutters.getBoundingClientRect().right))return!1;d&&K(b);var g=a.display,h=g.lineDiv.getBoundingClientRect();if(f>h.bottom||!I(a,c))return M(b);f-=h.top-g.viewOffset;for(var i=0;i<a.display.gutterSpecs.length;++i){var j=g.gutters.childNodes[i];if(j&&j.getBoundingClientRect().right>=e)return F(a,c,a,ea(a.doc,f),a.display.gutterSpecs[i].className,b),M(b)}}function Pf(a,b){return Of(a,b,"gutterClick",!0)}function Qf(a,b){Jb(a.display,b)||Rf(a,b)||G(a,b,"contextmenu")||Kg||a.display.input.onContextMenu(b)}function Rf(a,b){return!!I(a,"gutterContextMenu")&&Of(a,b,"gutterContextMenu",!1)}function Sf(a){a.display.wrapper.className=a.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+a.options.theme.replace(/(^|\s)\s*/g," cm-s-"),bc(a)}function Tf(a,b,c){if(!b!=!(c&&c!=Xh)){var d=a.display.dragFunctions,e=b?_g:E;e(a.display.scroller,"dragstart",d.start),e(a.display.scroller,"dragenter",d.enter),e(a.display.scroller,"dragover",d.over),e(a.display.scroller,"dragleave",d.leave),e(a.display.scroller,"drop",d.drop)}}function Uf(a){a.options.lineWrapping?(h(a.display.wrapper,"CodeMirror-wrap"),a.display.sizer.style.minWidth="",a.display.sizerWidth=null):(Lg(a.display.wrapper,"CodeMirror-wrap"),eb(a)),xc(a),Ac(a),bc(a),setTimeout(function(){return fd(a)},100)}function Vf(a,b){var c=this;if(!(this instanceof Vf))return new Vf(a,b);this.options=b=b?k(b):{},k(Yh,b,!1);var d=b.value;"string"==typeof d?d=new Jh(d,b.mode,null,b.lineSeparator,b.direction):b.mode&&(d.modeOption=b.mode),this.doc=d;var e=new Vf.inputStyles[b.inputStyle](this),f=this.display=new Kd(a,d,e,b);f.wrapper.CodeMirror=this,Sf(this),b.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),hd(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new Ng,keySeq:null,specialChars:null},b.autofocus&&!Dg&&f.input.focus(),sg&&tg<11&&setTimeout(function(){return c.display.input.reset(!0)},20),Wf(this),cf(),id(this),this.curOp.forceUpdate=!0,$d(this,d),b.autofocus&&!Dg||this.hasFocus()?setTimeout(j(Oc,this),20):Pc(this);for(var g in Zh)Zh.hasOwnProperty(g)&&Zh[g](c,b[g],Xh);Gd(this),b.finishInit&&b.finishInit(this);for(var h=0;h<$h.length;++h)$h[h](c);jd(this),ug&&b.lineWrapping&&"optimizelegibility"==getComputedStyle(f.lineDiv).textRendering&&(f.lineDiv.style.textRendering="auto")}function Wf(a){function b(){e.activeTouch&&(f=setTimeout(function(){return e.activeTouch=null},1e3),g=e.activeTouch,g.end=+new Date)}function c(a){if(1!=a.touches.length)return!1;var b=a.touches[0];return b.radiusX<=1&&b.radiusY<=1}function d(a,b){if(null==b.left)return!0;var c=b.left-a.left,d=b.top-a.top;return c*c+d*d>400}var e=a.display;_g(e.scroller,"mousedown",rd(a,Gf)),sg&&tg<11?_g(e.scroller,"dblclick",rd(a,function(b){if(!G(a,b)){var c=yc(a,b);if(c&&!Pf(a,b)&&!Jb(a.display,b)){K(b);var d=a.findWordAt(c);pe(a.doc,d.anchor,d.head)}}})):_g(e.scroller,"dblclick",function(b){return G(a,b)||K(b)}),_g(e.scroller,"contextmenu",function(b){return Qf(a,b)});var f,g={end:0};_g(e.scroller,"touchstart",function(b){if(!G(a,b)&&!c(b)&&!Pf(a,b)){e.input.ensurePolled(),clearTimeout(f);var d=+new Date;e.activeTouch={start:d,moved:!1,prev:d-g.end<=300?g:null},1==b.touches.length&&(e.activeTouch.left=b.touches[0].pageX,e.activeTouch.top=b.touches[0].pageY)}}),_g(e.scroller,"touchmove",function(){e.activeTouch&&(e.activeTouch.moved=!0)}),_g(e.scroller,"touchend",function(c){var f=e.activeTouch;if(f&&!Jb(e,c)&&null!=f.left&&!f.moved&&new Date-f.start<300){var g,h=a.coordsChar(e.activeTouch,"page");g=!f.prev||d(f,f.prev)?new Dh(h,h):!f.prev.prev||d(f,f.prev.prev)?a.findWordAt(h):new Dh(ha(h.line,0),oa(a.doc,ha(h.line+1,0))),a.setSelection(g.anchor,g.head),a.focus(),K(c)}b()}),_g(e.scroller,"touchcancel",b),_g(e.scroller,"scroll",function(){e.scroller.clientHeight&&(bd(a,e.scroller.scrollTop),dd(a,e.scroller.scrollLeft,!0),F(a,"scroll",a))}),_g(e.scroller,"mousewheel",function(b){return Nd(a,b)}),_g(e.scroller,"DOMMouseScroll",function(b){return Nd(a,b)}),_g(e.wrapper,"scroll",function(){return e.wrapper.scrollTop=e.wrapper.scrollLeft=0}),e.dragFunctions={enter:function(b){G(a,b)||N(b)},over:function(b){G(a,b)||(_e(a,b),N(b))},start:function(b){return $e(a,b)},drop:rd(a,Ze),leave:function(b){G(a,b)||af(a)}};var h=e.input.getField();_g(h,"keyup",function(b){return Df.call(a,b)}),_g(h,"keydown",rd(a,Bf)),_g(h,"keypress",rd(a,Ef)),_g(h,"focus",function(b){return Oc(a,b)}),_g(h,"blur",function(b){return Pc(a,b)})}function Xf(a,b,c,d){var e,f=a.doc;null==c&&(c="add"),"smart"==c&&(f.mode.indent?e=ta(a,b).state:c="prev");var g=a.options.tabSize,h=_(f,b),i=l(h.text,null,g);h.stateAfter&&(h.stateAfter=null);var j,k=h.text.match(/^\s*/)[0];if(d||/\S/.test(h.text)){if("smart"==c&&((j=f.mode.indent(e,h.text.slice(k.length),h.text))==Rg||j>150)){if(!d)return;c="prev"}}else j=0,c="not";"prev"==c?j=b>f.first?l(_(f,b-1).text,null,g):0:"add"==c?j=i+a.options.indentUnit:"subtract"==c?j=i-a.options.indentUnit:"number"==typeof c&&(j=i+c),j=Math.max(0,j);var m="",n=0;if(a.options.indentWithTabs)for(var p=Math.floor(j/g);p;--p)n+=g,m+="\t";if(n<j&&(m+=o(j-n)),m!=k)return Le(f,m,ha(b,0),ha(b,k.length),"+input"),h.stateAfter=null,!0;for(var q=0;q<f.sel.ranges.length;q++){var r=f.sel.ranges[q];if(r.head.line==b&&r.head.ch<k.length){var s=ha(b,k.length);re(f,q,new Dh(s,s));break}}}function Yf(a){_h=a}function Zf(a,b,c,d,e){var f=a.doc;a.display.shift=!1,d||(d=f.sel);var g=+new Date-200,h="paste"==e||a.state.pasteIncoming>g,i=bh(b),j=null;if(h&&d.ranges.length>1)if(_h&&_h.text.join("\n")==b){if(d.ranges.length%_h.text.length==0){j=[];for(var k=0;k<_h.text.length;k++)j.push(f.splitLines(_h.text[k]))}}else i.length==d.ranges.length&&a.options.pasteLinesPerSelection&&(j=q(i,function(a){return[a]}));for(var l=a.curOp.updateInput,m=d.ranges.length-1;m>=0;m--){var n=d.ranges[m],o=n.from(),r=n.to();n.empty()&&(c&&c>0?o=ha(o.line,o.ch-c):a.state.overwrite&&!h?r=ha(r.line,Math.min(_(f,r.line).text.length,r.ch+p(i).length)):h&&_h&&_h.lineWise&&_h.text.join("\n")==b&&(o=r=ha(o.line,0)));var s={from:o,to:r,text:j?j[m%j.length]:i,origin:e||(h?"paste":a.state.cutIncoming>g?"cut":"+input")};Fe(a.doc,s),ub(a,"inputRead",a,s)}b&&!h&&_f(a,b),Yc(a),a.curOp.updateInput<2&&(a.curOp.updateInput=l),a.curOp.typing=!0,a.state.pasteIncoming=a.state.cutIncoming=-1}function $f(a,b){var c=a.clipboardData&&a.clipboardData.getData("Text");if(c)return a.preventDefault(),b.isReadOnly()||b.options.disableInput||qd(b,function(){return Zf(b,c,0,null,"paste")}),!0}function _f(a,b){if(a.options.electricChars&&a.options.smartIndent)for(var c=a.doc.sel,d=c.ranges.length-1;d>=0;d--){var e=c.ranges[d];if(!(e.head.ch>100||d&&c.ranges[d-1].head.line==e.head.line)){var f=a.getModeAt(e.head),g=!1;if(f.electricChars){for(var h=0;h<f.electricChars.length;h++)if(b.indexOf(f.electricChars.charAt(h))>-1){g=Xf(a,e.head.line,"smart");break}}else f.electricInput&&f.electricInput.test(_(a.doc,e.head.line).text.slice(0,e.head.ch))&&(g=Xf(a,e.head.line,"smart"));g&&ub(a,"electricInput",a,e.head.line)}}}function ag(a){for(var b=[],c=[],d=0;d<a.doc.sel.ranges.length;d++){var e=a.doc.sel.ranges[d].head.line,f={anchor:ha(e,0),head:ha(e+1,0)};c.push(f),b.push(a.getRange(f.anchor,f.head))}return{text:b,ranges:c}}function bg(a,b,c,d){a.setAttribute("autocorrect",c?"":"off"),a.setAttribute("autocapitalize",d?"":"off"),a.setAttribute("spellcheck",!!b)}function cg(){var a=d("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none"),b=d("div",[a],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return ug?a.style.width="1000px":a.setAttribute("wrap","off"),Bg&&(a.style.border="1px solid black"),bg(a),b}function dg(a,b,c,d,e){function f(){var d=b.line+c;return!(d<a.first||d>=a.first+a.size)&&(b=new ha(d,b.ch,b.sticky),j=_(a,d))}function g(d){var g;if(null==(g=e?rf(a.cm,j,b,c):pf(j,b,c))){if(d||!f())return!1;b=qf(e,a.cm,j,b.line,c)}else b=g;return!0}var h=b,i=c,j=_(a,b.line);if("char"==d)g();else if("column"==d)g(!0);else if("word"==d||"group"==d)for(var k=null,l="group"==d,m=a.cm&&a.cm.getHelper(b,"wordChars"),n=!0;!(c<0)||g(!n);n=!1){var o=j.text.charAt(b.ch)||"\n",p=v(o,m)?"w":l&&"\n"==o?"n":!l||/\s/.test(o)?null:"p";if(!l||n||p||(p="s"),k&&k!=p){c<0&&(c=1,g(),b.sticky="after");break}if(p&&(k=p),c>0&&!g(!n))break}var q=Be(a,b,h,i,!0);return ja(h,q)&&(q.hitSide=!0),q}function eg(a,b,c,d){var e,f=a.doc,g=b.left;if("page"==d){var h=Math.min(a.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),i=Math.max(h-.5*sc(a.display),3);e=(c>0?b.bottom:b.top)+c*i}else"line"==d&&(e=c>0?b.bottom+3:b.top-3);for(var j;j=lc(a,g,e),j.outside;){if(c<0?e<=0:e>=f.height){j.hitSide=!0;break}e+=5*c}return j}function fg(a,b){var c=Ub(a,b.line);if(!c||c.hidden)return null;var d=_(a.doc,b.line),e=Rb(c,d,b.line),f=C(d,a.doc.direction),g="left";f&&(g=B(f,b.ch)%2?"right":"left");var h=Xb(e.map,b.ch,g);return h.offset="right"==h.collapse?h.end:h.start,h}function gg(a){for(var b=a;b;b=b.parentNode)if(/CodeMirror-gutter-wrapper/.test(b.className))return!0;return!1}function hg(a,b){return b&&(a.bad=!0),a}function ig(a,b,c,d,e){function f(a){return function(b){return b.id==a}}function g(){k&&(j+=l,m&&(j+=l),k=m=!1)}function h(a){a&&(g(),j+=a)}function i(b){if(1==b.nodeType){var c=b.getAttribute("cm-text");if(c)return void h(c);var j,n=b.getAttribute("cm-marker");if(n){var o=a.findMarks(ha(d,0),ha(e+1,0),f(+n));return void(o.length&&(j=o[0].find(0))&&h(aa(a.doc,j.from,j.to).join(l)))}if("false"==b.getAttribute("contenteditable"))return;var p=/^(pre|div|p|li|table|br)$/i.test(b.nodeName);if(!/^br$/i.test(b.nodeName)&&0==b.textContent.length)return;p&&g();for(var q=0;q<b.childNodes.length;q++)i(b.childNodes[q]);/^(pre|p)$/i.test(b.nodeName)&&(m=!0),p&&(k=!0)}else 3==b.nodeType&&h(b.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(var j="",k=!1,l=a.doc.lineSeparator(),m=!1;i(b),b!=c;)b=b.nextSibling,m=!1;return j}function jg(a,b,c){var d;if(b==a.display.lineDiv){if(!(d=a.display.lineDiv.childNodes[c]))return hg(a.clipPos(ha(a.display.viewTo-1)),!0);b=null,c=0}else for(d=b;;d=d.parentNode){if(!d||d==a.display.lineDiv)return null;if(d.parentNode&&d.parentNode==a.display.lineDiv)break}for(var e=0;e<a.display.view.length;e++){var f=a.display.view[e];if(f.node==d)return kg(f,b,c)}}function kg(a,b,c){function d(b,c,d){for(var e=-1;e<(l?l.length:0);e++)for(var f=e<0?k.map:l[e],g=0;g<f.length;g+=3){var h=f[g+2];if(h==b||h==c){var i=da(e<0?a.line:a.rest[e]),j=f[g]+d;return(d<0||h!=b)&&(j=f[g+(d?1:0)]),ha(i,j)}}}var e=a.text.firstChild,g=!1;if(!b||!f(e,b))return hg(ha(da(a.line),0),!0);if(b==e&&(g=!0,b=e.childNodes[c],c=0,!b)){var h=a.rest?p(a.rest):a.line;return hg(ha(da(h),h.text.length),g)}var i=3==b.nodeType?b:null,j=b;for(i||1!=b.childNodes.length||3!=b.firstChild.nodeType||(i=b.firstChild,c&&(c=i.nodeValue.length));j.parentNode!=e;)j=j.parentNode;var k=a.measure,l=k.maps,m=d(i,j,c);if(m)return hg(m,g);for(var n=j.nextSibling,o=i?i.nodeValue.length-c:0;n;n=n.nextSibling){if(m=d(n,n.firstChild,0))return hg(ha(m.line,m.ch-o),g);o+=n.textContent.length}for(var q=j.previousSibling,r=c;q;q=q.previousSibling){if(m=d(q,q.firstChild,-1))return hg(ha(m.line,m.ch+r),g);r+=q.textContent.length}}function lg(a,b){function c(){a.value=i.getValue()}if(b=b?k(b):{},b.value=a.value,!b.tabindex&&a.tabIndex&&(b.tabindex=a.tabIndex),!b.placeholder&&a.placeholder&&(b.placeholder=a.placeholder),null==b.autofocus){var d=g();b.autofocus=d==a||null!=a.getAttribute("autofocus")&&d==document.body}var e;if(a.form&&(_g(a.form,"submit",c),!b.leaveSubmitMethodAlone)){var f=a.form;e=f.submit;try{var h=f.submit=function(){c(),f.submit=e,f.submit(),f.submit=h}}catch(a){}}b.finishInit=function(b){b.save=c,b.getTextArea=function(){return a},b.toTextArea=function(){b.toTextArea=isNaN,c(),a.parentNode.removeChild(b.getWrapperElement()),a.style.display="",a.form&&(E(a.form,"submit",c),"function"==typeof a.form.submit&&(a.form.submit=e))}},a.style.display="none";var i=Vf(function(b){return a.parentNode.insertBefore(b,a.nextSibling)},b);return i}var mg=navigator.userAgent,ng=navigator.platform,og=/gecko\/\d/i.test(mg),pg=/MSIE \d/.test(mg),qg=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(mg),rg=/Edge\/(\d+)/.exec(mg),sg=pg||qg||rg,tg=sg&&(pg?document.documentMode||6:+(rg||qg)[1]),ug=!rg&&/WebKit\//.test(mg),vg=ug&&/Qt\/\d+\.\d+/.test(mg),wg=!rg&&/Chrome\//.test(mg),xg=/Opera\//.test(mg),yg=/Apple Computer/.test(navigator.vendor),zg=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(mg),Ag=/PhantomJS/.test(mg),Bg=!rg&&/AppleWebKit/.test(mg)&&/Mobile\/\w+/.test(mg),Cg=/Android/.test(mg),Dg=Bg||Cg||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(mg),Eg=Bg||/Mac/.test(ng),Fg=/\bCrOS\b/.test(mg),Gg=/win/i.test(ng),Hg=xg&&mg.match(/Version\/(\d*\.\d*)/);Hg&&(Hg=Number(Hg[1])),Hg&&Hg>=15&&(xg=!1,ug=!0);var Ig,Jg=Eg&&(vg||xg&&(null==Hg||Hg<12.11)),Kg=og||sg&&tg>=9,Lg=function(b,c){var d=b.className,e=a(c).exec(d);if(e){var f=d.slice(e.index+e[0].length);b.className=d.slice(0,e.index)+(f?e[1]+f:"")}};Ig=document.createRange?function(a,b,c,d){var e=document.createRange();return e.setEnd(d||a,c),e.setStart(a,b),e}:function(a,b,c){var d=document.body.createTextRange();try{d.moveToElementText(a.parentNode)}catch(a){return d}return d.collapse(!0),d.moveEnd("character",c),d.moveStart("character",b),d};var Mg=function(a){a.select()};Bg?Mg=function(a){a.selectionStart=0,a.selectionEnd=a.value.length}:sg&&(Mg=function(a){try{a.select()}catch(a){}});var Ng=function(){this.id=null};Ng.prototype.set=function(a,b){clearTimeout(this.id),this.id=setTimeout(b,a)};var Og,Pg,Qg=30,Rg={toString:function(){return"CodeMirror.Pass"}},Sg={scroll:!1},Tg={origin:"*mouse"},Ug={origin:"+move"},Vg=[""],Wg=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,Xg=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/,Yg=null,Zg=function(){function a(a){return a<=247?c.charAt(a):1424<=a&&a<=1524?"R":1536<=a&&a<=1785?d.charAt(a-1536):1774<=a&&a<=2220?"r":8192<=a&&a<=8203?"w":8204==a?"b":"L"}function b(a,b,c){this.level=a,this.from=b,this.to=c}var c="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",d="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111",e=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,f=/[stwN]/,g=/[LRr]/,h=/[Lb1n]/,i=/[1n]/;return function(c,d){var j="ltr"==d?"L":"R";if(0==c.length||"ltr"==d&&!e.test(c))return!1;for(var k=c.length,l=[],m=0;m<k;++m)l.push(a(c.charCodeAt(m)));for(var n=0,o=j;n<k;++n){var q=l[n];"m"==q?l[n]=o:o=q}for(var r=0,s=j;r<k;++r){var t=l[r];"1"==t&&"r"==s?l[r]="n":g.test(t)&&(s=t,"r"==t&&(l[r]="R"))}for(var u=1,v=l[0];u<k-1;++u){var w=l[u];"+"==w&&"1"==v&&"1"==l[u+1]?l[u]="1":","!=w||v!=l[u+1]||"1"!=v&&"n"!=v||(l[u]=v),v=w}for(var x=0;x<k;++x){var y=l[x];if(","==y)l[x]="N";else if("%"==y){var z=void 0;for(z=x+1;z<k&&"%"==l[z];++z);for(var A=x&&"!"==l[x-1]||z<k&&"1"==l[z]?"1":"N",B=x;B<z;++B)l[B]=A;x=z-1}}for(var C=0,D=j;C<k;++C){var E=l[C];"L"==D&&"1"==E?l[C]="L":g.test(E)&&(D=E)}for(var F=0;F<k;++F)if(f.test(l[F])){var G=void 0;for(G=F+1;G<k&&f.test(l[G]);++G);for(var H="L"==(F?l[F-1]:j),I="L"==(G<k?l[G]:j),J=H==I?H?"L":"R":j,K=F;K<G;++K)l[K]=J;F=G-1}for(var L,M=[],N=0;N<k;)if(h.test(l[N])){var O=N;for(++N;N<k&&h.test(l[N]);++N);M.push(new b(0,O,N))}else{var P=N,Q=M.length;for(++N;N<k&&"L"!=l[N];++N);for(var R=P;R<N;)if(i.test(l[R])){P<R&&M.splice(Q,0,new b(1,P,R));var S=R;for(++R;R<N&&i.test(l[R]);++R);M.splice(Q,0,new b(2,S,R)),P=R}else++R;P<N&&M.splice(Q,0,new b(1,P,N))}return"ltr"==d&&(1==M[0].level&&(L=c.match(/^\s+/))&&(M[0].from=L[0].length,M.unshift(new b(0,0,L[0].length))),1==p(M).level&&(L=c.match(/\s+$/))&&(p(M).to-=L[0].length,M.push(new b(0,k-L[0].length,k)))),"rtl"==d?M.reverse():M}}(),$g=[],_g=function(a,b,c){if(a.addEventListener)a.addEventListener(b,c,!1);else if(a.attachEvent)a.attachEvent("on"+b,c);else{var d=a._handlers||(a._handlers={});d[b]=(d[b]||$g).concat(c)}},ah=function(){if(sg&&tg<9)return!1;var a=d("div");return"draggable"in a||"dragDrop"in a}(),bh=3!="\n\nb".split(/\n/).length?function(a){for(var b=0,c=[],d=a.length;b<=d;){var e=a.indexOf("\n",b);-1==e&&(e=a.length);var f=a.slice(b,"\r"==a.charAt(e-1)?e-1:e),g=f.indexOf("\r");-1!=g?(c.push(f.slice(0,g)),b+=g+1):(c.push(f),b=e+1)}return c}:function(a){return a.split(/\r\n?|\n/)},ch=window.getSelection?function(a){try{return a.selectionStart!=a.selectionEnd}catch(a){return!1}}:function(a){var b;try{b=a.ownerDocument.selection.createRange()}catch(a){}return!(!b||b.parentElement()!=a)&&0!=b.compareEndPoints("StartToEnd",b)},dh=function(){var a=d("div");return"oncopy"in a||(a.setAttribute("oncopy","return;"),"function"==typeof a.oncopy)}(),eh=null,fh={},gh={},hh={},ih=function(a,b,c){this.pos=this.start=0,this.string=a,this.tabSize=b||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=c};ih.prototype.eol=function(){return this.pos>=this.string.length},ih.prototype.sol=function(){return this.pos==this.lineStart},ih.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},ih.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},ih.prototype.eat=function(a){var b=this.string.charAt(this.pos);if("string"==typeof a?b==a:b&&(a.test?a.test(b):a(b)))return++this.pos,b},ih.prototype.eatWhile=function(a){for(var b=this.pos;this.eat(a););return this.pos>b},ih.prototype.eatSpace=function(){for(var a=this,b=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++a.pos;return this.pos>b},ih.prototype.skipToEnd=function(){this.pos=this.string.length},ih.prototype.skipTo=function(a){var b=this.string.indexOf(a,this.pos);if(b>-1)return this.pos=b,!0},ih.prototype.backUp=function(a){this.pos-=a},ih.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=l(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?l(this.string,this.lineStart,this.tabSize):0)},ih.prototype.indentation=function(){return l(this.string,null,this.tabSize)-(this.lineStart?l(this.string,this.lineStart,this.tabSize):0)},ih.prototype.match=function(a,b,c){if("string"!=typeof a){var d=this.string.slice(this.pos).match(a);return d&&d.index>0?null:(d&&!1!==b&&(this.pos+=d[0].length),d)}var e=function(a){
return c?a.toLowerCase():a};if(e(this.string.substr(this.pos,a.length))==e(a))return!1!==b&&(this.pos+=a.length),!0},ih.prototype.current=function(){return this.string.slice(this.start,this.pos)},ih.prototype.hideFirstChars=function(a,b){this.lineStart+=a;try{return b()}finally{this.lineStart-=a}},ih.prototype.lookAhead=function(a){var b=this.lineOracle;return b&&b.lookAhead(a)},ih.prototype.baseToken=function(){var a=this.lineOracle;return a&&a.baseToken(this.pos)};var jh=function(a,b){this.state=a,this.lookAhead=b},kh=function(a,b,c,d){this.state=b,this.doc=a,this.line=c,this.maxLookAhead=d||0,this.baseTokens=null,this.baseTokenPos=1};kh.prototype.lookAhead=function(a){var b=this.doc.getLine(this.line+a);return null!=b&&a>this.maxLookAhead&&(this.maxLookAhead=a),b},kh.prototype.baseToken=function(a){var b=this;if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=a;)b.baseTokenPos+=2;var c=this.baseTokens[this.baseTokenPos+1];return{type:c&&c.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-a}},kh.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},kh.fromSaved=function(a,b,c){return b instanceof jh?new kh(a,Y(a.mode,b.state),c,b.lookAhead):new kh(a,Y(a.mode,b),c)},kh.prototype.save=function(a){var b=!1!==a?Y(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new jh(b,this.maxLookAhead):b};var lh=function(a,b,c){this.start=a.start,this.end=a.pos,this.string=a.current(),this.type=b||null,this.state=c},mh=!1,nh=!1,oh=function(a,b,c){this.text=a,Oa(this,b),this.height=c?c(this):1};oh.prototype.lineNo=function(){return da(this)},J(oh);var ph,qh={},rh={},sh=null,th=null,uh={left:0,right:0,top:0,bottom:0},vh=function(a,b,c){this.cm=c;var e=this.vert=d("div",[d("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),f=this.horiz=d("div",[d("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");e.tabIndex=f.tabIndex=-1,a(e),a(f),_g(e,"scroll",function(){e.clientHeight&&b(e.scrollTop,"vertical")}),_g(f,"scroll",function(){f.clientWidth&&b(f.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,sg&&tg<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};vh.prototype.update=function(a){var b=a.scrollWidth>a.clientWidth+1,c=a.scrollHeight>a.clientHeight+1,d=a.nativeBarWidth;if(c){this.vert.style.display="block",this.vert.style.bottom=b?d+"px":"0";var e=a.viewHeight-(b?d:0);this.vert.firstChild.style.height=Math.max(0,a.scrollHeight-a.clientHeight+e)+"px"}else this.vert.style.display="",this.vert.firstChild.style.height="0";if(b){this.horiz.style.display="block",this.horiz.style.right=c?d+"px":"0",this.horiz.style.left=a.barLeft+"px";var f=a.viewWidth-a.barLeft-(c?d:0);this.horiz.firstChild.style.width=Math.max(0,a.scrollWidth-a.clientWidth+f)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&a.clientHeight>0&&(0==d&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:c?d:0,bottom:b?d:0}},vh.prototype.setScrollLeft=function(a){this.horiz.scrollLeft!=a&&(this.horiz.scrollLeft=a),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},vh.prototype.setScrollTop=function(a){this.vert.scrollTop!=a&&(this.vert.scrollTop=a),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},vh.prototype.zeroWidthHack=function(){var a=Eg&&!zg?"12px":"18px";this.horiz.style.height=this.vert.style.width=a,this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new Ng,this.disableVert=new Ng},vh.prototype.enableZeroWidthBar=function(a,b,c){function d(){var e=a.getBoundingClientRect();("vert"==c?document.elementFromPoint(e.right-1,(e.top+e.bottom)/2):document.elementFromPoint((e.right+e.left)/2,e.bottom-1))!=a?a.style.pointerEvents="none":b.set(1e3,d)}a.style.pointerEvents="auto",b.set(1e3,d)},vh.prototype.clear=function(){var a=this.horiz.parentNode;a.removeChild(this.horiz),a.removeChild(this.vert)};var wh=function(){};wh.prototype.update=function(){return{bottom:0,right:0}},wh.prototype.setScrollLeft=function(){},wh.prototype.setScrollTop=function(){},wh.prototype.clear=function(){};var xh={native:vh,null:wh},yh=0,zh=function(a,b,c){var d=a.display;this.viewport=b,this.visible=Sc(d,a.doc,b),this.editorIsHidden=!d.wrapper.offsetWidth,this.wrapperHeight=d.wrapper.clientHeight,this.wrapperWidth=d.wrapper.clientWidth,this.oldDisplayWidth=Ob(a),this.force=c,this.dims=uc(a),this.events=[]};zh.prototype.signal=function(a,b){I(a,b)&&this.events.push(arguments)},zh.prototype.finish=function(){for(var a=this,b=0;b<this.events.length;b++)F.apply(null,a.events[b])};var Ah=0,Bh=null;sg?Bh=-.53:og?Bh=15:wg?Bh=-.7:yg&&(Bh=-1/3);var Ch=function(a,b){this.ranges=a,this.primIndex=b};Ch.prototype.primary=function(){return this.ranges[this.primIndex]},Ch.prototype.equals=function(a){var b=this;if(a==this)return!0;if(a.primIndex!=this.primIndex||a.ranges.length!=this.ranges.length)return!1;for(var c=0;c<this.ranges.length;c++){var d=b.ranges[c],e=a.ranges[c];if(!ja(d.anchor,e.anchor)||!ja(d.head,e.head))return!1}return!0},Ch.prototype.deepCopy=function(){for(var a=this,b=[],c=0;c<this.ranges.length;c++)b[c]=new Dh(ka(a.ranges[c].anchor),ka(a.ranges[c].head));return new Ch(b,this.primIndex)},Ch.prototype.somethingSelected=function(){for(var a=this,b=0;b<this.ranges.length;b++)if(!a.ranges[b].empty())return!0;return!1},Ch.prototype.contains=function(a,b){var c=this;b||(b=a);for(var d=0;d<this.ranges.length;d++){var e=c.ranges[d];if(ia(b,e.from())>=0&&ia(a,e.to())<=0)return d}return-1};var Dh=function(a,b){this.anchor=a,this.head=b};Dh.prototype.from=function(){return ma(this.anchor,this.head)},Dh.prototype.to=function(){return la(this.anchor,this.head)},Dh.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch},Qe.prototype={chunkSize:function(){return this.lines.length},removeInner:function(a,b){for(var c=this,d=a,e=a+b;d<e;++d){var f=c.lines[d];c.height-=f.height,gb(f),ub(f,"delete")}this.lines.splice(a,b)},collapse:function(a){a.push.apply(a,this.lines)},insertInner:function(a,b,c){var d=this;this.height+=c,this.lines=this.lines.slice(0,a).concat(b).concat(this.lines.slice(a));for(var e=0;e<b.length;++e)b[e].parent=d},iterN:function(a,b,c){for(var d=this,e=a+b;a<e;++a)if(c(d.lines[a]))return!0}},Re.prototype={chunkSize:function(){return this.size},removeInner:function(a,b){var c=this;this.size-=b;for(var d=0;d<this.children.length;++d){var e=c.children[d],f=e.chunkSize();if(a<f){var g=Math.min(b,f-a),h=e.height;if(e.removeInner(a,g),c.height-=h-e.height,f==g&&(c.children.splice(d--,1),e.parent=null),0==(b-=g))break;a=0}else a-=f}if(this.size-b<25&&(this.children.length>1||!(this.children[0]instanceof Qe))){var i=[];this.collapse(i),this.children=[new Qe(i)],this.children[0].parent=this}},collapse:function(a){for(var b=this,c=0;c<this.children.length;++c)b.children[c].collapse(a)},insertInner:function(a,b,c){var d=this;this.size+=b.length,this.height+=c;for(var e=0;e<this.children.length;++e){var f=d.children[e],g=f.chunkSize();if(a<=g){if(f.insertInner(a,b,c),f.lines&&f.lines.length>50){for(var h=f.lines.length%25+25,i=h;i<f.lines.length;){var j=new Qe(f.lines.slice(i,i+=25));f.height-=j.height,d.children.splice(++e,0,j),j.parent=d}f.lines=f.lines.slice(0,h),d.maybeSpill()}break}a-=g}},maybeSpill:function(){if(!(this.children.length<=10)){var a=this;do{var b=a.children.splice(a.children.length-5,5),c=new Re(b);if(a.parent){a.size-=c.size,a.height-=c.height;var d=m(a.parent.children,a);a.parent.children.splice(d+1,0,c)}else{var e=new Re(a.children);e.parent=a,a.children=[e,c],a=e}c.parent=a.parent}while(a.children.length>10);a.parent.maybeSpill()}},iterN:function(a,b,c){for(var d=this,e=0;e<this.children.length;++e){var f=d.children[e],g=f.chunkSize();if(a<g){var h=Math.min(b,g-a);if(f.iterN(a,h,c))return!0;if(0==(b-=h))break;a=0}else a-=g}}};var Eh=function(a,b,c){var d=this;if(c)for(var e in c)c.hasOwnProperty(e)&&(d[e]=c[e]);this.doc=a,this.node=b};Eh.prototype.clear=function(){var a=this,b=this.doc.cm,c=this.line.widgets,d=this.line,e=da(d);if(null!=e&&c){for(var f=0;f<c.length;++f)c[f]==a&&c.splice(f--,1);c.length||(d.widgets=null);var g=Ib(this);ca(d,Math.max(0,d.height-g)),b&&(qd(b,function(){Se(b,d,-g),Bc(b,e,"widget")}),ub(b,"lineWidgetCleared",b,this,e))}},Eh.prototype.changed=function(){var a=this,b=this.height,c=this.doc.cm,d=this.line;this.height=null;var e=Ib(this)-b;e&&(ab(this.doc,d)||ca(d,d.height+e),c&&qd(c,function(){c.curOp.forceUpdate=!0,Se(c,d,e),ub(c,"lineWidgetChanged",c,a,da(d))}))},J(Eh);var Fh=0,Gh=function(a,b){this.lines=[],this.type=b,this.doc=a,this.id=++Fh};Gh.prototype.clear=function(){var a=this;if(!this.explicitlyCleared){var b=this.doc.cm,c=b&&!b.curOp;if(c&&id(b),I(this,"clear")){var d=this.find();d&&ub(this,"clear",d.from,d.to)}for(var e=null,f=null,g=0;g<this.lines.length;++g){var h=a.lines[g],i=Fa(h.markedSpans,a);b&&!a.collapsed?Bc(b,da(h),"text"):b&&(null!=i.to&&(f=da(h)),null!=i.from&&(e=da(h))),h.markedSpans=Ga(h.markedSpans,i),null==i.from&&a.collapsed&&!ab(a.doc,h)&&b&&ca(h,sc(b.display))}if(b&&this.collapsed&&!b.options.lineWrapping)for(var j=0;j<this.lines.length;++j){var k=Xa(a.lines[j]),l=db(k);l>b.display.maxLineLength&&(b.display.maxLine=k,b.display.maxLineLength=l,b.display.maxLineChanged=!0)}null!=e&&b&&this.collapsed&&Ac(b,e,f+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,b&&ye(b.doc)),b&&ub(b,"markerCleared",b,this,e,f),c&&jd(b),this.parent&&this.parent.clear()}},Gh.prototype.find=function(a,b){var c=this;null==a&&"bookmark"==this.type&&(a=1);for(var d,e,f=0;f<this.lines.length;++f){var g=c.lines[f],h=Fa(g.markedSpans,c);if(null!=h.from&&(d=ha(b?g:da(g),h.from),-1==a))return d;if(null!=h.to&&(e=ha(b?g:da(g),h.to),1==a))return e}return d&&{from:d,to:e}},Gh.prototype.changed=function(){var a=this,b=this.find(-1,!0),c=this,d=this.doc.cm;b&&d&&qd(d,function(){var e=b.line,f=da(b.line),g=Ub(d,f);if(g&&(_b(g),d.curOp.selectionChanged=d.curOp.forceUpdate=!0),d.curOp.updateMaxLine=!0,!ab(c.doc,e)&&null!=c.height){var h=c.height;c.height=null;var i=Ib(c)-h;i&&ca(e,e.height+i)}ub(d,"markerChanged",d,a)})},Gh.prototype.attachLine=function(a){if(!this.lines.length&&this.doc.cm){var b=this.doc.cm.curOp;b.maybeHiddenMarkers&&-1!=m(b.maybeHiddenMarkers,this)||(b.maybeUnhiddenMarkers||(b.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(a)},Gh.prototype.detachLine=function(a){if(this.lines.splice(m(this.lines,a),1),!this.lines.length&&this.doc.cm){var b=this.doc.cm.curOp;(b.maybeHiddenMarkers||(b.maybeHiddenMarkers=[])).push(this)}},J(Gh);var Hh=function(a,b){var c=this;this.markers=a,this.primary=b;for(var d=0;d<a.length;++d)a[d].parent=c};Hh.prototype.clear=function(){var a=this;if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var b=0;b<this.markers.length;++b)a.markers[b].clear();ub(this,"clear")}},Hh.prototype.find=function(a,b){return this.primary.find(a,b)},J(Hh);var Ih=0,Jh=function(a,b,c,d,e){if(!(this instanceof Jh))return new Jh(a,b,c,d,e);null==c&&(c=0),Re.call(this,[new Qe([new oh("",null)])]),this.first=c,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=c;var f=ha(c,0);this.sel=Pd(f),this.history=new be(null),this.id=++Ih,this.modeOption=b,this.lineSep=d,this.direction="rtl"==e?"rtl":"ltr",this.extend=!1,"string"==typeof a&&(a=this.splitLines(a)),Yd(this,{from:f,to:f,text:a}),ve(this,Pd(f),Sg)};Jh.prototype=t(Re.prototype,{constructor:Jh,iter:function(a,b,c){c?this.iterN(a-this.first,b-a,c):this.iterN(this.first,this.first+this.size,a)},insert:function(a,b){for(var c=0,d=0;d<b.length;++d)c+=b[d].height;this.insertInner(a-this.first,b,c)},remove:function(a,b){this.removeInner(a-this.first,b)},getValue:function(a){var b=ba(this,this.first,this.first+this.size);return!1===a?b:b.join(a||this.lineSeparator())},setValue:td(function(a){var b=ha(this.first,0),c=this.first+this.size-1;Fe(this,{from:b,to:ha(c,_(this,c).text.length),text:this.splitLines(a),origin:"setValue",full:!0},!0),this.cm&&Zc(this.cm,0,0),ve(this,Pd(b),Sg)}),replaceRange:function(a,b,c,d){b=oa(this,b),c=c?oa(this,c):b,Le(this,a,b,c,d)},getRange:function(a,b,c){var d=aa(this,oa(this,a),oa(this,b));return!1===c?d:d.join(c||this.lineSeparator())},getLine:function(a){var b=this.getLineHandle(a);return b&&b.text},getLineHandle:function(a){if(fa(this,a))return _(this,a)},getLineNumber:function(a){return da(a)},getLineHandleVisualStart:function(a){return"number"==typeof a&&(a=_(this,a)),Xa(a)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(a){return oa(this,a)},getCursor:function(a){var b=this.sel.primary();return null==a||"head"==a?b.head:"anchor"==a?b.anchor:"end"==a||"to"==a||!1===a?b.to():b.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:td(function(a,b,c){se(this,oa(this,"number"==typeof a?ha(a,b||0):a),null,c)}),setSelection:td(function(a,b,c){se(this,oa(this,a),oa(this,b||a),c)}),extendSelection:td(function(a,b,c){pe(this,oa(this,a),b&&oa(this,b),c)}),extendSelections:td(function(a,b){qe(this,qa(this,a),b)}),extendSelectionsBy:td(function(a,b){qe(this,qa(this,q(this.sel.ranges,a)),b)}),setSelections:td(function(a,b,c){var d=this;if(a.length){for(var e=[],f=0;f<a.length;f++)e[f]=new Dh(oa(d,a[f].anchor),oa(d,a[f].head));null==b&&(b=Math.min(a.length-1,this.sel.primIndex)),ve(this,Od(this.cm,e,b),c)}}),addSelection:td(function(a,b,c){var d=this.sel.ranges.slice(0);d.push(new Dh(oa(this,a),oa(this,b||a))),ve(this,Od(this.cm,d,d.length-1),c)}),getSelection:function(a){for(var b,c=this,d=this.sel.ranges,e=0;e<d.length;e++){var f=aa(c,d[e].from(),d[e].to());b=b?b.concat(f):f}return!1===a?b:b.join(a||this.lineSeparator())},getSelections:function(a){for(var b=this,c=[],d=this.sel.ranges,e=0;e<d.length;e++){var f=aa(b,d[e].from(),d[e].to());!1!==a&&(f=f.join(a||b.lineSeparator())),c[e]=f}return c},replaceSelection:function(a,b,c){for(var d=[],e=0;e<this.sel.ranges.length;e++)d[e]=a;this.replaceSelections(d,b,c||"+input")},replaceSelections:td(function(a,b,c){for(var d=this,e=[],f=this.sel,g=0;g<f.ranges.length;g++){var h=f.ranges[g];e[g]={from:h.from(),to:h.to(),text:d.splitLines(a[g]),origin:c}}for(var i=b&&"end"!=b&&Ud(this,e,b),j=e.length-1;j>=0;j--)Fe(d,e[j]);i?ue(this,i):this.cm&&Yc(this.cm)}),undo:td(function(){He(this,"undo")}),redo:td(function(){He(this,"redo")}),undoSelection:td(function(){He(this,"undo",!0)}),redoSelection:td(function(){He(this,"redo",!0)}),setExtending:function(a){this.extend=a},getExtending:function(){return this.extend},historySize:function(){for(var a=this.history,b=0,c=0,d=0;d<a.done.length;d++)a.done[d].ranges||++b;for(var e=0;e<a.undone.length;e++)a.undone[e].ranges||++c;return{undo:b,redo:c}},clearHistory:function(){this.history=new be(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(a){return a&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(a){return this.history.generation==(a||this.cleanGeneration)},getHistory:function(){return{done:ne(this.history.done),undone:ne(this.history.undone)}},setHistory:function(a){var b=this.history=new be(this.history.maxGeneration);b.done=ne(a.done.slice(0),null,!0),b.undone=ne(a.undone.slice(0),null,!0)},setGutterMarker:td(function(a,b,c){return Pe(this,a,"gutter",function(a){var d=a.gutterMarkers||(a.gutterMarkers={});return d[b]=c,!c&&w(d)&&(a.gutterMarkers=null),!0})}),clearGutter:td(function(a){var b=this;this.iter(function(c){c.gutterMarkers&&c.gutterMarkers[a]&&Pe(b,c,"gutter",function(){return c.gutterMarkers[a]=null,w(c.gutterMarkers)&&(c.gutterMarkers=null),!0})})}),lineInfo:function(a){var b;if("number"==typeof a){if(!fa(this,a))return null;if(b=a,!(a=_(this,a)))return null}else if(null==(b=da(a)))return null;return{line:b,handle:a,text:a.text,gutterMarkers:a.gutterMarkers,textClass:a.textClass,bgClass:a.bgClass,wrapClass:a.wrapClass,widgets:a.widgets}},addLineClass:td(function(b,c,d){return Pe(this,b,"gutter"==c?"gutter":"class",function(b){var e="text"==c?"textClass":"background"==c?"bgClass":"gutter"==c?"gutterClass":"wrapClass";if(b[e]){if(a(d).test(b[e]))return!1;b[e]+=" "+d}else b[e]=d;return!0})}),removeLineClass:td(function(b,c,d){return Pe(this,b,"gutter"==c?"gutter":"class",function(b){var e="text"==c?"textClass":"background"==c?"bgClass":"gutter"==c?"gutterClass":"wrapClass",f=b[e];if(!f)return!1;if(null==d)b[e]=null;else{var g=f.match(a(d));if(!g)return!1;var h=g.index+g[0].length;b[e]=f.slice(0,g.index)+(g.index&&h!=f.length?" ":"")+f.slice(h)||null}return!0})}),addLineWidget:td(function(a,b,c){return Te(this,a,b,c)}),removeLineWidget:function(a){a.clear()},markText:function(a,b,c){return Ue(this,oa(this,a),oa(this,b),c,c&&c.type||"range")},setBookmark:function(a,b){var c={replacedWith:b&&(null==b.nodeType?b.widget:b),insertLeft:b&&b.insertLeft,clearWhenEmpty:!1,shared:b&&b.shared,handleMouseEvents:b&&b.handleMouseEvents};return a=oa(this,a),Ue(this,a,a,c,"bookmark")},findMarksAt:function(a){a=oa(this,a);var b=[],c=_(this,a.line).markedSpans;if(c)for(var d=0;d<c.length;++d){var e=c[d];(null==e.from||e.from<=a.ch)&&(null==e.to||e.to>=a.ch)&&b.push(e.marker.parent||e.marker)}return b},findMarks:function(a,b,c){a=oa(this,a),b=oa(this,b);var d=[],e=a.line;return this.iter(a.line,b.line+1,function(f){var g=f.markedSpans;if(g)for(var h=0;h<g.length;h++){var i=g[h];null!=i.to&&e==a.line&&a.ch>=i.to||null==i.from&&e!=a.line||null!=i.from&&e==b.line&&i.from>=b.ch||c&&!c(i.marker)||d.push(i.marker.parent||i.marker)}++e}),d},getAllMarks:function(){var a=[];return this.iter(function(b){var c=b.markedSpans;if(c)for(var d=0;d<c.length;++d)null!=c[d].from&&a.push(c[d].marker)}),a},posFromIndex:function(a){var b,c=this.first,d=this.lineSeparator().length;return this.iter(function(e){var f=e.text.length+d;if(f>a)return b=a,!0;a-=f,++c}),oa(this,ha(c,b))},indexFromPos:function(a){a=oa(this,a);var b=a.ch;if(a.line<this.first||a.ch<0)return 0;var c=this.lineSeparator().length;return this.iter(this.first,a.line,function(a){b+=a.text.length+c}),b},copy:function(a){var b=new Jh(ba(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return b.scrollTop=this.scrollTop,b.scrollLeft=this.scrollLeft,b.sel=this.sel,b.extend=!1,a&&(b.history.undoDepth=this.history.undoDepth,b.setHistory(this.getHistory())),b},linkedDoc:function(a){a||(a={});var b=this.first,c=this.first+this.size;null!=a.from&&a.from>b&&(b=a.from),null!=a.to&&a.to<c&&(c=a.to);var d=new Jh(ba(this,b,c),a.mode||this.modeOption,b,this.lineSep,this.direction);return a.sharedHist&&(d.history=this.history),(this.linked||(this.linked=[])).push({doc:d,sharedHist:a.sharedHist}),d.linked=[{doc:this,isParent:!0,sharedHist:a.sharedHist}],Xe(d,We(this)),d},unlinkDoc:function(a){var b=this;if(a instanceof Vf&&(a=a.doc),this.linked)for(var c=0;c<this.linked.length;++c){var d=b.linked[c];if(d.doc==a){b.linked.splice(c,1),a.unlinkDoc(b),Ye(We(b));break}}if(a.history==this.history){var e=[a.id];Zd(a,function(a){return e.push(a.id)},!0),a.history=new be(null),a.history.done=ne(this.history.done,e),a.history.undone=ne(this.history.undone,e)}},iterLinkedDocs:function(a){Zd(this,a)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(a){return this.lineSep?a.split(this.lineSep):bh(a)},lineSeparator:function(){return this.lineSep||"\n"},setDirection:td(function(a){"rtl"!=a&&(a="ltr"),a!=this.direction&&(this.direction=a,this.iter(function(a){return a.order=null}),this.cm&&ae(this.cm))})}),Jh.prototype.eachLine=Jh.prototype.iter;for(var Kh=0,Lh=!1,Mh={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},Nh=0;Nh<10;Nh++)Mh[Nh+48]=Mh[Nh+96]=String(Nh);for(var Oh=65;Oh<=90;Oh++)Mh[Oh]=String.fromCharCode(Oh);for(var Ph=1;Ph<=12;Ph++)Mh[Ph+111]=Mh[Ph+63235]="F"+Ph;var Qh={};Qh.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},Qh.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},Qh.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},Qh.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},Qh.default=Eg?Qh.macDefault:Qh.pcDefault;var Rh={selectAll:De,singleSelection:function(a){return a.setSelection(a.getCursor("anchor"),a.getCursor("head"),Sg)},killLine:function(a){return nf(a,function(b){if(b.empty()){var c=_(a.doc,b.head.line).text.length;return b.head.ch==c&&b.head.line<a.lastLine()?{from:b.head,to:ha(b.head.line+1,0)}:{from:b.head,to:ha(b.head.line,c)}}return{from:b.from(),to:b.to()}})},deleteLine:function(a){return nf(a,function(b){return{from:ha(b.from().line,0),to:oa(a.doc,ha(b.to().line+1,0))}})},delLineLeft:function(a){return nf(a,function(a){return{from:ha(a.from().line,0),to:a.from()}})},delWrappedLineLeft:function(a){return nf(a,function(b){var c=a.charCoords(b.head,"div").top+5;return{from:a.coordsChar({left:0,top:c},"div"),to:b.from()}})},delWrappedLineRight:function(a){return nf(a,function(b){var c=a.charCoords(b.head,"div").top+5,d=a.coordsChar({left:a.display.lineDiv.offsetWidth+100,top:c},"div");return{from:b.from(),to:d}})},undo:function(a){return a.undo()},redo:function(a){return a.redo()},undoSelection:function(a){return a.undoSelection()},redoSelection:function(a){return a.redoSelection()},goDocStart:function(a){return a.extendSelection(ha(a.firstLine(),0))},goDocEnd:function(a){return a.extendSelection(ha(a.lastLine()))},goLineStart:function(a){return a.extendSelectionsBy(function(b){return sf(a,b.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(a){return a.extendSelectionsBy(function(b){return uf(a,b.head)},{origin:"+move",bias:1})},goLineEnd:function(a){return a.extendSelectionsBy(function(b){return tf(a,b.head.line)},{origin:"+move",bias:-1})},goLineRight:function(a){return a.extendSelectionsBy(function(b){var c=a.cursorCoords(b.head,"div").top+5;return a.coordsChar({left:a.display.lineDiv.offsetWidth+100,top:c},"div")},Ug)},goLineLeft:function(a){return a.extendSelectionsBy(function(b){var c=a.cursorCoords(b.head,"div").top+5;return a.coordsChar({left:0,top:c},"div")},Ug)},goLineLeftSmart:function(a){return a.extendSelectionsBy(function(b){var c=a.cursorCoords(b.head,"div").top+5,d=a.coordsChar({left:0,top:c},"div");return d.ch<a.getLine(d.line).search(/\S/)?uf(a,b.head):d},Ug)},goLineUp:function(a){return a.moveV(-1,"line")},goLineDown:function(a){return a.moveV(1,"line")},goPageUp:function(a){return a.moveV(-1,"page")},goPageDown:function(a){return a.moveV(1,"page")},goCharLeft:function(a){return a.moveH(-1,"char")},goCharRight:function(a){return a.moveH(1,"char")},goColumnLeft:function(a){return a.moveH(-1,"column")},goColumnRight:function(a){return a.moveH(1,"column")},goWordLeft:function(a){return a.moveH(-1,"word")},goGroupRight:function(a){return a.moveH(1,"group")},goGroupLeft:function(a){return a.moveH(-1,"group")},goWordRight:function(a){return a.moveH(1,"word")},delCharBefore:function(a){return a.deleteH(-1,"char")},delCharAfter:function(a){return a.deleteH(1,"char")},delWordBefore:function(a){return a.deleteH(-1,"word")},delWordAfter:function(a){return a.deleteH(1,"word")},delGroupBefore:function(a){return a.deleteH(-1,"group")},delGroupAfter:function(a){return a.deleteH(1,"group")},indentAuto:function(a){return a.indentSelection("smart")},indentMore:function(a){return a.indentSelection("add")},indentLess:function(a){return a.indentSelection("subtract")},insertTab:function(a){return a.replaceSelection("\t")},insertSoftTab:function(a){for(var b=[],c=a.listSelections(),d=a.options.tabSize,e=0;e<c.length;e++){var f=c[e].from(),g=l(a.getLine(f.line),f.ch,d);b.push(o(d-g%d))}a.replaceSelections(b)},defaultTab:function(a){a.somethingSelected()?a.indentSelection("add"):a.execCommand("insertTab")},transposeChars:function(a){return qd(a,function(){for(var b=a.listSelections(),c=[],d=0;d<b.length;d++)if(b[d].empty()){var e=b[d].head,f=_(a.doc,e.line).text;if(f)if(e.ch==f.length&&(e=new ha(e.line,e.ch-1)),e.ch>0)e=new ha(e.line,e.ch+1),a.replaceRange(f.charAt(e.ch-1)+f.charAt(e.ch-2),ha(e.line,e.ch-2),e,"+transpose");else if(e.line>a.doc.first){var g=_(a.doc,e.line-1).text;g&&(e=new ha(e.line,1),a.replaceRange(f.charAt(0)+a.doc.lineSeparator()+g.charAt(g.length-1),ha(e.line-1,g.length-1),e,"+transpose"))}c.push(new Dh(e,e))}a.setSelections(c)})},newlineAndIndent:function(a){return qd(a,function(){for(var b=a.listSelections(),c=b.length-1;c>=0;c--)a.replaceRange(a.doc.lineSeparator(),b[c].anchor,b[c].head,"+input");b=a.listSelections();for(var d=0;d<b.length;d++)a.indentLine(b[d].from().line,null,!0);Yc(a)})},openLine:function(a){return a.replaceSelection("\n","start")},toggleOverwrite:function(a){return a.toggleOverwrite()}},Sh=new Ng,Th=null,Uh=function(a,b,c){this.time=a,this.pos=b,this.button=c};Uh.prototype.compare=function(a,b,c){return this.time+400>a&&0==ia(b,this.pos)&&c==this.button};var Vh,Wh,Xh={toString:function(){return"CodeMirror.Init"}},Yh={},Zh={};Vf.defaults=Yh,Vf.optionHandlers=Zh;var $h=[];Vf.defineInitHook=function(a){return $h.push(a)};var _h=null,ai=function(a){this.cm=a,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new Ng,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};ai.prototype.init=function(a){function b(a){if(!G(e,a)){if(e.somethingSelected())Yf({lineWise:!1,text:e.getSelections()}),"cut"==a.type&&e.replaceSelection("",null,"cut");else{if(!e.options.lineWiseCopyCut)return;var b=ag(e);Yf({lineWise:!0,text:b.text}),"cut"==a.type&&e.operation(function(){e.setSelections(b.ranges,0,Sg),e.replaceSelection("",null,"cut")})}if(a.clipboardData){a.clipboardData.clearData();var c=_h.text.join("\n");if(a.clipboardData.setData("Text",c),a.clipboardData.getData("Text")==c)return void a.preventDefault()}var g=cg(),h=g.firstChild;e.display.lineSpace.insertBefore(g,e.display.lineSpace.firstChild),h.value=_h.text.join("\n");var i=document.activeElement;Mg(h),setTimeout(function(){e.display.lineSpace.removeChild(g),i.focus(),i==f&&d.showPrimarySelection()},50)}}var c=this,d=this,e=d.cm,f=d.div=a.lineDiv;bg(f,e.options.spellcheck,e.options.autocorrect,e.options.autocapitalize),_g(f,"paste",function(a){G(e,a)||$f(a,e)||tg<=11&&setTimeout(rd(e,function(){return c.updateFromDOM()}),20)}),_g(f,"compositionstart",function(a){c.composing={data:a.data,done:!1}}),_g(f,"compositionupdate",function(a){c.composing||(c.composing={data:a.data,done:!1})}),_g(f,"compositionend",function(a){c.composing&&(a.data!=c.composing.data&&c.readFromDOMSoon(),c.composing.done=!0)}),_g(f,"touchstart",function(){return d.forceCompositionEnd()}),_g(f,"input",function(){c.composing||c.readFromDOMSoon()}),_g(f,"copy",b),_g(f,"cut",b)},ai.prototype.prepareSelection=function(){var a=Hc(this.cm,!1);return a.focus=this.cm.state.focused,a},ai.prototype.showSelection=function(a,b){a&&this.cm.display.view.length&&((a.focus||b)&&this.showPrimarySelection(),this.showMultipleSelections(a))},ai.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},ai.prototype.showPrimarySelection=function(){var a=this.getSelection(),b=this.cm,c=b.doc.sel.primary(),d=c.from(),e=c.to();if(b.display.viewTo==b.display.viewFrom||d.line>=b.display.viewTo||e.line<b.display.viewFrom)return void a.removeAllRanges();var f=jg(b,a.anchorNode,a.anchorOffset),g=jg(b,a.focusNode,a.focusOffset);if(!f||f.bad||!g||g.bad||0!=ia(ma(f,g),d)||0!=ia(la(f,g),e)){var h=b.display.view,i=d.line>=b.display.viewFrom&&fg(b,d)||{node:h[0].measure.map[2],offset:0},j=e.line<b.display.viewTo&&fg(b,e);if(!j){var k=h[h.length-1].measure,l=k.maps?k.maps[k.maps.length-1]:k.map;j={node:l[l.length-1],offset:l[l.length-2]-l[l.length-3]}}if(!i||!j)return void a.removeAllRanges();var m,n=a.rangeCount&&a.getRangeAt(0);try{m=Ig(i.node,i.offset,j.offset,j.node)}catch(a){}m&&(!og&&b.state.focused?(a.collapse(i.node,i.offset),m.collapsed||(a.removeAllRanges(),a.addRange(m))):(a.removeAllRanges(),a.addRange(m)),n&&null==a.anchorNode?a.addRange(n):og&&this.startGracePeriod()),this.rememberSelection()}},ai.prototype.startGracePeriod=function(){var a=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){a.gracePeriod=!1,a.selectionChanged()&&a.cm.operation(function(){return a.cm.curOp.selectionChanged=!0})},20)},ai.prototype.showMultipleSelections=function(a){c(this.cm.display.cursorDiv,a.cursors),c(this.cm.display.selectionDiv,a.selection)},ai.prototype.rememberSelection=function(){var a=this.getSelection();this.lastAnchorNode=a.anchorNode,this.lastAnchorOffset=a.anchorOffset,this.lastFocusNode=a.focusNode,this.lastFocusOffset=a.focusOffset},ai.prototype.selectionInEditor=function(){var a=this.getSelection();if(!a.rangeCount)return!1;var b=a.getRangeAt(0).commonAncestorContainer;return f(this.div,b)},ai.prototype.focus=function(){"nocursor"!=this.cm.options.readOnly&&(this.selectionInEditor()||this.showSelection(this.prepareSelection(),!0),this.div.focus())},ai.prototype.blur=function(){this.div.blur()},ai.prototype.getField=function(){return this.div},ai.prototype.supportsTouch=function(){return!0},ai.prototype.receivedFocus=function(){function a(){b.cm.state.focused&&(b.pollSelection(),b.polling.set(b.cm.options.pollInterval,a))}var b=this
;this.selectionInEditor()?this.pollSelection():qd(this.cm,function(){return b.cm.curOp.selectionChanged=!0}),this.polling.set(this.cm.options.pollInterval,a)},ai.prototype.selectionChanged=function(){var a=this.getSelection();return a.anchorNode!=this.lastAnchorNode||a.anchorOffset!=this.lastAnchorOffset||a.focusNode!=this.lastFocusNode||a.focusOffset!=this.lastFocusOffset},ai.prototype.pollSelection=function(){if(null==this.readDOMTimeout&&!this.gracePeriod&&this.selectionChanged()){var a=this.getSelection(),b=this.cm;if(Cg&&wg&&this.cm.display.gutterSpecs.length&&gg(a.anchorNode))return this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),void this.focus();if(!this.composing){this.rememberSelection();var c=jg(b,a.anchorNode,a.anchorOffset),d=jg(b,a.focusNode,a.focusOffset);c&&d&&qd(b,function(){ve(b.doc,Pd(c,d),Sg),(c.bad||d.bad)&&(b.curOp.selectionChanged=!0)})}}},ai.prototype.pollContent=function(){null!=this.readDOMTimeout&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var a=this.cm,b=a.display,c=a.doc.sel.primary(),d=c.from(),e=c.to();if(0==d.ch&&d.line>a.firstLine()&&(d=ha(d.line-1,_(a.doc,d.line-1).length)),e.ch==_(a.doc,e.line).text.length&&e.line<a.lastLine()&&(e=ha(e.line+1,0)),d.line<b.viewFrom||e.line>b.viewTo-1)return!1;var f,g,h;d.line==b.viewFrom||0==(f=zc(a,d.line))?(g=da(b.view[0].line),h=b.view[0].node):(g=da(b.view[f].line),h=b.view[f-1].node.nextSibling);var i,j,k=zc(a,e.line);if(k==b.view.length-1?(i=b.viewTo-1,j=b.lineDiv.lastChild):(i=da(b.view[k+1].line)-1,j=b.view[k+1].node.previousSibling),!h)return!1;for(var l=a.doc.splitLines(ig(a,h,j,g,i)),m=aa(a.doc,ha(g,0),ha(i,_(a.doc,i).text.length));l.length>1&&m.length>1;)if(p(l)==p(m))l.pop(),m.pop(),i--;else{if(l[0]!=m[0])break;l.shift(),m.shift(),g++}for(var n=0,o=0,q=l[0],r=m[0],s=Math.min(q.length,r.length);n<s&&q.charCodeAt(n)==r.charCodeAt(n);)++n;for(var t=p(l),u=p(m),v=Math.min(t.length-(1==l.length?n:0),u.length-(1==m.length?n:0));o<v&&t.charCodeAt(t.length-o-1)==u.charCodeAt(u.length-o-1);)++o;if(1==l.length&&1==m.length&&g==d.line)for(;n&&n>d.ch&&t.charCodeAt(t.length-o-1)==u.charCodeAt(u.length-o-1);)n--,o++;l[l.length-1]=t.slice(0,t.length-o).replace(/^\u200b+/,""),l[0]=l[0].slice(n).replace(/\u200b+$/,"");var w=ha(g,n),x=ha(i,m.length?p(m).length-o:0);return l.length>1||l[0]||ia(w,x)?(Le(a.doc,l,w,x,"+input"),!0):void 0},ai.prototype.ensurePolled=function(){this.forceCompositionEnd()},ai.prototype.reset=function(){this.forceCompositionEnd()},ai.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},ai.prototype.readFromDOMSoon=function(){var a=this;null==this.readDOMTimeout&&(this.readDOMTimeout=setTimeout(function(){if(a.readDOMTimeout=null,a.composing){if(!a.composing.done)return;a.composing=null}a.updateFromDOM()},80))},ai.prototype.updateFromDOM=function(){var a=this;!this.cm.isReadOnly()&&this.pollContent()||qd(this.cm,function(){return Ac(a.cm)})},ai.prototype.setUneditable=function(a){a.contentEditable="false"},ai.prototype.onKeyPress=function(a){0==a.charCode||this.composing||(a.preventDefault(),this.cm.isReadOnly()||rd(this.cm,Zf)(this.cm,String.fromCharCode(null==a.charCode?a.keyCode:a.charCode),0))},ai.prototype.readOnlyChanged=function(a){this.div.contentEditable=String("nocursor"!=a)},ai.prototype.onContextMenu=function(){},ai.prototype.resetPosition=function(){},ai.prototype.needsContentAttribute=!0;var bi=function(a){this.cm=a,this.prevInput="",this.pollingFast=!1,this.polling=new Ng,this.hasSelection=!1,this.composing=null};bi.prototype.init=function(a){function b(a){if(!G(e,a)){if(e.somethingSelected())Yf({lineWise:!1,text:e.getSelections()});else{if(!e.options.lineWiseCopyCut)return;var b=ag(e);Yf({lineWise:!0,text:b.text}),"cut"==a.type?e.setSelections(b.ranges,null,Sg):(d.prevInput="",f.value=b.text.join("\n"),Mg(f))}"cut"==a.type&&(e.state.cutIncoming=+new Date)}}var c=this,d=this,e=this.cm;this.createField(a);var f=this.textarea;a.wrapper.insertBefore(this.wrapper,a.wrapper.firstChild),Bg&&(f.style.width="0px"),_g(f,"input",function(){sg&&tg>=9&&c.hasSelection&&(c.hasSelection=null),d.poll()}),_g(f,"paste",function(a){G(e,a)||$f(a,e)||(e.state.pasteIncoming=+new Date,d.fastPoll())}),_g(f,"cut",b),_g(f,"copy",b),_g(a.scroller,"paste",function(b){if(!Jb(a,b)&&!G(e,b)){if(!f.dispatchEvent)return e.state.pasteIncoming=+new Date,void d.focus();var c=new Event("paste");c.clipboardData=b.clipboardData,f.dispatchEvent(c)}}),_g(a.lineSpace,"selectstart",function(b){Jb(a,b)||K(b)}),_g(f,"compositionstart",function(){var a=e.getCursor("from");d.composing&&d.composing.range.clear(),d.composing={start:a,range:e.markText(a,e.getCursor("to"),{className:"CodeMirror-composing"})}}),_g(f,"compositionend",function(){d.composing&&(d.poll(),d.composing.range.clear(),d.composing=null)})},bi.prototype.createField=function(a){this.wrapper=cg(),this.textarea=this.wrapper.firstChild},bi.prototype.prepareSelection=function(){var a=this.cm,b=a.display,c=a.doc,d=Hc(a);if(a.options.moveInputWithCursor){var e=ic(a,c.sel.primary().head,"div"),f=b.wrapper.getBoundingClientRect(),g=b.lineDiv.getBoundingClientRect();d.teTop=Math.max(0,Math.min(b.wrapper.clientHeight-10,e.top+g.top-f.top)),d.teLeft=Math.max(0,Math.min(b.wrapper.clientWidth-10,e.left+g.left-f.left))}return d},bi.prototype.showSelection=function(a){var b=this.cm,d=b.display;c(d.cursorDiv,a.cursors),c(d.selectionDiv,a.selection),null!=a.teTop&&(this.wrapper.style.top=a.teTop+"px",this.wrapper.style.left=a.teLeft+"px")},bi.prototype.reset=function(a){if(!this.contextMenuPending&&!this.composing){var b=this.cm;if(b.somethingSelected()){this.prevInput="";var c=b.getSelection();this.textarea.value=c,b.state.focused&&Mg(this.textarea),sg&&tg>=9&&(this.hasSelection=c)}else a||(this.prevInput=this.textarea.value="",sg&&tg>=9&&(this.hasSelection=null))}},bi.prototype.getField=function(){return this.textarea},bi.prototype.supportsTouch=function(){return!1},bi.prototype.focus=function(){if("nocursor"!=this.cm.options.readOnly&&(!Dg||g()!=this.textarea))try{this.textarea.focus()}catch(a){}},bi.prototype.blur=function(){this.textarea.blur()},bi.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},bi.prototype.receivedFocus=function(){this.slowPoll()},bi.prototype.slowPoll=function(){var a=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){a.poll(),a.cm.state.focused&&a.slowPoll()})},bi.prototype.fastPoll=function(){function a(){c.poll()||b?(c.pollingFast=!1,c.slowPoll()):(b=!0,c.polling.set(60,a))}var b=!1,c=this;c.pollingFast=!0,c.polling.set(20,a)},bi.prototype.poll=function(){var a=this,b=this.cm,c=this.textarea,d=this.prevInput;if(this.contextMenuPending||!b.state.focused||ch(c)&&!d&&!this.composing||b.isReadOnly()||b.options.disableInput||b.state.keySeq)return!1;var e=c.value;if(e==d&&!b.somethingSelected())return!1;if(sg&&tg>=9&&this.hasSelection===e||Eg&&/[\uf700-\uf7ff]/.test(e))return b.display.input.reset(),!1;if(b.doc.sel==b.display.selForContextMenu){var f=e.charCodeAt(0);if(8203!=f||d||(d=""),8666==f)return this.reset(),this.cm.execCommand("undo")}for(var g=0,h=Math.min(d.length,e.length);g<h&&d.charCodeAt(g)==e.charCodeAt(g);)++g;return qd(b,function(){Zf(b,e.slice(g),d.length-g,null,a.composing?"*compose":null),e.length>1e3||e.indexOf("\n")>-1?c.value=a.prevInput="":a.prevInput=e,a.composing&&(a.composing.range.clear(),a.composing.range=b.markText(a.composing.start,b.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},bi.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},bi.prototype.onKeyPress=function(){sg&&tg>=9&&(this.hasSelection=null),this.fastPoll()},bi.prototype.onContextMenu=function(a){function b(){if(null!=g.selectionStart){var a=e.somethingSelected(),b=""+(a?g.value:"");g.value="",g.value=b,d.prevInput=a?"":"",g.selectionStart=1,g.selectionEnd=b.length,f.selForContextMenu=e.doc.sel}}function c(){if(d.contextMenuPending==c&&(d.contextMenuPending=!1,d.wrapper.style.cssText=k,g.style.cssText=j,sg&&tg<9&&f.scrollbars.setScrollTop(f.scroller.scrollTop=i),null!=g.selectionStart)){(!sg||sg&&tg<9)&&b();var a=0,h=function(){f.selForContextMenu==e.doc.sel&&0==g.selectionStart&&g.selectionEnd>0&&""==d.prevInput?rd(e,De)(e):a++<10?f.detectingSelectAll=setTimeout(h,500):(f.selForContextMenu=null,f.input.reset())};f.detectingSelectAll=setTimeout(h,200)}}var d=this,e=d.cm,f=e.display,g=d.textarea;d.contextMenuPending&&d.contextMenuPending();var h=yc(e,a),i=f.scroller.scrollTop;if(h&&!xg){e.options.resetSelectionOnContextMenu&&-1==e.doc.sel.contains(h)&&rd(e,ve)(e.doc,Pd(h),Sg);var j=g.style.cssText,k=d.wrapper.style.cssText,l=d.wrapper.offsetParent.getBoundingClientRect();d.wrapper.style.cssText="position: static",g.style.cssText="position: absolute; width: 30px; height: 30px;\n      top: "+(a.clientY-l.top-5)+"px; left: "+(a.clientX-l.left-5)+"px;\n      z-index: 1000; background: "+(sg?"rgba(255, 255, 255, .05)":"transparent")+";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);";var m;if(ug&&(m=window.scrollY),f.input.focus(),ug&&window.scrollTo(null,m),f.input.reset(),e.somethingSelected()||(g.value=d.prevInput=" "),d.contextMenuPending=c,f.selForContextMenu=e.doc.sel,clearTimeout(f.detectingSelectAll),sg&&tg>=9&&b(),Kg){N(a);var n=function(){E(window,"mouseup",n),setTimeout(c,20)};_g(window,"mouseup",n)}else setTimeout(c,50)}},bi.prototype.readOnlyChanged=function(a){a||this.reset(),this.textarea.disabled="nocursor"==a},bi.prototype.setUneditable=function(){},bi.prototype.needsContentAttribute=!1,function(a){function b(b,d,e,f){a.defaults[b]=d,e&&(c[b]=f?function(a,b,c){c!=Xh&&e(a,b,c)}:e)}var c=a.optionHandlers;a.defineOption=b,a.Init=Xh,b("value","",function(a,b){return a.setValue(b)},!0),b("mode",null,function(a,b){a.doc.modeOption=b,Vd(a)},!0),b("indentUnit",2,Vd,!0),b("indentWithTabs",!1),b("smartIndent",!0),b("tabSize",4,function(a){Wd(a),bc(a),Ac(a)},!0),b("lineSeparator",null,function(a,b){if(a.doc.lineSep=b,b){var c=[],d=a.doc.first;a.doc.iter(function(a){for(var e=0;;){var f=a.text.indexOf(b,e);if(-1==f)break;e=f+b.length,c.push(ha(d,f))}d++});for(var e=c.length-1;e>=0;e--)Le(a.doc,b,c[e],ha(c[e].line,c[e].ch+b.length))}}),b("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b-\u200f\u2028\u2029\ufeff]/g,function(a,b,c){a.state.specialChars=new RegExp(b.source+(b.test("\t")?"":"|\t"),"g"),c!=Xh&&a.refresh()}),b("specialCharPlaceholder",jb,function(a){return a.refresh()},!0),b("electricChars",!0),b("inputStyle",Dg?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),b("spellcheck",!1,function(a,b){return a.getInputField().spellcheck=b},!0),b("autocorrect",!1,function(a,b){return a.getInputField().autocorrect=b},!0),b("autocapitalize",!1,function(a,b){return a.getInputField().autocapitalize=b},!0),b("rtlMoveVisually",!Gg),b("wholeLineUpdateBefore",!0),b("theme","default",function(a){Sf(a),Jd(a)},!0),b("keyMap","default",function(a,b,c){var d=mf(b),e=c!=Xh&&mf(c);e&&e.detach&&e.detach(a,d),d.attach&&d.attach(a,e||null)}),b("extraKeys",null),b("configureMouse",null),b("lineWrapping",!1,Uf,!0),b("gutters",[],function(a,b){a.display.gutterSpecs=Hd(b,a.options.lineNumbers),Jd(a)},!0),b("fixedGutter",!0,function(a,b){a.display.gutters.style.left=b?vc(a.display)+"px":"0",a.refresh()},!0),b("coverGutterNextToScrollbar",!1,function(a){return fd(a)},!0),b("scrollbarStyle","native",function(a){hd(a),fd(a),a.display.scrollbars.setScrollTop(a.doc.scrollTop),a.display.scrollbars.setScrollLeft(a.doc.scrollLeft)},!0),b("lineNumbers",!1,function(a,b){a.display.gutterSpecs=Hd(a.options.gutters,b),Jd(a)},!0),b("firstLineNumber",1,Jd,!0),b("lineNumberFormatter",function(a){return a},Jd,!0),b("showCursorWhenSelecting",!1,Gc,!0),b("resetSelectionOnContextMenu",!0),b("lineWiseCopyCut",!0),b("pasteLinesPerSelection",!0),b("selectionsMayTouch",!1),b("readOnly",!1,function(a,b){"nocursor"==b&&(Pc(a),a.display.input.blur()),a.display.input.readOnlyChanged(b)}),b("disableInput",!1,function(a,b){b||a.display.input.reset()},!0),b("dragDrop",!0,Tf),b("allowDropFileTypes",null),b("cursorBlinkRate",530),b("cursorScrollMargin",0),b("cursorHeight",1,Gc,!0),b("singleCursorHeightPerLine",!0,Gc,!0),b("workTime",100),b("workDelay",100),b("flattenSpans",!0,Wd,!0),b("addModeClass",!1,Wd,!0),b("pollInterval",100),b("undoDepth",200,function(a,b){return a.doc.history.undoDepth=b}),b("historyEventDelay",1250),b("viewportMargin",10,function(a){return a.refresh()},!0),b("maxHighlightLength",1e4,Wd,!0),b("moveInputWithCursor",!0,function(a,b){b||a.display.input.resetPosition()}),b("tabindex",null,function(a,b){return a.display.input.getField().tabIndex=b||""}),b("autofocus",null),b("direction","ltr",function(a,b){return a.doc.setDirection(b)},!0),b("phrases",null)}(Vf),function(a){var b=a.optionHandlers,c=a.helpers={};a.prototype={constructor:a,focus:function(){window.focus(),this.display.input.focus()},setOption:function(a,c){var d=this.options,e=d[a];d[a]==c&&"mode"!=a||(d[a]=c,b.hasOwnProperty(a)&&rd(this,b[a])(this,c,e),F(this,"optionChange",this,a))},getOption:function(a){return this.options[a]},getDoc:function(){return this.doc},addKeyMap:function(a,b){this.state.keyMaps[b?"push":"unshift"](mf(a))},removeKeyMap:function(a){for(var b=this.state.keyMaps,c=0;c<b.length;++c)if(b[c]==a||b[c].name==a)return b.splice(c,1),!0},addOverlay:sd(function(b,c){var d=b.token?b:a.getMode(this.options,b);if(d.startState)throw new Error("Overlays may not be stateful.");r(this.state.overlays,{mode:d,modeSpec:b,opaque:c&&c.opaque,priority:c&&c.priority||0},function(a){return a.priority}),this.state.modeGen++,Ac(this)}),removeOverlay:sd(function(a){for(var b=this,c=this.state.overlays,d=0;d<c.length;++d){var e=c[d].modeSpec;if(e==a||"string"==typeof a&&e.name==a)return c.splice(d,1),b.state.modeGen++,void Ac(b)}}),indentLine:sd(function(a,b,c){"string"!=typeof b&&"number"!=typeof b&&(b=null==b?this.options.smartIndent?"smart":"prev":b?"add":"subtract"),fa(this.doc,a)&&Xf(this,a,b,c)}),indentSelection:sd(function(a){for(var b=this,c=this.doc.sel.ranges,d=-1,e=0;e<c.length;e++){var f=c[e];if(f.empty())f.head.line>d&&(Xf(b,f.head.line,a,!0),d=f.head.line,e==b.doc.sel.primIndex&&Yc(b));else{var g=f.from(),h=f.to(),i=Math.max(d,g.line);d=Math.min(b.lastLine(),h.line-(h.ch?0:1))+1;for(var j=i;j<d;++j)Xf(b,j,a);var k=b.doc.sel.ranges;0==g.ch&&c.length==k.length&&k[e].from().ch>0&&re(b.doc,e,new Dh(g,k[e].to()),Sg)}}}),getTokenAt:function(a,b){return xa(this,a,b)},getLineTokens:function(a,b){return xa(this,ha(a),b,!0)},getTokenTypeAt:function(a){a=oa(this.doc,a);var b,c=sa(this,_(this.doc,a.line)),d=0,e=(c.length-1)/2,f=a.ch;if(0==f)b=c[2];else for(;;){var g=d+e>>1;if((g?c[2*g-1]:0)>=f)e=g;else{if(!(c[2*g+1]<f)){b=c[2*g+2];break}d=g+1}}var h=b?b.indexOf("overlay "):-1;return h<0?b:0==h?null:b.slice(0,h-1)},getModeAt:function(b){var c=this.doc.mode;return c.innerMode?a.innerMode(c,this.getTokenAt(b).state).mode:c},getHelper:function(a,b){return this.getHelpers(a,b)[0]},getHelpers:function(a,b){var d=this,e=[];if(!c.hasOwnProperty(b))return e;var f=c[b],g=this.getModeAt(a);if("string"==typeof g[b])f[g[b]]&&e.push(f[g[b]]);else if(g[b])for(var h=0;h<g[b].length;h++){var i=f[g[b][h]];i&&e.push(i)}else g.helperType&&f[g.helperType]?e.push(f[g.helperType]):f[g.name]&&e.push(f[g.name]);for(var j=0;j<f._global.length;j++){var k=f._global[j];k.pred(g,d)&&-1==m(e,k.val)&&e.push(k.val)}return e},getStateAfter:function(a,b){var c=this.doc;return a=na(c,null==a?c.first+c.size-1:a),ta(this,a+1,b).state},cursorCoords:function(a,b){var c,d=this.doc.sel.primary();return c=null==a?d.head:"object"==typeof a?oa(this.doc,a):a?d.from():d.to(),ic(this,c,b||"page")},charCoords:function(a,b){return hc(this,oa(this.doc,a),b||"page")},coordsChar:function(a,b){return a=gc(this,a,b||"page"),lc(this,a.left,a.top)},lineAtHeight:function(a,b){return a=gc(this,{top:a,left:0},b||"page").top,ea(this.doc,a+this.display.viewOffset)},heightAtLine:function(a,b,c){var d,e=!1;if("number"==typeof a){var f=this.doc.first+this.doc.size-1;a<this.doc.first?a=this.doc.first:a>f&&(a=f,e=!0),d=_(this.doc,a)}else d=a;return fc(this,d,{top:0,left:0},b||"page",c||e).top+(e?this.doc.height-cb(d):0)},defaultTextHeight:function(){return sc(this.display)},defaultCharWidth:function(){return tc(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(a,b,c,d,e){var f=this.display;a=ic(this,oa(this.doc,a));var g=a.bottom,h=a.left;if(b.style.position="absolute",b.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(b),f.sizer.appendChild(b),"over"==d)g=a.top;else if("above"==d||"near"==d){var i=Math.max(f.wrapper.clientHeight,this.doc.height),j=Math.max(f.sizer.clientWidth,f.lineSpace.clientWidth);("above"==d||a.bottom+b.offsetHeight>i)&&a.top>b.offsetHeight?g=a.top-b.offsetHeight:a.bottom+b.offsetHeight<=i&&(g=a.bottom),h+b.offsetWidth>j&&(h=j-b.offsetWidth)}b.style.top=g+"px",b.style.left=b.style.right="","right"==e?(h=f.sizer.clientWidth-b.offsetWidth,b.style.right="0px"):("left"==e?h=0:"middle"==e&&(h=(f.sizer.clientWidth-b.offsetWidth)/2),b.style.left=h+"px"),c&&Vc(this,{left:h,top:g,right:h+b.offsetWidth,bottom:g+b.offsetHeight})},triggerOnKeyDown:sd(Bf),triggerOnKeyPress:sd(Ef),triggerOnKeyUp:Df,triggerOnMouseDown:sd(Gf),execCommand:function(a){if(Rh.hasOwnProperty(a))return Rh[a].call(null,this)},triggerElectric:sd(function(a){_f(this,a)}),findPosH:function(a,b,c,d){var e=this,f=1;b<0&&(f=-1,b=-b);for(var g=oa(this.doc,a),h=0;h<b&&(g=dg(e.doc,g,f,c,d),!g.hitSide);++h);return g},moveH:sd(function(a,b){var c=this;this.extendSelectionsBy(function(d){return c.display.shift||c.doc.extend||d.empty()?dg(c.doc,d.head,a,b,c.options.rtlMoveVisually):a<0?d.from():d.to()},Ug)}),deleteH:sd(function(a,b){var c=this.doc.sel,d=this.doc;c.somethingSelected()?d.replaceSelection("",null,"+delete"):nf(this,function(c){var e=dg(d,c.head,a,b,!1);return a<0?{from:e,to:c.head}:{from:c.head,to:e}})}),findPosV:function(a,b,c,d){var e=this,f=1,g=d;b<0&&(f=-1,b=-b);for(var h=oa(this.doc,a),i=0;i<b;++i){var j=ic(e,h,"div");if(null==g?g=j.left:j.left=g,h=eg(e,j,f,c),h.hitSide)break}return h},moveV:sd(function(a,b){var c=this,d=this.doc,e=[],f=!this.display.shift&&!d.extend&&d.sel.somethingSelected();if(d.extendSelectionsBy(function(g){if(f)return a<0?g.from():g.to();var h=ic(c,g.head,"div");null!=g.goalColumn&&(h.left=g.goalColumn),e.push(h.left);var i=eg(c,h,a,b);return"page"==b&&g==d.sel.primary()&&Xc(c,hc(c,i,"div").top-h.top),i},Ug),e.length)for(var g=0;g<d.sel.ranges.length;g++)d.sel.ranges[g].goalColumn=e[g]}),findWordAt:function(a){var b=this.doc,c=_(b,a.line).text,d=a.ch,e=a.ch;if(c){var f=this.getHelper(a,"wordChars");"before"!=a.sticky&&e!=c.length||!d?++e:--d;for(var g=c.charAt(d),h=v(g,f)?function(a){return v(a,f)}:/\s/.test(g)?function(a){return/\s/.test(a)}:function(a){return!/\s/.test(a)&&!v(a)};d>0&&h(c.charAt(d-1));)--d;for(;e<c.length&&h(c.charAt(e));)++e}return new Dh(ha(a.line,d),ha(a.line,e))},toggleOverwrite:function(a){null!=a&&a==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?h(this.display.cursorDiv,"CodeMirror-overwrite"):Lg(this.display.cursorDiv,"CodeMirror-overwrite"),F(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==g()},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:sd(function(a,b){Zc(this,a,b)}),getScrollInfo:function(){var a=this.display.scroller;return{left:a.scrollLeft,top:a.scrollTop,height:a.scrollHeight-Nb(this)-this.display.barHeight,width:a.scrollWidth-Nb(this)-this.display.barWidth,clientHeight:Pb(this),clientWidth:Ob(this)}},scrollIntoView:sd(function(a,b){null==a?(a={from:this.doc.sel.primary().head,to:null},null==b&&(b=this.options.cursorScrollMargin)):"number"==typeof a?a={from:ha(a,0),to:null}:null==a.from&&(a={from:a,to:null}),a.to||(a.to=a.from),a.margin=b||0,null!=a.from.line?$c(this,a):ad(this,a.from,a.to,a.margin)}),setSize:sd(function(a,b){var c=this,d=function(a){return"number"==typeof a||/^\d+$/.test(String(a))?a+"px":a};null!=a&&(this.display.wrapper.style.width=d(a)),null!=b&&(this.display.wrapper.style.height=d(b)),this.options.lineWrapping&&ac(this);var e=this.display.viewFrom;this.doc.iter(e,this.display.viewTo,function(a){if(a.widgets)for(var b=0;b<a.widgets.length;b++)if(a.widgets[b].noHScroll){Bc(c,e,"widget");break}++e}),this.curOp.forceUpdate=!0,F(this,"refresh",this)}),operation:function(a){return qd(this,a)},startOperation:function(){return id(this)},endOperation:function(){return jd(this)},refresh:sd(function(){var a=this.display.cachedTextHeight;Ac(this),this.curOp.forceUpdate=!0,bc(this),Zc(this,this.doc.scrollLeft,this.doc.scrollTop),Dd(this.display),(null==a||Math.abs(a-sc(this.display))>.5)&&xc(this),F(this,"refresh",this)}),swapDoc:sd(function(a){var b=this.doc;return b.cm=null,this.state.selectingText&&this.state.selectingText(),$d(this,a),bc(this),this.display.input.reset(),Zc(this,a.scrollLeft,a.scrollTop),this.curOp.forceScroll=!0,ub(this,"swapDoc",this,b),b}),phrase:function(a){var b=this.options.phrases;return b&&Object.prototype.hasOwnProperty.call(b,a)?b[a]:a},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},J(a),a.registerHelper=function(b,d,e){c.hasOwnProperty(b)||(c[b]=a[b]={_global:[]}),c[b][d]=e},a.registerGlobalHelper=function(b,d,e,f){a.registerHelper(b,d,f),c[b]._global.push({pred:e,val:f})}}(Vf);var ci="iter insert remove copy getEditor constructor".split(" ");for(var di in Jh.prototype)Jh.prototype.hasOwnProperty(di)&&m(ci,di)<0&&(Vf.prototype[di]=function(a){return function(){return a.apply(this.doc,arguments)}}(Jh.prototype[di]));return J(Jh),Vf.inputStyles={textarea:bi,contenteditable:ai},Vf.defineMode=function(a){Vf.defaults.mode||"null"==a||(Vf.defaults.mode=a),T.apply(this,arguments)},Vf.defineMIME=U,Vf.defineMode("null",function(){return{token:function(a){return a.skipToEnd()}}}),Vf.defineMIME("text/plain","null"),Vf.defineExtension=function(a,b){Vf.prototype[a]=b},Vf.defineDocExtension=function(a,b){Jh.prototype[a]=b},Vf.fromTextArea=lg,function(a){a.off=E,a.on=_g,a.wheelEventPixels=Md,a.Doc=Jh,a.splitLines=bh,a.countColumn=l,a.findColumn=n,a.isWordChar=u,a.Pass=Rg,a.signal=F,a.Line=oh,a.changeEnd=Qd,a.scrollbarModel=xh,a.Pos=ha,a.cmpPos=ia,a.modes=fh,a.mimeModes=gh,a.resolveMode=V,a.getMode=W,a.modeExtensions=hh,a.extendMode=X,a.copyState=Y,a.startState=$,a.innerMode=Z,a.commands=Rh,a.keyMap=Qh,a.keyName=lf,a.isModifierKey=jf,a.lookupKey=hf,a.normalizeKeyMap=gf,a.StringStream=ih,a.SharedTextMarker=Hh,a.TextMarker=Gh,a.LineWidget=Eh,a.e_preventDefault=K,a.e_stopPropagation=L,a.e_stop=N,a.addClass=h,a.contains=f,a.rmClass=Lg,a.keyNames=Mh}(Vf),Vf.version="5.47.0",Vf}),function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],a):a(CodeMirror)}(function(a){"use strict";a.defineMode("javascript",function(b,c){function d(a){for(var b,c=!1,d=!1;null!=(b=a.next());){if(!c){if("/"==b&&!d)return;"["==b?d=!0:d&&"]"==b&&(d=!1)}c=!c&&"\\"==b}}function e(a,b,c){return Na=a,Oa=c,b}function f(a,b){var c=a.next();if('"'==c||"'"==c)return b.tokenize=g(c),b.tokenize(a,b);if("."==c&&a.match(/^\d+(?:[eE][+\-]?\d+)?/))return e("number","number");if("."==c&&a.match(".."))return e("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(c))return e(c);if("="==c&&a.eat(">"))return e("=>","operator");if("0"==c&&a.match(/^(?:x[\da-f]+|o[0-7]+|b[01]+)n?/i))return e("number","number");if(/\d/.test(c))return a.match(/^\d*(?:n|(?:\.\d*)?(?:[eE][+\-]?\d+)?)?/),e("number","number");if("/"==c)return a.eat("*")?(b.tokenize=h,h(a,b)):a.eat("/")?(a.skipToEnd(),e("comment","comment")):Ma(a,b,1)?(d(a),a.match(/^\b(([gimyus])(?![gimyus]*\2))+\b/),e("regexp","string-2")):(a.eat("="),e("operator","operator",a.current()));if("`"==c)return b.tokenize=i,i(a,b);if("#"==c)return a.skipToEnd(),e("error","error");if(Wa.test(c))return">"==c&&b.lexical&&">"==b.lexical.type||(a.eat("=")?"!"!=c&&"="!=c||a.eat("="):/[<>*+\-]/.test(c)&&(a.eat(c),">"==c&&a.eat(c))),e("operator","operator",a.current());if(Ua.test(c)){a.eatWhile(Ua);var f=a.current();if("."!=b.lastType){if(Va.propertyIsEnumerable(f)){var j=Va[f];return e(j.type,j.style,f)}if("async"==f&&a.match(/^(\s|\/\*.*?\*\/)*[\[\(\w]/,!1))return e("async","keyword",f)}return e("variable","variable",f)}}function g(a){return function(b,c){var d,g=!1;if(Ra&&"@"==b.peek()&&b.match(Xa))return c.tokenize=f,e("jsonld-keyword","meta");for(;null!=(d=b.next())&&(d!=a||g);)g=!g&&"\\"==d;return g||(c.tokenize=f),e("string","string")}}function h(a,b){for(var c,d=!1;c=a.next();){if("/"==c&&d){b.tokenize=f;break}d="*"==c}return e("comment","comment")}function i(a,b){for(var c,d=!1;null!=(c=a.next());){if(!d&&("`"==c||"$"==c&&a.eat("{"))){b.tokenize=f;break}d=!d&&"\\"==c}return e("quasi","string-2",a.current())}function j(a,b){b.fatArrowAt&&(b.fatArrowAt=null);var c=a.string.indexOf("=>",a.start);if(!(c<0)){if(Ta){var d=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(a.string.slice(a.start,c));d&&(c=d.index)}for(var e=0,f=!1,g=c-1;g>=0;--g){var h=a.string.charAt(g),i=Ya.indexOf(h);if(i>=0&&i<3){if(!e){++g;break}if(0==--e){"("==h&&(f=!0);break}}else if(i>=3&&i<6)++e;else if(Ua.test(h))f=!0;else{if(/["'\/]/.test(h))return;if(f&&!e){++g;break}}}f&&!e&&(b.fatArrowAt=g)}}function k(a,b,c,d,e,f){this.indented=a,this.column=b,this.type=c,this.prev=e,this.info=f,null!=d&&(this.align=d)}function l(a,b){for(var c=a.localVars;c;c=c.next)if(c.name==b)return!0;for(var d=a.context;d;d=d.prev)for(var c=d.vars;c;c=c.next)if(c.name==b)return!0}function m(a,b,c,d,e){var f=a.cc;for($a.state=a,$a.stream=e,$a.marked=null,$a.cc=f,$a.style=b,a.lexical.hasOwnProperty("align")||(a.lexical.align=!0);;)if((f.length?f.pop():Sa?D:B)(c,d)){for(;f.length&&f[f.length-1].lex;)f.pop()();return $a.marked?$a.marked:"variable"==c&&l(a,d)?"variable-2":b}}function n(){for(var a=arguments.length-1;a>=0;a--)$a.cc.push(arguments[a])}function o(){return n.apply(null,arguments),!0}function p(a,b){for(var c=b;c;c=c.next)if(c.name==a)return!0;return!1}function q(a){var b=$a.state;if($a.marked="def",b.context)if("var"==b.lexical.info&&b.context&&b.context.block){var d=r(a,b.context);if(null!=d)return void(b.context=d)}else if(!p(a,b.localVars))return void(b.localVars=new u(a,b.localVars));c.globalVars&&!p(a,b.globalVars)&&(b.globalVars=new u(a,b.globalVars))}function r(a,b){if(b){if(b.block){var c=r(a,b.prev);return c?c==b.prev?b:new t(c,b.vars,!0):null}return p(a,b.vars)?b:new t(b.prev,new u(a,b.vars),!1)}return null}function s(a){return"public"==a||"private"==a||"protected"==a||"abstract"==a||"readonly"==a}function t(a,b,c){this.prev=a,this.vars=b,this.block=c}function u(a,b){this.name=a,this.next=b}function v(){$a.state.context=new t($a.state.context,$a.state.localVars,!1),$a.state.localVars=_a}function w(){$a.state.context=new t($a.state.context,$a.state.localVars,!0),$a.state.localVars=null}function x(){$a.state.localVars=$a.state.context.vars,$a.state.context=$a.state.context.prev}function y(a,b){var c=function(){var c=$a.state,d=c.indented;if("stat"==c.lexical.type)d=c.lexical.indented;else for(var e=c.lexical;e&&")"==e.type&&e.align;e=e.prev)d=e.indented;c.lexical=new k(d,$a.stream.column(),a,null,c.lexical,b)};return c.lex=!0,c}function z(){var a=$a.state;a.lexical.prev&&(")"==a.lexical.type&&(a.indented=a.lexical.indented),a.lexical=a.lexical.prev)}function A(a){function b(c){return c==a?o():";"==a||"}"==c||")"==c||"]"==c?n():o(b)}return b}function B(a,b){return"var"==a?o(y("vardef",b),ia,A(";"),z):"keyword a"==a?o(y("form"),F,B,z):"keyword b"==a?o(y("form"),B,z):"keyword d"==a?$a.stream.match(/^\s*$/,!1)?o():o(y("stat"),H,A(";"),z):"debugger"==a?o(A(";")):"{"==a?o(y("}"),w,Y,z,x):";"==a?o():"if"==a?("else"==$a.state.lexical.info&&$a.state.cc[$a.state.cc.length-1]==z&&$a.state.cc.pop()(),o(y("form"),F,B,z,oa)):"function"==a?o(sa):"for"==a?o(y("form"),pa,B,z):"class"==a||Ta&&"interface"==b?($a.marked="keyword",o(y("form","class"==a?a:b),xa,z)):"variable"==a?Ta&&"declare"==b?($a.marked="keyword",o(B)):Ta&&("module"==b||"enum"==b||"type"==b)&&$a.stream.match(/^\s*\w/,!1)?($a.marked="keyword","enum"==b?o(Ja):"type"==b?o(ua,A("operator"),aa,A(";")):o(y("form"),ja,A("{"),y("}"),Y,z,z)):Ta&&"namespace"==b?($a.marked="keyword",o(y("form"),D,B,z)):Ta&&"abstract"==b?($a.marked="keyword",o(B)):o(y("stat"),R):"switch"==a?o(y("form"),F,A("{"),y("}","switch"),w,Y,z,z,x):"case"==a?o(D,A(":")):"default"==a?o(A(":")):"catch"==a?o(y("form"),v,C,B,z,x):"export"==a?o(y("stat"),Ba,z):"import"==a?o(y("stat"),Da,z):"async"==a?o(B):"@"==b?o(D,B):n(y("stat"),D,A(";"),z)}function C(a){if("("==a)return o(va,A(")"))}function D(a,b){return G(a,b,!1)}function E(a,b){return G(a,b,!0)}function F(a){return"("!=a?n():o(y(")"),D,A(")"),z)}function G(a,b,c){if($a.state.fatArrowAt==$a.stream.start){var d=c?N:M;if("("==a)return o(v,y(")"),W(va,")"),z,A("=>"),d,x);if("variable"==a)return n(v,ja,A("=>"),d,x)}var e=c?J:I;return Za.hasOwnProperty(a)?o(e):"function"==a?o(sa,e):"class"==a||Ta&&"interface"==b?($a.marked="keyword",o(y("form"),wa,z)):"keyword c"==a||"async"==a?o(c?E:D):"("==a?o(y(")"),H,A(")"),z,e):"operator"==a||"spread"==a?o(c?E:D):"["==a?o(y("]"),Ia,z,e):"{"==a?X(T,"}",null,e):"quasi"==a?n(K,e):"new"==a?o(O(c)):"import"==a?o(D):o()}function H(a){return a.match(/[;\}\)\],]/)?n():n(D)}function I(a,b){return","==a?o(D):J(a,b,!1)}function J(a,b,c){var d=0==c?I:J,e=0==c?D:E;return"=>"==a?o(v,c?N:M,x):"operator"==a?/\+\+|--/.test(b)||Ta&&"!"==b?o(d):Ta&&"<"==b&&$a.stream.match(/^([^>]|<.*?>)*>\s*\(/,!1)?o(y(">"),W(aa,">"),z,d):"?"==b?o(D,A(":"),e):o(e):"quasi"==a?n(K,d):";"!=a?"("==a?X(E,")","call",d):"."==a?o(S,d):"["==a?o(y("]"),H,A("]"),z,d):Ta&&"as"==b?($a.marked="keyword",o(aa,d)):"regexp"==a?($a.state.lastType=$a.marked="operator",$a.stream.backUp($a.stream.pos-$a.stream.start-1),o(e)):void 0:void 0}function K(a,b){return"quasi"!=a?n():"${"!=b.slice(b.length-2)?o(K):o(D,L)}function L(a){if("}"==a)return $a.marked="string-2",$a.state.tokenize=i,o(K)}function M(a){return j($a.stream,$a.state),n("{"==a?B:D)}function N(a){return j($a.stream,$a.state),n("{"==a?B:E)}function O(a){return function(b){return"."==b?o(a?Q:P):"variable"==b&&Ta?o(fa,a?J:I):n(a?E:D)}}function P(a,b){if("target"==b)return $a.marked="keyword",o(I)}function Q(a,b){if("target"==b)return $a.marked="keyword",o(J)}function R(a){return":"==a?o(z,B):n(I,A(";"),z)}function S(a){if("variable"==a)return $a.marked="property",o()}function T(a,b){if("async"==a)return $a.marked="property",o(T);if("variable"==a||"keyword"==$a.style){if($a.marked="property","get"==b||"set"==b)return o(U);var c;return Ta&&$a.state.fatArrowAt==$a.stream.start&&(c=$a.stream.match(/^\s*:\s*/,!1))&&($a.state.fatArrowAt=$a.stream.pos+c[0].length),o(V)}return"number"==a||"string"==a?($a.marked=Ra?"property":$a.style+" property",o(V)):"jsonld-keyword"==a?o(V):Ta&&s(b)?($a.marked="keyword",o(T)):"["==a?o(D,Z,A("]"),V):"spread"==a?o(E,V):"*"==b?($a.marked="keyword",o(T)):":"==a?n(V):void 0}function U(a){return"variable"!=a?n(V):($a.marked="property",o(sa))}function V(a){return":"==a?o(E):"("==a?n(sa):void 0}function W(a,b,c){function d(e,f){if(c?c.indexOf(e)>-1:","==e){var g=$a.state.lexical;return"call"==g.info&&(g.pos=(g.pos||0)+1),o(function(c,d){return c==b||d==b?n():n(a)},d)}return e==b||f==b?o():c&&c.indexOf(";")>-1?n(a):o(A(b))}return function(c,e){return c==b||e==b?o():n(a,d)}}function X(a,b,c){
for(var d=3;d<arguments.length;d++)$a.cc.push(arguments[d]);return o(y(b,c),W(a,b),z)}function Y(a){return"}"==a?o():n(B,Y)}function Z(a,b){if(Ta){if(":"==a||"in"==b)return o(aa);if("?"==b)return o(Z)}}function $(a){if(Ta&&":"==a)return $a.stream.match(/^\s*\w+\s+is\b/,!1)?o(D,_,aa):o(aa)}function _(a,b){if("is"==b)return $a.marked="keyword",o()}function aa(a,b){return"keyof"==b||"typeof"==b||"infer"==b?($a.marked="keyword",o("typeof"==b?E:aa)):"variable"==a||"void"==b?($a.marked="type",o(ea)):"|"==b||"&"==b?o(aa):"string"==a||"number"==a||"atom"==a?o(ea):"["==a?o(y("]"),W(aa,"]",","),z,ea):"{"==a?o(y("}"),W(ca,"}",",;"),z,ea):"("==a?o(W(da,")"),ba,ea):"<"==a?o(W(aa,">"),aa):void 0}function ba(a){if("=>"==a)return o(aa)}function ca(a,b){return"variable"==a||"keyword"==$a.style?($a.marked="property",o(ca)):"?"==b||"number"==a||"string"==a?o(ca):":"==a?o(aa):"["==a?o(A("variable"),Z,A("]"),ca):"("==a?n(ta,ca):void 0}function da(a,b){return"variable"==a&&$a.stream.match(/^\s*[?:]/,!1)||"?"==b?o(da):":"==a?o(aa):"spread"==a?o(da):n(aa)}function ea(a,b){return"<"==b?o(y(">"),W(aa,">"),z,ea):"|"==b||"."==a||"&"==b?o(aa):"["==a?o(aa,A("]"),ea):"extends"==b||"implements"==b?($a.marked="keyword",o(aa)):"?"==b?o(aa,A(":"),aa):void 0}function fa(a,b){if("<"==b)return o(y(">"),W(aa,">"),z,ea)}function ga(){return n(aa,ha)}function ha(a,b){if("="==b)return o(aa)}function ia(a,b){return"enum"==b?($a.marked="keyword",o(Ja)):n(ja,Z,ma,na)}function ja(a,b){return Ta&&s(b)?($a.marked="keyword",o(ja)):"variable"==a?(q(b),o()):"spread"==a?o(ja):"["==a?X(la,"]"):"{"==a?X(ka,"}"):void 0}function ka(a,b){return"variable"!=a||$a.stream.match(/^\s*:/,!1)?("variable"==a&&($a.marked="property"),"spread"==a?o(ja):"}"==a?n():"["==a?o(D,A("]"),A(":"),ka):o(A(":"),ja,ma)):(q(b),o(ma))}function la(){return n(ja,ma)}function ma(a,b){if("="==b)return o(E)}function na(a){if(","==a)return o(ia)}function oa(a,b){if("keyword b"==a&&"else"==b)return o(y("form","else"),B,z)}function pa(a,b){return"await"==b?o(pa):"("==a?o(y(")"),qa,z):void 0}function qa(a){return"var"==a?o(ia,ra):"variable"==a?o(ra):n(ra)}function ra(a,b){return")"==a?o():";"==a?o(ra):"in"==b||"of"==b?($a.marked="keyword",o(D,ra)):n(D,ra)}function sa(a,b){return"*"==b?($a.marked="keyword",o(sa)):"variable"==a?(q(b),o(sa)):"("==a?o(v,y(")"),W(va,")"),z,$,B,x):Ta&&"<"==b?o(y(">"),W(ga,">"),z,sa):void 0}function ta(a,b){return"*"==b?($a.marked="keyword",o(ta)):"variable"==a?(q(b),o(ta)):"("==a?o(v,y(")"),W(va,")"),z,$,x):Ta&&"<"==b?o(y(">"),W(ga,">"),z,ta):void 0}function ua(a,b){return"keyword"==a||"variable"==a?($a.marked="type",o(ua)):"<"==b?o(y(">"),W(ga,">"),z):void 0}function va(a,b){return"@"==b&&o(D,va),"spread"==a?o(va):Ta&&s(b)?($a.marked="keyword",o(va)):Ta&&"this"==a?o(Z,ma):n(ja,Z,ma)}function wa(a,b){return"variable"==a?xa(a,b):ya(a,b)}function xa(a,b){if("variable"==a)return q(b),o(ya)}function ya(a,b){return"<"==b?o(y(">"),W(ga,">"),z,ya):"extends"==b||"implements"==b||Ta&&","==a?("implements"==b&&($a.marked="keyword"),o(Ta?aa:D,ya)):"{"==a?o(y("}"),za,z):void 0}function za(a,b){return"async"==a||"variable"==a&&("static"==b||"get"==b||"set"==b||Ta&&s(b))&&$a.stream.match(/^\s+[\w$\xa1-\uffff]/,!1)?($a.marked="keyword",o(za)):"variable"==a||"keyword"==$a.style?($a.marked="property",o(Ta?Aa:sa,za)):"number"==a||"string"==a?o(Ta?Aa:sa,za):"["==a?o(D,Z,A("]"),Ta?Aa:sa,za):"*"==b?($a.marked="keyword",o(za)):Ta&&"("==a?n(ta,za):";"==a||","==a?o(za):"}"==a?o():"@"==b?o(D,za):void 0}function Aa(a,b){if("?"==b)return o(Aa);if(":"==a)return o(aa,ma);if("="==b)return o(E);var c=$a.state.lexical.prev;return n(c&&"interface"==c.info?ta:sa)}function Ba(a,b){return"*"==b?($a.marked="keyword",o(Ha,A(";"))):"default"==b?($a.marked="keyword",o(D,A(";"))):"{"==a?o(W(Ca,"}"),Ha,A(";")):n(B)}function Ca(a,b){return"as"==b?($a.marked="keyword",o(A("variable"))):"variable"==a?n(E,Ca):void 0}function Da(a){return"string"==a?o():"("==a?n(D):n(Ea,Fa,Ha)}function Ea(a,b){return"{"==a?X(Ea,"}"):("variable"==a&&q(b),"*"==b&&($a.marked="keyword"),o(Ga))}function Fa(a){if(","==a)return o(Ea,Fa)}function Ga(a,b){if("as"==b)return $a.marked="keyword",o(Ea)}function Ha(a,b){if("from"==b)return $a.marked="keyword",o(D)}function Ia(a){return"]"==a?o():n(W(E,"]"))}function Ja(){return n(y("form"),ja,A("{"),y("}"),W(Ka,"}"),z,z)}function Ka(){return n(ja,ma)}function La(a,b){return"operator"==a.lastType||","==a.lastType||Wa.test(b.charAt(0))||/[,.]/.test(b.charAt(0))}function Ma(a,b,c){return b.tokenize==f&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(b.lastType)||"quasi"==b.lastType&&/\{\s*$/.test(a.string.slice(0,a.pos-(c||0)))}var Na,Oa,Pa=b.indentUnit,Qa=c.statementIndent,Ra=c.jsonld,Sa=c.json||Ra,Ta=c.typescript,Ua=c.wordCharacters||/[\w$\xa1-\uffff]/,Va=function(){function a(a){return{type:a,style:"keyword"}}var b=a("keyword a"),c=a("keyword b"),d=a("keyword c"),e=a("keyword d"),f=a("operator"),g={type:"atom",style:"atom"};return{if:a("if"),while:b,with:b,else:c,do:c,try:c,finally:c,return:e,break:e,continue:e,new:a("new"),delete:d,void:d,throw:d,debugger:a("debugger"),var:a("var"),const:a("var"),let:a("var"),function:a("function"),catch:a("catch"),for:a("for"),switch:a("switch"),case:a("case"),default:a("default"),in:f,typeof:f,instanceof:f,true:g,false:g,null:g,undefined:g,NaN:g,Infinity:g,this:a("this"),class:a("class"),super:a("atom"),yield:d,export:a("export"),import:a("import"),extends:d,await:d}}(),Wa=/[+\-*&%=<>!?|~^@]/,Xa=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/,Ya="([{}])",Za={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,"jsonld-keyword":!0},$a={state:null,column:null,marked:null,cc:null},_a=new u("this",new u("arguments",null));return x.lex=!0,z.lex=!0,{startState:function(a){var b={tokenize:f,lastType:"sof",cc:[],lexical:new k((a||0)-Pa,0,"block",!1),localVars:c.localVars,context:c.localVars&&new t(null,null,!1),indented:a||0};return c.globalVars&&"object"==typeof c.globalVars&&(b.globalVars=c.globalVars),b},token:function(a,b){if(a.sol()&&(b.lexical.hasOwnProperty("align")||(b.lexical.align=!1),b.indented=a.indentation(),j(a,b)),b.tokenize!=h&&a.eatSpace())return null;var c=b.tokenize(a,b);return"comment"==Na?c:(b.lastType="operator"!=Na||"++"!=Oa&&"--"!=Oa?Na:"incdec",m(b,c,Na,Oa,a))},indent:function(b,d){if(b.tokenize==h)return a.Pass;if(b.tokenize!=f)return 0;var e,g=d&&d.charAt(0),i=b.lexical;if(!/^\s*else\b/.test(d))for(var j=b.cc.length-1;j>=0;--j){var k=b.cc[j];if(k==z)i=i.prev;else if(k!=oa)break}for(;("stat"==i.type||"form"==i.type)&&("}"==g||(e=b.cc[b.cc.length-1])&&(e==I||e==J)&&!/^[,\.=+\-*:?[\(]/.test(d));)i=i.prev;Qa&&")"==i.type&&"stat"==i.prev.type&&(i=i.prev);var l=i.type,m=g==l;return"vardef"==l?i.indented+("operator"==b.lastType||","==b.lastType?i.info.length+1:0):"form"==l&&"{"==g?i.indented:"form"==l?i.indented+Pa:"stat"==l?i.indented+(La(b,d)?Qa||Pa:0):"switch"!=i.info||m||0==c.doubleIndentSwitch?i.align?i.column+(m?0:1):i.indented+(m?0:Pa):i.indented+(/^(?:case|default)\b/.test(d)?Pa:2*Pa)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:Sa?null:"/*",blockCommentEnd:Sa?null:"*/",blockCommentContinue:Sa?null:" * ",lineComment:Sa?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:Sa?"json":"javascript",jsonldMode:Ra,jsonMode:Sa,expressionAllowed:Ma,skipExpression:function(a){var b=a.cc[a.cc.length-1];b!=D&&b!=E||a.cc.pop()}}}),a.registerHelper("wordChars","javascript",/[\w$]/),a.defineMIME("text/javascript","javascript"),a.defineMIME("text/ecmascript","javascript"),a.defineMIME("application/javascript","javascript"),a.defineMIME("application/x-javascript","javascript"),a.defineMIME("application/ecmascript","javascript"),a.defineMIME("application/json",{name:"javascript",json:!0}),a.defineMIME("application/x-json",{name:"javascript",json:!0}),a.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),a.defineMIME("text/typescript",{name:"javascript",typescript:!0}),a.defineMIME("application/typescript",{name:"javascript",typescript:!0})}),function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],a):a(CodeMirror)}(function(a){"use strict";function b(a){for(var b={},c=0;c<a.length;++c)b[a[c].toLowerCase()]=!0;return b}function c(a,b){for(var c,d=!1;null!=(c=a.next());){if(d&&"/"==c){b.tokenize=null;break}d="*"==c}return["comment","comment"]}a.defineMode("css",function(b,c){function d(a,b){return o=b,a}function e(a,b){var c=a.next();if(r[c]){var e=r[c](a,b);if(!1!==e)return e}return"@"==c?(a.eatWhile(/[\w\\\-]/),d("def",a.current())):"="==c||("~"==c||"|"==c)&&a.eat("=")?d(null,"compare"):'"'==c||"'"==c?(b.tokenize=f(c),b.tokenize(a,b)):"#"==c?(a.eatWhile(/[\w\\\-]/),d("atom","hash")):"!"==c?(a.match(/^\s*\w*/),d("keyword","important")):/\d/.test(c)||"."==c&&a.eat(/\d/)?(a.eatWhile(/[\w.%]/),d("number","unit")):"-"!==c?/[,+>*\/]/.test(c)?d(null,"select-op"):"."==c&&a.match(/^-?[_a-z][_a-z0-9-]*/i)?d("qualifier","qualifier"):/[:;{}\[\]\(\)]/.test(c)?d(null,c):a.match(/[\w-.]+(?=\()/)?(/^(url(-prefix)?|domain|regexp)$/.test(a.current().toLowerCase())&&(b.tokenize=g),d("variable callee","variable")):/[\w\\\-]/.test(c)?(a.eatWhile(/[\w\\\-]/),d("property","word")):d(null,null):/[\d.]/.test(a.peek())?(a.eatWhile(/[\w.%]/),d("number","unit")):a.match(/^-[\w\\\-]*/)?(a.eatWhile(/[\w\\\-]/),a.match(/^\s*:/,!1)?d("variable-2","variable-definition"):d("variable-2","variable")):a.match(/^\w+-/)?d("meta","meta"):void 0}function f(a){return function(b,c){for(var e,f=!1;null!=(e=b.next());){if(e==a&&!f){")"==a&&b.backUp(1);break}f=!f&&"\\"==e}return(e==a||!f&&")"!=a)&&(c.tokenize=null),d("string","string")}}function g(a,b){return a.next(),a.match(/\s*[\"\')]/,!1)?b.tokenize=null:b.tokenize=f(")"),d(null,"(")}function h(a,b,c){this.type=a,this.indent=b,this.prev=c}function i(a,b,c,d){return a.context=new h(c,b.indentation()+(!1===d?0:q),a.context),c}function j(a){return a.context.prev&&(a.context=a.context.prev),a.context.type}function k(a,b,c){return F[c.context.type](a,b,c)}function l(a,b,c,d){for(var e=d||1;e>0;e--)c.context=c.context.prev;return k(a,b,c)}function m(a){var b=a.current().toLowerCase();p=B.hasOwnProperty(b)?"atom":A.hasOwnProperty(b)?"keyword":"variable"}var n=c.inline;c.propertyKeywords||(c=a.resolveMode("text/css"));var o,p,q=b.indentUnit,r=c.tokenHooks,s=c.documentTypes||{},t=c.mediaTypes||{},u=c.mediaFeatures||{},v=c.mediaValueKeywords||{},w=c.propertyKeywords||{},x=c.nonStandardPropertyKeywords||{},y=c.fontProperties||{},z=c.counterDescriptors||{},A=c.colorKeywords||{},B=c.valueKeywords||{},C=c.allowNested,D=c.lineComment,E=!0===c.supportsAtComponent,F={};return F.top=function(a,b,c){if("{"==a)return i(c,b,"block");if("}"==a&&c.context.prev)return j(c);if(E&&/@component/i.test(a))return i(c,b,"atComponentBlock");if(/^@(-moz-)?document$/i.test(a))return i(c,b,"documentTypes");if(/^@(media|supports|(-moz-)?document|import)$/i.test(a))return i(c,b,"atBlock");if(/^@(font-face|counter-style)/i.test(a))return c.stateArg=a,"restricted_atBlock_before";if(/^@(-(moz|ms|o|webkit)-)?keyframes$/i.test(a))return"keyframes";if(a&&"@"==a.charAt(0))return i(c,b,"at");if("hash"==a)p="builtin";else if("word"==a)p="tag";else{if("variable-definition"==a)return"maybeprop";if("interpolation"==a)return i(c,b,"interpolation");if(":"==a)return"pseudo";if(C&&"("==a)return i(c,b,"parens")}return c.context.type},F.block=function(a,b,c){if("word"==a){var d=b.current().toLowerCase();return w.hasOwnProperty(d)?(p="property","maybeprop"):x.hasOwnProperty(d)?(p="string-2","maybeprop"):C?(p=b.match(/^\s*:(?:\s|$)/,!1)?"property":"tag","block"):(p+=" error","maybeprop")}return"meta"==a?"block":C||"hash"!=a&&"qualifier"!=a?F.top(a,b,c):(p="error","block")},F.maybeprop=function(a,b,c){return":"==a?i(c,b,"prop"):k(a,b,c)},F.prop=function(a,b,c){if(";"==a)return j(c);if("{"==a&&C)return i(c,b,"propBlock");if("}"==a||"{"==a)return l(a,b,c);if("("==a)return i(c,b,"parens");if("hash"!=a||/^#([0-9a-fA-f]{3,4}|[0-9a-fA-f]{6}|[0-9a-fA-f]{8})$/.test(b.current())){if("word"==a)m(b);else if("interpolation"==a)return i(c,b,"interpolation")}else p+=" error";return"prop"},F.propBlock=function(a,b,c){return"}"==a?j(c):"word"==a?(p="property","maybeprop"):c.context.type},F.parens=function(a,b,c){return"{"==a||"}"==a?l(a,b,c):")"==a?j(c):"("==a?i(c,b,"parens"):"interpolation"==a?i(c,b,"interpolation"):("word"==a&&m(b),"parens")},F.pseudo=function(a,b,c){return"meta"==a?"pseudo":"word"==a?(p="variable-3",c.context.type):k(a,b,c)},F.documentTypes=function(a,b,c){return"word"==a&&s.hasOwnProperty(b.current())?(p="tag",c.context.type):F.atBlock(a,b,c)},F.atBlock=function(a,b,c){if("("==a)return i(c,b,"atBlock_parens");if("}"==a||";"==a)return l(a,b,c);if("{"==a)return j(c)&&i(c,b,C?"block":"top");if("interpolation"==a)return i(c,b,"interpolation");if("word"==a){var d=b.current().toLowerCase();p="only"==d||"not"==d||"and"==d||"or"==d?"keyword":t.hasOwnProperty(d)?"attribute":u.hasOwnProperty(d)?"property":v.hasOwnProperty(d)?"keyword":w.hasOwnProperty(d)?"property":x.hasOwnProperty(d)?"string-2":B.hasOwnProperty(d)?"atom":A.hasOwnProperty(d)?"keyword":"error"}return c.context.type},F.atComponentBlock=function(a,b,c){return"}"==a?l(a,b,c):"{"==a?j(c)&&i(c,b,C?"block":"top",!1):("word"==a&&(p="error"),c.context.type)},F.atBlock_parens=function(a,b,c){return")"==a?j(c):"{"==a||"}"==a?l(a,b,c,2):F.atBlock(a,b,c)},F.restricted_atBlock_before=function(a,b,c){return"{"==a?i(c,b,"restricted_atBlock"):"word"==a&&"@counter-style"==c.stateArg?(p="variable","restricted_atBlock_before"):k(a,b,c)},F.restricted_atBlock=function(a,b,c){return"}"==a?(c.stateArg=null,j(c)):"word"==a?(p="@font-face"==c.stateArg&&!y.hasOwnProperty(b.current().toLowerCase())||"@counter-style"==c.stateArg&&!z.hasOwnProperty(b.current().toLowerCase())?"error":"property","maybeprop"):"restricted_atBlock"},F.keyframes=function(a,b,c){return"word"==a?(p="variable","keyframes"):"{"==a?i(c,b,"top"):k(a,b,c)},F.at=function(a,b,c){return";"==a?j(c):"{"==a||"}"==a?l(a,b,c):("word"==a?p="tag":"hash"==a&&(p="builtin"),"at")},F.interpolation=function(a,b,c){return"}"==a?j(c):"{"==a||";"==a?l(a,b,c):("word"==a?p="variable":"variable"!=a&&"("!=a&&")"!=a&&(p="error"),"interpolation")},{startState:function(a){return{tokenize:null,state:n?"block":"top",stateArg:null,context:new h(n?"block":"top",a||0,null)}},token:function(a,b){if(!b.tokenize&&a.eatSpace())return null;var c=(b.tokenize||e)(a,b);return c&&"object"==typeof c&&(o=c[1],c=c[0]),p=c,"comment"!=o&&(b.state=F[b.state](o,a,b)),p},indent:function(a,b){var c=a.context,d=b&&b.charAt(0),e=c.indent;return"prop"!=c.type||"}"!=d&&")"!=d||(c=c.prev),c.prev&&("}"!=d||"block"!=c.type&&"top"!=c.type&&"interpolation"!=c.type&&"restricted_atBlock"!=c.type?(")"!=d||"parens"!=c.type&&"atBlock_parens"!=c.type)&&("{"!=d||"at"!=c.type&&"atBlock"!=c.type)||(e=Math.max(0,c.indent-q)):(c=c.prev,e=c.indent)),e},electricChars:"}",blockCommentStart:"/*",blockCommentEnd:"*/",blockCommentContinue:" * ",lineComment:D,fold:"brace"}});var d=["domain","regexp","url","url-prefix"],e=b(d),f=["all","aural","braille","handheld","print","projection","screen","tty","tv","embossed"],g=b(f),h=["width","min-width","max-width","height","min-height","max-height","device-width","min-device-width","max-device-width","device-height","min-device-height","max-device-height","aspect-ratio","min-aspect-ratio","max-aspect-ratio","device-aspect-ratio","min-device-aspect-ratio","max-device-aspect-ratio","color","min-color","max-color","color-index","min-color-index","max-color-index","monochrome","min-monochrome","max-monochrome","resolution","min-resolution","max-resolution","scan","grid","orientation","device-pixel-ratio","min-device-pixel-ratio","max-device-pixel-ratio","pointer","any-pointer","hover","any-hover"],i=b(h),j=["landscape","portrait","none","coarse","fine","on-demand","hover","interlace","progressive"],k=b(j),l=["align-content","align-items","align-self","alignment-adjust","alignment-baseline","anchor-point","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","appearance","azimuth","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","baseline-shift","binding","bleed","bookmark-label","bookmark-level","bookmark-state","bookmark-target","border","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","color","color-profile","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","content","counter-increment","counter-reset","crop","cue","cue-after","cue-before","cursor","direction","display","dominant-baseline","drop-initial-after-adjust","drop-initial-after-align","drop-initial-before-adjust","drop-initial-before-align","drop-initial-size","drop-initial-value","elevation","empty-cells","fit","fit-position","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","float-offset","flow-from","flow-into","font","font-feature-settings","font-family","font-kerning","font-language-override","font-size","font-size-adjust","font-stretch","font-style","font-synthesis","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-weight","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-gap","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-gap","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","inline-box-align","justify-content","justify-items","justify-self","left","letter-spacing","line-break","line-height","line-stacking","line-stacking-ruby","line-stacking-shift","line-stacking-strategy","list-style","list-style-image","list-style-position","list-style-type","margin","margin-bottom","margin-left","margin-right","margin-top","marks","marquee-direction","marquee-loop","marquee-play-count","marquee-speed","marquee-style","max-height","max-width","min-height","min-width","mix-blend-mode","move-to","nav-down","nav-index","nav-left","nav-right","nav-up","object-fit","object-position","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-style","overflow-wrap","overflow-x","overflow-y","padding","padding-bottom","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","page-policy","pause","pause-after","pause-before","perspective","perspective-origin","pitch","pitch-range","place-content","place-items","place-self","play-during","position","presentation-level","punctuation-trim","quotes","region-break-after","region-break-before","region-break-inside","region-fragment","rendering-intent","resize","rest","rest-after","rest-before","richness","right","rotation","rotation-point","ruby-align","ruby-overhang","ruby-position","ruby-span","shape-image-threshold","shape-inside","shape-margin","shape-outside","size","speak","speak-as","speak-header","speak-numeral","speak-punctuation","speech-rate","stress","string-set","tab-size","table-layout","target","target-name","target-new","target-position","text-align","text-align-last","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-height","text-indent","text-justify","text-outline","text-overflow","text-shadow","text-size-adjust","text-space-collapse","text-transform","text-underline-position","text-wrap","top","transform","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","unicode-bidi","user-select","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","volume","white-space","widows","width","will-change","word-break","word-spacing","word-wrap","z-index","clip-path","clip-rule","mask","enable-background","filter","flood-color","flood-opacity","lighting-color","stop-color","stop-opacity","pointer-events","color-interpolation","color-interpolation-filters","color-rendering","fill","fill-opacity","fill-rule","image-rendering","marker","marker-end","marker-mid","marker-start","shape-rendering","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-rendering","baseline-shift","dominant-baseline","glyph-orientation-horizontal","glyph-orientation-vertical","text-anchor","writing-mode"],m=b(l),n=["scrollbar-arrow-color","scrollbar-base-color","scrollbar-dark-shadow-color","scrollbar-face-color","scrollbar-highlight-color","scrollbar-shadow-color","scrollbar-3d-light-color","scrollbar-track-color","shape-inside","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","zoom"],o=b(n),p=["font-family","src","unicode-range","font-variant","font-feature-settings","font-stretch","font-weight","font-style"],q=b(p),r=["additive-symbols","fallback","negative","pad","prefix","range","speak-as","suffix","symbols","system"],s=b(r),t=["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"],u=b(t),v=["above","absolute","activeborder","additive","activecaption","afar","after-white-space","ahead","alias","all","all-scroll","alphabetic","alternate","always","amharic","amharic-abegede","antialiased","appworkspace","arabic-indic","armenian","asterisks","attr","auto","auto-flow","avoid","avoid-column","avoid-page","avoid-region","background","backwards","baseline","below","bidi-override","binary","bengali","blink","block","block-axis","bold","bolder","border","border-box","both","bottom","break","break-all","break-word","bullets","button","button-bevel","buttonface","buttonhighlight","buttonshadow","buttontext","calc","cambodian","capitalize","caps-lock-indicator","caption","captiontext","caret","cell","center","checkbox","circle","cjk-decimal","cjk-earthly-branch","cjk-heavenly-stem","cjk-ideographic","clear","clip","close-quote","col-resize","collapse","color","color-burn","color-dodge","column","column-reverse","compact","condensed","contain","content","contents","content-box","context-menu","continuous","copy","counter","counters","cover","crop","cross","crosshair","currentcolor","cursive","cyclic","darken","dashed","decimal","decimal-leading-zero","default","default-button","dense","destination-atop","destination-in","destination-out","destination-over","devanagari","difference","disc","discard","disclosure-closed","disclosure-open","document","dot-dash","dot-dot-dash","dotted","double","down","e-resize","ease","ease-in","ease-in-out","ease-out","element","ellipse","ellipsis","embed","end","ethiopic","ethiopic-abegede","ethiopic-abegede-am-et","ethiopic-abegede-gez","ethiopic-abegede-ti-er","ethiopic-abegede-ti-et","ethiopic-halehame-aa-er","ethiopic-halehame-aa-et","ethiopic-halehame-am-et","ethiopic-halehame-gez","ethiopic-halehame-om-et","ethiopic-halehame-sid-et","ethiopic-halehame-so-et","ethiopic-halehame-ti-er","ethiopic-halehame-ti-et","ethiopic-halehame-tig","ethiopic-numeric","ew-resize","exclusion","expanded","extends","extra-condensed","extra-expanded","fantasy","fast","fill","fixed","flat","flex","flex-end","flex-start","footnotes","forwards","from","geometricPrecision","georgian","graytext","grid","groove","gujarati","gurmukhi","hand","hangul","hangul-consonant","hard-light","hebrew","help","hidden","hide","higher","highlight","highlighttext","hiragana","hiragana-iroha","horizontal","hsl","hsla","hue","icon","ignore","inactiveborder","inactivecaption","inactivecaptiontext","infinite","infobackground","infotext","inherit","initial","inline","inline-axis","inline-block","inline-flex","inline-grid","inline-table","inset","inside","intrinsic","invert","italic","japanese-formal","japanese-informal","justify","kannada","katakana","katakana-iroha","keep-all","khmer","korean-hangul-formal","korean-hanja-formal","korean-hanja-informal","landscape","lao","large","larger","left","level","lighter","lighten","line-through","linear","linear-gradient","lines","list-item","listbox","listitem","local","logical","loud","lower","lower-alpha","lower-armenian","lower-greek","lower-hexadecimal","lower-latin","lower-norwegian","lower-roman","lowercase","ltr","luminosity","malayalam","match","matrix","matrix3d","media-controls-background","media-current-time-display","media-fullscreen-button","media-mute-button","media-play-button","media-return-to-realtime-button","media-rewind-button","media-seek-back-button","media-seek-forward-button","media-slider","media-sliderthumb","media-time-remaining-display","media-volume-slider","media-volume-slider-container","media-volume-sliderthumb","medium","menu","menulist","menulist-button","menulist-text","menulist-textfield","menutext","message-box","middle","min-intrinsic","mix","mongolian","monospace","move","multiple","multiply","myanmar","n-resize","narrower","ne-resize","nesw-resize","no-close-quote","no-drop","no-open-quote","no-repeat","none","normal","not-allowed","nowrap","ns-resize","numbers","numeric","nw-resize","nwse-resize","oblique","octal","opacity","open-quote","optimizeLegibility","optimizeSpeed","oriya","oromo","outset","outside","outside-shape","overlay","overline","padding","padding-box","painted","page","paused","persian","perspective","plus-darker","plus-lighter","pointer","polygon","portrait","pre","pre-line","pre-wrap","preserve-3d","progress","push-button","radial-gradient","radio","read-only","read-write","read-write-plaintext-only","rectangle","region","relative","repeat","repeating-linear-gradient","repeating-radial-gradient","repeat-x","repeat-y","reset","reverse","rgb","rgba","ridge","right","rotate","rotate3d","rotateX","rotateY","rotateZ","round","row","row-resize","row-reverse","rtl","run-in","running","s-resize","sans-serif","saturation","scale","scale3d","scaleX","scaleY","scaleZ","screen","scroll","scrollbar","scroll-position","se-resize","searchfield","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","self-start","self-end","semi-condensed","semi-expanded","separate","serif","show","sidama","simp-chinese-formal","simp-chinese-informal","single","skew","skewX","skewY","skip-white-space","slide","slider-horizontal","slider-vertical","sliderthumb-horizontal","sliderthumb-vertical","slow","small","small-caps","small-caption","smaller","soft-light","solid","somali","source-atop","source-in","source-out","source-over","space","space-around","space-between","space-evenly","spell-out","square","square-button","start","static","status-bar","stretch","stroke","sub","subpixel-antialiased","super","sw-resize","symbolic","symbols","system-ui","table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row","table-row-group","tamil","telugu","text","text-bottom","text-top","textarea","textfield","thai","thick","thin","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","tibetan","tigre","tigrinya-er","tigrinya-er-abegede","tigrinya-et","tigrinya-et-abegede","to","top","trad-chinese-formal","trad-chinese-informal","transform","translate","translate3d","translateX","translateY","translateZ","transparent","ultra-condensed","ultra-expanded","underline","unset","up","upper-alpha","upper-armenian","upper-greek","upper-hexadecimal","upper-latin","upper-norwegian","upper-roman","uppercase","urdu","url","var","vertical","vertical-text","visible","visibleFill","visiblePainted","visibleStroke","visual","w-resize","wait","wave","wider","window","windowframe","windowtext","words","wrap","wrap-reverse","x-large","x-small","xor","xx-large","xx-small"],w=b(v),x=d.concat(f).concat(h).concat(j).concat(l).concat(n).concat(t).concat(v);a.registerHelper("hintWords","css",x),a.defineMIME("text/css",{documentTypes:e,mediaTypes:g,mediaFeatures:i,mediaValueKeywords:k,propertyKeywords:m,nonStandardPropertyKeywords:o,fontProperties:q,counterDescriptors:s,colorKeywords:u,valueKeywords:w,tokenHooks:{"/":function(a,b){return!!a.eat("*")&&(b.tokenize=c,c(a,b))}},name:"css"}),a.defineMIME("text/x-scss",{mediaTypes:g,mediaFeatures:i,mediaValueKeywords:k,propertyKeywords:m,nonStandardPropertyKeywords:o,colorKeywords:u,valueKeywords:w,fontProperties:q,allowNested:!0,lineComment:"//",tokenHooks:{"/":function(a,b){return a.eat("/")?(a.skipToEnd(),["comment","comment"]):a.eat("*")?(b.tokenize=c,c(a,b)):["operator","operator"]},":":function(a){return!!a.match(/\s*\{/,!1)&&[null,null]},$:function(a){return a.match(/^[\w-]+/),a.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"]},"#":function(a){return!!a.eat("{")&&[null,"interpolation"]}},name:"css",helperType:"scss"}),a.defineMIME("text/x-less",{mediaTypes:g,mediaFeatures:i,mediaValueKeywords:k,propertyKeywords:m,nonStandardPropertyKeywords:o,
colorKeywords:u,valueKeywords:w,fontProperties:q,allowNested:!0,lineComment:"//",tokenHooks:{"/":function(a,b){return a.eat("/")?(a.skipToEnd(),["comment","comment"]):a.eat("*")?(b.tokenize=c,c(a,b)):["operator","operator"]},"@":function(a){return a.eat("{")?[null,"interpolation"]:!a.match(/^(charset|document|font-face|import|(-(moz|ms|o|webkit)-)?keyframes|media|namespace|page|supports)\b/i,!1)&&(a.eatWhile(/[\w\\\-]/),a.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"])},"&":function(){return["atom","atom"]}},name:"css",helperType:"less"}),a.defineMIME("text/x-gss",{documentTypes:e,mediaTypes:g,mediaFeatures:i,propertyKeywords:m,nonStandardPropertyKeywords:o,fontProperties:q,counterDescriptors:s,colorKeywords:u,valueKeywords:w,supportsAtComponent:!0,tokenHooks:{"/":function(a,b){return!!a.eat("*")&&(b.tokenize=c,c(a,b))}},name:"css",helperType:"gss"})}),function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],a):a(CodeMirror)}(function(a){"use strict";var b={autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0,caseFold:!0},c={autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1,allowMissingTagName:!1,caseFold:!1};a.defineMode("xml",function(d,e){function f(a,b){function c(c){return b.tokenize=c,c(a,b)}var d=a.next();if("<"==d)return a.eat("!")?a.eat("[")?a.match("CDATA[")?c(i("atom","]]>")):null:a.match("--")?c(i("comment","--\x3e")):a.match("DOCTYPE",!0,!0)?(a.eatWhile(/[\w\._\-]/),c(j(1))):null:a.eat("?")?(a.eatWhile(/[\w\._\-]/),b.tokenize=i("meta","?>"),"meta"):(A=a.eat("/")?"closeTag":"openTag",b.tokenize=g,"tag bracket");if("&"==d){var e;return e=a.eat("#")?a.eat("x")?a.eatWhile(/[a-fA-F\d]/)&&a.eat(";"):a.eatWhile(/[\d]/)&&a.eat(";"):a.eatWhile(/[\w\.\-:]/)&&a.eat(";"),e?"atom":"error"}return a.eatWhile(/[^&<]/),null}function g(a,b){var c=a.next();if(">"==c||"/"==c&&a.eat(">"))return b.tokenize=f,A=">"==c?"endTag":"selfcloseTag","tag bracket";if("="==c)return A="equals",null;if("<"==c){b.tokenize=f,b.state=n,b.tagName=b.tagStart=null;var d=b.tokenize(a,b);return d?d+" tag error":"tag error"}return/[\'\"]/.test(c)?(b.tokenize=h(c),b.stringStartCol=a.column(),b.tokenize(a,b)):(a.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/),"word")}function h(a){var b=function(b,c){for(;!b.eol();)if(b.next()==a){c.tokenize=g;break}return"string"};return b.isInAttribute=!0,b}function i(a,b){return function(c,d){for(;!c.eol();){if(c.match(b)){d.tokenize=f;break}c.next()}return a}}function j(a){return function(b,c){for(var d;null!=(d=b.next());){if("<"==d)return c.tokenize=j(a+1),c.tokenize(b,c);if(">"==d){if(1==a){c.tokenize=f;break}return c.tokenize=j(a-1),c.tokenize(b,c)}}return"meta"}}function k(a,b,c){this.prev=a.context,this.tagName=b,this.indent=a.indented,this.startOfLine=c,(x.doNotIndent.hasOwnProperty(b)||a.context&&a.context.noIndent)&&(this.noIndent=!0)}function l(a){a.context&&(a.context=a.context.prev)}function m(a,b){for(var c;;){if(!a.context)return;if(c=a.context.tagName,!x.contextGrabbers.hasOwnProperty(c)||!x.contextGrabbers[c].hasOwnProperty(b))return;l(a)}}function n(a,b,c){return"openTag"==a?(c.tagStart=b.column(),o):"closeTag"==a?p:n}function o(a,b,c){return"word"==a?(c.tagName=b.current(),B="tag",s):x.allowMissingTagName&&"endTag"==a?(B="tag bracket",s(a,b,c)):(B="error",o)}function p(a,b,c){if("word"==a){var d=b.current();return c.context&&c.context.tagName!=d&&x.implicitlyClosed.hasOwnProperty(c.context.tagName)&&l(c),c.context&&c.context.tagName==d||!1===x.matchClosing?(B="tag",q):(B="tag error",r)}return x.allowMissingTagName&&"endTag"==a?(B="tag bracket",q(a,b,c)):(B="error",r)}function q(a,b,c){return"endTag"!=a?(B="error",q):(l(c),n)}function r(a,b,c){return B="error",q(a,b,c)}function s(a,b,c){if("word"==a)return B="attribute",t;if("endTag"==a||"selfcloseTag"==a){var d=c.tagName,e=c.tagStart;return c.tagName=c.tagStart=null,"selfcloseTag"==a||x.autoSelfClosers.hasOwnProperty(d)?m(c,d):(m(c,d),c.context=new k(c,d,e==c.indented)),n}return B="error",s}function t(a,b,c){return"equals"==a?u:(x.allowMissing||(B="error"),s(a,b,c))}function u(a,b,c){return"string"==a?v:"word"==a&&x.allowUnquoted?(B="string",s):(B="error",s(a,b,c))}function v(a,b,c){return"string"==a?v:s(a,b,c)}var w=d.indentUnit,x={},y=e.htmlMode?b:c;for(var z in y)x[z]=y[z];for(var z in e)x[z]=e[z];var A,B;return f.isInText=!0,{startState:function(a){var b={tokenize:f,state:n,indented:a||0,tagName:null,tagStart:null,context:null};return null!=a&&(b.baseIndent=a),b},token:function(a,b){if(!b.tagName&&a.sol()&&(b.indented=a.indentation()),a.eatSpace())return null;A=null;var c=b.tokenize(a,b);return(c||A)&&"comment"!=c&&(B=null,b.state=b.state(A||c,a,b),B&&(c="error"==B?c+" error":B)),c},indent:function(b,c,d){var e=b.context;if(b.tokenize.isInAttribute)return b.tagStart==b.indented?b.stringStartCol+1:b.indented+w;if(e&&e.noIndent)return a.Pass;if(b.tokenize!=g&&b.tokenize!=f)return d?d.match(/^(\s*)/)[0].length:0;if(b.tagName)return!1!==x.multilineTagIndentPastTag?b.tagStart+b.tagName.length+2:b.tagStart+w*(x.multilineTagIndentFactor||1);if(x.alignCDATA&&/<!\[CDATA\[/.test(c))return 0;var h=c&&/^<(\/)?([\w_:\.-]*)/.exec(c);if(h&&h[1])for(;e;){if(e.tagName==h[2]){e=e.prev;break}if(!x.implicitlyClosed.hasOwnProperty(e.tagName))break;e=e.prev}else if(h)for(;e;){var i=x.contextGrabbers[e.tagName];if(!i||!i.hasOwnProperty(h[2]))break;e=e.prev}for(;e&&e.prev&&!e.startOfLine;)e=e.prev;return e?e.indent+w:b.baseIndent||0},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"\x3c!--",blockCommentEnd:"--\x3e",configuration:x.htmlMode?"html":"xml",helperType:x.htmlMode?"html":"xml",skipAttribute:function(a){a.state==u&&(a.state=s)}}}),a.defineMIME("text/xml","xml"),a.defineMIME("application/xml","xml"),a.mimeModes.hasOwnProperty("text/html")||a.defineMIME("text/html",{name:"xml",htmlMode:!0})}),function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror"),require("../xml/xml"),require("../javascript/javascript"),require("../css/css")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","../xml/xml","../javascript/javascript","../css/css"],a):a(CodeMirror)}(function(a){"use strict";function b(a,b,c){var d=a.current(),e=d.search(b);return e>-1?a.backUp(d.length-e):d.match(/<\/?$/)&&(a.backUp(d.length),a.match(b,!1)||a.match(d)),c}function c(a){return i[a]||(i[a]=new RegExp("\\s+"+a+"\\s*=\\s*('|\")?([^'\"]+)('|\")?\\s*"))}function d(a,b){var d=a.match(c(b));return d?/^\s*(.*?)\s*$/.exec(d[2])[1]:""}function e(a,b){return new RegExp((b?"^":"")+"</s*"+a+"s*>","i")}function f(a,b){for(var c in a)for(var d=b[c]||(b[c]=[]),e=a[c],f=e.length-1;f>=0;f--)d.unshift(e[f])}function g(a,b){for(var c=0;c<a.length;c++){var e=a[c];if(!e[0]||e[1].test(d(b,e[0])))return e[2]}}var h={script:[["lang",/(javascript|babel)/i,"javascript"],["type",/^(?:text|application)\/(?:x-)?(?:java|ecma)script$|^module$|^$/i,"javascript"],["type",/./,"text/plain"],[null,null,"javascript"]],style:[["lang",/^css$/i,"css"],["type",/^(text\/)?(x-)?(stylesheet|css)$/i,"css"],["type",/./,"text/plain"],[null,null,"css"]]},i={};a.defineMode("htmlmixed",function(c,d){function i(d,f){var h,l=j.token(d,f.htmlState),m=/\btag\b/.test(l);if(m&&!/[<>\s\/]/.test(d.current())&&(h=f.htmlState.tagName&&f.htmlState.tagName.toLowerCase())&&k.hasOwnProperty(h))f.inTag=h+" ";else if(f.inTag&&m&&/>$/.test(d.current())){var n=/^([\S]+) (.*)/.exec(f.inTag);f.inTag=null;var o=">"==d.current()&&g(k[n[1]],n[2]),p=a.getMode(c,o),q=e(n[1],!0),r=e(n[1],!1);f.token=function(a,c){return a.match(q,!1)?(c.token=i,c.localState=c.localMode=null,null):b(a,r,c.localMode.token(a,c.localState))},f.localMode=p,f.localState=a.startState(p,j.indent(f.htmlState,"",""))}else f.inTag&&(f.inTag+=d.current(),d.eol()&&(f.inTag+=" "));return l}var j=a.getMode(c,{name:"xml",htmlMode:!0,multilineTagIndentFactor:d.multilineTagIndentFactor,multilineTagIndentPastTag:d.multilineTagIndentPastTag}),k={},l=d&&d.tags,m=d&&d.scriptTypes;if(f(h,k),l&&f(l,k),m)for(var n=m.length-1;n>=0;n--)k.script.unshift(["type",m[n].matches,m[n].mode]);return{startState:function(){return{token:i,inTag:null,localMode:null,localState:null,htmlState:a.startState(j)}},copyState:function(b){var c;return b.localState&&(c=a.copyState(b.localMode,b.localState)),{token:b.token,inTag:b.inTag,localMode:b.localMode,localState:c,htmlState:a.copyState(j,b.htmlState)}},token:function(a,b){return b.token(a,b)},indent:function(b,c,d){return!b.localMode||/^\s*<\//.test(c)?j.indent(b.htmlState,c,d):b.localMode.indent?b.localMode.indent(b.localState,c,d):a.Pass},innerMode:function(a){return{state:a.localState||a.htmlState,mode:a.localMode||j}}}},"xml","javascript","css"),a.defineMIME("text/html","htmlmixed")}),function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],a):a(CodeMirror)}(function(a){"use strict";function b(a){var b=a.getWrapperElement();a.state.fullScreenRestore={scrollTop:window.pageYOffset,scrollLeft:window.pageXOffset,width:b.style.width,height:b.style.height},b.style.width="",b.style.height="auto",b.className+=" CodeMirror-fullscreen",document.documentElement.style.overflow="hidden",a.refresh()}function c(a){var b=a.getWrapperElement();b.className=b.className.replace(/\s*CodeMirror-fullscreen\b/,""),document.documentElement.style.overflow="";var c=a.state.fullScreenRestore;b.style.width=c.width,b.style.height=c.height,window.scrollTo(c.scrollLeft,c.scrollTop),a.refresh()}a.defineOption("fullScreen",!1,function(d,e,f){f==a.Init&&(f=!1),!f!=!e&&(e?b(d):c(d))})}),function(a,b){"object"==typeof exports&&"undefined"!=typeof module?module.exports=b():"function"==typeof define&&define.amd?define(b):a.Jotted=b()}(this,function(){"use strict";function a(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c={};return Object.keys(a).forEach(function(b){c[b]=a[b]}),Object.keys(b).forEach(function(d){void 0!==c[d]?c[d]=a[d]:c[d]=b[d]}),c}function b(a,b){var c=new window.XMLHttpRequest;c.open("GET",a),c.responseType="text",c.onload=function(){200===c.status?b(null,c.responseText):b(a,c)},c.onerror=function(a){b(a)},c.send()}function c(a,b,c,e,f){return function(b,g){b&&e.push(b),a++,a<c.length?d(a,g,c,e,f):f(e,g)}}function d(a,b,d,e,f){d[a](b,c.apply(this,arguments))}function e(a,b){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},e=[];if(!a.length)return c(e,b);d(0,b,a,e,c)}function f(a,b){var c=null,d=null;return function(){var e=this,f=arguments;c?d=!0:a.apply(this,arguments),clearTimeout(c),c=setTimeout(function(){d&&a.apply(e,f),c=null,d=null},b)}}function g(a,b){if(!a.className)return!1;var c=" "+a.className+" ";return b=" "+b+" ",-1!==c.indexOf(b)}function h(a,b){return g(a,b)?a.className:(a.className&&(b=" "+b),a.className+=b,a.className)}function i(a,b){var c=" "+b,d=b+" ";return-1!==a.className.indexOf(c)?a.className=a.className.replace(c,""):-1!==a.className.indexOf(d)?a.className=a.className.replace(d,""):a.className=a.className.replace(b,""),a.className}function j(a,b){return a.getAttribute("data-"+b)}function k(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},e=a(d,A);for(var f in e){var g=f.length;if(c.slice(-g++)==="."+f)return e[f]}for(var h in e)if(b===h)return e[h];return b}function l(){return'\n    <ul class="jotted-nav">\n      <li class="jotted-nav-item jotted-nav-item-result">\n        <a href="#" data-jotted-type="result">\n          Result\n        </a>\n      </li>\n      <li class="jotted-nav-item jotted-nav-item-html">\n        <a href="#" data-jotted-type="html">\n          HTML\n        </a>\n      </li>\n      <li class="jotted-nav-item jotted-nav-item-css">\n        <a href="#" data-jotted-type="css">\n          CSS\n        </a>\n      </li>\n      <li class="jotted-nav-item jotted-nav-item-js">\n        <a href="#" data-jotted-type="js">\n          JavaScript\n        </a>\n      </li>\n    </ul>\n    <div class="jotted-pane jotted-pane-result"><iframe></iframe></div>\n    <div class="jotted-pane jotted-pane-html"></div>\n    <div class="jotted-pane jotted-pane-css"></div>\n    <div class="jotted-pane jotted-pane-js"></div>\n  '}function m(a){return"jotted-pane-active-"+a}function n(){return"jotted"}function o(a){return"jotted-has-"+a}function p(a){return"jotted-editor jotted-editor-"+a}function q(a){return'\n    <textarea data-jotted-type="'+a+'" data-jotted-file="'+(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"")+'"></textarea>\n    <div class="jotted-status"></div>\n  '}function r(a){return"\n    <p>"+a+"</p>\n  "}function s(a){return"jotted-status-"+a}function t(a){return"jotted-status-active-"+a}function u(a){return"jotted-plugin-"+a}function v(a){return"Loading <strong>"+a+"</strong>.."}function w(a){return"There was an error loading <strong>"+a+"</strong>."}function x(a){for(var b in E){var c=E[b];if(c._id===a)return c}throw new Error("Plugin "+a+" is not registered.")}function y(a,b){b._id=a,E.push(b)}function z(){var a=this;this._get("options").plugins.forEach(function(b){var c=void 0,d=void 0,e={};"string"==typeof b?d=b:"object"===(void 0===b?"undefined":B(b))&&(d=b.name,e=b.options||{}),c=x(d),a._get("plugins")[b]=new c(a,e),h(a._get("$container"),u(d))})}var A={html:"html",css:"css",js:"javascript",less:"less",styl:"stylus",coffee:"coffeescript"},B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},C=(function(){function a(a){this.value=a}function b(b){function c(a,b){return new Promise(function(c,e){var h={key:a,arg:b,resolve:c,reject:e,next:null};g?g=g.next=h:(f=g=h,d(a,b))})}function d(c,f){try{var g=b[c](f),h=g.value;h instanceof a?Promise.resolve(h.value).then(function(a){d("next",a)},function(a){d("throw",a)}):e(g.done?"return":"normal",g.value)}catch(a){e("throw",a)}}function e(a,b){switch(a){case"return":f.resolve({value:b,done:!0});break;case"throw":f.reject(b);break;default:f.resolve({value:b,done:!1})}f=f.next,f?d(f.key,f.arg):g=null}var f,g;this._invoke=c,"function"!=typeof b.return&&(this.return=void 0)}"function"==typeof Symbol&&Symbol.asyncIterator&&(b.prototype[Symbol.asyncIterator]=function(){return this}),b.prototype.next=function(a){return this._invoke("next",a)},b.prototype.throw=function(a){return this._invoke("throw",a)},b.prototype.return=function(a){return this._invoke("return",a)}}(),function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}),D=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),E=[],F=function(){function a(){C(this,a),this.topics={},this.callbacks={}}return D(a,[{key:"find",value:function(a){return this.topics[a]=this.topics[a]||[],this.topics[a]}},{key:"subscribe",value:function(a,b){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:90,d=this.find(a);b._priority=c,d.push(b),d.sort(function(a,b){return a._priority>b._priority?1:b._priority>a._priority?-1:0})}},{key:"remover",value:function(a,b){a.forEach(function(){if(!b)return void(a.length=0);var c=[].indexOf.call(a,b);-1!==c&&a.splice(c,1)})}},{key:"unsubscribe",value:function(a,b){var c=this.find(a);this.remover(c,b),this.callbacks[a]=this.callbacks[a]||[],this.remover(this.callbacks[a],b)}},{key:"publish",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=this.find(a),d=[];c.forEach(function(a){d.push(a)}),e(d,b,this.runCallbacks(a))}},{key:"runCallbacks",value:function(a){var b=this;return function(c,d){b.callbacks[a]=b.callbacks[a]||[],b.callbacks[a].forEach(function(a){a(c,d)})}}},{key:"done",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};this.callbacks[a]=this.callbacks[a]||[],this.callbacks[a].push(b)}}]),a}(),G=function(){function b(c,d){C(this,b),d=a(d,{});var e=!!("srcdoc"in document.createElement("iframe")),f=c.$container.querySelector(".jotted-pane-result iframe"),g={html:"",css:"",js:""};window.addEventListener("message",this.domready.bind(this)),c.on("change",this.change.bind(this),100),this.supportSrcdoc=e,this.content=g,this.frameContent="",this.$resultFrame=f,this.callbacks=[],this.index=0,this.lastCallback=function(){}}return D(b,[{key:"template",value:function(){return"\n      <!doctype html>\n      <html>\n        <head>\n          <script>\n            (function () {\n              window.addEventListener('DOMContentLoaded', function () {\n                window.parent.postMessage(JSON.stringify({\n                  type: 'jotted-dom-ready'\n                }), '*')\n              })\n            }())\n          <\/script>\n\n          <style>"+(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")+"</style>\n        </head>\n        <body>\n          "+(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"")+"\n\n          \x3c!--\n            Jotted:\n            Empty script tag prevents malformed HTML from breaking the next script.\n          --\x3e\n          <script><\/script>\n          <script>"+(arguments.length>2&&void 0!==arguments[2]?arguments[2]:"")+"<\/script>\n        </body>\n      </html>\n    "}},{key:"change",value:function(a,b){var c=this;this.content[a.type]=a.content;var d=this.frameContent;if(this.frameContent=this.template(this.content.css,this.content.html,this.content.js),this.lastCallback=function(){c.lastCallback=function(){},b(null,a)},!0!==a.forceRender&&this.frameContent===d)return void b(null,a);if(this.supportSrcdoc){var e=document.createElement("iframe");this.$resultFrame.parentNode.replaceChild(e,this.$resultFrame),this.$resultFrame=e,this.$resultFrame.contentWindow.document.open(),this.$resultFrame.contentWindow.document.write(this.frameContent),this.$resultFrame.contentWindow.document.close()}else{this.$resultFrame.setAttribute("data-srcdoc",this.frameContent);var f='javascript:window.frameElement.getAttribute("data-srcdoc");';this.$resultFrame.setAttribute("src",f),this.$resultFrame.contentWindow&&(this.$resultFrame.contentWindow.location=f)}}},{key:"domready",value:function(a){if(a.source===this.$resultFrame.contentWindow){var b={};try{b=JSON.parse(a.data)}catch(a){}"jotted-dom-ready"===b.type&&this.lastCallback()}}}]),b}(),H=function(){function b(c,d){C(this,b),d=a(d,{});var e=["application/javascript","application/ecmascript","application/x-ecmascript","application/x-javascript","text/ecmascript","text/javascript","text/javascript1.0","text/javascript1.1","text/javascript1.2","text/javascript1.3","text/javascript1.4","text/javascript1.5","text/jscript","text/livescript","text/x-ecmascript","text/x-javascript"];c.on("change",this.change.bind(this)),this.runScriptTypes=e}return D(b,[{key:"change",value:function(a,b){if("html"!==a.type)return b(null,a);var c=document.createElement("div");c.innerHTML=a.content;for(var d=null,e=c.querySelectorAll("script"),f=0;f<e.length;f++)(d=e[f].getAttribute("type"))&&-1===this.runScriptTypes.indexOf(d)||e[f].parentNode.removeChild(e[f]);a.content=c.innerHTML,b(null,a)}}]),b}(),I=function(){function b(c,d){C(this,b);var e;if(this.editor={},this.jotted=c,d=a(d,{}),void 0!==window.ace){var f=c.$container.querySelectorAll(".jotted-editor");for(e=0;e<f.length;e++){var g=f[e].querySelector("textarea"),h=j(g,"jotted-type"),i=j(g,"jotted-file"),l=document.createElement("div");f[e].appendChild(l),this.editor[h]=window.ace.edit(l);var m=this.editor[h],n=a(d);m.getSession().setMode("ace/mode/"+k(h,i)),m.getSession().setOptions(n),m.$blockScrolling=1/0}c.on("change",this.change.bind(this),1)}}return D(b,[{key:"editorChange",value:function(a){var b=this;return function(){b.jotted.trigger("change",a)}}},{key:"change",value:function(a,b){var c=this.editor[a.type];a.aceEditor||(c.getSession().setValue(a.content),a.aceEditor=c,c.on("change",this.editorChange(a))),a.content=c.getValue(),b(null,a)}}]),b}(),J=function(){function b(c,d){C(this,b);var e;this.editor={},this.jotted=c;var f={html:"htmlmixed"};if(d=a(d,{lineNumbers:!0}),void 0!==window.CodeMirror){var g=c.$container.querySelectorAll(".jotted-editor");for(e=0;e<g.length;e++){var h=g[e].querySelector("textarea"),i=j(h,"jotted-type"),l=j(h,"jotted-file");this.editor[i]=window.CodeMirror.fromTextArea(h,d),this.editor[i].setOption("mode",k(i,l,f))}c.on("change",this.change.bind(this),1)}}return D(b,[{key:"editorChange",value:function(a){var b=this;return function(){b.jotted.trigger("change",a)}}},{key:"change",value:function(a,b){var c=this.editor[a.type];a.cmEditor||(c.setValue(a.content),a.cmEditor=c,c.on("change",this.editorChange(a))),a.content=c.getValue(),b(null,a)}}]),b}(),K=function(){function b(c,d){C(this,b),d=a(d,{}),void 0!==window.less&&(c.$container.querySelector('a[data-jotted-type="css"]').innerHTML="Less",c.on("change",this.change.bind(this),20))}return D(b,[{key:"isLess",value:function(a){return"css"===a.type&&(-1!==a.file.indexOf(".less")||""===a.file)}},{key:"change",value:function(a,b){this.isLess(a)?window.less.render(a.content,this.options,function(c,d){if(c)return b(c,a);a.content=d.css,b(null,a)}):b(null,a)}}]),b}(),L=function(){function b(c,d){C(this,b),d=a(d,{}),void 0!==window.CoffeeScript&&(c.$container.querySelector('a[data-jotted-type="js"]').innerHTML="CoffeeScript",c.on("change",this.change.bind(this),20))}return D(b,[{key:"isCoffee",value:function(a){return"js"===a.type&&(-1!==a.file.indexOf(".coffee")||""===a.file)}},{key:"change",value:function(a,b){if(this.isCoffee(a))try{a.content=window.CoffeeScript.compile(a.content)}catch(c){return b(c,a)}b(null,a)}}]),b}(),M=function(){function b(c,d){C(this,b),d=a(d,{}),void 0!==window.stylus&&(c.$container.querySelector('a[data-jotted-type="css"]').innerHTML="Stylus",c.on("change",this.change.bind(this),20))}return D(b,[{key:"isStylus",value:function(a){return"css"===a.type&&(-1!==a.file.indexOf(".styl")||""===a.file)}},{key:"change",value:function(a,b){this.isStylus(a)?window.stylus(a.content,this.options).render(function(c,d){if(c)return b(c,a);a.content=d,b(null,a)}):b(null,a)}}]),b}(),N=function(){function b(c,d){if(C(this,b),this.options=a(d,{}),void 0!==window.Babel)this.babel=window.Babel;else{if(void 0===window.babel)return;this.babel={transform:window.babel}}c.$container.querySelector('a[data-jotted-type="js"]').innerHTML="ES2015",c.on("change",this.change.bind(this),20)}return D(b,[{key:"change",value:function(a,b){if("js"===a.type){try{a.content=this.babel.transform(a.content,this.options).code}catch(c){return b(c,a)}b(null,a)}else b(null,a)}}]),b}(),O=function(){function b(c,d){C(this,b),this.options=a(d,{}),void 0!==window.marked&&(window.marked.setOptions(d),c.$container.querySelector('a[data-jotted-type="html"]').innerHTML="Markdown",c.on("change",this.change.bind(this),20))}return D(b,[{key:"change",value:function(a,b){if("html"===a.type){try{a.content=window.marked(a.content)}catch(c){return b(c,a)}b(null,a)}else b(null,a)}}]),b}(),P=function(){function b(c,d){C(this,b),d=a(d,{autoClear:!1});var e=[],f="("+this.capture.toString()+")();",g={html:"",css:"",js:""},i=document.createElement("li");h(i,"jotted-nav-item jotted-nav-item-console"),i.innerHTML='<a href="#" data-jotted-type="console">JS Console</a>';var j=document.createElement("div");h(j,"jotted-pane jotted-pane-console"),j.innerHTML='\n      <div class="jotted-console-container">\n        <ul class="jotted-console-output"></ul>\n        <form class="jotted-console-input">\n          <input type="text">\n        </form>\n      </div>\n      <button class="jotted-button jotted-console-clear">Clear</button>\n    ',c.$container.appendChild(j),c.$container.querySelector(".jotted-nav").appendChild(i);var k=c.$container.querySelector(".jotted-console-container"),l=c.$container.querySelector(".jotted-console-output"),m=c.$container.querySelector(".jotted-console-input input"),n=c.$container.querySelector(".jotted-console-input"),o=c.$container.querySelector(".jotted-console-clear");n.addEventListener("submit",this.submit.bind(this)),m.addEventListener("keydown",this.history.bind(this)),o.addEventListener("click",this.clear.bind(this)),!0===d.autoClear&&c.on("change",this.autoClear.bind(this),29),c.on("change",this.change.bind(this),30),window.addEventListener("message",this.getMessage.bind(this)),this.$jottedContainer=c.$container,this.$container=k,this.$input=m,this.$output=l,this.history=e,this.historyIndex=0,this.logCaptureSnippet=f,this.contentCache=g,this.getIframe=this.getIframe.bind(this)}return D(b,[{key:"getIframe",value:function(){return this.$jottedContainer.querySelector(".jotted-pane-result iframe")}},{key:"getMessage",value:function(a){if(a.source===this.getIframe().contentWindow){var b={};try{b=JSON.parse(a.data)}catch(a){}"jotted-console-log"===b.type&&this.log(b.message)}}},{key:"autoClear",value:function(a,b){var c=a.content;"js"===a.type&&(c=c.replace(this.logCaptureSnippet,"")),!0!==a.forceRender&&this.contentCache[a.type]===c||this.clear(),this.contentCache[a.type]=c,b(null,a)}},{key:"change",value:function(a,b){if("js"!==a.type)return b(null,a);-1===a.content.indexOf(this.logCaptureSnippet)&&(a.content=""+this.logCaptureSnippet+a.content),b(null,a)}},{key:"capture",value:function(){void 0!==window.console&&void 0!==window.console.log||(window.console={log:function(){}});var a=Function.prototype.bind.call(window.console.log,window.console);window.console.log=function(){[].slice.call(arguments).forEach(function(a){window.parent.postMessage(JSON.stringify({type:"jotted-console-log",message:a}),"*")}),a.apply(a,arguments)}}},{key:"log",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",b=arguments[1],c=document.createElement("li");h(c,"jotted-console-log"),void 0!==b&&h(c,"jotted-console-log-"+b),c.innerHTML=a,this.$output.appendChild(c)}},{key:"submit",value:function(a){var b=this.$input.value.trim();if(""===b)return a.preventDefault();this.history.push(b),this.historyIndex=this.history.length,this.log(b,"history"),0!==b.indexOf("return")&&(b="return "+b);try{var c=this.getIframe().contentWindow.eval("(function() {"+b+"})()");this.log(c)}catch(a){this.log(a,"error")}this.$input.value="",this.$container.scrollTop=this.$container.scrollHeight,a.preventDefault()}},{key:"clear",value:function(){this.$output.innerHTML=""}},{key:"history",value:function(a){var b=!1,c=this.$input.selectionStart;38===a.keyCode&&0!==this.historyIndex&&0===c&&(this.historyIndex--,b=!0),40===a.keyCode&&this.historyIndex!==this.history.length-1&&c===this.$input.value.length&&(this.historyIndex++,b=!0),b&&(this.$input.value=this.history[this.historyIndex])}}]),b}(),Q=function(){function b(c,d){C(this,b),d=a(d,{firstRun:!0});var e={},f={};!1===d.firstRun&&(e={html:{type:"html",content:""},css:{type:"css",content:""},js:{type:"js",content:""}});var g=document.createElement("button");g.className="jotted-button jotted-button-play",g.innerHTML="Run",c.$container.appendChild(g),g.addEventListener("click",this.run.bind(this)),c.on("change",this.change.bind(this),10),this.cache=e,this.code=f,this.jotted=c}return D(b,[{key:"change",value:function(b,c){this.code[b.type]=a(b),void 0!==this.cache[b.type]?(c(null,this.cache[b.type]),this.cache[b.type].forceRender=null):(this.cache[b.type]=a(b),c(null,b))}},{key:"run",value:function(){for(var b in this.code)this.cache[b]=a(this.code[b],{forceRender:!0}),this.jotted.trigger("change",this.cache[b])}}]),b}(),R=function(){function a(b,c){C(this,a);var d={html:{title:"HTML",classChecker:"jotted-has-html"},css:{title:"CSS",classChecker:"jotted-has-css"},js:{title:"JavaScript",classChecker:"jotted-has-js"},console:{title:"Console",classChecker:"jotted-plugin-console"}},e=[];for(var f in d)b.$container.classList.contains(d[f].classChecker)&&e.push(b.$container.querySelector(".jotted-pane-"+f));this.resizablePanes=[];for(var g=0;g<e.length;g++){for(var h=void 0,i=0;i<e[g].classList.length;i++)if(-1!==e[g].classList[i].indexOf("jotted-pane-")){h=e[g].classList[i].replace("jotted-pane-","");break}if(h){var j={container:e[g],expander:void 0};this.resizablePanes.push(j);var k=document.createElement("div");k.classList.add("jotted-pane-title"),k.innerHTML=d[h].title||h;var l=e[g].firstElementChild;l.insertBefore(k,l.firstChild),g>0&&(j.expander=document.createElement("div"),j.expander.classList.add("jotted-plugin-pen-expander"),j.expander.addEventListener("mousedown",this.startExpand.bind(this,b)),l.insertBefore(j.expander,k))}}}return D(a,[{key:"startExpand",value:function(a,b){var c=this.resizablePanes.filter(function(a){return a.expander===b.target}).shift(),d=this.resizablePanes[this.resizablePanes.indexOf(c)-1],e=100/parseInt(window.getComputedStyle(c.container.parentNode).width,10);c.container.parentNode.style.display="none",c.startX=b.clientX,c.startWidth=parseFloat(window.getComputedStyle(c.container).width,10),d.startWidth=parseFloat(window.getComputedStyle(d.container).width,10),c.container.parentNode.style.display="",c.mousemove=this.doDrag.bind(this,c,d,e),c.mouseup=this.stopDrag.bind(this,c),document.addEventListener("mousemove",c.mousemove,!1),document.addEventListener("mouseup",c.mouseup,!1)}},{key:"doDrag",value:function(a,b,c,d){var e=b.startWidth+(d.clientX-a.startX)*c,f=a.startWidth-(d.clientX-a.startX)*c;e>=10&&f>=10&&(a.container.style.maxWidth="none",b.container.style.maxWidth="none",b.container.style.width=e+"%",a.container.style.width=f+"%")}},{key:"stopDrag",value:function(a,b){document.removeEventListener("mousemove",a.mousemove,!1),document.removeEventListener("mouseup",a.mouseup,!1)}}]),a}(),S=function(){function c(b,d){if(C(this,c),!b)throw new Error("Can't find Jotted container.");var e={};this._get=function(a){return e[a]},this._set=function(a,b){return e[a]=b,e[a]};var g=this._set("options",a(d,{files:[],showBlank:!1,runScripts:!0,pane:"result",debounce:250,plugins:[]}));g.plugins.push("render"),!1===g.runScripts&&g.plugins.push("scriptless"),this._set("cachedContent",{html:null,css:null,js:null});var i=this._set("pubsoup",new F);this._set("trigger",this.trigger()),this._set("on",function(){i.subscribe.apply(i,arguments)}),this._set("off",function(){i.unsubscribe.apply(i,arguments)}),this._set("done",function(){i.done.apply(i,arguments)})("change",this.errors.bind(this));var j=this._set("$container",b);j.innerHTML=l(),h(j,n()),h(j,m(this._set("paneActive",g.pane))),this._set("$status",{});for(var k=["html","css","js"],p=0;p<k.length;p++){var q=k[p];this.markup(q)}j.addEventListener("keyup",f(this.change.bind(this),g.debounce)),j.addEventListener("change",f(this.change.bind(this),g.debounce)),j.addEventListener("click",this.pane.bind(this)),this.$container=this._get("$container"),this.on=this._get("on"),this.off=this._get("off"),this.done=this._get("done"),
this.trigger=this._get("trigger"),this.paneActive=this._get("paneActive"),this._set("plugins",{}),z.call(this);for(var r=["html","css","js"],s=0;s<r.length;s++){var t=r[s];this.load(t)}if(g.showBlank)for(var u=["html","css","js"],v=0;v<u.length;v++){var w=u[v];h(j,o(w))}}return D(c,[{key:"findFile",value:function(a){var b={},c=this._get("options");for(var d in c.files){var e=c.files[d];if(e.type===a)return e}return b}},{key:"markup",value:function(a){var b=this._get("$container"),c=b.querySelector(".jotted-pane-"+a),d=this.findFile(a),e=document.createElement("div");e.innerHTML=q(a,d.url),e.className=p(a),c.appendChild(e),this._get("$status")[a]=c.querySelector(".jotted-status"),void 0===d.url&&void 0===d.content||h(b,o(a))}},{key:"load",value:function(a){var c=this,d=this.findFile(a),e=this._get("$container").querySelector(".jotted-pane-"+a+" textarea");void 0!==d.content?this.setValue(e,d.content):void 0!==d.url?(this.status("loading",[v(d.url)],{type:a,file:d}),b(d.url,function(b,d){if(b)return void c.status("error",[w(b)],{type:a});c.clearStatus("loading",{type:a}),c.setValue(e,d)})):this.setValue(e,"")}},{key:"setValue",value:function(a,b){a.value=b,this.change({target:a})}},{key:"change",value:function(a){var b=j(a.target,"jotted-type");if(b){var c=this._get("cachedContent");c[b]!==a.target.value&&(c[b]=a.target.value,this.trigger("change",{type:b,file:j(a.target,"jotted-file"),content:c[b]}))}}},{key:"errors",value:function(a,b){this.status("error",a,b)}},{key:"pane",value:function(a){if(j(a.target,"jotted-type")){var b=this._get("$container"),c=this._get("paneActive");i(b,m(c)),c=this._set("paneActive",j(a.target,"jotted-type")),h(b,m(c)),a.preventDefault()}}},{key:"status",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"error",b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!b.length)return this.clearStatus(a,c);var d=this._get("$status");h(d[c.type],s(a)),h(this._get("$container"),t(c.type));var e="";b.forEach(function(a){e+=r(a)}),d[c.type].innerHTML=e}},{key:"clearStatus",value:function(a,b){var c=this._get("$status");i(c[b.type],s(a)),i(this._get("$container"),t(b.type)),c[b.type].innerHTML=""}},{key:"trigger",value:function(){var a=this._get("options"),b=this._get("pubsoup");if(!1===a.debounce)return function(){b.publish.apply(b,arguments)};var c={},d={};return function(e){var f=arguments,g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},h=g.type,i=void 0===h?"default":h;c[i]?d[i]=!0:b.publish.apply(b,arguments),clearTimeout(c[i]),c[i]=setTimeout(function(){d[i]&&b.publish.apply(b,f),d[i]=null,c[i]=null},a.debounce)}}}]),c}();return S.plugin=function(){return y.apply(this,arguments)},function(a){a.plugin("render",G),a.plugin("scriptless",H),a.plugin("ace",I),a.plugin("codemirror",J),a.plugin("less",K),a.plugin("coffeescript",L),a.plugin("stylus",M),a.plugin("babel",N),a.plugin("markdown",O),a.plugin("console",P),a.plugin("play",Q),a.plugin("pen",R)}(S),S}),function(a){var b="object"==typeof window&&window||"object"==typeof self&&self;"undefined"!=typeof exports?a(exports):b&&(b.hljs=a({}),"function"==typeof define&&define.amd&&define([],function(){return b.hljs}))}(function(a){function b(a){return a.replace(/[&<>]/gm,function(a){return E[a]})}function c(a){return a.nodeName.toLowerCase()}function d(a,b){var c=a&&a.exec(b);return c&&0===c.index}function e(a){return z.test(a)}function f(a){var b,c,d,f,g=a.className+" ";if(g+=a.parentNode?a.parentNode.className:"",c=A.exec(g))return u(c[1])?c[1]:"no-highlight";for(g=g.split(/\s+/),b=0,d=g.length;d>b;b++)if(f=g[b],e(f)||u(f))return f}function g(a,b){var c,d={};for(c in a)d[c]=a[c];if(b)for(c in b)d[c]=b[c];return d}function h(a){var b=[];return function a(d,e){for(var f=d.firstChild;f;f=f.nextSibling)3===f.nodeType?e+=f.nodeValue.length:1===f.nodeType&&(b.push({event:"start",offset:e,node:f}),e=a(f,e),c(f).match(/br|hr|img|input/)||b.push({event:"stop",offset:e,node:f}));return e}(a,0),b}function i(a,d,e){function f(){return a.length&&d.length?a[0].offset!==d[0].offset?a[0].offset<d[0].offset?a:d:"start"===d[0].event?a:d:a.length?a:d}function g(a){function d(a){return" "+a.nodeName+'="'+b(a.value)+'"'}k+="<"+c(a)+v.map.call(a.attributes,d).join("")+">"}function h(a){k+="</"+c(a)+">"}function i(a){("start"===a.event?g:h)(a.node)}for(var j=0,k="",l=[];a.length||d.length;){var m=f();if(k+=b(e.substr(j,m[0].offset-j)),j=m[0].offset,m===a){l.reverse().forEach(h);do{i(m.splice(0,1)[0]),m=f()}while(m===a&&m.length&&m[0].offset===j);l.reverse().forEach(g)}else"start"===m[0].event?l.push(m[0].node):l.pop(),i(m.splice(0,1)[0])}return k+b(e.substr(j))}function j(a){function b(a){return a&&a.source||a}function c(c,d){return new RegExp(b(c),"m"+(a.cI?"i":"")+(d?"g":""))}function d(e,f){if(!e.compiled){if(e.compiled=!0,e.k=e.k||e.bK,e.k){var h={},i=function(b,c){a.cI&&(c=c.toLowerCase()),c.split(" ").forEach(function(a){var c=a.split("|");h[c[0]]=[b,c[1]?Number(c[1]):1]})};"string"==typeof e.k?i("keyword",e.k):w(e.k).forEach(function(a){i(a,e.k[a])}),e.k=h}e.lR=c(e.l||/\w+/,!0),f&&(e.bK&&(e.b="\\b("+e.bK.split(" ").join("|")+")\\b"),e.b||(e.b=/\B|\b/),e.bR=c(e.b),e.e||e.eW||(e.e=/\B|\b/),e.e&&(e.eR=c(e.e)),e.tE=b(e.e)||"",e.eW&&f.tE&&(e.tE+=(e.e?"|":"")+f.tE)),e.i&&(e.iR=c(e.i)),null==e.r&&(e.r=1),e.c||(e.c=[]);var j=[];e.c.forEach(function(a){a.v?a.v.forEach(function(b){j.push(g(a,b))}):j.push("self"===a?e:a)}),e.c=j,e.c.forEach(function(a){d(a,e)}),e.starts&&d(e.starts,f);var k=e.c.map(function(a){return a.bK?"\\.?("+a.b+")\\.?":a.b}).concat([e.tE,e.i]).map(b).filter(Boolean);e.t=k.length?c(k.join("|"),!0):{exec:function(){return null}}}}d(a)}function k(a,c,e,f){function g(a,b){var c,e;for(c=0,e=b.c.length;e>c;c++)if(d(b.c[c].bR,a))return b.c[c]}function h(a,b){if(d(a.eR,b)){for(;a.endsParent&&a.parent;)a=a.parent;return a}return a.eW?h(a.parent,b):void 0}function i(a,b){return!e&&d(b.iR,a)}function m(a,b){var c=t.cI?b[0].toLowerCase():b[0];return a.k.hasOwnProperty(c)&&a.k[c]}function n(a,b,c,d){var e=d?"":D.classPrefix,f='<span class="'+e,g=c?"":C;return(f+=a+'">')+b+g}function o(){var a,c,d,e;if(!w.k)return b(A);for(e="",c=0,w.lR.lastIndex=0,d=w.lR.exec(A);d;)e+=b(A.substr(c,d.index-c)),a=m(w,d),a?(B+=a[1],e+=n(a[0],b(d[0]))):e+=b(d[0]),c=w.lR.lastIndex,d=w.lR.exec(A);return e+b(A.substr(c))}function p(){var a="string"==typeof w.sL;if(a&&!x[w.sL])return b(A);var c=a?k(w.sL,A,!0,y[w.sL]):l(A,w.sL.length?w.sL:void 0);return w.r>0&&(B+=c.r),a&&(y[w.sL]=c.top),n(c.language,c.value,!1,!0)}function q(){z+=null!=w.sL?p():o(),A=""}function r(a){z+=a.cN?n(a.cN,"",!0):"",w=Object.create(a,{parent:{value:w}})}function s(a,b){if(A+=a,null==b)return q(),0;var c=g(b,w);if(c)return c.skip?A+=b:(c.eB&&(A+=b),q(),c.rB||c.eB||(A=b)),r(c,b),c.rB?0:b.length;var d=h(w,b);if(d){var e=w;e.skip?A+=b:(e.rE||e.eE||(A+=b),q(),e.eE&&(A=b));do{w.cN&&(z+=C),w.skip||(B+=w.r),w=w.parent}while(w!==d.parent);return d.starts&&r(d.starts,""),e.rE?0:b.length}if(i(b,w))throw new Error('Illegal lexeme "'+b+'" for mode "'+(w.cN||"<unnamed>")+'"');return A+=b,b.length||1}var t=u(a);if(!t)throw new Error('Unknown language: "'+a+'"');j(t);var v,w=f||t,y={},z="";for(v=w;v!==t;v=v.parent)v.cN&&(z=n(v.cN,"",!0)+z);var A="",B=0;try{for(var E,F,G=0;w.t.lastIndex=G,E=w.t.exec(c);)F=s(c.substr(G,E.index-G),E[0]),G=E.index+F;for(s(c.substr(G)),v=w;v.parent;v=v.parent)v.cN&&(z+=C);return{r:B,value:z,language:a,top:w}}catch(a){if(a.message&&-1!==a.message.indexOf("Illegal"))return{r:0,value:b(c)};throw a}}function l(a,c){c=c||D.languages||w(x);var d={r:0,value:b(a)},e=d;return c.filter(u).forEach(function(b){var c=k(b,a,!1);c.language=b,c.r>e.r&&(e=c),c.r>d.r&&(e=d,d=c)}),e.language&&(d.second_best=e),d}function m(a){return D.tabReplace||D.useBR?a.replace(B,function(a,b){return D.useBR&&"\n"===a?"<br>":D.tabReplace?b.replace(/\t/g,D.tabReplace):void 0}):a}function n(a,b,c){var d=b?y[b]:c,e=[a.trim()];return a.match(/\bhljs\b/)||e.push("hljs"),-1===a.indexOf(d)&&e.push(d),e.join(" ").trim()}function o(a){var b,c,d,g,j,o=f(a);e(o)||(D.useBR?(b=document.createElementNS("http://www.w3.org/1999/xhtml","div"),b.innerHTML=a.innerHTML.replace(/\n/g,"").replace(/<br[ \/]*>/g,"\n")):b=a,j=b.textContent,d=o?k(o,j,!0):l(j),c=h(b),c.length&&(g=document.createElementNS("http://www.w3.org/1999/xhtml","div"),g.innerHTML=d.value,d.value=i(c,h(g),j)),d.value=m(d.value),a.innerHTML=d.value,a.className=n(a.className,o,d.language),a.result={language:d.language,re:d.r},d.second_best&&(a.second_best={language:d.second_best.language,re:d.second_best.r}))}function p(a){D=g(D,a)}function q(){if(!q.called){q.called=!0;var a=document.querySelectorAll("pre code");v.forEach.call(a,o)}}function r(){addEventListener("DOMContentLoaded",q,!1),addEventListener("load",q,!1)}function s(b,c){var d=x[b]=c(a);d.aliases&&d.aliases.forEach(function(a){y[a]=b})}function t(){return w(x)}function u(a){return a=(a||"").toLowerCase(),x[a]||x[y[a]]}var v=[],w=Object.keys,x={},y={},z=/^(no-?highlight|plain|text)$/i,A=/\blang(?:uage)?-([\w-]+)\b/i,B=/((^(<[^>]+>|\t|)+|(?:\n)))/gm,C="</span>",D={classPrefix:"hljs-",tabReplace:null,useBR:!1,languages:void 0},E={"&":"&amp;","<":"&lt;",">":"&gt;"};return a.highlight=k,a.highlightAuto=l,a.fixMarkup=m,a.highlightBlock=o,a.configure=p,a.initHighlighting=q,a.initHighlightingOnLoad=r,a.registerLanguage=s,a.listLanguages=t,a.getLanguage=u,a.inherit=g,a.IR="[a-zA-Z]\\w*",a.UIR="[a-zA-Z_]\\w*",a.NR="\\b\\d+(\\.\\d+)?",a.CNR="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",a.BNR="\\b(0b[01]+)",a.RSR="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",a.BE={b:"\\\\[\\s\\S]",r:0},a.ASM={cN:"string",b:"'",e:"'",i:"\\n",c:[a.BE]},a.QSM={cN:"string",b:'"',e:'"',i:"\\n",c:[a.BE]},a.PWM={b:/\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|like)\b/},a.C=function(b,c,d){var e=a.inherit({cN:"comment",b:b,e:c,c:[]},d||{});return e.c.push(a.PWM),e.c.push({cN:"doctag",b:"(?:TODO|FIXME|NOTE|BUG|XXX):",r:0}),e},a.CLCM=a.C("//","$"),a.CBCM=a.C("/\\*","\\*/"),a.HCM=a.C("#","$"),a.NM={cN:"number",b:a.NR,r:0},a.CNM={cN:"number",b:a.CNR,r:0},a.BNM={cN:"number",b:a.BNR,r:0},a.CSSNM={cN:"number",b:a.NR+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",r:0},a.RM={cN:"regexp",b:/\//,e:/\/[gimuy]*/,i:/\n/,c:[a.BE,{b:/\[/,e:/\]/,r:0,c:[a.BE]}]},a.TM={cN:"title",b:a.IR,r:0},a.UTM={cN:"title",b:a.UIR,r:0},a.METHOD_GUARD={b:"\\.\\s*"+a.UIR,r:0},a}),hljs.registerLanguage("coffeescript",function(a){var b={keyword:"in if for while finally new do return else break catch instanceof throw try this switch continue typeof delete debugger super then unless until loop of by when and or is isnt not",literal:"true false null undefined yes no on off",built_in:"npm require console print module global window document"},c="[A-Za-z$_][0-9A-Za-z$_]*",d={cN:"subst",b:/#\{/,e:/}/,k:b},e=[a.BNM,a.inherit(a.CNM,{starts:{e:"(\\s*/)?",r:0}}),{cN:"string",v:[{b:/'''/,e:/'''/,c:[a.BE]},{b:/'/,e:/'/,c:[a.BE]},{b:/"""/,e:/"""/,c:[a.BE,d]},{b:/"/,e:/"/,c:[a.BE,d]}]},{cN:"regexp",v:[{b:"///",e:"///",c:[d,a.HCM]},{b:"//[gim]*",r:0},{b:/\/(?![ *])(\\\/|.)*?\/[gim]*(?=\W|$)/}]},{b:"@"+c},{b:"`",e:"`",eB:!0,eE:!0,sL:"javascript"}];d.c=e;var f=a.inherit(a.TM,{b:c}),g="(\\(.*\\))?\\s*\\B[-=]>",h={cN:"params",b:"\\([^\\(]",rB:!0,c:[{b:/\(/,e:/\)/,k:b,c:["self"].concat(e)}]};return{aliases:["coffee","cson","iced"],k:b,i:/\/\*/,c:e.concat([a.C("###","###"),a.HCM,{cN:"function",b:"^\\s*"+c+"\\s*=\\s*"+g,e:"[-=]>",rB:!0,c:[f,h]},{b:/[:\(,=]\s*/,r:0,c:[{cN:"function",b:g,e:"[-=]>",rB:!0,c:[h]}]},{cN:"class",bK:"class",e:"$",i:/[:="\[\]]/,c:[{bK:"extends",eW:!0,i:/[:="\[\]]/,c:[f]},f]},{b:c+":",e:":",rB:!0,rE:!0,r:0}])}}),hljs.registerLanguage("css",function(a){var b={b:/[A-Z\_\.\-]+\s*:/,rB:!0,e:";",eW:!0,c:[{cN:"attribute",b:/\S/,e:":",eE:!0,starts:{eW:!0,eE:!0,c:[{b:/[\w-]+\(/,rB:!0,c:[{cN:"built_in",b:/[\w-]+/},{b:/\(/,e:/\)/,c:[a.ASM,a.QSM]}]},a.CSSNM,a.QSM,a.ASM,a.CBCM,{cN:"number",b:"#[0-9A-Fa-f]+"},{cN:"meta",b:"!important"}]}}]};return{cI:!0,i:/[=\/|'\$]/,c:[a.CBCM,{cN:"selector-id",b:/#[A-Za-z0-9_-]+/},{cN:"selector-class",b:/\.[A-Za-z0-9_-]+/},{cN:"selector-attr",b:/\[/,e:/\]/,i:"$"},{cN:"selector-pseudo",b:/:(:)?[a-zA-Z0-9\_\-\+\(\)"'.]+/},{b:"@(font-face|page)",l:"[a-z-]+",k:"font-face page"},{b:"@",e:"[{;]",i:/:/,c:[{cN:"keyword",b:/\w+/},{b:/\s/,eW:!0,eE:!0,r:0,c:[a.ASM,a.QSM,a.CSSNM]}]},{cN:"selector-tag",b:"[a-zA-Z-][a-zA-Z0-9_-]*",r:0},{b:"{",e:"}",i:/\S/,c:[a.CBCM,b]}]}}),hljs.registerLanguage("xml",function(a){var b={eW:!0,i:/</,r:0,c:[{cN:"attr",b:"[A-Za-z0-9\\._:-]+",r:0},{b:/=\s*/,r:0,c:[{cN:"string",endsParent:!0,v:[{b:/"/,e:/"/},{b:/'/,e:/'/},{b:/[^\s"'=<>`]+/}]}]}]};return{aliases:["html","xhtml","rss","atom","xjb","xsd","xsl","plist"],cI:!0,c:[{cN:"meta",b:"<!DOCTYPE",e:">",r:10,c:[{b:"\\[",e:"\\]"}]},a.C("\x3c!--","--\x3e",{r:10}),{b:"<\\!\\[CDATA\\[",e:"\\]\\]>",r:10},{b:/<\?(php)?/,e:/\?>/,sL:"php",c:[{b:"/\\*",e:"\\*/",skip:!0}]},{cN:"tag",b:"<style(?=\\s|>|$)",e:">",k:{name:"style"},c:[b],starts:{e:"</style>",rE:!0,sL:["css","xml"]}},{cN:"tag",b:"<script(?=\\s|>|$)",e:">",k:{name:"script"},c:[b],starts:{e:"<\/script>",rE:!0,sL:["actionscript","javascript","handlebars","xml"]}},{cN:"meta",v:[{b:/<\?xml/,e:/\?>/,r:10},{b:/<\?\w+/,e:/\?>/}]},{cN:"tag",b:"</?",e:"/?>",c:[{cN:"name",b:/[^\/><\s]+/,r:0},b]}]}}),hljs.registerLanguage("markdown",function(a){return{aliases:["md","mkdown","mkd"],c:[{cN:"section",v:[{b:"^#{1,6}",e:"$"},{b:"^.+?\\n[=-]{2,}$"}]},{b:"<",e:">",sL:"xml",r:0},{cN:"bullet",b:"^([*+-]|(\\d+\\.))\\s+"},{cN:"strong",b:"[*_]{2}.+?[*_]{2}"},{cN:"emphasis",v:[{b:"\\*.+?\\*"},{b:"_.+?_",r:0}]},{cN:"quote",b:"^>\\s+",e:"$"},{cN:"code",v:[{b:"^```w*s*$",e:"^```s*$"},{b:"`.+?`"},{b:"^( {4}|\t)",e:"$",r:0}]},{b:"^[-\\*]{3,}",e:"$"},{b:"\\[.+?\\][\\(\\[].*?[\\)\\]]",rB:!0,c:[{cN:"string",b:"\\[",e:"\\]",eB:!0,rE:!0,r:0},{cN:"link",b:"\\]\\(",e:"\\)",eB:!0,eE:!0},{cN:"symbol",b:"\\]\\[",e:"\\]",eB:!0,eE:!0}],r:10},{b:/^\[[^\n]+\]:/,rB:!0,c:[{cN:"symbol",b:/\[/,e:/\]/,eB:!0,eE:!0},{cN:"link",b:/:\s*/,e:/$/,eB:!0}]}]}}),hljs.registerLanguage("json",function(a){var b={literal:"true false null"},c=[a.QSM,a.CNM],d={e:",",eW:!0,eE:!0,c:c,k:b},e={b:"{",e:"}",c:[{cN:"attr",b:/"/,e:/"/,c:[a.BE],i:"\\n"},a.inherit(d,{b:/:/})],i:"\\S"},f={b:"\\[",e:"\\]",c:[a.inherit(d)],i:"\\S"};return c.splice(c.length,0,e,f),{c:c,k:b,i:"\\S"}}),hljs.registerLanguage("javascript",function(a){var b="[A-Za-z$_][0-9A-Za-z$_]*",c={keyword:"in of if for while finally var new function do return void else break catch instanceof with throw case default try this switch continue typeof delete let yield const export super debugger as async await static import from as",literal:"true false null undefined NaN Infinity",built_in:"eval isFinite isNaN parseFloat parseInt decodeURI decodeURIComponent encodeURI encodeURIComponent escape unescape Object Function Boolean Error EvalError InternalError RangeError ReferenceError StopIteration SyntaxError TypeError URIError Number Math Date String RegExp Array Float32Array Float64Array Int16Array Int32Array Int8Array Uint16Array Uint32Array Uint8Array Uint8ClampedArray ArrayBuffer DataView JSON Intl arguments require module console window document Symbol Set Map WeakSet WeakMap Proxy Reflect Promise"},d={cN:"number",v:[{b:"\\b(0[bB][01]+)"},{b:"\\b(0[oO][0-7]+)"},{b:a.CNR}],r:0},e={cN:"subst",b:"\\$\\{",e:"\\}",k:c,c:[]},f={cN:"string",b:"`",e:"`",c:[a.BE,e]};e.c=[a.ASM,a.QSM,f,d,a.RM];var g=e.c.concat([a.CBCM,a.CLCM]);return{aliases:["js","jsx"],k:c,c:[{cN:"meta",r:10,b:/^\s*['"]use (strict|asm)['"]/},{cN:"meta",b:/^#!/,e:/$/},a.ASM,a.QSM,f,a.CLCM,a.CBCM,d,{b:/[{,]\s*/,r:0,c:[{b:b+"\\s*:",rB:!0,r:0,c:[{cN:"attr",b:b,r:0}]}]},{b:"("+a.RSR+"|\\b(case|return|throw)\\b)\\s*",k:"return throw case",c:[a.CLCM,a.CBCM,a.RM,{cN:"function",b:"(\\(.*?\\)|"+b+")\\s*=>",rB:!0,e:"\\s*=>",c:[{cN:"params",v:[{b:b},{b:/\(\s*\)/},{b:/\(/,e:/\)/,eB:!0,eE:!0,k:c,c:g}]}]},{b:/</,e:/(\/\w+|\w+\/)>/,sL:"xml",c:[{b:/<\w+\s*\/>/,skip:!0},{b:/<\w+/,e:/(\/\w+|\w+\/)>/,skip:!0,c:[{b:/<\w+\s*\/>/,skip:!0},"self"]}]}],r:0},{cN:"function",bK:"function",e:/\{/,eE:!0,c:[a.inherit(a.TM,{b:b}),{cN:"params",b:/\(/,e:/\)/,eB:!0,eE:!0,c:g}],i:/\[|%/},{b:/\$[(.]/},a.METHOD_GUARD,{cN:"class",bK:"class",e:/[{;=]/,eE:!0,i:/[:"\[\]]/,c:[{bK:"extends"},a.UTM]},{bK:"constructor",e:/\{/,eE:!0}],i:/#(?!!)/}}),function(){"use strict";function a(){function a(a,e,f){function g(a){a.setOption("fullScreen",!a.getOption("fullScreen"));var b=document.querySelector(".jotted-nav");b.style.display="none"===b.style.display?"":"none",localStorage.setItem("bb.playground.hints.maximize",!0)}function h(a){a.getOption("fullScreen")&&a.setOption("fullScreen",!1),document.querySelector(".jotted-nav").style.display=""}var i=new Jotted(e[0],{files:[{type:"html",url:a.html},{type:"css",url:a.css},{type:"js",url:a.js}],debounce:1e3,plugins:[{name:"codemirror",options:{extraKeys:{"Ctrl-M":g,Esc:h},lineWrapping:!0,matchBrackets:!0,theme:"eclipse"}},"pen"]});if(a.paneProportion){var j=a.paneProportion.split("-"),k=j.reduce(function(a,b){return parseInt(a)+parseInt(b)}),l=[].slice.call(e[0].querySelectorAll(".jotted-pane")).filter(function(a){return!angular.element(a).hasClass("jotted-pane-result")&&"hidden"!==getComputedStyle(a).visibility});l.forEach(function(a,b){var c=j[b]/k*100+"%";angular.element(l[b]).css("width",c).css("max-width",c)})}var m={html:new b({prependMarker:"\x3c!-- bb-jotted-prepend --\x3e",appendMarker:"\x3c!-- bb-jotted-append --\x3e",prependInject:"<style>body { padding: 1em; background: #eceeef; }</style>"}),js:new b({prependMarker:"// bb-jotted-prepend",appendMarker:"// bb-jotted-append"})},n={html:new c,js:new c},o={html:new d,js:new d};i.on("change",function(a,b){m[a.type]&&m[a.type].execute(a),n[a.type]&&n[a.type].execute(a),o[a.type]&&o[a.type].execute(a),b(null,a)})}return{restrict:"EA",scope:{html:"@bbHtml",css:"@bbCss",js:"@bbJs",paneProportion:"@bbPaneProportion"},link:a}}function b(a){this.firstExecution=!0,this.prependMarker=a.prependMarker,this.appendMarker=a.appendMarker,this.prependInject=a.prependInject||"",this.prepend=[],this.append=[]}function c(){this.firstExecution=!0,this.highlightLines=[],this.reHighlighted=/\*\*\*(.*)\*\*\*/g}function d(){this.firstExecution=!0,this.hints=[],this.onfocus=this.focus.bind(this)}angular.module("bb.jotted",[]).directive("bbJotted",a);var e=[/styles\/components?(.*.)\.\w{8}.css/],f=[/scripts\/vendor\.\w{8}.js/,/scripts\/components\.\w{8}.js/],g=Array.prototype.slice.call(document.querySelectorAll("script")).filter(function(a){return!!f.filter(function(b){return a.src.match(b)}).length}).map(function(a){return a.outerHTML}).join("\n"),h=Array.prototype.slice.call(document.querySelectorAll("link")).filter(function(a){return!!e.filter(function(b){return a.href.match(b)}).length}).map(function(a){return a.outerHTML}).join("\n"),i=/<script.*src[\s\S]*?>[\s\S]*?<\/script>/gi,j=/<link[\s\S]*?>[\s\S]*?(<\/link>)*/gi;const k=["desenvolvedores.desenv.bb.com.br","desenvolvedores.hm.bb.com.br","desenvolvedores-piloto.intranet.bb.com.br","desenvolvedores.intranet.bb.com.br","desenv.estatico.bb.com.br","plta3.labbs.com.br"],l=!!k.filter(function(a){return!!document.location.href.match(a)}).length;b.prototype.execute=function(a){if(this.firstExecution){this.firstExecution=!1;var b=a.cmEditor.getValue();this.prepend=this.sliceCode(b,this.prependMarker),this.append=this.sliceCode(b,this.appendMarker);var c=b.replace(this.prepend,"").replace(this.append,"").trim();if(l&&"html"===a.type){this.prepend=this.prepend.replace(i,"").replace(j,"");var d="\x3c!-- bb-jotted-prepend --\x3e".length+1;this.prepend=[this.prepend.slice(0,d),h,g,this.prepend.slice(d)].join("\n")}a.cmEditor.setValue(c),a.cmEditor.clearHistory()}else a.content=[this.prepend,this.prependInject,a.content,this.append].join("\n")},b.prototype.sliceCode=function(a,b){var c=a.indexOf(b),d=a.lastIndexOf(b)+b.length;return c<0?"":a.split("").splice(c,d).join("")},c.prototype.execute=function(a){var b=this;this.firstExecution&&(this.firstExecution=!1,a.cmEditor.getValue().split("\n").forEach(function(a,c){a.match(b.reHighlighted)&&b.highlightLines.push({number:c,startHighlight:a.indexOf("***"),endHighlight:a.lastIndexOf("***")-3})}),a.content=a.content.replace(this.reHighlighted,"$1"),a.cmEditor.setValue(a.cmEditor.getValue().replace(this.reHighlighted,"$1")),this.highlightLines.forEach(function(b){a.cmEditor.markText({line:b.number,ch:b.startHighlight},{line:b.number,ch:b.endHighlight},{css:"background: yellow; font-weight: bold;"})}))},d.displaying=!1,d.prototype.execute=function(a){var b=localStorage.getItem("bb.playground.hints.maximize");this.firstExecution&&!b&&(this.firstExecution=!1,a.cmEditor.on("focus",this.onfocus))},d.prototype.focus=function(a,b){var c=localStorage.getItem("bb.playground.hints.maximize");if(!d.displaying&&!c){d.displaying=!0;var e=document.createElement("div"),f=e.appendChild(document.createElement("i"));f.className="mi fz-sm mi--info",f.style="margin-right: .3rem",e.appendChild(document.createTextNode("Voc pode usar Ctrl-M para maximizar este painel.")),e.className="bb-playground-hint";var g=a.addLineWidget(0,e,{coverGutter:!1,noHScroll:!0,above:!0});setTimeout(function(){e.classList.add("displayed")},2e3),setTimeout(function(){d.displaying=!1,e.classList.remove("displayed")},7e3),setTimeout(function(){a.removeLineWidget(g)},8e3)}}}(),function(){"use strict";angular.module("bb.menu.tmpl",[]).run(["$templateCache",function(a){a.put("bb/menu.html",'<ul>\n    <li ng-repeat="group in menu track by $index" \nng-class="{\'is-open\': group.active || filter}">\n        <a href \nclass="menu__title" ng-click="active($index);">\n            <span>\n{{group.title}}</span>\n            <i class="mi mi--arrow-drop-down" \nng-if="group.items"></i>\n        </a>\n        <ul class="menu__sub" \nng-if="group.items">\n            <li \nng-repeat="item in group.items | filter:filter" ui-sref-active="is-active">\n                <a ng-if="! item.options && !item.options.target" \nui-sref="{{item.route}}">{{item.title}}</a>\n                <a \nng-if="item.options && item.options.target" ui-sref="{{item.route}}" \ntarget="{{item.options ? item.options.target : \'_self\'}}">{{item.title}}</a>\n\n            </li>\n        </ul>\n    </li>\n</ul>\n')}])}(),function(){"use strict";function a(){function a(a){a.active=function(b){a.menu[b].active=!a.menu[b].active}}return{link:a,restrict:"A",scope:{menu:"=bbMenu",filter:"=bbFilter"},templateUrl:"bb/menu.html"}}angular.module("bb.menu",["bb.menu.tmpl"]).directive("bbMenu",a)}(),"function"!=typeof Object.create&&(Object.create=function(a){function b(){}return b.prototype=a,new b}),function(a,b,c,d){var e={init:function(b,c){var d,e=this;e.elem=c,e.$elem=a(c),e.options=a.extend({},a.fn.ezPlus.options,e.responsiveConfig(b||{})),e.imageSrc=e.$elem.data(e.options.attrImageZoomSrc)?e.$elem.data(e.options.attrImageZoomSrc):e.$elem.attr("src"),e.options.enabled&&(e.options.tint&&(e.options.lensColour="transparent",e.options.lensOpacity="1"),"inner"===e.options.zoomType&&(e.options.showLens=!1),"lens"===e.options.zoomType&&(e.options.zoomWindowWidth=0),-1===e.options.zoomId&&(e.options.zoomId=function(){var a=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(b){var c=(a+16*Math.random())%16|0;return a=Math.floor(a/16),("x"==b?c:3&c|8).toString(16)})}()),e.$elem.parent().removeAttr("title").removeAttr("alt"),e.zoomImage=e.imageSrc,e.refresh(1),d=a(e.options.gallery?"#"+e.options.gallery:e.options.gallerySelector),d.on("click.zoom",e.options.galleryItem,function(b){if(e.options.galleryActiveClass&&(a(e.options.galleryItem,d).removeClass(e.options.galleryActiveClass),a(this).addClass(e.options.galleryActiveClass)),"A"===this.tagName&&b.preventDefault(),a(this).data(e.options.attrImageZoomSrc)?e.zoomImagePre=a(this).data(e.options.attrImageZoomSrc):e.zoomImagePre=a(this).data("image"),e.swaptheimage(a(this).data("image"),e.zoomImagePre),"A"===this.tagName)return!1}))},refresh:function(a){var b=this;setTimeout(function(){b.fetch(b.imageSrc,b.$elem,b.options.minZoomLevel)},a||b.options.refresh)},fetch:function(a,b,c){var d=this,e=new Image;e.onload=function(){e.width/b.width()<=c?d.largeWidth=b.width()*c:d.largeWidth=e.width,e.height/b.height()<=c?d.largeHeight=b.height()*c:d.largeHeight=e.height,d.startZoom(),d.currentImage=d.imageSrc,d.options.onZoomedImageLoaded(d.$elem)},d.setImageSource(e,a)},setImageSource:function(a,b){a.src=b},startZoom:function(){function b(a){c.lastX===a.clientX&&c.lastY===a.clientY||(c.setPosition(a),c.currentLoc=a),c.lastX=a.clientX,c.lastY=a.clientY}var c=this;c.nzWidth=c.$elem.width(),c.nzHeight=c.$elem.height(),c.isWindowActive=!1,c.isLensActive=!1,c.isTintActive=!1,c.overWindow=!1,c.options.imageCrossfade&&(c.zoomWrap=c.$elem.wrap('<div style="height:'+c.nzHeight+"px;width:"+c.nzWidth+'px;" class="zoomWrapper" />'),c.$elem.css("position","absolute")),c.zoomLock=1,c.scrollingLock=!1,c.changeBgSize=!1,c.currentZoomLevel=c.options.zoomLevel,c.updateOffset(c),c.widthRatio=c.largeWidth/c.currentZoomLevel/c.nzWidth,c.heightRatio=c.largeHeight/c.currentZoomLevel/c.nzHeight,"window"===c.options.zoomType&&(c.zoomWindowStyle=function(){return"display: none;position: absolute;float: left;height: "+String(c.options.zoomWindowHeight)+"px;width: "+String(c.options.zoomWindowWidth)+"px;text-align: center;border: "+String(c.options.borderSize)+"px solid "+c.options.borderColour+";background-size: "+c.largeWidth/c.currentZoomLevel+"px "+c.largeHeight/c.currentZoomLevel+"px;background-position: 0px 0px;background-repeat: no-repeat;background-color: "+String(c.options.zoomWindowBgColour)+";overflow: hidden;z-index: 100;"}()),"inner"===c.options.zoomType&&(c.zoomWindowStyle=function(){var a=c.$elem.css("border-left-width");return"display: none;position: absolute;float: left;height: "+String(c.nzHeight)+"px;width: "+String(c.nzWidth)+"px;margin-top: "+String(a)+";margin-left: "+String(a)+";border: "+String(c.options.borderSize)+"px solid "+c.options.borderColour+";background-position: 0px 0px;background-repeat: no-repeat;cursor:"+c.options.cursor+";overflow: hidden;zindex: "+c.options.zIndex+";"}()),"window"===c.options.zoomType&&(c.lensStyle=function(){return c.nzHeight<c.options.zoomWindowHeight/c.heightRatio?c.lensHeight=c.nzHeight:c.lensHeight=String(c.options.zoomWindowHeight/c.heightRatio),c.largeWidth<c.options.zoomWindowWidth?c.lensWidth=c.nzWidth:c.lensWidth=String(c.options.zoomWindowWidth/c.widthRatio),"display: none;position: absolute;float: right;height: "+c.lensHeight+"px;width: "+c.lensWidth+"px;border: "+c.options.lensBorderSize+"px solid "+c.options.lensBorderColour+";background-position: 0px 0px;background-repeat: no-repeat;background-color: "+c.options.lensColour+";opacity: "+c.options.lensOpacity+";filter: alpha(opacity = "+100*c.options.lensOpacity+");zoom: 1;cursor:"+c.options.cursor+";z-index: 999;overflow: hidden;"}()),c.tintStyle="display: block;position: absolute;height: "+c.nzHeight+"px;width: "+c.nzWidth+"px;background-color: "+c.options.tintColour+";filter: alpha(opacity=0);opacity: 0;",c.lensRound="","lens"===c.options.zoomType&&(c.lensStyle="display: none;position: absolute;float: left;height:"+String(c.options.lensSize)+"px;width:"+String(c.options.lensSize)+"px;border: "+String(c.options.borderSize)+"px solid "+c.options.borderColour+";background-position: 0px 0px;background-repeat: no-repeat;background-color: "+c.options.lensColour+";cursor:"+c.options.cursor+";"),"round"===c.options.lensShape&&(c.lensRound="border-radius: "+String(c.options.lensSize/2+c.options.borderSize)+"px;"),c.zoomContainer=a('<div class="zoomContainer" uuid="'+c.options.zoomId+'"style="position: absolute;top: '+c.nzOffset.top+"px;left: "+c.nzOffset.left+"px;height: "+c.nzHeight+"px;width: "+c.nzWidth+"px;z-index: "+c.options.zIndex+'"></div>'),c.$elem.attr("id")&&c.zoomContainer.attr("id",c.$elem.attr("id")+"-zoomContainer"),a(c.options.zoomContainerAppendTo).append(c.zoomContainer),c.options.containLensZoom&&"lens"===c.options.zoomType&&c.zoomContainer.css("overflow","hidden"),"inner"!==c.options.zoomType&&(c.zoomLens=a('<div class="zoomLens" style="'+c.lensStyle+c.lensRound+'">&nbsp;</div>').appendTo(c.zoomContainer).click(function(){c.$elem.trigger("click")}),c.options.tint&&(c.tintContainer=a("<div/>").addClass("tintContainer"),c.zoomTint=a('<div class="zoomTint" style="'+c.tintStyle+'"></div>'),c.zoomLens.wrap(c.tintContainer),c.zoomTintcss=c.zoomLens.after(c.zoomTint),c.zoomTintImage=a('<img style="position: absolute;top: 0px;left: 0px;height: '+c.nzHeight+'px;" width: '+c.nzWidth+'px; max-width: none; src="'+c.$elem.attr("src")+'">').appendTo(c.zoomLens).click(function(){c.$elem.trigger("click")})));var d=isNaN(c.options.zoomWindowPosition)?"body":c.zoomContainer;c.zoomWindow=a('<div style="z-index: 999;top: '+c.windowOffsetTop+"px;left: "+c.windowOffsetLeft+"px;"+c.zoomWindowStyle+'" class="zoomWindow">&nbsp;</div>').appendTo(d).click(function(){c.$elem.trigger("click")}),c.zoomWindowContainer=a("<div/>").addClass("zoomWindowContainer").css("width",c.options.zoomWindowWidth),c.zoomWindow.wrap(c.zoomWindowContainer),"lens"===c.options.zoomType&&c.zoomLens.css("background-image",'url("'+c.imageSrc+'")'),"window"===c.options.zoomType&&c.zoomWindow.css("background-image",'url("'+c.imageSrc+'")'),"inner"===c.options.zoomType&&c.zoomWindow.css("background-image",'url("'+c.imageSrc+'")'),c.options.touchEnabled&&(c.$elem.bind("touchmove.ezpspace",function(a){a.preventDefault();var b=a.originalEvent.touches[0]||a.originalEvent.changedTouches[0];c.setPosition(b)}),c.zoomContainer.bind("touchmove.ezpspace",function(a){c.setElements("show"),a.preventDefault();var b=a.originalEvent.touches[0]||a.originalEvent.changedTouches[0];c.setPosition(b)}),c.zoomContainer.bind("touchend.ezpspace",function(a){c.showHideWindow("hide"),c.options.showLens&&c.showHideLens("hide"),c.options.tint&&"inner"!==c.options.zoomType&&c.showHideTint("hide")}),c.$elem.bind("touchend.ezpspace",function(a){c.showHideWindow("hide"),c.options.showLens&&c.showHideLens("hide"),c.options.tint&&"inner"!==c.options.zoomType&&c.showHideTint("hide")}),c.options.showLens&&(c.zoomLens.bind("touchmove.ezpspace",function(a){a.preventDefault();var b=a.originalEvent.touches[0]||a.originalEvent.changedTouches[0];c.setPosition(b)}),c.zoomLens.bind("touchend.ezpspace",function(a){c.showHideWindow("hide"),c.options.showLens&&c.showHideLens("hide"),c.options.tint&&"inner"!==c.options.zoomType&&c.showHideTint("hide")}))),c.$elem.bind("mousemove.ezpspace",function(a){!1===c.overWindow&&c.setElements("show"),c.lastX===a.clientX&&c.lastY===a.clientY||(c.setPosition(a),c.currentLoc=a),c.lastX=a.clientX,c.lastY=a.clientY}),c.zoomContainer.bind("click.ezpspace touchstart.ezpspace",c.options.onImageClick),c.zoomContainer.bind("mousemove.ezpspace",function(a){!1===c.overWindow&&c.setElements("show"),b(a)});var e=null;"inner"!==c.options.zoomType&&(e=c.zoomLens),c.options.tint&&"inner"!==c.options.zoomType&&(e=c.zoomTint),"inner"===c.options.zoomType&&(e=c.zoomWindow),e&&e.bind("mousemove.ezpspace",b),c.zoomContainer.add(c.$elem).mouseenter(function(){!1===c.overWindow&&c.setElements("show")}).mouseleave(function(){c.scrollLock||(c.setElements("hide"),c.options.onDestroy(c.$elem))}),"inner"!==c.options.zoomType&&c.zoomWindow.mouseenter(function(){c.overWindow=!0,c.setElements("hide")}).mouseleave(function(){c.overWindow=!1}),c.options.minZoomLevel?c.minZoomLevel=c.options.minZoomLevel:c.minZoomLevel=2*c.options.scrollZoomIncrement,c.options.scrollZoom&&c.zoomContainer.add(c.$elem).bind("wheel DOMMouseScroll MozMousePixelScroll",function(b){c.scrollLock=!0,clearTimeout(a.data(this,"timer")),
a.data(this,"timer",setTimeout(function(){c.scrollLock=!1},250));var d=b.originalEvent.deltaY||-1*b.originalEvent.detail;if(b.stopImmediatePropagation(),b.stopPropagation(),b.preventDefault(),0==d)return!1;if(d/120>0){var e=parseFloat(c.currentZoomLevel)-c.options.scrollZoomIncrement;e>=parseFloat(c.minZoomLevel)&&c.changeZoomLevel(e)}else if(!c.fullheight&&!c.fullwidth||!c.options.mantainZoomAspectRatio){var e=parseFloat(c.currentZoomLevel)+c.options.scrollZoomIncrement;c.options.maxZoomLevel?e<=c.options.maxZoomLevel&&c.changeZoomLevel(e):c.changeZoomLevel(e)}return!1})},destroy:function(){var b=this;b.$elem.unbind("ezpspace"),a(b.zoomContainer).remove(),b.options.loadingIcon&&b.spinner&&b.spinner.length&&(b.spinner.remove(),delete b.spinner)},getIdentifier:function(){return this.options.zoomId},setElements:function(a){var b=this;if(!b.options.zoomEnabled)return!1;"show"===a&&b.isWindowSet&&("inner"===b.options.zoomType&&b.showHideWindow("show"),"window"===b.options.zoomType&&b.showHideWindow("show"),b.options.showLens&&b.showHideLens("show"),b.options.tint&&"inner"!==b.options.zoomType&&b.showHideTint("show")),"hide"===a&&("window"===b.options.zoomType&&b.showHideWindow("hide"),b.options.tint||b.showHideWindow("hide"),b.options.showLens&&b.showHideLens("hide"),b.options.tint&&b.showHideTint("hide"))},setPosition:function(a){var b=this;if(!b.options.zoomEnabled)return!1;if(b.nzHeight=b.$elem.height(),b.nzWidth=b.$elem.width(),b.updateOffset(b),b.options.tint&&"inner"!==b.options.zoomType&&b.zoomTint.css({top:0,left:0}),b.options.responsive&&!b.options.scrollZoom&&b.options.showLens){b.nzHeight<b.options.zoomWindowWidth/b.widthRatio?b.lensHeight=b.nzHeight:b.lensHeight=String(b.options.zoomWindowHeight/b.heightRatio),b.largeWidth<b.options.zoomWindowWidth?b.lensWidth=b.nzWidth:b.lensWidth=b.options.zoomWindowWidth/b.widthRatio,b.widthRatio=b.largeWidth/b.nzWidth,b.heightRatio=b.largeHeight/b.nzHeight,"lens"!==b.options.zoomType&&(b.nzHeight<b.options.zoomWindowWidth/b.widthRatio?b.lensHeight=b.nzHeight:b.lensHeight=String(b.options.zoomWindowHeight/b.heightRatio),b.nzWidth<b.options.zoomWindowHeight/b.heightRatio?b.lensWidth=b.nzWidth:b.lensWidth=String(b.options.zoomWindowWidth/b.widthRatio),b.zoomLens.css({width:b.lensWidth,height:b.lensHeight}),b.options.tint&&b.zoomTintImage.css({width:b.nzWidth,height:b.nzHeight})),"lens"===b.options.zoomType&&b.zoomLens.css({width:String(b.options.lensSize)+"px",height:String(b.options.lensSize)+"px"})}if(b.zoomContainer.css({top:b.nzOffset.top,left:b.nzOffset.left,width:b.nzWidth,height:b.nzHeight}),b.mouseLeft=parseInt(a.pageX-b.nzOffset.left),b.mouseTop=parseInt(a.pageY-b.nzOffset.top),"window"===b.options.zoomType){var c=b.zoomLens.height()/2,d=b.zoomLens.width()/2;b.Etoppos=b.mouseTop<0+c,b.Eboppos=b.mouseTop>b.nzHeight-c-2*b.options.lensBorderSize,b.Eloppos=b.mouseLeft<0+d,b.Eroppos=b.mouseLeft>b.nzWidth-d-2*b.options.lensBorderSize}if("inner"===b.options.zoomType&&(b.Etoppos=b.mouseTop<b.nzHeight/2/b.heightRatio,b.Eboppos=b.mouseTop>b.nzHeight-b.nzHeight/2/b.heightRatio,b.Eloppos=b.mouseLeft<0+b.nzWidth/2/b.widthRatio,b.Eroppos=b.mouseLeft>b.nzWidth-b.nzWidth/2/b.widthRatio-2*b.options.lensBorderSize),b.mouseLeft<0||b.mouseTop<0||b.mouseLeft>b.nzWidth||b.mouseTop>b.nzHeight)return void b.setElements("hide");b.options.showLens&&(b.lensLeftPos=String(Math.floor(b.mouseLeft-b.zoomLens.width()/2)),b.lensTopPos=String(Math.floor(b.mouseTop-b.zoomLens.height()/2))),b.Etoppos&&(b.lensTopPos=0),b.Eloppos&&(b.windowLeftPos=0,b.lensLeftPos=0,b.tintpos=0),"window"===b.options.zoomType&&(b.Eboppos&&(b.lensTopPos=Math.max(b.nzHeight-b.zoomLens.height()-2*b.options.lensBorderSize,0)),b.Eroppos&&(b.lensLeftPos=b.nzWidth-b.zoomLens.width()-2*b.options.lensBorderSize)),"inner"===b.options.zoomType&&(b.Eboppos&&(b.lensTopPos=Math.max(b.nzHeight-2*b.options.lensBorderSize,0)),b.Eroppos&&(b.lensLeftPos=b.nzWidth-b.nzWidth-2*b.options.lensBorderSize)),"lens"===b.options.zoomType&&(b.windowLeftPos=String(-1*((a.pageX-b.nzOffset.left)*b.widthRatio-b.zoomLens.width()/2)),b.windowTopPos=String(-1*((a.pageY-b.nzOffset.top)*b.heightRatio-b.zoomLens.height()/2)),b.zoomLens.css("background-position",b.windowLeftPos+"px "+b.windowTopPos+"px"),b.changeBgSize&&(b.nzHeight>b.nzWidth?("lens"===b.options.zoomType&&b.zoomLens.css("background-size",b.largeWidth/b.newvalueheight+"px "+b.largeHeight/b.newvalueheight+"px"),b.zoomWindow.css("background-size",b.largeWidth/b.newvalueheight+"px "+b.largeHeight/b.newvalueheight+"px")):("lens"===b.options.zoomType&&b.zoomLens.css("background-size",b.largeWidth/b.newvaluewidth+"px "+b.largeHeight/b.newvaluewidth+"px"),b.zoomWindow.css("background-size",b.largeWidth/b.newvaluewidth+"px "+b.largeHeight/b.newvaluewidth+"px")),b.changeBgSize=!1),b.setWindowPosition(a)),b.options.tint&&"inner"!==b.options.zoomType&&b.setTintPosition(a),"window"===b.options.zoomType&&b.setWindowPosition(a),"inner"===b.options.zoomType&&b.setWindowPosition(a),b.options.showLens&&(b.fullwidth&&"lens"!==b.options.zoomType&&(b.lensLeftPos=0),b.zoomLens.css({left:b.lensLeftPos+"px",top:b.lensTopPos+"px"}))},showHideZoomContainer:function(a){var b=this;"show"===a&&b.zoomContainer&&b.zoomContainer.show(),"hide"===a&&b.zoomContainer&&b.zoomContainer.hide()},showHideWindow:function(a){var b=this;"show"===a&&!b.isWindowActive&&b.zoomWindow&&(b.options.onShow(b),b.options.zoomWindowFadeIn?b.zoomWindow.stop(!0,!0,!1).fadeIn(b.options.zoomWindowFadeIn):b.zoomWindow.show(),b.isWindowActive=!0),"hide"===a&&b.isWindowActive&&(b.options.zoomWindowFadeOut?b.zoomWindow.stop(!0,!0).fadeOut(b.options.zoomWindowFadeOut,function(){b.loop&&(clearInterval(b.loop),b.loop=!1)}):b.zoomWindow.hide(),b.isWindowActive=!1)},showHideLens:function(a){var b=this;"show"===a&&(b.isLensActive||(b.zoomLens&&(b.options.lensFadeIn?b.zoomLens.stop(!0,!0,!1).fadeIn(b.options.lensFadeIn):b.zoomLens.show()),b.isLensActive=!0)),"hide"===a&&b.isLensActive&&(b.zoomLens&&(b.options.lensFadeOut?b.zoomLens.stop(!0,!0).fadeOut(b.options.lensFadeOut):b.zoomLens.hide()),b.isLensActive=!1)},showHideTint:function(a){var b=this;"show"===a&&!b.isTintActive&&b.zoomTint&&(b.options.zoomTintFadeIn?b.zoomTint.css("opacity",b.options.tintOpacity).animate().stop(!0,!0).fadeIn("slow"):(b.zoomTint.css("opacity",b.options.tintOpacity).animate(),b.zoomTint.show()),b.isTintActive=!0),"hide"===a&&b.isTintActive&&(b.options.zoomTintFadeOut?b.zoomTint.stop(!0,!0).fadeOut(b.options.zoomTintFadeOut):b.zoomTint.hide(),b.isTintActive=!1)},setLensPosition:function(a){},setWindowPosition:function(b){var c=this;if(isNaN(c.options.zoomWindowPosition))c.externalContainer=a(c.options.zoomWindowPosition),c.externalContainer.length||(c.externalContainer=a("#"+c.options.zoomWindowPosition)),c.externalContainerWidth=c.externalContainer.width(),c.externalContainerHeight=c.externalContainer.height(),c.externalContainerOffset=c.externalContainer.offset(),c.windowOffsetTop=c.externalContainerOffset.top,c.windowOffsetLeft=c.externalContainerOffset.left;else switch(c.options.zoomWindowPosition){case 1:c.windowOffsetTop=c.options.zoomWindowOffsetY,c.windowOffsetLeft=+c.nzWidth;break;case 2:c.options.zoomWindowHeight>c.nzHeight?(c.windowOffsetTop=-1*(c.options.zoomWindowHeight/2-c.nzHeight/2),c.windowOffsetLeft=c.nzWidth):a.noop();break;case 3:c.windowOffsetTop=c.nzHeight-c.zoomWindow.height()-2*c.options.borderSize,c.windowOffsetLeft=c.nzWidth;break;case 4:c.windowOffsetTop=c.nzHeight,c.windowOffsetLeft=c.nzWidth;break;case 5:c.windowOffsetTop=c.nzHeight,c.windowOffsetLeft=c.nzWidth-c.zoomWindow.width()-2*c.options.borderSize;break;case 6:c.options.zoomWindowHeight>c.nzHeight?(c.windowOffsetTop=c.nzHeight,c.windowOffsetLeft=-1*(c.options.zoomWindowWidth/2-c.nzWidth/2+2*c.options.borderSize)):a.noop();break;case 7:c.windowOffsetTop=c.nzHeight,c.windowOffsetLeft=0;break;case 8:c.windowOffsetTop=c.nzHeight,c.windowOffsetLeft=-1*(c.zoomWindow.width()+2*c.options.borderSize);break;case 9:c.windowOffsetTop=c.nzHeight-c.zoomWindow.height()-2*c.options.borderSize,c.windowOffsetLeft=-1*(c.zoomWindow.width()+2*c.options.borderSize);break;case 10:c.options.zoomWindowHeight>c.nzHeight?(c.windowOffsetTop=-1*(c.options.zoomWindowHeight/2-c.nzHeight/2),c.windowOffsetLeft=-1*(c.zoomWindow.width()+2*c.options.borderSize)):a.noop();break;case 11:c.windowOffsetTop=c.options.zoomWindowOffsetY,c.windowOffsetLeft=-1*(c.zoomWindow.width()+2*c.options.borderSize);break;case 12:c.windowOffsetTop=-1*(c.zoomWindow.height()+2*c.options.borderSize),c.windowOffsetLeft=-1*(c.zoomWindow.width()+2*c.options.borderSize);break;case 13:c.windowOffsetTop=-1*(c.zoomWindow.height()+2*c.options.borderSize),c.windowOffsetLeft=0;break;case 14:c.options.zoomWindowHeight>c.nzHeight?(c.windowOffsetTop=-1*(c.zoomWindow.height()+2*c.options.borderSize),c.windowOffsetLeft=-1*(c.options.zoomWindowWidth/2-c.nzWidth/2+2*c.options.borderSize)):a.noop();break;case 15:c.windowOffsetTop=-1*(c.zoomWindow.height()+2*c.options.borderSize),c.windowOffsetLeft=c.nzWidth-c.zoomWindow.width()-2*c.options.borderSize;break;case 16:c.windowOffsetTop=-1*(c.zoomWindow.height()+2*c.options.borderSize),c.windowOffsetLeft=c.nzWidth;break;default:c.windowOffsetTop=c.options.zoomWindowOffsetY,c.windowOffsetLeft=c.nzWidth}if(c.isWindowSet=!0,c.windowOffsetTop=c.windowOffsetTop+c.options.zoomWindowOffsetY,c.windowOffsetLeft=c.windowOffsetLeft+c.options.zoomWindowOffsetX,c.zoomWindow.css({top:c.windowOffsetTop,left:c.windowOffsetLeft}),"inner"===c.options.zoomType&&c.zoomWindow.css({top:0,left:0}),c.windowLeftPos=String(-1*((b.pageX-c.nzOffset.left)*c.widthRatio-c.zoomWindow.width()/2)),c.windowTopPos=String(-1*((b.pageY-c.nzOffset.top)*c.heightRatio-c.zoomWindow.height()/2)),c.Etoppos&&(c.windowTopPos=0),c.Eloppos&&(c.windowLeftPos=0),c.Eboppos&&(c.windowTopPos=-1*(c.largeHeight/c.currentZoomLevel-c.zoomWindow.height())),c.Eroppos&&(c.windowLeftPos=-1*(c.largeWidth/c.currentZoomLevel-c.zoomWindow.width())),c.fullheight&&(c.windowTopPos=0),c.fullwidth&&(c.windowLeftPos=0),"window"===c.options.zoomType||"inner"===c.options.zoomType)if(1===c.zoomLock&&(c.widthRatio<=1&&(c.windowLeftPos=0),c.heightRatio<=1&&(c.windowTopPos=0)),"window"===c.options.zoomType&&(c.largeHeight<c.options.zoomWindowHeight&&(c.windowTopPos=0),c.largeWidth<c.options.zoomWindowWidth&&(c.windowLeftPos=0)),c.options.easing){c.xp||(c.xp=0),c.yp||(c.yp=0);var d=16;Number.isInteger(parseInt(c.options.easing))&&(d=parseInt(c.options.easing)),c.loop||(c.loop=setInterval(function(){c.xp+=(c.windowLeftPos-c.xp)/c.options.easingAmount,c.yp+=(c.windowTopPos-c.yp)/c.options.easingAmount,c.scrollingLock?(clearInterval(c.loop),c.xp=c.windowLeftPos,c.yp=c.windowTopPos,c.xp=-1*((b.pageX-c.nzOffset.left)*c.widthRatio-c.zoomWindow.width()/2),c.yp=-1*((b.pageY-c.nzOffset.top)*c.heightRatio-c.zoomWindow.height()/2),c.changeBgSize&&(c.nzHeight>c.nzWidth?("lens"===c.options.zoomType&&c.zoomLens.css("background-size",c.largeWidth/c.newvalueheight+"px "+c.largeHeight/c.newvalueheight+"px"),c.zoomWindow.css("background-size",c.largeWidth/c.newvalueheight+"px "+c.largeHeight/c.newvalueheight+"px")):("lens"!==c.options.zoomType&&c.zoomLens.css("background-size",c.largeWidth/c.newvaluewidth+"px "+c.largeHeight/c.newvalueheight+"px"),c.zoomWindow.css("background-size",c.largeWidth/c.newvaluewidth+"px "+c.largeHeight/c.newvaluewidth+"px")),c.changeBgSize=!1),c.zoomWindow.css("background-position",c.windowLeftPos+"px "+c.windowTopPos+"px"),c.scrollingLock=!1,c.loop=!1):Math.round(Math.abs(c.xp-c.windowLeftPos)+Math.abs(c.yp-c.windowTopPos))<1?(clearInterval(c.loop),c.zoomWindow.css("background-position",c.windowLeftPos+"px "+c.windowTopPos+"px"),c.loop=!1):(c.changeBgSize&&(c.nzHeight>c.nzWidth?("lens"===c.options.zoomType&&c.zoomLens.css("background-size",c.largeWidth/c.newvalueheight+"px "+c.largeHeight/c.newvalueheight+"px"),c.zoomWindow.css("background-size",c.largeWidth/c.newvalueheight+"px "+c.largeHeight/c.newvalueheight+"px")):("lens"!==c.options.zoomType&&c.zoomLens.css("background-size",c.largeWidth/c.newvaluewidth+"px "+c.largeHeight/c.newvaluewidth+"px"),c.zoomWindow.css("background-size",c.largeWidth/c.newvaluewidth+"px "+c.largeHeight/c.newvaluewidth+"px")),c.changeBgSize=!1),c.zoomWindow.css("background-position",c.xp+"px "+c.yp+"px"))},d))}else c.changeBgSize&&(c.nzHeight>c.nzWidth?("lens"===c.options.zoomType&&c.zoomLens.css("background-size",c.largeWidth/c.newvalueheight+"px "+c.largeHeight/c.newvalueheight+"px"),c.zoomWindow.css("background-size",c.largeWidth/c.newvalueheight+"px "+c.largeHeight/c.newvalueheight+"px")):("lens"===c.options.zoomType&&c.zoomLens.css("background-size",c.largeWidth/c.newvaluewidth+"px "+c.largeHeight/c.newvaluewidth+"px"),c.largeHeight/c.newvaluewidth<c.options.zoomWindowHeight?c.zoomWindow.css("background-size",c.largeWidth/c.newvaluewidth+"px "+c.largeHeight/c.newvaluewidth+"px"):c.zoomWindow.css("background-size",c.largeWidth/c.newvalueheight+"px "+c.largeHeight/c.newvalueheight+"px")),c.changeBgSize=!1),c.zoomWindow.css("background-position",c.windowLeftPos+"px "+c.windowTopPos+"px")},setTintPosition:function(a){var b=this,c=b.zoomLens.width(),d=b.zoomLens.height();b.updateOffset(b),b.tintpos=String(-1*(a.pageX-b.nzOffset.left-c/2)),b.tintposy=String(-1*(a.pageY-b.nzOffset.top-d/2)),b.Etoppos&&(b.tintposy=0),b.Eloppos&&(b.tintpos=0),b.Eboppos&&(b.tintposy=-1*(b.nzHeight-d-2*b.options.lensBorderSize)),b.Eroppos&&(b.tintpos=-1*(b.nzWidth-c-2*b.options.lensBorderSize)),b.options.tint&&(b.fullheight&&(b.tintposy=0),b.fullwidth&&(b.tintpos=0),b.zoomTintImage.css({left:b.tintpos+"px",top:b.tintposy+"px"}))},swaptheimage:function(b,c){var d=this,e=new Image;if(d.options.loadingIcon&&!d.spinner){var f="background: url('"+d.options.loadingIcon+"') no-repeat center;height:"+d.nzHeight+"px;width:"+d.nzWidth+"px;z-index: 2000;position: absolute; background-position: center center;";"inner"===d.options.zoomType&&(f+="top: 0px;"),d.spinner=a('<div class="ezp-spinner" style="'+f+'"></div>'),d.$elem.after(d.spinner)}else d.spinner&&d.spinner.show();d.options.onImageSwap(d.$elem),e.onload=function(){d.largeWidth=e.width,d.largeHeight=e.height,d.zoomImage=c,d.zoomWindow.css("background-size",d.largeWidth+"px "+d.largeHeight+"px"),d.swapAction(b,c)},d.setImageSource(e,c)},swapAction:function(b,c){var d=this,e=d.$elem.width(),f=d.$elem.height(),g=new Image;if(g.onload=function(){d.nzHeight=g.height,d.nzWidth=g.width,d.options.onImageSwapComplete(d.$elem),d.doneCallback()},d.setImageSource(g,b),d.currentZoomLevel=d.options.zoomLevel,d.options.maxZoomLevel=!1,"lens"===d.options.zoomType&&d.zoomLens.css("background-image",'url("'+c+'")'),"window"===d.options.zoomType&&d.zoomWindow.css("background-image",'url("'+c+'")'),"inner"===d.options.zoomType&&d.zoomWindow.css("background-image",'url("'+c+'")'),d.currentImage=c,d.options.imageCrossfade){var h=d.$elem,i=h.clone();if(d.$elem.attr("src",b),d.$elem.after(i),i.stop(!0).fadeOut(d.options.imageCrossfade,function(){a(this).remove()}),d.$elem.width("auto").removeAttr("width"),d.$elem.height("auto").removeAttr("height"),h.fadeIn(d.options.imageCrossfade),d.options.tint&&"inner"!==d.options.zoomType){var j=d.zoomTintImage,k=j.clone();d.zoomTintImage.attr("src",c),d.zoomTintImage.after(k),k.stop(!0).fadeOut(d.options.imageCrossfade,function(){a(this).remove()}),j.fadeIn(d.options.imageCrossfade),d.zoomTint.css({height:f,width:e})}d.zoomContainer.css({height:f,width:e}),"inner"===d.options.zoomType&&(d.options.constrainType||(d.zoomWrap.parent().css({height:f,width:e}),d.zoomWindow.css({height:f,width:e}))),d.options.imageCrossfade&&d.zoomWrap.css({height:f,width:e})}else d.$elem.attr("src",b),d.options.tint&&(d.zoomTintImage.attr("src",c),d.zoomTintImage.attr("height",f),d.zoomTintImage.css("height",f),d.zoomTint.css("height",f)),d.zoomContainer.css({height:f,width:e}),d.options.imageCrossfade&&d.zoomWrap.css({height:f,width:e});if(d.options.constrainType){if("height"===d.options.constrainType){var l={height:d.options.constrainSize,width:"auto"};d.zoomContainer.css(l),d.options.imageCrossfade?(d.zoomWrap.css(l),d.constwidth=d.zoomWrap.width()):(d.$elem.css(l),d.constwidth=e);var m={height:d.options.constrainSize,width:d.constwidth};"inner"===d.options.zoomType&&(d.zoomWrap.parent().css(m),d.zoomWindow.css(m)),d.options.tint&&(d.tintContainer.css(m),d.zoomTint.css(m),d.zoomTintImage.css(m))}if("width"===d.options.constrainType){var n={height:"auto",width:d.options.constrainSize};d.zoomContainer.css(n),d.options.imageCrossfade?(d.zoomWrap.css(n),d.constheight=d.zoomWrap.height()):(d.$elem.css(n),d.constheight=f);var o={height:d.constheight,width:d.options.constrainSize};"inner"===d.options.zoomType&&(d.zoomWrap.parent().css(o),d.zoomWindow.css(o)),d.options.tint&&(d.tintContainer.css(o),d.zoomTint.css(o),d.zoomTintImage.css(o))}}},doneCallback:function(){var a=this;a.options.loadingIcon&&a.spinner&&a.spinner.length&&a.spinner.hide(),a.updateOffset(a),a.nzWidth=a.$elem.width(),a.nzHeight=a.$elem.height(),a.currentZoomLevel=a.options.zoomLevel,a.widthRatio=a.largeWidth/a.nzWidth,a.heightRatio=a.largeHeight/a.nzHeight,"window"===a.options.zoomType&&(a.nzHeight<a.options.zoomWindowHeight/a.heightRatio?a.lensHeight=a.nzHeight:a.lensHeight=String(a.options.zoomWindowHeight/a.heightRatio),a.nzWidth<a.options.zoomWindowWidth?a.lensWidth=a.nzWidth:a.lensWidth=a.options.zoomWindowWidth/a.widthRatio,a.zoomLens&&a.zoomLens.css({width:a.lensWidth,height:a.lensHeight}))},getCurrentImage:function(){return this.zoomImage},getGalleryList:function(){var b=this;return b.gallerylist=[],b.options.gallery?a("#"+b.options.gallery+" a").each(function(){var c="";a(this).data(b.options.attrImageZoomSrc)?c=a(this).data(b.options.attrImageZoomSrc):a(this).data("image")&&(c=a(this).data("image")),c===b.zoomImage?b.gallerylist.unshift({href:""+c,title:a(this).find("img").attr("title")}):b.gallerylist.push({href:""+c,title:a(this).find("img").attr("title")})}):b.gallerylist.push({href:""+b.zoomImage,title:a(this).find("img").attr("title")}),b.gallerylist},changeZoomLevel:function(a){var b=this;b.scrollingLock=!0,b.newvalue=parseFloat(a).toFixed(2);var c=b.newvalue,d=b.largeHeight/(b.options.zoomWindowHeight/b.nzHeight*b.nzHeight),e=b.largeWidth/(b.options.zoomWindowWidth/b.nzWidth*b.nzWidth);"inner"!==b.options.zoomType&&(d<=c?(b.heightRatio=b.largeHeight/d/b.nzHeight,b.newvalueheight=d,b.fullheight=!0):(b.heightRatio=b.largeHeight/c/b.nzHeight,b.newvalueheight=c,b.fullheight=!1),e<=c?(b.widthRatio=b.largeWidth/e/b.nzWidth,b.newvaluewidth=e,b.fullwidth=!0):(b.widthRatio=b.largeWidth/c/b.nzWidth,b.newvaluewidth=c,b.fullwidth=!1),"lens"===b.options.zoomType&&(d<=c?(b.fullwidth=!0,b.newvaluewidth=d):(b.widthRatio=b.largeWidth/c/b.nzWidth,b.newvaluewidth=c,b.fullwidth=!1))),"inner"===b.options.zoomType&&(d=parseFloat(b.largeHeight/b.nzHeight).toFixed(2),e=parseFloat(b.largeWidth/b.nzWidth).toFixed(2),c>d&&(c=d),c>e&&(c=e),d<=c?(b.heightRatio=b.largeHeight/c/b.nzHeight,b.newvalueheight=c>d?d:c,b.fullheight=!0):(b.heightRatio=b.largeHeight/c/b.nzHeight,b.newvalueheight=c>d?d:c,b.fullheight=!1),e<=c?(b.widthRatio=b.largeWidth/c/b.nzWidth,b.newvaluewidth=c>e?e:c,b.fullwidth=!0):(b.widthRatio=b.largeWidth/c/b.nzWidth,b.newvaluewidth=c,b.fullwidth=!1));var f=!1;"inner"===b.options.zoomType&&(b.nzWidth>=b.nzHeight&&(b.newvaluewidth<=e?f=!0:(f=!1,b.fullheight=!0,b.fullwidth=!0)),b.nzHeight>b.nzWidth&&(b.newvaluewidth<=e?f=!0:(f=!1,b.fullheight=!0,b.fullwidth=!0))),"inner"!==b.options.zoomType&&(f=!0),f&&(b.zoomLock=0,b.changeZoom=!0,b.options.zoomWindowHeight/b.heightRatio<=b.nzHeight&&(b.currentZoomLevel=b.newvalueheight,"lens"!==b.options.zoomType&&"inner"!==b.options.zoomType&&(b.changeBgSize=!0,b.zoomLens.css("height",String(b.options.zoomWindowHeight/b.heightRatio)+"px")),"lens"!==b.options.zoomType&&"inner"!==b.options.zoomType||(b.changeBgSize=!0)),b.options.zoomWindowWidth/b.widthRatio<=b.nzWidth&&("inner"!==b.options.zoomType&&b.newvaluewidth>b.newvalueheight&&(b.currentZoomLevel=b.newvaluewidth),"lens"!==b.options.zoomType&&"inner"!==b.options.zoomType&&(b.changeBgSize=!0,b.zoomLens.css("width",String(b.options.zoomWindowWidth/b.widthRatio)+"px")),"lens"!==b.options.zoomType&&"inner"!==b.options.zoomType||(b.changeBgSize=!0)),"inner"===b.options.zoomType&&(b.changeBgSize=!0,b.nzWidth>b.nzHeight?b.currentZoomLevel=b.newvaluewidth:b.nzHeight>=b.nzWidth&&(b.currentZoomLevel=b.newvaluewidth))),b.setPosition(b.currentLoc)},closeAll:function(){var a=this;a.zoomWindow&&a.zoomWindow.hide(),a.zoomLens&&a.zoomLens.hide(),a.zoomTint&&a.zoomTint.hide()},updateOffset:function(b){"body"!=b.options.zoomContainerAppendTo?(b.nzOffset=b.$elem.offset(),appendedPosition=a(b.options.zoomContainerAppendTo).offset(),b.nzOffset.top=b.$elem.offset().top-appendedPosition.top,b.nzOffset.left=b.$elem.offset().left-appendedPosition.left):b.nzOffset=b.$elem.offset()},changeState:function(a){var b=this;"enable"===a&&(b.options.zoomEnabled=!0),"disable"===a&&(b.options.zoomEnabled=!1)},responsiveConfig:function(b){return b.respond&&b.respond.length>0?a.extend({},b,this.configByScreenWidth(b)):b},configByScreenWidth:function(c){var d=a(b).width(),e=a.grep(c.respond,function(a){var b=a.range.split("-");return d>=b[0]&&d<=b[1]});return e.length>0?e[0]:c}};a.fn.ezPlus=function(b){return this.each(function(){var c=Object.create(e);c.init(b,this),a.data(this,"ezPlus",c)})},a.fn.ezPlus.options={attrImageZoomSrc:"zoom-image",borderColour:"#888",borderSize:4,constrainSize:!1,constrainType:!1,containLensZoom:!1,cursor:"inherit",debug:!1,easing:!1,easingAmount:12,enabled:!0,gallery:!1,galleryActiveClass:"zoomGalleryActive",gallerySelector:!1,galleryItem:"a",imageCrossfade:!1,lensBorderColour:"#000",lensBorderSize:1,lensColour:"white",lensFadeIn:!1,lensFadeOut:!1,lensOpacity:.4,lensShape:"square",lensSize:200,lenszoom:!1,loadingIcon:!1,mantainZoomAspectRatio:!1,maxZoomLevel:!1,minZoomLevel:1.01,onComplete:a.noop,onDestroy:a.noop,onImageClick:a.noop,onImageSwap:a.noop,onImageSwapComplete:a.noop,onShow:a.noop,onZoomedImageLoaded:a.noop,preloading:1,respond:[],responsive:!0,scrollZoom:!1,scrollZoomIncrement:.1,showLens:!0,tint:!1,tintColour:"#333",tintOpacity:.4,touchEnabled:!0,zoomActivation:"hover",zoomContainerAppendTo:"body",zoomId:-1,zoomLevel:1,zoomTintFadeIn:!1,zoomTintFadeOut:!1,zoomType:"window",zoomWindowAlwaysShow:!1,zoomWindowBgColour:"#fff",zoomWindowFadeIn:!1,zoomWindowFadeOut:!1,zoomWindowHeight:400,zoomWindowOffsetX:0,zoomWindowOffsetY:0,zoomWindowPosition:1,zoomWindowWidth:400,zoomEnabled:!0,zIndex:999}}(jQuery,window,document),function(){"use strict";angular.module("bb.magnifier.tmpl",[]).run(["$templateCache",function(a){a.put("bb/magnifier.html","<div>\n    <p>\n        Parabns, voc acabou de dar um grande passo na construo de componentes.\n<br>\n        Caso queira gerar a distribuio deste pacote, rode o comando abaixo:\n    \n</p>\n    <code>grunt dist</code>\n</div>\n")}])}(),function(){"use strict";function a(){function a(a,c,d){var e;d.src&&(e=b(c,d)),d.$observe("src",function(a){e?(e.data("ezPlus").imageSrc=a,e.data("ezPlus").refresh()):e=b(c,d)})}function b(a,b){var e=d(a[0].offsetParent);return $(a).ezPlus({responsive:!0,containLensZoom:!0,scrollZoom:!0,scrollZoomIncrement:0,zIndex:e,zoomType:"lens",lensSize:b.bbMagnifierLensSize||250,lensShape:b.bbMagnifierLensShape||"round",onZoomedImageLoaded:c(b)})}function c(a){return function(b){var c=b.data("ezPlus");c.lastX=-1,c.lastY=-1,c.zoomContainer.trigger("mousemove.ezpspace"),c.changeZoomLevel(a.bbMagnifierZoomLevel||.6),c.zoomContainer.add(c.$elem).unbind("wheel DOMMouseScroll MozMousePixelScroll")}}function d(a){var b=999;if(document.body!==a){b=window.document.defaultView.getComputedStyle(a).getPropertyValue("z-index"),b=parseInt(b);var c=a.offsetParent;isNaN(b)&&c?b=d(c):isNaN(b)&&(b=999)}return b}return{restrict:"EA",link:a,templateUrl:"bb/magnifier.html"}}angular.module("bb.magnifier",["bb.magnifier.tmpl"]).directive("bbMagnifier",a)}(),function(){"use strict";angular.module("bb.modal.tmpl",[]).run(["$templateCache",function(a){a.put("bb/popoverTemplate.html",'<ul class="list list--inner">\n    <li ng-repeat="row in optionsItems">\n        <button ng-click="row.action()" class="btn btn--link">\n            <i \nclass="mi {{row.icon}}"></i>\n            <span>{{row.text}}</span>\n        \n</button>\n    </li>\n    <li ng-if="!optionsItems">\n        <button \nclass="btn btn--link">\n            <i class="mi mi--error"></i>\n            \n<span>Informe os itens do menu</span>\n        </button>\n    </li>\n</ul>')}])}(),function(){"use strict";function a(){var a=this.defaults={templateUrl:"",template:"<div></div>",resolve:{},controller:"",scope:"",title:"",menuOptions:"",showCloseButton:!0,closeOnEscape:!0,closeOnOverlayClick:!0,preventScrollingTop:!1,overlay:!0,themeClass:"",openingClass:"modal__content--opening",closingClass:"modal__content--closing",openingOverlayClass:"modal__overlay--opening",closingOverlayClass:"modal__overlay--closing",bodyClass:"modal-open",size:"lg",onOpen:function(){},onClose:function(){}};this.setDefaults=function(a){angular.extend(this.defaults,a)},this.$get=["$controller","$timeout","$rootScope","$injector","$compile","$http","$templateCache","$window","$document","$q",function(b,c,d,e,f,g,h,i,j,k){function l(a){27===a.keyCode&&(x(),J&&z.focus())}function m(a){!a.clientX&&I&&(J=!0,z=a.target,I=!1)}function n(){var a=document.createElement("div");a.style.cssText="width: 99px; height: 99px; overflow: scroll; position: absolute; top: -9999px;",document.body.appendChild(a);var b=a.offsetWidth-a.clientWidth;return document.body.removeChild(a),b}function o(){return G[0].scrollHeight>i.innerHeight}function p(a){var b=k.defer();return a.templateUrl?g.get(a.templateUrl,{cache:h}).then(function(a){b.resolve(a.data)}):b.resolve(a.template),b.promise}function q(a){var b=[];return angular.forEach(a,function(a){b.push(k.when(e.invoke(a)))}),b}function r(a,b){b.onClose();var c=a.attr("id");a.scope().$destroy(),a.remove(),C=!1,0===A&&(G.removeClass("modal-open"),H.css("margin-right","")),d.$emit("$bbModal.closed",c)}function s(a){var b=angular.element(a),c=b.data("options");if(C=!0,b.unbind("click"),b.unbind("keydown"),1===A&&j.unbind("keydown",l),A-=1,E){var d=angular.element(a.children[0]);if(c.overlay){angular.element(a.children[0]).addClass(c.closingOverlayClass),d=angular.element(a.children[1])}d.unbind(F).bind(F,function(){d.remove(),r(b,c)}).removeClass(c.openingClass).addClass(c.closingClass)}else r(b,c)}function t(a,b){var c=angular.element(a),d=angular.element(a.children[1].children[0].children[0]);c.data("options").title=b,d[0].innerText=b}function u(){var a=document.querySelectorAll(".modal");angular.forEach(a,function(a){s(a)})}function v(c){function e(a){var b=angular.element(a.target).hasClass("modal__overlay"),c=angular.element(a.target).hasClass("modal__close");a.clientX?(b&&h.closeOnOverlayClick||c)&&x(r.attr("id")):(b||c)&&13===a.keyCode&&setTimeout(function(){x(r.attr("id")),z.focus()})}function g(a){var b="#"+a.targetScope.$modal.id;y=document.querySelector(b)}c=c||{};var h=angular.copy(a);angular.extend(h,c);var i=angular.element("<div />").addClass("modal__data"),m=(h.scope||d).$new(),r=angular.element('<div id="modal-'+B+'" class="modal"></div>').addClass(h.themeClass).addClass("modal--"+h.size),s=m.$on("$bbModal.opened",function(a){g(a)});m.$on("$destroy",function(){s(),I=!0}),G.addClass(h.bodyClass),o()&&H.css("margin-right",n()+"px"),r.data("options",h);var t=angular.element("<div />").addClass("modal__content"),u=angular.element("<header />").addClass("modal__header");if(h.title&&u.append('<span class="modal__header__title">'+h.title+"</span>"),h.menuOptions){m.popover={templateUrl:"bb/popoverTemplate.html"},m.optionsItems=h.menuOptions;var v=angular.element("<div />").addClass("modal__options");v.attr("tabindex","0"),v.attr("aria-label","opo modal"),v.append(angular.element("<i />").addClass("mi mi--more-horiz").attr("bb-popover-template","popover.templateUrl").attr("bb-placement","bottom-right")),u.append(v)}if(h.showCloseButton){var w=angular.element("<div />").addClass("modal__close");w.attr("tabindex","0"),w.attr("aria-label","fechar modal"),u.append(w)}if(h.closeOnEscape&&j.bind("keydown",l),h.overlay){var D=angular.element("<div />").addClass("modal__overlay").addClass(h.openingOverlayClass);r.append(D)}t.append(u),t.append(i),t.addClass(h.openingClass),r.bind("click",function(a){e(a)}),r.bind("keydown",function(a){e(a)}),r.append(t),G.append(f(r)(m));var E="modal-"+B,F={id:E,close:function(){return x(E)}},J=function(a){var c,e=k.defer();return p(h).then(function(a){return c=a,k.all(q(h.resolve))}).then(function(g){if(C)e.reject();else{var j={},k=0;angular.forEach(h.resolve,function(a,b){j[b]=g[k],k+=1}),m.$modal=a,j.$scope=m,h.controller&&b(h.controller,j),i.append(f(c)(m)),e.resolve(),d.$emit("$bbModal.opened",r),m.$emit("$bbModal.opened",a)}}),e.promise}(F);if(h.onOpen(),A+=1,B+=1,!h.preventScrollingTop&&window.frameElement)try{window.parent.scrollTo({left:0,top:0,behavior:"smooth"})}catch(a){window.parent.scrollTo(0,0)}return angular.extend({opened:J},F)}function w(a,b){t(document.getElementById(a),b)}function x(a){var b=document.getElementById(a);b?s(b):u()}var y,z,A=0,B=0,C=!1,D=(document.body||document.documentElement).style,E=D&&(!!D.animation&&angular.isDefined(D.animation)||!!D.WebkitAnimation&&angular.isDefined(D.WebkitAnimation)||!!D.MozAnimation&&angular.isDefined(D.MozAnimation)||!!D.MsAnimation&&angular.isDefined(D.MsAnimation)||!!D.OAnimation&&angular.isDefined(D.OAnimation)),F="animationend webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend",G=angular.element(document).find("body"),H=angular.element(document).find("html"),I=!0,J=!1;return j.on("click",m),{open:function(a){return v(a)},setTitle:function(a,b){return w(a,b)},close:function(a){return x(a)},getDefaults:function(){return angular.copy(a)}}}]}function b(a){function b(b,c,d){var e,f;c.on(d.bbTrigger||"click",function(){f=a.getDefaults(),angular.forEach(Object.keys(f),function(a){var b="bb"+a.charAt(0).toUpperCase()+a.substring(1);angular.isDefined(d[b])&&("true"===d[b]?f[a]=!0:"false"===d[b]?f[a]=!1:f[a]=d[b])}),void 0!==b.onOpen&&(f.onOpen=b.onOpen),void 0!==b.onClose&&(f.onClose=b.onClose),e=a.open(f)}),b.$on("$destroy",function(){e?e.opened.then(function(){e.close(),e=null}):e=null,f=null})}return{link:b,restrict:"A",scope:{onOpen:"&?bbOnOpen",onClose:"&?bbOnClose"}}}angular.module("bb.modal",["bb.modal.tmpl","bb.popover"]).provider("$bbModal",a).directive("bbModal",b),b.$inject=["$bbModal"]}(),function(){"use strict";angular.module("bb.navbar.tmpl",[]).run(["$templateCache",function(a){a.put("bb/navbar-expanded/navbar-expanded-item.html",'<li ng-class="{\'is-active\': active}">\n    <a href ng-show="!disabled">\n        \n<bb-badge bb-content="{{ count }}" bb-position="top right" bb-type="success" \nng-if="count">\n        </bb-badge>\n\n        <i class="{{icon}}" \naria-hidden="true"></i>\n        <span class="sr-only">{{title}}</span>\n    </a>\n\n    <span ng-show="disabled">\n        <i class="{{icon}}" aria-hidden="true">\n</i>\n        <span class="sr-only">{{title}}</span>\n    </span>\n\n    \n<bb-navbar-expanded-sub ng-if="hasTranscluded && !disabled">\n        <h3>\n{{title}}</h3>\n\n        <hr class="navbar-expanded__sub__title-separator">\n\n        <div class="navbar-expanded__content" ng-transclude></div>\n    \n</bb-navbar-expanded-sub>\n</li>\n'),a.put("bb/navbar-expanded/navbar-expanded-sub.html",'<section class="navbar-expanded__sub">\n    <div class="navbar-expanded__inner" \nng-transclude></div>\n</section>\n'),a.put("bb/navbar-expanded/navbar-expanded.html",'<nav class="navbar-expanded" id="menu" ng-class="{\'is-open\': navbar.isOpen }">\n\n    <ul class="navbar-expanded-item" ng-transclude></ul>\n</nav>\n'),
a.put("bb/navbar-item.html",'<li ng-class="{\'is-active\': active}">\n    <a href ng-show="!disabled">\n        \n<bb-badge bb-content="{{count}}" bb-position="top right" bb-type="success" \nng-if="count"></bb-badge>\n        <i class="{{icon}}" aria-hidden="true"></i>\n        <span class="sr-only">{{title}}</span>\n    </a>\n    <span \nng-show="disabled">\n        <i class="{{icon}}" aria-hidden="true"></i>\n        <span class="sr-only">{{title}}</span>\n    </span>\n    <bb-navbar-sub \nng-if="hasTranscluded && !disabled">\n        <h3>{{title}}</h3>\n        <div \nclass="navbar__content" ng-transclude></div>\n    </bb-navbar-sub>\n</li>\n'),a.put("bb/navbar-sortable/navbar-sortable-item.html",'<li data-menu-id="{{menuId}}">\n    <a href ng-show="!disabled" \nrole="{{hasChildren ? \'listitem\' : \'link\'}}" aria-haspopup="{{hasChildren}}" \nclass="navbar-item">\n        <span>\n            <bb-badge \nbb-content="{{ count }}" bb-position="top right" bb-type="success" \nng-if="count">\n            </bb-badge>\n            <i class="{{icon}}"></i>\n        </span>\n        <span class="navbar-sortable-item__label">\n            {{title}}\n            <i \nclass="mi mi--drag-handle fz-lg padding-left--25" ng-if="!staticItem" \nng-show="showDragHandle"></i>\n            <i class="ci ci--angle-right fz-sm" \nstyle="padding-left: 14px" ng-show="!showDragHandle && hasChildren"></i>\n        </span>\n    </a>\n\n    <span ng-show="disabled" class="navbar-item">\n        <i class="{{icon}}"></i>\n        <span \nclass="navbar-sortable-item__label">\n            {{title}}\n        </span>\n    \n</span>\n\n    <bb-navbar-sortable-sub \nng-if="hasChildren && hasTranscluded && !disabled">\n        <h3>{{title}}</h3>\n\n        <hr class="navbar-sortable__sub__title-separator">\n        <div \nclass="fx fd-c">\n            <div class="navbar-sortable__content fx fd-c" \nng-transclude role="list"></div>\n        </div>\n    </bb-navbar-sortable-sub>\n\n</li>\n'),a.put("bb/navbar-sortable/navbar-sortable-sub.html",'<section class="navbar-sortable__sub">\n    <div class="navbar-sortable__inner">\n</div>\n</section>\n'),a.put("bb/navbar-sortable/navbar-sortable.html",'<nav class="navbar-sortable" id="menu" ng-class="{\'is-open\': navbar.isOpen }">\n    <ul class="navbar-sortable-item" role="list">\n        <li \nclass="navbar-sortable-item--static navbar-sortable-item--no-hover" \nrole="listitem" aria-expanded="{{navbar.isOpen}}">\n\n            <span \nid="idnavbarmenu" ng-show="!disabled" \naria-label="Menu principal da plataforma. Use tab para navegar." \nstyle="cursor: default" tabindex="0">\n                <i class="mi mi--menu">\n</i>\n\n                <span class="navbar-sortable-item__label">\n                    Menu\n\n                    \n\n                    <button \ntabindex="-1" ng-hide="settingsOpened" class="btn btn--primary btn--xs m-n" \naria-hidden="true" ng-click="openSettings()">\n                        Editar\n                        <span \naria-hidden="true" tabindex="-1" \nbb-tooltip=\'Para reordenar as opes do menu principal, clique em um item e arraste-o para a posio desejada. Para finalizar, clique no boto "Salvar".\' \nbb-is-open="tooltipIsOpen" bb-placement="right" bb-append-to-body \nbb-class="navbar-sortable__tooltip"></span>\n                    </button>\n                    <button tabindex="-1" \nng-show="settingsOpened && hasModifications" \nclass="btn btn--primary btn--xs m-n" aria-hidden="true" ng-click="save()">\nSalvar</button>\n                    <button tabindex="-1" \nng-show="settingsOpened && !hasModifications" \nclass="btn btn--light btn--xs m-n" aria-hidden="true" \nng-click="tooltipIsOpen = !tooltipIsOpen;closeSettings()">Sair</button>\n                </span>\n            </span>\n\n            <hr>\n        </li>\n\n    </ul>\n    <div style="position: absolute"></div>\n</nav>\n'),a.put("bb/navbar-sub.html",'<section class="navbar__sub" ng-class="{\'is-displayed\': navbar.isOpen}">\n    \n<div class="navbar__inner" ng-transclude></div>\n</section>\n'),a.put("bb/navbar-subitem.html",'<span class="navbar__subitem" ng-class="{\'is-opened\': isOpened}">\n    <a href \nng-click="isOpened = !isOpened; gotTop()">\n        <span>{{title}}</span>\n        <i class="mi mi--chevron-right" aria-hidden="true"></i>\n    </a>\n    \n<bb-navbar-sub>\n        <h3>\n            <a ng-click="closeSub()">\n                <i class="mi mi--chevron-left" aria-hidden="true"></i>\n                <span>{{title}}</span>\n            </a>\n        </h3>\n        \n<div class="navbar__content" ng-transclude></div>\n    </bb-navbar-sub>\n</span>\n'),a.put("bb/navbar.html",'<nav class="navbar" id="menu" ng-class="{\'is-open\': navbar.isOpen}">\n    <ul \nclass="navbar-item" ng-transclude></ul>\n</nav>\n')}])}(),function(){"use strict";function a(a){var b=this;b.isOpen=!1,b.close=function(){b.isOpen=!1},a.$on("ngRepeatFinished",function(){function a(a){$(a).find(".navbar__sub").addClass("is-displayed")}function b(a){$(a).find(".navbar__sub").removeClass("is-displayed")}var c=$("#menu"),d=null,e=[],f=null,g=null,h={rowSelector:".navbar-item > li",submenuSelector:"*",submenuDirection:"right",tolerance:100,activate:a,deactivate:b},i=function(a){e.push({x:a.pageX,y:a.pageY}),e.length>3&&e.shift()},j=function(a){a!==d&&(d&&h.deactivate(d),h.activate(a),d=a)},k=function(){function a(a,b){return(b.y-a.y)/(b.x-a.x)}if(!d||!$(d).is(h.submenuSelector))return 0;var b=c.offset(),g={x:b.left,y:b.top-h.tolerance},i={x:b.left+c.outerWidth(),y:g.y},j={x:b.left,y:b.top+c.outerHeight()+h.tolerance},k={x:b.left+c.outerWidth(),y:j.y},l=e[e.length-1],m=e[0];if(!l)return 0;if(m||(m=l),m.x<b.left||m.x>k.x||m.y<b.top||m.y>k.y)return 0;if(f&&l.x===f.x&&l.y===f.y)return 0;var n=i,o=k;"left"===h.submenuDirection?(n=j,o=g):"below"===h.submenuDirection?(n=k,o=j):"above"===h.submenuDirection&&(n=g,o=i);var p=a(l,n),q=a(l,o),r=a(m,n),s=a(m,o);return p<r&&q>s?(f=l,300):(f=null,0)},l=function(a){var b=k();b?g=setTimeout(function(){l(a)},b):j(a)},m=function(){g&&clearTimeout(g),l(this)},n=function(){j(this)};c.find(h.rowSelector).mouseenter(m).click(n),$(document).mousemove(i)})}function b(){return{controller:"bbNavbarController",controllerAs:"navbar",replace:!0,restrict:"E",templateUrl:"bb/navbar.html",transclude:!0}}function c(){function a(a,b,c,d,e){b.on("mouseenter",function(){a.$apply(function(){d.isOpen=!0})}),b.on("mouseleave",function(){a.$apply(function(){d.isOpen=!1})}),e(function(b){b.length&&(a.hasTranscluded=!0)})}return{link:a,require:"^bbNavbar",replace:!0,restrict:"E",scope:{icon:"@?bbIcon",title:"@?bbTitle",active:"=?bbActive",disabled:"=?bbDisabled",count:"@?bbCount"},templateUrl:"bb/navbar-item.html",transclude:!0}}function d(){function a(a,b){b.on("mouseleave",function(){b.children()[0].scrollTop=0})}return{link:a,require:"^^?bbNavbar",replace:!0,restrict:"E",templateUrl:"bb/navbar-sub.html",transclude:!0}}function e(a){function b(b,c){b.gotTop=function(){a.scrollTo(0,0)},b.isOpened=!1,b.closeSub=function(){b.isOpened=!1},c.on("mouseleave",function(){b.$apply(function(){b.isOpened=!1})})}return{link:b,require:"^?bbNavbar",replace:!0,restrict:"E",scope:{title:"@?bbTitle"},templateUrl:"bb/navbar-subitem.html",transclude:!0}}angular.module("bb.navbar",["bb.navbar.tmpl","bb.badge"]).controller("bbNavbarController",a).directive("bbNavbar",b).directive("bbNavbarItem",c).directive("bbNavbarSub",d).directive("bbNavbarSubitem",e).directive("onFinishRender",["$timeout",function(a){return{restrict:"A",link:function(b){a(function(){b.$emit("ngRepeatFinished")})}}}]),a.$inject=["$scope"],e.$inject=["$window"]}(),function(){"use strict";function a(a){var b=this;b.isOpen=!0,b.close=function(){b.isOpen=!1},a.$on("ngRepeatFinished",function(){function a(a){$(a).find(".navbar-expanded__sub").addClass("is-displayed")}function b(a){$(a).find(".navbar-expanded__sub").removeClass("is-displayed")}var c=$("#menu"),d=null,e=[],f=null,g=null,h={rowSelector:".navbar-expanded-item > li",submenuSelector:"*",submenuDirection:"right",tolerance:100,activate:a,deactivate:b},i=function(a){e.push({x:a.pageX,y:a.pageY}),e.length>3&&e.shift()},j=function(a){a!==d&&(d&&h.deactivate(d),h.activate(a),d=a)},k=function(){function a(a,b){return(b.y-a.y)/(b.x-a.x)}if(!d||!$(d).is(h.submenuSelector))return 0;var b=c.offset(),g={x:b.left,y:b.top-h.tolerance},i={x:b.left+c.outerWidth(),y:g.y},j={x:b.left,y:b.top+c.outerHeight()+h.tolerance},k={x:b.left+c.outerWidth(),y:j.y},l=e[e.length-1],m=e[0];if(!l)return 0;if(m||(m=l),m.x<b.left||m.x>k.x||m.y<b.top||m.y>k.y)return 0;if(f&&l.x===f.x&&l.y===f.y)return 0;var n=i,o=k;"left"===h.submenuDirection?(n=j,o=g):"below"===h.submenuDirection?(n=k,o=j):"above"===h.submenuDirection&&(n=g,o=i);var p=a(l,n),q=a(l,o),r=a(m,n),s=a(m,o);return p<r&&q>s?(f=l,300):(f=null,0)},l=function(a){var b=k();b?g=setTimeout(function(){l(a)},b):j(a)},m=function(){g&&clearTimeout(g),l(this)},n=function(){j(this)};c.find(h.rowSelector).mouseenter(m).click(n),$(document).mousemove(i)})}function b(){return{controller:"bbNavbarExpandedController",controllerAs:"navbar",replace:!0,restrict:"E",templateUrl:"bb/navbar-expanded/navbar-expanded.html",transclude:!0}}function c(){function a(a,b,c,d,e){b.on("mouseenter",function(){a.$apply(function(){d.isOpen=!0})}),b.on("mouseleave",function(){a.$apply(function(){d.close()})}),e(function(b){b.length&&(a.hasTranscluded=!0)})}return{link:a,require:"^bbNavbarExpanded",replace:!0,restrict:"E",scope:{icon:"@?bbIcon",title:"@?bbTitle",active:"=?bbActive",disabled:"=?bbDisabled",count:"@?bbCount"},templateUrl:"bb/navbar-expanded/navbar-expanded-item.html",transclude:!0}}function d(){function a(a,b){b.on("mouseleave",function(){b.children()[0].scrollTop=0})}return{link:a,require:"^^?bbNavbarExpanded",replace:!0,restrict:"E",templateUrl:"bb/navbar-expanded/navbar-expanded-sub.html",transclude:!0}}function e(){var a,b=navigator.userAgent,c=b.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(c[1])?(a=/\brv[ :]+(\d+)/g.exec(b)||[],{name:"IE",version:a[1]||""}):"Chrome"===c[1]&&null!=(a=b.match(/\bOPR|Edge\/(\d+)/))?{name:"Opera",version:a[1]}:(c=c[2]?[c[1],c[2]]:[navigator.appName,navigator.appVersion,"-?"],null!=(a=b.match(/version\/(\d+)/i))&&c.splice(1,1,a[1]),{name:c[0],version:c[1]})}angular.module("bb.navbarExpanded",["bb.navbar.tmpl","bb.badge"]).controller("bbNavbarExpandedController",a).directive("bbNavbarExpanded",b).directive("bbNavbarExpandedItem",c).directive("bbNavbarExpandedSub",d).directive("onFinishRender",["$timeout",function(a){return{restrict:"A",link:function(b){a(function(){b.$emit("ngRepeatFinished");var a=e();"Firefox"===a.name&&parseInt(a.version,10)<=31&&Array.prototype.slice.call(document.querySelectorAll(".navbar-expanded__menu-group")).forEach(function(a){a.classList.add("ff31-width-fix")})})}}}]),a.$inject=["$scope"]}(),function(){"use strict";function a(a,b,c,d){var e=this;e.isOpen=!1,e.close=function(){e.isOpen=!1},e.subIsOpen=!1,e.submenuOpen=function(){e.subIsOpen=!0},e.submenuClose=function(){e.subIsOpen=!1},e.settingsOpened=!1;var g,h,i,j,k,l,m=($("#menu ul"),!1),n=null,o=[],p=[],q=!1,r=!1,s=!1;a.$on("ngRepeatFinished",function(){function t(a){g&&clearTimeout(g),g=setTimeout(function(){var b=$(a),c=(window.pageYOffset||document.scrollTop)-(document.clientTop||0),d=c-56+12;b.find(".navbar-sortable__inner").css("padding-top",(c>56?d:12)+"px"),g=null},100)}function u(a){w||(w=d.defer(),w.resolve()),w.promise.then(function(){var b=$(a),c=x[0].children[0].offsetHeight,d=document.body.offsetHeight,e=c>d?c:d-56;b.find(".navbar-sortable__sub").addClass("is-displayed").css("left",b.innerWidth()+"px").css("height",e+"px");var f=window.innerHeight-80,g=window.innerWidth-b.innerWidth(),h=b.find(".navbar-sortable__content > div"),i=0,j=1;angular.forEach(h,function(a){(i+=$(a).innerHeight())>f&&(j++,i=$(a).innerHeight())});var k=300;j>1&&(k*=j)>g&&(k=g),b.find(".navbar-sortable__content").css("height",f+"px").css("flex-wrap","wrap").css("width",k+"px").css("overflow-y","auto"),n=function(){t(a)},n(),$(window).bind("scroll",n)}),e.submenuOpen()}function v(a){var c=$(a);b(function(){c.find(".navbar-sortable__sub").removeClass("is-displayed"),c.find(".navbar-sortable__inner").css("padding-top","")}),$(window).unbind("scroll",n),y=null,e.submenuClose()}if(f(),!m){m=!0;var w,x=$("#menu"),y=null,z=[],A=null,B=null,C=!1,D={rowSelector:".navbar-sortable-item > li",rowSelectorLink:".navbar-sortable-item > li > a",submenuSelector:"*",submenuDirection:"right",tolerance:100,activate:u,deactivate:v},E=function(a){z.push({x:a.pageX,y:a.pageY}),z.length>3&&z.shift()},F=function(a){a!==y&&(y&&D.deactivate(y),D.activate(a),y=a)},G=function(b){b.stopPropagation(),a.settingsOpened||(A&&clearTimeout(A),L(this))},H=function(a){A&&clearTimeout(A)},I=!1,J=0,K=function(b){if(w&&w.reject(),w=d.defer(),w.id=++J,C){if(I)return;w.resolve()}else C=!0,I=!0,setTimeout(function(){C&&(a.$apply(function(){e.isOpen=!0}),B&&clearTimeout(B),B=setTimeout(function(){B=void 0,I=!1,w.resolve(),w=null},250))},150)},L=function(a){var b=y?500:0;A&&clearTimeout(A),A=setTimeout(function(){A=void 0,F(a)},b)},M=function(){a.settingsOpened||(C=!1,B&&(clearTimeout(B),B=void 0),A&&clearTimeout(A),a.$apply(function(){D.deactivate(y),e.close()}))},N=function(a){o.forEach(function(b,c){var d=b.indexOf(a);if(-1!==d)return j=o[(o.length+c-1)%o.length][0],i=o[(c+1)%o.length][0],k=b[(b.length+d-1)%b.length],void(l=b[(d+1)%b.length])})},O=function(){x.find("ul > li > a").each(function(a,b){$(b).removeClass("parent-item-focus")}),s=!1,q=!1};x.find("ul > li").each(function(a,b){$(b).mouseenter(G),$(b).mouseleave(H)}),x.find("ul > li:first-child > span").each(function(a,b){p.push($(b).eq(0)),$(b).focus(function(a){G.bind(b.parentElement)(a),e.isOpen=!0,$(b).addClass("parent-item-focus")}),$(b).blur(function(a){q||setTimeout(function(){var a=$(document.activeElement).eq(0).is("span#idnavbarmenu"),b=$(document.activeElement).eq(0).is("a.navbar-item");a||b||(O(),M())},10),$(b).removeClass("parent-item-focus")}),$(b).keydown(function(a){27===a.keyCode&&(C=!1,M(),O(),$(b).removeClass("parent-item-focus"),$("body").attr("tabindex","0"),$("body").focus(),$("body").attr("tabindex","-1"))})}),x.find("ul > li > a").each(function(c,d){p.push($(d).eq(0)),$(d).keydown(function(a){if(s=!0,h=this,a.shiftKey&&9===a.keyCode&&q&&a.preventDefault(),13!==a.keyCode||e.isOpen)if(13===a.keyCode&&$(d).siblings().length>1){G.bind(d.parentElement)(a),q=!0,x.find(".navbar-sortable__menu-group__links > a").each(function(a,c){$(c).keydown(function(a){var b=o.length,d=o[b-1][o[b-1].length-1],f=o[0][0];27===a.keyCode&&e.subIsOpen&&(r=!0,q=!1,C=!1,B&&(clearTimeout(B),B=void 0),A&&clearTimeout(A),$(h).attr("aria-haspopup","true"),$(h).focus(),D.deactivate(y)),o.length>1&&(37===a.keyCode?(j.focus(),a.stopPropagation(),a.preventDefault()):39===a.keyCode&&(i.focus(),a.stopPropagation(),a.preventDefault())),38===a.keyCode?(k.focus(),a.stopPropagation(),a.preventDefault()):40===a.keyCode?(l.focus(),a.stopPropagation(),a.preventDefault()):!a.shiftKey||9!=a.keyCode&&9!==a.which?9===a.keyCode&&$(c)[0]===d&&(f.focus(),a.stopPropagation(),a.preventDefault()):$(c)[0]===f&&(d.focus(),a.stopPropagation(),a.preventDefault())}),$(c).focus(function(a){b(function(){N($(c)[0])})}),$(c).click(function(a){b(function(){O(),M()})})}),o=[];var c=[];if($(d).siblings().eq(1).find(".navbar-sortable__content > div").each(function(a){$(this).find("a").each(function(a){c.push($(this)[0])}),o.push(c),c=[]}),o[0].length){l=o[0][0];var f=(new Date).getTime(),g=function(){var a=(new Date).getTime();$(l).focus(),document.activeElement!=l&&a-f!=2e3||clearInterval(m)},m=setInterval(g,10)}}else 27!==a.keyCode||q?27===a.keyCode&&(C=!1,B&&(clearTimeout(B),B=void 0),A&&clearTimeout(A),D.deactivate(y),q=!1):(M(),O(),$("body").attr("tabindex","0"),$("body").focus(),$("body").attr("tabindex","-1"));else a.preventDefault()}),$(d).focus(function(b){e.isOpen||a.$apply(function(){e.isOpen=!0}),$(d).addClass("parent-item-focus")}),$(d).blur(function(a){q||setTimeout(function(){$(h).removeClass("parent-item-focus");var a=$(document.activeElement).eq(0).is("span#idnavbarmenu"),b=$(document.activeElement).eq(0).is("a.navbar-item");a||b||(O(),M())},10)}),$(d).click(function(a){a.clientX&&O()})}),$(document).click(function(a){0===x.has(a.target).length&&(q=!1,M(),O())}),x.css("height",document.body.clientHeight-56+"px"),c(function(){var a=x[0].children[0].offsetHeight,b=document.body.offsetHeight,c=a>b?a:b-56;x.css("height",c+"px")},2e3),x.find(D.rowSelector).mouseenter(K),x.find(D.rowSelectorLink).click(K),x.find(".navbar-sortable-item").mouseleave(function(b){s||a.$apply(function(){D.deactivate(y),q=!1})}),x.mouseleave(function(b){a.settingsOpened||s||(C=!1,B&&(clearTimeout(B),B=void 0),A&&clearTimeout(A),a.$apply(function(){q=!1,$(y).removeClass("parent-item-focus"),D.deactivate(y),e.close()}))}),$(document).mousemove(E)}})}function b(a){return{controller:"bbNavbarSortableController",controllerAs:"navbar",replace:!0,restrict:"E",templateUrl:"bb/navbar-sortable/navbar-sortable.html",transclude:!0,link:function(b,c,d,e,f){var g=$("#menu ul");b.settingsOpened=!1,b.hasModifications=!1,g.sortable({axis:"y",items:"> li:not(.navbar-sortable-item--static)",disabled:!0,update:function(a,c){b.$apply(function(){b.tooltipIsOpen=!1,b.hasModifications=!0})}}),b.tooltipIsOpen=!1,b.openSettings=function(){b.tooltipIsOpen=!0,setTimeout(function(){$(".navbar-sortable__tooltip").css("left",g.width())},50),setTimeout(function(){g.css("width",g.width())},400),g.sortable("enable"),b.settingsOpened=!0,b.$broadcast("settings-opened")},b.save=function(){var c=[];g.find("> li:not(.navbar-sortable-item--static)").each(function(a,b){c.push(+b.dataset.menuId)}),a.set(c),b.$emit("menu-configurado",c),b.$broadcast("menu-configurado",c),b.closeSettings()},b.closeSettings=function(){g.css("width",""),g.sortable("disable"),b.settingsOpened=!1,b.hasModifications=!1,b.$broadcast("settings-closed")},f(function(a){a.length&&c.children().eq(0).append(a)})}}}function c(){function a(a,b,c,d,e){a.staticItem="navbar-sortable-item--static"===c.class,a.showDragHandle=!1,a.$on("settings-opened",function(){a.showDragHandle=!0}),a.$on("settings-closed",function(){a.showDragHandle=!1}),e(function(b){b.length&&(a.hasTranscluded=!0)})}return{link:a,require:"^bbNavbarSortable",controllerAs:"navbar",replace:!0,restrict:"E",scope:{menuId:"@bbMenuId",icon:"@?bbIcon",title:"@?bbTitle",active:"=?bbActive",disabled:"=?bbDisabled",count:"@?bbCount",hasChildren:"=?bbHasChildren"},templateUrl:"bb/navbar-sortable/navbar-sortable-item.html",transclude:!0}}function d(){function a(a,b,c,d,e){b.on("mouseleave",function(a){b.children()[0].scrollTop=0}),b.on("keydown",function(a){13===a.keyCode&&(b.children()[0].scrollTop=0)}),e(function(a){Array.prototype.slice.call(a).forEach(function(a){b.children().append(a)})})}return{link:a,require:"^^?bbNavbarSortable",replace:!0,restrict:"E",templateUrl:"bb/navbar-sortable/navbar-sortable-sub.html",transclude:!0}}function e(){var a,b=navigator.userAgent,c=b.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(c[1])?(a=/\brv[ :]+(\d+)/g.exec(b)||[],{name:"IE",version:a[1]||""}):"Chrome"===c[1]&&null!=(a=b.match(/\bOPR|Edge\/(\d+)/))?{name:"Opera",version:a[1]}:(c=c[2]?[c[1],c[2]]:[navigator.appName,navigator.appVersion,"-?"],null!=(a=b.match(/version\/(\d+)/i))&&c.splice(1,1,a[1]),{name:c[0],version:c[1]})}function f(){function a(a,b){return f+h*a+i*b+g}function b(a){return h*a}function c(){return e}var d=window.innerHeight,e=d-184,f=21,g=16,h=25,i=24;return{getElementHeight:a,getLiHeight:b,getUsableHeight:c}}localStorage.getItem("navbar__version-tracker")||(localStorage.removeItem("navbar__items"),localStorage.setItem("navbar__version-tracker","1.1.16")),angular.module("bb.navbarSortable",["bb.navbar.tmpl","bb.badge","gawServices","gawConfiguracaoService"]).controller("bbNavbarSortableController",a).directive("bbNavbarSortable",b).directive("bbNavbarSortableItem",c).directive("bbNavbarSortableSub",d).directive("onFinishRender",["$timeout",function(a){return{restrict:"A",link:function(b){a(function(){b.$emit("ngRepeatFinished");var a=e();"Firefox"===a.name&&parseInt(a.version,10)<=31&&Array.prototype.slice.call(document.querySelectorAll(".navbar-sortable__menu-group")).forEach(function(a){a.classList.add("ff31-width-fix")})})}}}]),a.$inject=["$scope","$timeout","$interval","$q"],b.$inject=["bbNavbarStorageService"]}(),function(){"use strict";function a(a){function b(b,c){var d=b.map(function(a){return c&&a[c]||a});a.getConfiguracao().gravarConfiguracao(e+f,JSON.stringify(d))}function c(){return a.getConfiguracao().recuperarConfiguracao(e+f).then(function(a){return JSON.parse(a)})}function d(a,b){return c().then(function(c){var d=[];return c&&c.forEach(function(c){for(var e=0;e<a.length;e++)if(a[e][b]===c){d.push(a.splice(e,1)[0]);break}}),d.concat(a)})}var e="navbar__",f="items";return{set:b,sort:d}}angular.module("bb.navbarSortable").factory("bbNavbarStorageService",a),a.$inject=["GAWConfiguracaoService"]}(),function(){"use strict";angular.module("bb.note.tmpl",[]).run(["$templateCache",function(a){a.put("bb/note.html",'<div class="note" \naria-label="Anotao: {{ day }} de {{ month }} {{\'de \'+ year }}. Contedo: {{ noteText | htmlToPlaintext }}" \ntabindex="0">\n    <div class="note__date" \nng-class="{\'note__date--smaller\': !!year }">\n        <span \nclass="note__date__day">{{ day }}</span>\n        <span \nclass="note__date__month">{{ month | limitTo:3 }}</span>\n        <span \nclass="note__date__year" ng-show="!!year">{{ year }}</span>\n    </div>\n    <div\n class="note__info">\n        <p ng-bind-html="note"></p>\n    </div>\n</div>')}])}(),function(){"use strict";function a(){return{restrict:"E",scope:{day:"@bbDay",month:"@bbMonth",year:"@?bbYear",note:"@bbNote",noteText:"@bbNote"},templateUrl:"bb/note.html"}}angular.module("bb.note",["bb.note.tmpl","ngSanitize"]).directive("bbNote",a).filter("htmlToPlaintext",function(){return function(a){return a?String(a).replace(/<[^>]+>/gm,""):""}})}(),function(){"use strict";angular.module("bb.pagination.tmpl",[]).run(["$templateCache",function(a){a.put("bb/pagination.html",'<nav role="navigation" aria-label="Navegador de paginao.">\n    <ul \nclass="pagination">\n        <li ng-if="::boundaryLinks" \nng-class="{\'is-disabled\': noPrevious() || ngDisabled}">\n            <a href \nng-click="selectPage(1, $event)" aria-label="Ir para a primeira pgina.">\n{{::getText(\'first\')}}</a>\n        </li>\n        <li ng-if="::directionLinks" \nng-class="{\'is-disabled\': noPrevious() || ngDisabled}">\n            <a href \nng-click="selectPage(page - 1, $event)" \naria-label="Ir para a pgina anterior.">{{::getText(\'previous\')}}</a>\n        \n</li>\n        <li ng-repeat="page in pages track by $index" \nng-class="{\'is-active\': page.active, \'is-disabled\': ngDisabled && !page.active}">\n            <a href ng-click="selectPage(page.number, $event)" \naria-label="{{ page.active ? \'Pgina atual, pgina\' : \'Ir para a pgina\' }} {{page.text}}." \naria-current="{{ page.active ? true : false }}">{{page.text}}</a>\n        </li>\n        <li ng-if="::directionLinks" \nng-class="{\'is-disabled\': noNext() || ngDisabled}">\n            <a href \nng-click="selectPage(page + 1, $event)" aria-label="Ir para a prxima pgina.">\n{{::getText(\'next\')}}</a>\n        </li>\n        <li ng-if="::boundaryLinks" \nng-class="{\'is-disabled\': noNext() || ngDisabled}">\n            <a href \nng-click="selectPage(totalPages, $event)" \naria-label="Ir para a ltima pgina.">{{::getText(\'last\')}}</a>\n        </li>\n\n    </ul>\n</nav>')}])}(),angular.module("bb.pagination",["bb.paging","bb.pagination.tmpl"]).constant("bbPaginationConfig",{itemsPerPage:10,boundaryLinks:!1,boundaryLinkNumbers:!1,directionLinks:!0,firstText:"Primeiro",previousText:"Anterior",nextText:"Prximo",lastText:"ltimo",rotate:!0,forceEllipses:!1}).controller("bbPaginationController",paginationController).directive("bbPagination",pagination),paginationController.$inject=["$scope","$attrs","$parse","bbPaging","bbPaginationConfig"],pagination.$inject=["$parse","bbPaginationConfig"],function(){"use strict";function a(a){return{create:function(b,c,d){b.setNumPages=d.bbNumPages?a(d.bbNumPages).assign:angular.noop,b.ngModelCtrl={$setViewValue:angular.noop},b._watchers=[],b.init=function(a,e){b.ngModelCtrl=a,b.config=e,a.$render=function(){b.render()},d.bbItemsPerPage?b._watchers.push(c.$parent.$watch(d.bbItemsPerPage,function(a){b.itemsPerPage=parseInt(a,10),c.totalPages=b.calculateTotalPages(),b.updatePage()})):b.itemsPerPage=e.itemsPerPage,c.$watch("totalItems",function(a,d){(angular.isDefined(a)||a!==d)&&(c.totalPages=b.calculateTotalPages(),b.updatePage())})},b.calculateTotalPages=function(){var a=b.itemsPerPage<1?1:Math.ceil(c.totalItems/b.itemsPerPage);return Math.max(a||0,1)},b.render=function(){c.page=parseInt(b.ngModelCtrl.$viewValue,10)||1},c.selectPage=function(a,d){d&&d.preventDefault(),(!c.ngDisabled||!d)&&c.page!==a&&a>0&&a<=c.totalPages&&(d&&d.target&&d.target.blur(),b.ngModelCtrl.$setViewValue(a),b.ngModelCtrl.$render())},c.getText=function(a){return c[a+"Text"]||b.config[a+"Text"]},c.noPrevious=function(){return 1===c.page},c.noNext=function(){return c.page===c.totalPages},b.updatePage=function(){b.setNumPages(c.$parent,c.totalPages),c.page>c.totalPages?c.selectPage(c.totalPages):b.ngModelCtrl.$render()},c.$on("$destroy",function(){for(;b._watchers.length;)b._watchers.shift()()})}}}angular.module("bb.paging",[]).factory("bbPaging",a),a.$inject=["$parse"]}(),function(){"use strict";angular.module("bb.panel.tmpl",[]).run(["$templateCache",function(a){a.put("bb/panel-body.html",'<article class="panel__body" tabindex="0" ng-transclude></article>\n'),a.put("bb/panel-footer.html",'<footer class="panel__footer" tabindex="0" ng-transclude></footer>\n'),a.put("bb/panel-header.html",'<header class="panel__header" tabindex="0">\n    <h2 class="panel__title" \naria-label="Painel: {{title}}.">{{title}}</h2>\n    <ng-transclude>\n</ng-transclude>\n</header>\n'),a.put("bb/panel.html",'<section class="panel" tabindex="0" ng-transclude></section>\n')}])}(),function(){"use strict";function a(){function a(a,b){a.type&&b.addClass("panel--"+a.type)}return{link:a,restrict:"E",scope:{type:"@?bbType"},templateUrl:"bb/panel.html",transclude:!0}}function b(){return{restrict:"E",scope:{title:"@?bbTitle"},templateUrl:"bb/panel-header.html",transclude:!0}}function c(){return{restrict:"E",templateUrl:"bb/panel-body.html",transclude:!0}}function d(){return{restrict:"E",templateUrl:"bb/panel-footer.html",transclude:!0}}angular.module("bb.panel",["bb.panel.tmpl"]).directive("bbPanel",a).directive("bbPanelHeader",b).directive("bbPanelBody",c).directive("bbPanelFooter",d)}(),function(){"use strict";angular.module("bb.pdfViewer.tmpl",[]).run(["$templateCache",function(a){a.put("bb/pdf-viewer.html",'<iframe style="width: 100%; height: {{ height }}" frameborder="0" \nscrolling="no" ng-src="{{ finalSrc }}">\n</iframe>\n')}])}(),function(){"use strict";function a(a){function b(b,c,d){if(!b.src)throw"bb-pdf-viewer: attribute 'bb-src' is required.";if(!b.height)throw"bb-pdf-viewer: attribute 'bb-height' is required.";b.finalSrc=a.trustAsResourceUrl(b.src)}return{restrict:"E",link:b,templateUrl:"bb/pdf-viewer.html",scope:{src:"=bbSrc",height:"@bbHeight"}}}angular.module("bb.pdfViewer",["bb.pdfViewer.tmpl","ngSanitize"]).directive("bbPdfViewer",a),a.$inject=["$sce"]}(),function(){"use strict";angular.module("bb.picklist.tmpl",[]).run(["$templateCache",function(a){
a.put("bb/picklist.html",'<div class="picklist" ng-class="{\'picklist-responsive\' : responsive}">\n    <div\n class="picklist__buttons" ng-if="showSourceControls">\n        <div \nclass="picklist__buttons-container">\n            <button tabindex="-1" \ntype="button" class="btn btn--default" \nng-click="moveUp(sourcelist,source,selectedItemsSource,onSourceReorder)">\n                <span class="mi mi--keyboard-arrow-up"></span>\n            \n</button>\n            <button tabindex="-1" type="button" \nclass="btn btn--default" \nng-click="moveTop(sourcelist,source,selectedItemsSource,onSourceReorder)">\n                <span class="ci ci--double-arrow-up"></span>\n            \n</button>\n            <button tabindex="-1" type="button" \nclass="btn btn--default" \nng-click="moveDown(sourcelist,source,selectedItemsSource,onSourceReorder)">\n                <span class="mi mi--keyboard-arrow-down"></span>\n            \n</button>\n            <button tabindex="-1" type="button" \nclass="btn btn--default" \nng-click="moveBottom(sourcelist,source,selectedItemsSource,onSourceReorder)">\n                <span class="ci ci--double-arrow-down"></span>\n            \n</button>\n        </div>\n    </div>\n    <div class="picklist__src" \nng-class="{\'picklist-nocontrols\' : !showSourceControls}">\n        <div \ntabindex="0" class="picklist__header" ng-if="sourceHeader">\n            <span>\n{{sourceHeader}}</span>\n        </div>\n        <ul \nng-keydown="onKeyDown($event)" role="listbox" tabindex="0" \nclass="picklist-list" ng-style="sourceStyle" \naria-label="Navegue entre os itens com setas para cima e para baixo. Selecione um item com enter ou espao, para seceo multipla combine com control. Transfira os itens com seta para direita ou esquerda">\n            <li role="option" tabindex="-1" aria-selected="false" \naria-checked="false" class="picklist-item" \nng-class="{\'is-selected\': isSelected(item, selectedItemsSource)}" \nng-repeat="item in source track by $index" ng-dblclick="moveRight(targetlist)" \nng-click="onItemClick($event, item, selectedItemsSource)" \nng-keydown="keyEvents($event, item, selectedItemsSource)" \nng-touchend="onItemTouchEnd($event)">\n                <span \nng-include="tmplUrl"></span>\n            </li>\n        </ul>\n    </div>\n    \n<div class="picklist__buttons">\n        <div \nclass="picklist__buttons-container">\n            <button tabindex="-1" \ntype="button" class="btn btn--default" ng-click="moveRight(targetlist)">\n                <span class="mi mi--keyboard-arrow-right"></span>\n            \n</button>\n            <button aria-label="mover todos os itens para a direita" \ntype="button" class="btn btn--default" ng-click="moveAllRight();">\n                <span class="ci ci--double-arrow-right"></span>\n            \n</button>\n            <button tabindex="-1" type="button" \nclass="btn btn--default" ng-click="moveLeft(sourcelist)">\n                <span\n class="mi mi--keyboard-arrow-left"></span>\n            </button>\n            \n<button aria-label="mover todos os itens para a esquerda" type="button" \nclass="btn btn--default" ng-click="moveAllLeft()">\n                <span \nclass="ci ci--double-arrow-left"></span>\n            </button>\n        </div>\n    </div>\n    <div class="picklist__target" \nng-class="{\'picklist-nocontrols\' : !showSourceControls}">\n        <div \ntabindex="0" class="picklist__header" ng-if="targetHeader">\n            <span>\n{{targetHeader}}</span>\n        </div>\n        <ul \nng-keydown="onKeyDown($event)" role="listbox" tabindex="0" \nclass="picklist-list" ng-style="targetStyle">\n            <li role="option" \ntabindex="-1" aria-selected="false" aria-checked="false" class="picklist-item" \nng-class="{\'is-selected\': isSelected(item,selectedItemsTarget)}" \nng-repeat="item in target track by $index" ng-dblclick="moveLeft(sourcelist)" \nng-click="onItemClick($event,item, selectedItemsTarget)" \nng-keydown="keyEvents($event, item, selectedItemsTarget)" \nng-touchend="onItemTouchEnd($event)">\n                <span \nng-include="tmplUrl"></span>\n            </li>\n        </ul>\n    </div>\n    \n<div class="picklist__buttons" ng-if="showTargetControls">\n        <div \nclass="picklist__buttons-container">\n            <button tabindex="-1" \ntype="button" class="btn btn--default" \nng-click="moveUp(targetlist,target,selectedItemsTarget,onTargetReorder)" \nng-disable>\n                <span class="mi mi--keyboard-arrow-up"></span>\n            </button>\n            <button tabindex="-1" type="button" \nclass="btn btn--default" \nng-click="moveTop(targetlist,target,selectedItemsTarget,onTargetReorder)">\n                <span class="ci ci--double-arrow-up"></span>\n            \n</button>\n            <button tabindex="-1" type="button" \nclass="btn btn--default" \nng-click="moveDown(targetlist,target,selectedItemsTarget,onTargetReorder)">\n                <span class="mi mi--keyboard-arrow-down"></span>\n            \n</button>\n            <button tabindex="-1" type="button" \nclass="btn btn--default" \nng-click="moveBottom(targetlist,target,selectedItemsTarget,onTargetReorder)">\n                <span class="ci ci--double-arrow-down"></span>\n            \n</button>\n        </div>\n    </div>\n</div>\n')}])}(),function(){"use strict";function a(){function a(a,b,c){a.tmplUrl||(a.tmplUrl="tmplDefault.html")}function b(a,b,c,d){function e(a){if(angular.element(a.target).hasClass("picklist-list")){var b=a.target.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');angular.forEach(b,function(a){angular.element(a).removeAttr("tabindex")}),t=angular.element(a.target).find("li"),t.length&&(38===a.keyCode?(t[t.length-1].focus(),a.preventDefault()):40===a.keyCode&&(t[0].focus(),a.preventDefault()))}}function f(b,c,d){var e=b.ctrlKey,f=0;for(w=b.target;f<10;){if(angular.element(w).hasClass("picklist-item")){t=w.parentElement.children;break}w=w.parentElement,f++}39===b.keyCode?(x=!1,p(),b.preventDefault()):37===b.keyCode?(x=!1,r(),b.preventDefault()):38===b.keyCode?(!e&&x?l(a.sourcelist,a.source,a.selectedItemsSource,a.onSourceReorder):(y(angular.element(w)),v&&u.focus()),b.preventDefault()):40===b.keyCode?(!e&&x?n(a.sourcelist,a.source,a.selectedItemsSource,a.onSourceReorder):(y(angular.element(w)),v&&v.focus()),b.preventDefault()):13!==b.keyCode&&32!==b.keyCode||(g(b,c,d),x=!0,b.preventDefault(),e&&angular.element(b.target).hasClass("is-selected")?(angular.element(b.target).attr("aria-selected","false"),angular.element(b.target).attr("aria-checked","false")):(angular.element(b.target).attr("aria-selected","true"),angular.element(b.target).attr("aria-checked","true")))}function g(b,c,d){var e=i(c,d),f=-1!=e;if(!a.itemTouched&&a.metaKeySelection){var g=b.metaKey||b.ctrlKey;f&&g?d.splice(e,1):(g||(d.length=0),d.push(c))}else f?d.splice(e,1):d.push(c);a.itemTouched=!1}function h(b){a.itemTouched=!0}function i(a,b){return k(a,b)}function j(a,b){return-1!=i(a,b)}function k(a,b){var c=-1;if(b)for(var d=0;d<b.length;d+=1)if(b[d]===a){c=d;break}return c}function l(b,c,d,e){if(d&&d.length){for(var f=0;f<d.length;f+=1){var g=d[f],h=k(g,c);if(0==h)break;var i=c[h],j=c[h-1];c[h-1]=i,c[h]=j}a.movedUp=!0,a.reorderedListElement=b}}function m(a,b,c,d){if(c&&c.length)for(var e=0;e<c.length;e+=1){var f=c[e],g=k(f,b);if(0==g)break;var h=b.splice(g,1)[0];b.unshift(h)}}function n(b,c,d,e){if(d&&d.length){for(var f=d.length-1;f>=0;f--){var g=d[f],h=k(g,c);if(h==c.length-1)break;var i=c[h],j=c[h+1];c[h+1]=i,c[h]=j}a.movedDown=!0,a.reorderedListElement=b}}function o(a,b,c,d){if(c&&c.length)for(var e=c.length-1;e>=0;e--){var f=c[e],g=k(f,b);if(g==b.length-1)break;var h=b.splice(g,1)[0];b.push(h)}}function p(b){if(a.selectedItemsSource&&a.selectedItemsSource.length){for(var c=0;c<a.selectedItemsSource.length;c+=1){var d=a.selectedItemsSource[c];-1==k(d,a.target)&&a.target.push(a.source.splice(k(d,a.source),1)[0])}a.selectedItemsSource=[]}}function q(){if(a.source){for(var b=0;b<a.source.length;b+=1)a.target.push(a.source[b]);a.source.splice(0,a.source.length),a.selectedItemsSource=[]}}function r(b){if(a.selectedItemsTarget&&a.selectedItemsTarget.length){for(var c=0;c<a.selectedItemsTarget.length;c+=1){var d=a.selectedItemsTarget[c];-1==k(d,a.source)&&a.source.push(a.target.splice(k(d,a.target),1)[0])}a.selectedItemsTarget=[]}}function s(){if(a.target){for(var b=0;b<a.target.length;b+=1)a.source.push(a.target[b]);a.target.splice(0,a.target.length),a.selectedItemsTarget=[]}}a.selectedItemsSource=new Array,a.selectedItemsTarget=new Array,a.metaKeySelection=!0,a.itemTouched=!0,a.onItemClick=g,a.onItemTouchEnd=h,a.isSelected=j,a.moveUp=l,a.moveTop=m,a.moveDown=n,a.moveBottom=o,a.moveRight=p,a.moveAllRight=q,a.moveLeft=r,a.moveAllLeft=s,a.keyEvents=f,a.onKeyDown=e;var t,u,v,w,x=!1,y=function(a){var b=Object.keys(t).map(function(a){return t[a]}),c=Object.keys(a).map(function(b){return a[b]}),d=b.indexOf(c[0]),e=b.length-1;v=b[(d+1)%(e+1)],u=b[(e+d)%(e+1)]}}var c={replace:!0,templateUrl:"bb/picklist.html",restrict:"E",transclude:!0,scope:{source:"=?bbSource",target:"=?bbTarget",sourceHeader:"@?bbSourceHeader",targetHeader:"@?bbTargetHeader",showSourceControls:"=?bbShowSourceControls",showTargetControls:"=?bbShowTargetControls",sourceStyle:"=?bbSourceStyle",targetStyle:"=?bbTargetStyle",responsive:"=?bbResponsive",tmplUrl:"@?bbTmplUrl"},controller:b,link:a};return b.$inject=["$scope","$element","$attrs","$parse"],a.$inject=["$scope","$element","$attrs"],c}function b(a){a.put("tmplDefault.html","<span>{{item}}</span>")}angular.module("bb.picklist",["bb.picklist.tmpl"]).directive("bbPicklist",a).directive("ngEnter",function(){return function(a,b,c){b.bind("keydown",function(b){13!==b.which&&32!==b.which||(a.$apply(function(){a.$eval(c.ngEnter,{event:b})}),b.preventDefault())})}}).run(b),b.$inject=["$templateCache"]}(),function(){"use strict";angular.module("bb.popover.tmpl",[]).run(["$templateCache",function(a){a.put("bb/popover-html.html",'<div class="popover" bb-tooltip-classes bb-animation-class="fade" \nng-class="{\'is-open\': isOpen()}">\n    <div class="popover__arrow"></div>\n    \n<div class="popover__inner">\n        <h3 class="popover__title" \nng-bind="title" ng-if="title"></h3>\n        <div class="popover__content" \nng-bind-html="contentExp()"></div>\n    </div>\n</div>\n'),a.put("bb/popover-template.html",'<div class="popover" bb-tooltip-classes bb-animation-class="fade" \nng-class="{\'is-open\': isOpen}">\n    <div class="popover__arrow"></div>\n    <div\n class="popover__inner">\n        <h3 class="popover__title" ng-bind="title" \nng-if="title"></h3>\n        <div class="popover__content" \nbb-tooltip-template-transclude="contentExp()" \nbb-template-transclude-scope="originScope()"></div>\n    </div>\n</div>\n'),a.put("bb/popover.html",'<div class="popover" bb-tooltip-classes bb-animation-class="fade" \nng-class="{\'is-open\': isOpen()}">\n    <div class="popover__arrow"></div>\n    \n<div class="popover__inner">\n        <h3 class="popover__title" \nng-bind="title" ng-if="title"></h3>\n        <div class="popover__content" \nng-bind="content"></div>\n    </div>\n</div>\n')}])}(),function(){"use strict";function a(a,b,c){function d(b,c,d,e){var f=function(a){27===a.keyCode&&b.$apply(function(){var b=new Event(a.type,a);b.keyCode=a.keyCode,b.which=a.which,g[0].dispatchEvent(b),g.attr("aria-expanded","false"),g[0].focus()})},h=a.$on("tooltip-show",function(a,b){g=b,c.attr("tabindex","0"),b.attr("aria-expanded","true"),setTimeout(function(){c[0].focus()},100)});c.on("keydown",f),b.$on("$destroy",function(){c.off("keydown",f),h()})}return{replace:!0,link:d,scope:{title:"@?bbTitle",contentExp:"&?bbContentExp",placement:"@?bbPlacement",popupClass:"@?bbPopupClass",animation:"&?bbAnimation",isOpen:"&?bbIsOpen",originScope:"&?bbOriginScope"},templateUrl:"bb/popover-template.html"}}function b(a,b){var c=a("bbPopoverTemplate","bb","outsideClick",{useContentExp:!0,insertAriaAttr:!1}),d=b.$on("tooltip-directive-on",function(a,b){b.attr("aria-expanded","false")});return b.$on("$destroy",d),c}function c(a){function b(b,c,d,e){var f=function(a){27===a.keyCode&&b.$apply(function(){var b=new Event(a.type,a);b.keyCode=a.keyCode,b.which=a.which,g[0].dispatchEvent(b),g.attr("aria-expanded","false"),g[0].focus()})},h=a.$on("tooltip-show",function(a,b){g=b,c.attr("tabindex","0"),b.attr("aria-expanded","true"),setTimeout(function(){c[0].focus()},100)});c.on("keydown",f),b.$on("$destroy",function(){c.off("keydown",f),h()})}return{link:b,replace:!0,scope:{contentExp:"&?bbContentExp",title:"@?bbTitle",placement:"@?bbPlacement",popupClass:"@?bbPopupClass",animation:"&bbAnimation",isOpen:"&bbIsOpen"},templateUrl:"bb/popover-html.html"}}function d(a,b){var c=a("bbPopoverHtml","bb","outsideClick",{useContentExp:!0,insertAriaAttr:!1}),d=b.$on("tooltip-directive-on",function(a,b){b.attr("aria-expanded","false")});return b.$on("$destroy",d),c}function e(a){function b(b,c,d,e){var f=function(a){27===a.keyCode&&b.$apply(function(){var b=new Event(a.type,a);b.keyCode=a.keyCode,b.which=a.which,g[0].dispatchEvent(b),g.attr("aria-expanded","false"),g[0].focus()})},h=a.$on("tooltip-show",function(a,b){g=b,c.attr("tabindex","0"),b.attr("aria-expanded","true"),setTimeout(function(){c[0].focus()},100)});c.on("keydown",f),b.$on("$destroy",function(){c.off("keydown",f),h()})}return{link:b,replace:!0,scope:{title:"@?bbTitle",content:"@?bbContent",placement:"@?bbPlacement",popupClass:"@?bbPopupClass",animation:"&?bbAnimation",isOpen:"&?bbIsOpen"},templateUrl:"bb/popover.html"}}function f(a,b){var c=a("bbPopover","bb","outsideClick",{insertAriaAttr:!1}),d=b.$on("tooltip-directive-on",function(a,b){b.attr("aria-expanded","false")});return b.$on("$destroy",d),c}angular.module("bb.popover",["bb.popover.tmpl","bb.tooltip"]).directive("bbPopoverTemplatePopup",a).directive("bbPopoverTemplate",b).directive("bbPopoverHtmlPopup",c).directive("bbPopoverHtml",d).directive("bbPopoverPopup",e).directive("bbPopover",f);var g;a.$inject=["$rootScope","$document","$parse"],b.$inject=["$bbTooltip","$rootScope"],c.$inject=["$rootScope"],d.$inject=["$bbTooltip","$rootScope"],e.$inject=["$rootScope"],f.$inject=["$bbTooltip","$rootScope"]}(),function(){"use strict";angular.module("bb.progressbar.tmpl",[]).run(["$templateCache",function(a){a.put("bb/progressbar.bar.html",'<div class="progress-bar" ng-class="type && \'progress-bar-\' + type" \nrole="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" \naria-valuemax="{{max}}" \nng-style="{width: (percent < 100 ? percent : 100) + \'%\'}" \naria-valuetext="{{percent | number: 0}}%" tabindex="0" ng-transclude></div>'),a.put("bb/progressbar.html",'<div class="progress">\n    <div class="progress-bar" \nng-class="type && \'progress-bar-\' + type" role="progressbar" \naria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" \nng-style="{width: (percent < 100 ? percent : 100) + \'%\'}" \naria-valuetext="{{percent | number: 0}}%" tabindex="0" ng-transclude></div>\n\n</div>'),a.put("bb/progressbar.progress.html",'<div class="progress" ng-transclude></div>')}])}(),function(){"use strict";function a(a,b,c){function d(){return angular.isDefined(a.maxParam)?a.maxParam:c.max}var e=this,f=angular.isDefined(b.animate)?a.$parent.$eval(b.animate):c.animate;this.bars=[],a.max=d(),this.addBar=function(a,b,c){f||b.css({transition:"none"}),this.bars.push(a),a.max=d(),a.title=c&&angular.isDefined(c.title)?c.title:"progressbar",a.$watch("value",function(){a.recalculatePercentage()}),a.recalculatePercentage=function(){var b=e.bars.reduce(function(a,b){return b.percent=+(100*b.value/b.max).toFixed(2),a+b.percent},0);b>100&&(a.percent-=b-100)},a.$on("$destroy",function(){b=null,e.removeBar(a)})},this.removeBar=function(a){this.bars.splice(this.bars.indexOf(a),1),this.bars.forEach(function(a){a.recalculatePercentage()})},a.$watch("maxParam",function(){e.bars.forEach(function(a){a.max=d(),a.recalculatePercentage()})})}function b(){return{replace:!0,transclude:!0,controller:"bbProgressController",require:"bbProgress",scope:{maxParam:"=?max"},templateUrl:"bb/progressbar.progress.html"}}function c(){function a(a,b,c,d){d.addBar(a,b,c)}return{replace:!0,transclude:!0,require:"^bbProgress",scope:{value:"=",type:"@"},templateUrl:"bb/progressbar.bar.html",link:a}}function d(){function a(a,b,c,d){d.addBar(a,angular.element(b.children()[0]),{title:c.title})}return{replace:!0,transclude:!0,controller:"bbProgressController",scope:{value:"=",maxParam:"=?max",type:"@"},templateUrl:"bb/progressbar.html",link:a}}angular.module("bb.progressbar",["bb.progressbar.tmpl"]).constant("bbProgressConfig",{animate:!0,max:100}).controller("bbProgressController",a).directive("bbProgress",b).directive("bbBar",c).directive("bbProgressbar",d),a.$inject=["$scope","$attrs","bbProgressConfig"]}(),function(){"use strict";function a(a,b){var c,d,e={normal:/(auto|scroll)/,hidden:/(auto|scroll|hidden)/},f={auto:/\s?auto?\s?/i,primary:/^(top|bottom|left|right)$/,secondary:/^(top|bottom|left|right|center)$/,vertical:/^(top|bottom)$/},g=/(HTML|BODY)/;return{getRawNode:function(a){return a.nodeName?a:a[0]||a},parseStyle:function(a){return a=parseFloat(a),isFinite(a)?a:0},offsetParent:function(c){c=this.getRawNode(c);for(var d=c.offsetParent||a[0].documentElement;d&&d!==a[0].documentElement&&function(a){return"static"===(b.getComputedStyle(a).position||"static")}(d);)d=d.offsetParent;return d||a[0].documentElement},scrollbarWidth:function(e){if(e){if(angular.isUndefined(d)){var f=a.find("body");f.addClass("bb-position-body-scrollbar-measure"),d=b.innerWidth-f[0].clientWidth,d=isFinite(d)?d:0,f.removeClass("bb-position-body-scrollbar-measure")}return d}if(angular.isUndefined(c)){var g=angular.element('<div class="bb-position-scrollbar-measure"></div>');a.find("body").append(g),c=g[0].offsetWidth-g[0].clientWidth,c=isFinite(c)?c:0,g.remove()}return c},scrollbarPadding:function(a){a=this.getRawNode(a);var c=b.getComputedStyle(a),d=this.parseStyle(c.paddingRight),e=this.parseStyle(c.paddingBottom),f=this.scrollParent(a,!1,!0),h=this.scrollbarWidth(f,g.test(f.tagName));return{scrollbarWidth:h,widthOverflow:f.scrollWidth>f.clientWidth,right:d+h,originalRight:d,heightOverflow:f.scrollHeight>f.clientHeight,bottom:e+h,originalBottom:e}},isScrollable:function(a,c){a=this.getRawNode(a);var d=c?e.hidden:e.normal,f=b.getComputedStyle(a);return d.test(f.overflow+f.overflowY+f.overflowX)},scrollParent:function(c,d,f){c=this.getRawNode(c);var g=d?e.hidden:e.normal,h=a[0].documentElement,i=b.getComputedStyle(c);if(f&&g.test(i.overflow+i.overflowY+i.overflowX))return c;var j="absolute"===i.position,k=c.parentElement||h;if(k===h||"fixed"===i.position)return h;for(;k.parentElement&&k!==h;){var l=b.getComputedStyle(k);if(j&&"static"!==l.position&&(j=!1),!j&&g.test(l.overflow+l.overflowY+l.overflowX))break;k=k.parentElement}return k},position:function(c,d){c=this.getRawNode(c);var e=this.offset(c);if(d){var f=b.getComputedStyle(c);e.top-=this.parseStyle(f.marginTop),e.left-=this.parseStyle(f.marginLeft)}var g=this.offsetParent(c),h={top:0,left:0};return g!==a[0].documentElement&&(h=this.offset(g),h.top+=g.clientTop-g.scrollTop,h.left+=g.clientLeft-g.scrollLeft),{width:Math.round(angular.isNumber(e.width)?e.width:c.offsetWidth),height:Math.round(angular.isNumber(e.height)?e.height:c.offsetHeight),top:Math.round(e.top-h.top),left:Math.round(e.left-h.left)}},offset:function(c){c=this.getRawNode(c);var d=c.getBoundingClientRect();return{width:Math.round(angular.isNumber(d.width)?d.width:c.offsetWidth),height:Math.round(angular.isNumber(d.height)?d.height:c.offsetHeight),top:Math.round(d.top+(b.pageYOffset||a[0].documentElement.scrollTop)),left:Math.round(d.left+(b.pageXOffset||a[0].documentElement.scrollLeft))}},viewportOffset:function(c,d,e){c=this.getRawNode(c),e=!1!==e;var f=c.getBoundingClientRect(),g={top:0,left:0,bottom:0,right:0},h=d?a[0].documentElement:this.scrollParent(c),i=h.getBoundingClientRect();if(g.top=i.top+h.clientTop,g.left=i.left+h.clientLeft,h===a[0].documentElement&&(g.top+=b.pageYOffset,g.left+=b.pageXOffset),g.bottom=g.top+h.clientHeight,g.right=g.left+h.clientWidth,e){var j=b.getComputedStyle(h);g.top+=this.parseStyle(j.paddingTop),g.bottom-=this.parseStyle(j.paddingBottom),g.left+=this.parseStyle(j.paddingLeft),g.right-=this.parseStyle(j.paddingRight)}return{top:Math.round(f.top-g.top),bottom:Math.round(g.bottom-f.bottom),left:Math.round(f.left-g.left),right:Math.round(g.right-f.right)}},parsePlacement:function(a){var b=f.auto.test(a);return b&&(a=a.replace(f.auto,"")),a=a.split("-"),a[0]=a[0]||"top",f.primary.test(a[0])||(a[0]="top"),a[1]=a[1]||"center",f.secondary.test(a[1])||(a[1]="center"),a[2]=!!b,a},positionElements:function(a,c,d,e){a=this.getRawNode(a),c=this.getRawNode(c);var g=angular.isDefined(c.offsetWidth)?c.offsetWidth:c.prop("offsetWidth"),h=angular.isDefined(c.offsetHeight)?c.offsetHeight:c.prop("offsetHeight");d=this.parsePlacement(d);var i=e?this.offset(a):this.position(a),j={top:0,left:0,placement:""};if(d[2]){var k=this.viewportOffset(a,e),l=b.getComputedStyle(c),m={width:g+Math.round(Math.abs(this.parseStyle(l.marginLeft)+this.parseStyle(l.marginRight))),height:h+Math.round(Math.abs(this.parseStyle(l.marginTop)+this.parseStyle(l.marginBottom)))};if(d[0]="top"===d[0]&&m.height>k.top&&m.height<=k.bottom?"bottom":"bottom"===d[0]&&m.height>k.bottom&&m.height<=k.top?"top":"left"===d[0]&&m.width>k.left&&m.width<=k.right?"right":"right"===d[0]&&m.width>k.right&&m.width<=k.left?"left":d[0],d[1]="top"===d[1]&&m.height-i.height>k.bottom&&m.height-i.height<=k.top?"bottom":"bottom"===d[1]&&m.height-i.height>k.top&&m.height-i.height<=k.bottom?"top":"left"===d[1]&&m.width-i.width>k.right&&m.width-i.width<=k.left?"right":"right"===d[1]&&m.width-i.width>k.left&&m.width-i.width<=k.right?"left":d[1],"center"===d[1])if(f.vertical.test(d[0])){var n=i.width/2-g/2;k.left+n<0&&m.width-i.width<=k.right?d[1]="left":k.right+n<0&&m.width-i.width<=k.left&&(d[1]="right")}else{var o=i.height/2-m.height/2;k.top+o<0&&m.height-i.height<=k.bottom?d[1]="top":k.bottom+o<0&&m.height-i.height<=k.top&&(d[1]="bottom")}}switch(d[0]){case"top":j.top=i.top-h;break;case"bottom":j.top=i.top+i.height;break;case"left":j.left=i.left-g;break;case"right":j.left=i.left+i.width}switch(d[1]){case"top":j.top=i.top;break;case"bottom":j.top=i.top+i.height-h;break;case"left":j.left=i.left;break;case"right":j.left=i.left+i.width-g;break;case"center":f.vertical.test(d[0])?j.left=i.left+i.width/2-g/2:j.top=i.top+i.height/2-h/2}return j.top=Math.round(j.top),j.left=Math.round(j.left),j.placement="center"===d[1]?d[0]:d[0]+"-"+d[1],j},adjustTop:function(a,b,c,d){if(-1!==a.indexOf("top")&&c!==d)return{top:b.top-d+"px"}},positionArrow:function(a,c){a=this.getRawNode(a);var d=a.querySelector(".tooltip--inner, .popover--inner");if(d){var e=angular.element(d).hasClass("tooltip--inner"),g=e?a.querySelector(".tooltip--arrow"):a.querySelector(".arrow");if(g){var h={top:"",bottom:"",left:"",right:""};if(c=this.parsePlacement(c),"center"===c[1])return void angular.element(g).css(h);var i="border-"+c[0]+"-width",j=b.getComputedStyle(g)[i],k="border-";f.vertical.test(c[0])?k+=c[0]+"-"+c[1]:k+=c[1]+"-"+c[0],k+="-radius";var l=b.getComputedStyle(e?d:a)[k];switch(c[0]){case"top":h.bottom=e?"0":"-"+j;break;case"bottom":h.top=e?"0":"-"+j;break;case"left":h.right=e?"0":"-"+j;break;case"right":h.left=e?"0":"-"+j}h[c[1]]=l,angular.element(g).css(h)}}}}}angular.module("bb.position",[]).factory("$bbPosition",a),a.$inject=["$document","$window"]}(),function(){"use strict";angular.module("bb.rating.tmpl",[]).run(["$templateCache",function(a){a.put("bb/rating.html",'<span tabindex="0" \naria-label="{{ desc }}: Valor atual: {{title}}. {{ readonly ? \'Somente leitura.\' : \'Utilize as setas para direita e esquerda para mudar o valor.\'}}" \nclass="rating" ng-mouseleave="reset()" ng-keydown="onKeydown($event)" \ntabindex="0" role="slider" aria-valuemin="0" aria-valuemax="{{range.length}}" \naria-valuenow="{{value}}" aria-valuetext="{{title}}">\n\n    <span \nng-repeat-start="r in range track by $index" class="sr-only"></span>\n\n<i \nng-repeat-end ng-mouseenter="enter($index + 1)" ng-click="rate($index + 1)" \n'+"ng-class=\"(r.stateIcon || 'mi') + ' ' + ($index < value && (r.stateOn || 'mi--star') || (r.stateOff || 'mi--star-border'))\" \nng-attr-title=\"{{r.title}}\" \nng-attr-style=\"{{r.stateColor && ($index < value) ? 'color: ' + r.stateColor + ';' : '' }}\">\n</i>\n\n</span>\n")}])}(),function(){"use strict";function a(a,b,c){var d={$setViewValue:angular.noop},e=this;this.init=function(e){d=e,d.$render=this.render,d.$formatters.push(function(a){return angular.isNumber(a)&&a<<0!==a&&(a=Math.round(a)),a}),this.stateOn=angular.isDefined(b.bbStateOn)?a.$parent.$eval(b.bbStateOn):c.stateOn,this.stateOff=angular.isDefined(b.bbStateOff)?a.$parent.$eval(b.bbStateOff):c.stateOff,this.enableReset=angular.isDefined(b.bbEnableReset)?a.$parent.$eval(b.bbEnableReset):c.enableReset;var f=angular.isDefined(b.bbTitles)?a.$parent.$eval(b.bbTitles):c.titles;this.titles=angular.isArray(f)&&f.length>0?f:c.titles;var g=b.bbDesc;a.desc=angular.isDefined(g)?g:c.desc;var h=angular.isDefined(b.bbRatingStates)?a.$parent.$eval(b.bbRatingStates):new Array(angular.isDefined(b.bbMax)?a.$parent.$eval(b.bbMax):c.max);a.range=this.buildTemplateObjects(h)},this.buildTemplateObjects=function(a){for(var b=0,c=a.length;b<c;b+=1)a[b]=angular.extend({index:b},{stateOn:this.stateOn,stateOff:this.stateOff,title:this.getTitle(b)},a[b]);return a},this.getTitle=function(a){return a>=this.titles.length?a+1:this.titles[a]},a.rate=function(b){if(!a.readonly&&b>=0&&b<=a.range.length){var c=e.enableReset&&d.$viewValue===b?0:b;d.$setViewValue(c),d.$render()}},a.enter=function(b){a.readonly||(a.value=b),a.onHover({value:b})},a.reset=function(){a.value=d.$viewValue,a.onLeave()},a.onKeydown=function(b){/(37|38|39|40)/.test(b.which)&&(b.preventDefault(),b.stopPropagation(),a.rate(a.value+(38===b.which||39===b.which?1:-1)))},this.render=function(){a.value=d.$viewValue,a.title=e.getTitle(a.value-1)}}function b(){return{require:["bbRating","ngModel"],restrict:"A",scope:{readonly:"=?bbReadOnly",desc:"@bbDesc",onHover:"&bbOnHover",onLeave:"&bbOnLeave",size:"&bbSize"},controller:"BbRatingController",templateUrl:"bb/rating.html",link:function(a,b,c,d){angular.isDefined(c.bbSize)&&b.addClass("rating--"+c.bbSize);var e=d[0],f=d[1];e.init(f)}}}angular.module("bb.rating",["bb.rating.tmpl"]).directive("bbRating",b).constant("bbRatingConfig",{max:5,stateOn:null,stateOff:null,enableReset:!0,size:"md",titles:["Um","Dois","Trs","Quatro","Cinco"],desc:"Classificao"}).controller("BbRatingController",a),a.$inject=["$scope","$attrs","bbRatingConfig"]}(),function(){"use strict";function a(a,c){function d(d,j,k,l){function m(a,b){for(var c=d,e=a.split("."),f=0;f<e.length-1;f++)c=c[e.shift()];c[e.shift()]=b}var n;d.disabledValuesHistory=d.disabledValuesHistory?d.disabledValuesHistory:[],j=$(j),j.addClass("localytics-chosen");var o=d.$eval(k.bbSelect)||{};angular.forEach(k,function(a,c){if(b.call(g,c)>=0)return k.$observe(c,function(a){return o[h(c).replace("bb_","")]="{{"===String(j.attr(k.$attr[c])).slice(0,2)?a:d.$eval(a),n()})});var p=function(){return j.addClass("loading").attr("disabled",!f).trigger("chosen:updated")},q=function(){return j.removeClass("loading"),angular.isDefined(k.disabled)?j.attr("disabled",k.disabled):j.attr("disabled",!1),j.trigger("chosen:updated")},r=null,s=!1,t=angular.element(j[0].parentElement),u=j[0].attributes.multiple&&"display-amount"===j[0].attributes.multiple.value;setTimeout(function(){var a=t.find(".chosen-choices > li > input"),b=t.find(".chosen-search > input");a.length?(a.attr("role","combobox"),a.attr("aria-activedescendant",""),a.attr("aria-expanded","false")):b.length&&(b.attr("role","combobox"),b.attr("aria-activedescendant",""),b.attr("aria-expanded","false"),b.attr("aria-label","presione a barra de espao para abrir lista"))},1e3);var v=d.$new(),w=function(){return r?j.trigger("chosen:updated"):(a(function(){if(o.inherit_select_classes=!!u||o.inherit_select_classes,r=j.chosen(o).data("chosen"),u&&(r.container.addClass("multiple-select-choices-amount"),!r.container.find(".chosen-choices-number").length)){var a="opo selecionada",b="opes selecionadas";o.selected_text_single&&""!==o.selected_text_single&&(a=o.selected_text_single),o.selected_text_multiple&&""!==o.selected_text_multiple&&(b=o.selected_text_multiple);c(['<div ng-show="multipleChoicesCounter" class="chosen-choices-number">','{{ multipleChoicesCounter }} {{ multipleChoicesCounter === 1 ? "'+a+'" : "'+b+'" }}',"</div>"].join(""))(v,function(a){r.container.prepend(a[0])})}j.hasClass("form-input")?j[0].nextSibling.classList.add("form-input","form-input--bb-select"):j.parent().hasClass("form-input")&&j.parent().addClass("form-input--bb-select");var d=r.result_select;r.result_select=function(a){var b=null;o.stay_opened&&(a.metaKey=!0,a.ctrlKey=!0,b=r.result_highlight);var c=d.call(r,a);return null!==b&&b.addClass("result-selected"),c}}),angular.isObject(r)?r.default_text:void 0)};if(n=function(){return s?j.attr("data-placeholder",r.results_none_found).attr("disabled",!0):j.removeAttr("data-placeholder"),j.trigger("chosen:updated")},l){var x=l.$render;if(l.$render=function(){return x(),w()},j.on("chosen:hiding_dropdown",function(){return u&&r.container.parent().css("z-index","inherit"),d.$apply(function(){return l.$setTouched()})}),k.multiple){var y=function(){return v.multipleChoicesCounter=l.$modelValue?l.$modelValue.length:0,l.$viewValue};d.$watch(y,l.$render,!0)}}else w();if(k.$observe("disabled",function(){return j.trigger("chosen:updated")}),j.on("chosen:showing_dropdown",function(){u&&(t.height(34),r.container.css("height","auto"),r.container.css("position","absolute"),r.container.parent().css("z-index","5"));var b=t.find(".chosen-results > li");b.length&&(angular.element(b[0].parentElement).attr("role","listbox"),angular.element(b[0].parentElement).attr("id","idlistbox"),b.attr("role","option"),angular.forEach(b,function(a){d.$apply(function(){angular.element(a).attr("id","id"+Math.floor(1e5*Math.random()))})})),a(function(){var a=t.find(".chosen-results > li.active-result.highlighted"),c=t.find(".chosen-choices > li > input"),d=t.find(".chosen-search > input");c=c.length?c:d,a.length?(c.attr("role","combobox"),c.attr("aria-activedescendant",a[0].getAttribute("id")),c.attr("aria-expanded","true"),c.attr("aria-controls",b[0].parentElement.getAttribute("id"))):c.attr("aria-activedescendant","")},10)}),t.on("keydown",function(a){var b=t.find(".chosen-results > li.active-result");/(9|27)/.test(a.keyCode)&&(angular.element(a.target).attr("aria-activedescendant",""),angular.element(a.target).attr("aria-expanded","false"),b.removeAttr("aria-selected")),/(38|40)/.test(a.keyCode)&&setTimeout(function(){var c=t.find(".chosen-results > li.active-result.highlighted");if(c.length)b.removeAttr("aria-selected"),c.attr("aria-selected","true"),angular.element(a.target).attr("aria-activedescendant",c[0].getAttribute("id"));else{angular.element(a.target).attr("aria-activedescendant",""),b.removeAttr("aria-selected");t.find(".chosen-search > input").length&&angular.element(a.target).attr("aria-expanded","false")}})}),j.on("chosen:open",function(a){console.log("chosen:open"),setTimeout(function(){var a=t.find(".chosen-results > li"),b=t.find(".chosen-choices > li > input"),c=t.find(".chosen-search > input"),e=t.find(".chosen-results > li.active-result.highlighted");b=b.length?b:c,b.attr("aria-expanded","true"),a.length&&(angular.element(a[0].parentElement).attr("role","listbox"),angular.element(a[0].parentElement).attr("id","idlistbox"),a.attr("role","option"),angular.forEach(a,function(a){d.$apply(function(){angular.element(a).attr("id","id"+Math.floor(1e5*Math.random()))})})),e.length&&b.attr("aria-activedescendant",e[0].getAttribute("id"))},10)}),k.ngOptions&&l){
var z,A=k.ngOptions.match(e),B=A[7];return j.on("chosen:ready",function(){if(angular.isDefined(k.bbLazyLoading)){f=!0;var b=!1,c=j.next();c.on("click",function(e){b||(c.addClass("lazy-loading"),d.$eval(k.bbLazyLoading)().then(function(d){b=!0,m(B,d),c.removeClass("lazy-loading"),a(function(){j.trigger("chosen:open"),t.find("li").attr("role","option")},10)}))}),c.on("keydown",function(a){if(/(32|40)/.test(a.which)){if(b)return;c.addClass("lazy-loading"),d.$eval(k.bbLazyLoading)().then(function(a){b=!0,m(B,a),c.removeClass("lazy-loading"),setTimeout(function(){j.trigger("chosen:open")},10)})}})}}),d.$watchCollection(B,function(b){return z=a(function(){return angular.isUndefined(b)?p():(s=i(b),q(),n())})}),d.$on("$destroy",function(){if(void 0!==z&&null!==z)return a.cancel(z)})}}var e,f=!1;e=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/;var g=["bbPersistentCreateOption","bbCreateOptionText","bbCreateOption","bbSkipNoResults","bbNoResultsText","bbAllowSingleDeselect","bbDisableSearchThreshold","bbDisableSearch","bbEnableSplitWordSearch","bbInheritSelectClasses","bbMaxSelectedOptions","bbPlaceholderTextMultiple","bbPlaceholderTextSingle","bbSearchContains","bbSingleBackstrokeDelete","bbDisplayDisabledOptions","bbDisplaySelectedOptions","bbIncludeGroupLabelInSelected","bbMaxShownResults","bbWidth","bbStayOpened","bbSelectedTextSingle","bbSelectedTextMultiple"],h=function(a){return a.replace(/[A-Z]/g,function(a){return"_"+a.toLowerCase()})},i=function(a){var b;if(angular.isArray(a))return 0===a.length;if(angular.isObject(a))for(b in a)if(a.hasOwnProperty(b))return!1;return!0};return{link:d,priority:1,require:"?ngModel",restrict:"A"}}var b=[].indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(b in this&&this[b]===a)return b;return-1};angular.module("bb.select",[]).directive("bbSelect",a),a.$inject=["$timeout","$compile"]}(),function(){"use strict";angular.module("bb.slider.tmpl",[]).run(["$templateCache",function(a){a.put("bb/slider.html","{{dual = dualArrow ? 'slider duplo' : 'slider simples'; ''}}\n<div \n"+'class="slider" tabindex="0" aria-label="{{dual}}">\n    <span \nng-show="validation.valid" class="slider__value min">{{extremes.min}}</span>\n    <div ng-class="{\'slider__bar-ticks\': ticks}" class="slider__bar">\n        \n<div class="slider__bar-pseudo"></div>\n        <div ng-show="validation.valid" \nclass="slider__bar--color" ng-style="style.wBarColor" \nng-class="{\'slider__bar--color--dual\': dualArrow}"></div>\n        <div \nng-show="validation.valid" ng-if="dualArrow">\n            <ul \nclass="slider__ticks">\n                <li \nng-repeat="pos in positions track by $index" ng-style="pos"></li>\n            \n</ul>\n            <bb-slider-move role="slider" aria-valuenow="{{valueL}}" \naria-valuetext="{{valueL}}" aria-valuemin="{{minRange}}" \naria-valuemax="{{maxRange}}" tabindex="0" ng-style="style.position[0]" \nng-class="{\'slider__arrow-ticks\':ticks}" \nclass="slider__arrow-dual slider__arrow-dual--left">\n                <span \nng-show="position[0] !== minRange && position[0] !== maxRange" \nng-style="style.valueL" \nclass="slider__arrow-dual__value slider__arrow-dual__value--left">{{valueL}}\n</span>\n                <div class="slider__arrow-dual--first"></div>\n                <div class="slider__arrow-dual--last"></div>\n            \n</bb-slider-move>\n            <bb-slider-move role="slider" \naria-valuenow="{{valueR}}" aria-valuetext="{{valueR}}" \naria-valuemin="{{minRange}}" aria-valuemax="{{maxRange}}" tabindex="0" \nng-style="style.position[1]" ng-class="{\'slider__arrow-ticks\':ticks}" \nclass="slider__arrow-dual slider__arrow-dual--right">\n                <span \nng-show="position[1] !== minRange && position[1] !== maxRange" \nng-style="style.valueR" class="slider__arrow-dual__value">{{valueR}}</span>\n                <div class="slider__arrow-dual--first"></div>\n                \n<div class="slider__arrow-dual--last"></div>\n            </bb-slider-move>\n        </div>\n        <div ng-show="validation.valid" ng-if="!dualArrow">\n            <ul class="slider__ticks">\n                <li \nng-repeat="pos in positions track by $index" ng-style="pos"></li>\n            \n</ul>\n            <bb-slider-move role="slider" aria-valuenow="{{value}}" \naria-valuetext="{{value}}" aria-valuemin="{{minRange}}" \naria-valuemax="{{maxRange}}" tabindex="0" ng-style="style.position[0]" \nng-class="{\'slider__arrow-ticks\':ticks}" class="slider__arrow">\n                <span \nng-show="position[0] !== minRange && position[0] !== maxRange" \nclass="slider__arrow--value">{{value}}</span>\n                <div \nclass="slider__arrow--first"></div>\n                <div \nclass="slider__arrow--last"></div>\n            </bb-slider-move>\n        </div>\n    </div>\n    <span ng-show="validation.valid" class="slider__value max">\n{{extremes.max}}</span>\n</div>')}])}(),function(){"use strict";function a(){var a={dualArrow:!1,hasTicks:!1,step:1,customTicks:[],minRange:0,maxRange:100};return{restrict:"E",templateUrl:"bb/slider.html",scope:{dualArrow:"=?bbDualArrow",hasTicks:"=?bbHasTicks",position:"=bbPosition",step:"=?bbStep",customTicks:"=?bbCustomTicks",minRange:"=?bbMinRange",maxRange:"=?bbMaxRange",ticks:"=?bbTicks",formatter:"=?bbFormatter"},link:function(b){b.watchRegistered=!1,b.style={position:[{left:0},{left:0}],wBarColor:{width:0},valueL:{top:""},valueR:{top:""}},b.extremes={min:"",max:""},b.dualArrow=b.dualArrow||a.dualArrow,b.hasTicks=b.hasTicks||a.hasTicks,b.customTicks=b.customTicks?b.customTicks:a.customTicks,b.step=Math.abs(b.step)||a.step,b.minRange=b.minRange||a.minRange,b.maxRange=b.maxRange||a.maxRange,b.position=b.position||[],b.validation={valid:!1}}}}function b(a,b,c){return{link:function(d,e,f,g){function h(){var a=d;if(d.validation.valid=!1,!a.dualArrow&&2===a.position.length)throw"Erro de definio: dualArrow === false, mas opt.position.length === 2";if(a.dualArrow&&1===a.position.length)throw"Erro de definio: dualArrow === true, mas opt.position.length === 1";if(0===a.position.length)throw"Erro de definio: position no foi informado";if(a.position[0]>a.position[1])throw"Erro de definio: position[0] > position[1]";if(a.position[1]>a.maxRange)throw"Erro de definio: position[1] > maxRange";if(a.position[0]<a.minRange)throw"Erro de definio: position[0] < minRange";if(a.position[0]>a.maxRange)throw"Erro de definio: position[0] > maxRange";if(a.maxRange<a.position[0])throw"Erro de definio: maxRange < position[0]";if(a.minRange>a.maxRange)throw"Erro de definio: minRange > maxRange";if(a.step>a.maxRange-a.minRange)throw"Step maior que intervalo definido";if(a.step<0)throw"Step no pode ser menor que zero";d.validation.valid=!0}function i(a){return M.formatter?M.formatter(a):a}function j(){J=Math.abs(M.maxRange-M.minRange),H=e[0].parentElement.parentElement,E=H.getBoundingClientRect().width,I=H.getBoundingClientRect().left,F=E/J,G=J/F}function k(){for(var a=[],b=J%M.step,c=(M.maxRange,0);c<=J;){var d=Math.round(1e4*M.minRange+1e4*c)/1e4;a.push(d),c+=M.step}return b&&a.push(M.maxRange),a}function l(){var a=[];if(M.hasTicks){var b=k();M.customTicks.length&&(b=M.customTicks);var c;b.forEach(function(d){var e=!1;m(b,M.position[0],M.position[1]).forEach(function(a){if(d===a)return void(e=!0)});var f=(d-M.minRange)*F*100/E+"%";c=e?{left:f,transform:"translateX(-50%)",background:"#03a9f4"}:{left:f,transform:"translateX(-50%)"},a.push(c)})}return a}function m(a,b,c){return M.dualArrow?a.filter(function(a){return a>=b&&a<=c}):a.filter(function(a){return a<=b})}function n(a){var b=k(),c=b.filter(function(b){return b<a}),d=b.filter(function(b){return b>a});return c=c[c.length-1],d=d[0],[c,d]}function o(){var a=(M.position[0]-M.minRange)*F*100/E+"%";d.style.position[0].left="calc("+a+" - "+K+"px)",d.style.wBarColor.width=a,M.value=i(M.position[0]),"$apply"!=d.$root.$$phase&&"$digest"!=d.$root.$$phase&&d.$apply()}function p(){var a=(M.position[0]-M.minRange)*F*100/E+"%";M.position[1]>=M.position[0]&&(d.style.position[0].left="calc("+a+" - "+L+"px)",d.style.position[1].left=(M.position[1]-M.minRange)*F*100/E+"%",d.style.wBarColor.left=(M.position[0]-M.minRange)*F*100/E+"%",d.style.wBarColor.width=(M.position[1]-M.position[0])*F*100/E+"%",M.valueL=i(M.position[0]),M.valueR=i(M.position[1]),(!d.$root||"$apply"!=d.$root.$$phase&&"$digest"!=d.$root.$$phase)&&d.$apply()),d.style.wBarColor.width>"0.2%"?d.style.valueR.top="-1.225rem":d.style.valueR.top="1.225rem"}function q(a){a.preventDefault(),D=a.pageX-I,B=a.pageX-D,D=a.pageX-B;var b=M.minRange+D*J/E,c=n(b),f=void 0!==c[0]?c[0]:M.minRange,g=void 0!==c[1]?c[1]:M.maxRange;if(M.dualArrow){var h=M.position[0],i=M.position[1],j=b>M.position[0];if(h===i&&j?h-=.1:h!==i||j||(i+=.1),Math.abs(b-h)<Math.abs(b-i)){e[0].parentElement.children[1].focus();var k=b>M.position[0];k&&(f=f<M.position[0]?M.position[0]:f),M.position[0]=b+(g-f)/2>=g?g:f}else{e[0].parentElement.children[2].focus();var k=b>M.position[1];k&&(f=f<M.position[1]?M.position[1]:f),M.position[1]=b+(g-f)/2>=g?g:f}}else{e[0].focus();var k=b>M.position[0];k&&(f=f<M.position[0]?M.position[0]:f),b===M.position[0]?M.position[0]=b:M.position[0]=b+(g-f)/2>=g?g:f}M.hasTicks&&(d.positions=l()),M.dualArrow?p():o(),d.$root.$broadcast("bb-slider-value-set",d.position)}function r(){var a=M.minRange+(D+K)*J/E,b=n(a)[0]?n(a)[0]:M.minRange,c=n(a)[1]?n(a)[1]:M.maxRange;a!==M.position[0]&&(a<=M.minRange?M.position[0]=M.minRange:a>=M.maxRange?M.position[0]=M.maxRange:a-M.step/2<=b?M.position[0]=b:a+M.step/2>=c&&(M.position[0]=c),M.hasTicks&&(d.positions=l()),o())}function s(){var a=0;if(e[0].classList.contains("slider__arrow-dual--right")){a=M.minRange+D*J/E;var b=n(a)[0]?n(a)[0]:M.position[0],c=n(a)[1]?n(a)[1]:M.maxRange;if(a===M.position[1])return;a>=M.maxRange?M.position[1]=M.maxRange:a<=M.position[0]?M.position[1]=M.position[0]:a-M.step/2<=b?M.position[1]=b:a+M.step/2>=c&&(M.position[1]=c)}else{a=M.minRange+(D+L)*J/E;var b=n(a)[0]?n(a)[0]:M.minRange,c=n(a)[1]?n(a)[1]:M.position[1];if(a===M.position[0])return;a<=M.minRange?M.position[0]=M.minRange:a>=M.position[1]?M.position[0]=M.position[1]:a-M.step/2<=b?M.position[0]=b:a+M.step/2>=c&&(M.position[0]=c)}M.hasTicks&&(d.positions=l()),p()}function t(a){var b=37===a.keyCode,c=39===a.keyCode;-K<=D&&D+K<=E&&(b?function(){var a=void 0!==n(M.position[0])[0]?n(M.position[0])[0]:M.minRange;a<=M.minRange?M.position[0]=M.minRange:M.position[0]=a}():c&&function(){var a=void 0!==n(M.position[0])[1]?n(M.position[0])[1]:M.maxRange;a>=M.maxRange?M.position[0]=M.maxRange:M.position[0]=a}()),M.hasTicks&&(d.positions=l()),o()}function u(a){var b=37===a.keyCode,c=39===a.keyCode,f=-L<=D&&D<=E,g=e[0].classList.contains("slider__arrow-dual--left");f&&(b?(a.preventDefault(),function(a){var b;if(a){var b=void 0!==n(M.position[0])[0]?n(M.position[0])[0]:M.minRange;b<=M.minRange?M.position[0]=M.minRange:M.minRange<M.position[0]&&(M.position[0]=b)}else{var b=void 0!==n(M.position[1])[0]?n(M.position[1])[0]:M.position[0];b<M.position[0]?M.position[1]=M.position[0]:M.position[0]<M.position[1]&&(M.position[1]=b)}}(g)):c&&(a.preventDefault(),function(a){var b;if(a){var b=void 0!==n(M.position[0])[1]?n(M.position[0])[1]:M.position[1];b>M.position[1]?M.position[0]=M.position[1]:M.position[0]<M.position[1]&&(M.position[0]=b)}else{var b=void 0!==n(M.position[1])[1]?n(M.position[1])[1]:M.maxRange;b>=M.maxRange?M.position[1]=M.maxRange:M.position[1]<M.maxRange&&(M.position[1]=b)}}(g))),M.hasTicks&&(d.positions=l()),p()}function v(a){j(),D=e[0].getBoundingClientRect().left-e[0].parentElement.parentElement.getBoundingClientRect().left,M.dualArrow?u(a):t(a),37!==a.keyCode&&39!==a.keyCode||a.preventDefault()}function w(){a.off("keyup",w),d.$root.$broadcast("bb-slider-value-set",d.position)}function x(){d.width!==b.innerWidth&&(d.width=b.innerWidth,j())}function y(){angular.element(b).off("resize",x)}function z(a){D=e[0].getBoundingClientRect().left-e[0].parentElement.parentElement.getBoundingClientRect().left,D=a.pageX-B,M.dualArrow?s():r()}function A(){N=!1,a.off("mousemove",z),a.off("mouseup",A),d.$root.$broadcast("bb-slider-value-set",d.position)}var B,C,D,E,F,G,H,I,J,K=(d.dualArrow,8),L=10,M=d,N=!1,O=angular.element(e[0].parentElement.parentElement.children[0]);d.extremes.min=i(d.minRange),d.extremes.max=i(d.maxRange),d.width=b.innerWidth,angular.element(b).on("resize",x),e.on("focus",function(a){j(),D=e[0].getBoundingClientRect().left-I,e.on("keydown",v)}),e.on("blur",function(a){e.off("keydown",v)}),e.on("keyup",w),e.on("mousedown",function(b){j(),e[0].focus(),b.preventDefault(),C=e[0].classList,D=e[0].getBoundingClientRect().left-I,B=b.pageX-D,a.on("mousemove",z),a.on("mouseup",A)}),d.$on("$destroy",function(){O[0].removeEventListener("click",q),y()}),c(M.dualArrow?function(){p()}:function(){o()}),d.watchRegistered||(d.watchRegistered=!0,d.$watch("position",function(a,b){a&&a.length&&("string"!=typeof a[0]&&"string"!=typeof a[1]?(h(),j(),i(),M.hasTicks&&(d.positions=l()),d.pseudoClickRegistered||(d.pseudoClickRegistered=!0,O[0].addEventListener("click",q)),M.dualArrow?p():o()):(a[0]=parseInt(a[0]),a[1]=parseInt(a[1])))},!0)),M.hasTicks&&(d.positions=l()),d.pseudoClickRegistered||(d.pseudoClickRegistered=!0,O[0].addEventListener("click",q)),h(),j()}}}angular.module("bb.slider",["bb.slider.tmpl"]).directive("bbSlider",a).directive("bbSliderMove",b),b.$inject=["$document","$window","$timeout"]}(),function(){"use strict";function a(){return{createNew:function(){var a=[];return{add:function(b,c){a.push({key:b,value:c})},get:function(b){for(var c=0;c<a.length;c+=1)if(b===a[c].key)return a[c]},keys:function(){for(var b=[],c=0;c<a.length;c+=1)b.push(a[c].key);return b},top:function(){return a[a.length-1]},remove:function(b){for(var c=-1,d=0;d<a.length;d+=1)if(b===a[d].key){c=d;break}return a.splice(c,1)[0]},removeTop:function(){return a.splice(a.length-1,1)[0]},length:function(){return a.length}}}}}angular.module("bb.stackedMap",[]).factory("$$stackedMap",a)}(),function(){"use strict";angular.module("bb.steps.tmpl",[]).run(["$templateCache",function(a){a.put("bb/steps.html",'<div class="steps">\n    <ul class="steps__progress-line">\n        <li \nrole="tab" ng-repeat="step in steps" \ntabindex="{{$index == currentStep ? 0 : -1}}" \nng-class="{\'is-active\': $index == currentStep, \'title\': step.title, \'subtitle\': step.desc }">\n            <div class="steps__progress-line__step">\n                <span \nclass="steps__progress-line__subtitle" ng-if="step.desc && step.title">\n{{step.desc}}</span>\n                <figure>{{$index + 1}}</figure>\n                <span class="steps__progress-line__title" ng-if="step.title">\n{{step.title}}</span>\n                <span \nclass="steps__progress-line__subtitle" ng-if="!step.title">{{step.desc}}</span>\n\n            </div>\n            <div class="steps__progress-line__dots" \nng-if="hasSubItens">\n                <span \naria-label="{{$index === currentSubStep && !!step.subSteps && steps[currentStep] === step ? \'subpasso \' + (currentSubStep+1)+ \' de \' + step.subSteps.length : \'\'}}" \nng-repeat="sub in step.subSteps" \nng-class="{\'is-active\': $index === currentSubStep && !!step.subSteps && steps[currentStep] === step}">\n                </span>\n            </div>\n        </li>\n    </ul>\n\n    \n<ng-include src="getStepTemplateUrl()"></ng-include>\n    <ng-include \nsrc="getSubStepTemplateUrl()"></ng-include>\n\n    <br>\n    <br>\n\n    <div \nclass="btn-group jc-fe steps__buttons">\n\n        <button \nng-if="showPreviousStep()" class="btn btn--default" name="previous" \nng-click="gotoPreviousStep(steps[currentStep].previousValidation);">\n\n            <i ng-if="!validatingPrev" class="ci ci--angle-left"></i>\n            <i ng-if="!!validatingPrev" class="mi mi--refresh ci--spin"></i>\n            <span>{{steps[currentStep].previousLabel || "Anterior"}}</span>\n        </button>\n\n        <button ng-if="showPreviousSubStep()" \nclass="btn btn--default" name="previous" \nng-click="gotoPreviousSubStep(steps[currentStep].subSteps[currentSubStep].previousValidation);">\n\n            <i ng-if="!validatingPrev" class="ci ci--angle-left"></i>\n            <i ng-if="!!validatingPrev" class="mi mi--refresh ci--spin"></i>\n            <span>\n{{steps[currentStep].subSteps[currentSubStep].previousLabel || "Anterior"}}\n</span>\n        </button>\n\n        <button ng-if="showNextStep()" \nclass="btn btn--default" name="next" \nng-click="gotoNextStep(steps[currentStep].nextValidation);">\n\n            \n<span>{{steps[currentStep].nextLabel || "Prximo"}}\n\n            </span>\n            <i ng-if="!validatingNext" class="ci ci--angle-right"></i>\n            <i ng-if="!!validatingNext" class="mi mi--refresh ci--spin"></i>\n        </button>\n\n        <button ng-if="showNextSubStep()" \nclass="btn btn--default" name="next" \nng-click="gotoNextSubStep(steps[currentStep].subSteps[currentSubStep].nextValidation);">\n\n            <span>\n{{steps[currentStep].subSteps[currentSubStep].nextLabel || "Prximo"}}</span>\n            <i ng-if="!validatingNext" class="ci ci--angle-right"></i>\n            <i ng-if="!!validatingNext" class="mi mi--refresh ci--spin"></i>\n        </button>\n\n        <button ng-if="showSave()" \nclass="btn btn--primary" name="next" \nng-click="finalValidation((steps[currentStep].subSteps ? steps[currentStep].subSteps[currentSubStep] : steps[currentStep]).finalValidation);">\n            <span>\n{{(steps[currentStep].subSteps ? steps[currentStep].subSteps[currentSubStep].saveLabel : steps[currentStep].saveLabel) || "Salvar"}}\n</span>\n            <i ng-if="!validatingSave" \nclass="mi {{saveIcon || \'mi--done\'}}"></i>\n            <i \nng-if="!!validatingSave" class="mi mi--refresh ci--spin"></i>\n        </button>\n\n    </div>\n</div>\n')}])}(),function(){"use strict";function a(){function a(a,c){function d(){a.steps[a.currentStep]||(a.currentStep>=a.steps.length?a.currentStep=a.steps.length-1:a.currentStep=0)}function e(){a.steps[a.currentStep].subSteps&&!a.steps[a.currentStep].subSteps[a.currentSubStep]&&(a.currentSubStep>=a.steps[a.currentStep].subSteps.length?a.currentSubStep=a.steps[a.currentStep].subSteps.length-1:a.currentSubStep=0)}a.currentStep=a.selectedStep?a.selectedStep-1:0,a.currentSubStep=a.selectedSubStep?a.selectedSubStep-1:0,d(),e(),a.$watch("selectedStep",function(b){b&&(a.currentStep=b-1),d()}),a.$watch("selectedSubStep",function(b){b&&(a.currentSubStep=b-1),e()}),a.type?(angular.element(c[0].firstElementChild).addClass("steps__progress-line--"+a.type),b[a.type]&&(a.hasSubItens=!0)):a.hasSubItens=!1,a.size&&angular.element(c[0].firstElementChild).addClass("steps__progress-line--"+a.size)}function c(a,b,c,d){function e(){if(u){var a=d[0].children[0].children;angular.forEach(a,function(a){if(angular.element(a).hasClass("is-active"))return void a.focus()})}}function f(){if(!a.hasSubItens||!a.steps[a.currentStep].subSteps)return a.steps[a.currentStep].templateUrl}function g(){if(a.hasSubItens&&a.steps[a.currentStep].subSteps)return a.steps[a.currentStep].subSteps[a.currentSubStep].templateUrl}function h(b){m(b,"validatingPrev",function(){a.currentStep>0&&(n(a.previousLastSubStep)&&a.hasSubItens&&a.steps[a.currentStep-1].subSteps&&(a.currentSubStep=a.steps[a.currentStep-1].subSteps.length-1),a.currentStep-=1,setTimeout(function(){e()},10))})}function i(b){m(b,"validatingNext",function(){a.currentStep<a.steps.length-1&&(a.steps[a.currentStep]&&a.steps[a.currentStep].subSteps&&a.hasSubItens?a.isSubStep=!0:a.isSubStep=!1,a.currentStep+=1,setTimeout(function(){e()},10))})}function j(b){m(b,"validatingPrev",function(){a.steps[a.currentStep].subSteps[a.currentSubStep-1]?a.currentSubStep-=1:(a.currentSubStep=0,a.currentStep-=1,a.isSubStep=!1),setTimeout(function(){e()},10)})}function k(b){m(b,"validatingNext",function(){a.steps[a.currentStep].subSteps[a.currentSubStep+1]?a.currentSubStep+=1:(a.currentSubStep=0,a.currentStep+=1,a.isSubStep=!1),setTimeout(function(){e()},10)})}function l(a){m(a,"validatingSave",angular.noop)}function m(b,d,e){a[d]=!0,c.resolve(angular.isUndefined(b)||b()).then(function(b){a[d]=!1,b&&e()})}function n(a){return!!angular.isUndefined(a)||!!a}function o(){return(!t()||!a.hasSubItens)&&a.currentStep>0}function p(){return(!t()||!a.hasSubItens)&&a.currentStep<a.steps.length-1}function q(){return!!t()&&a.hasSubItens&&(a.currentSubStep>0||a.currentStep>0)}function r(){return!!t()&&a.hasSubItens&&!s()}function s(){return a.currentStep===a.steps.length-1&&(!t()||!a.hasSubItens||!!t()&&a.hasSubItens&&a.currentSubStep===t().length-1)}function t(){return a.steps[a.currentStep].subSteps}a.currentStep=a.selectedStep||0,a.currentSubStep=0,a.getStepTemplateUrl=f,a.getSubStepTemplateUrl=g,a.gotoPreviousStep=h,a.gotoNextStep=i,a.gotoPreviousSubStep=j,a.gotoNextSubStep=k,a.finalValidation=l,a.showPreviousStep=o,a.showNextStep=p,a.showPreviousSubStep=q,a.showNextSubStep=r,a.showSave=s;var u=!1;d.on("click",function(a){u=!a.clientX})}var d={link:a,replace:!0,restrict:"E",scope:{type:"@bbType",steps:"=bbSteps",selectedStep:"=bbSelectedStep",selectedSubStep:"=bbSelectedSubStep",previousLastSubStep:"=bbPreviousLastSubStep",scope:"=bbStepsScope",saveIcon:"@bbSaveIcon",size:"@bbSize"},templateUrl:"bb/steps.html",transclude:!0,controller:c};return c.$inject=["$scope","$timeout","$q","$element"],d}angular.module("bb.steps",["bb.steps.tmpl"]).directive("bbSteps",a);const b={process:!0,inline:!1,only:!0}}(),function(){"use strict";function a(a){function b(b,e,f){a(function(){function a(a,b){function e(a){return c(a,"background-color")===d?"body"!==a.tagName.toLowerCase()?e(a.parentNode):b||d:c(a,"background-color")}return e(a)}var g=e[0];if("table"===g.tagName.toLowerCase()){var h=b.$eval(f.bbTableScroll)||{},i=g.parentElement,j=i.offsetWidth,k=parseInt(h.width||i.offsetWidth),l=parseInt(h.height||i.offsetHeight);if(!(g.offsetWidth<=k&&g.offsetHeight<=l)){var m=function(){var a=document.createElement("div");a.style.cssText="height: 50px; width: 50px; overflow: scroll",a.style.visible="hidden",document.body.appendChild(a);var b=document.createElement("div");b.style.height="99px",a.appendChild(b);var c=50-a.clientWidth;return document.body.removeChild(a),c}();g.style.width=g.divWidth+"px";var n=document.createElement("div");n.style.cssText="overflow: hidden; width: "+k+"px; height: "+l+"px";var o=document.createElement("div");o.style.cssText="overflow: hidden; position: relative; width: "+k+"px; z-index: 1",h.headerCss&&o.classList.add(h.headerCss);var p=g.cloneNode(!0),q=g.cloneNode(!0),r=p.querySelector("thead"),s=g.querySelector("thead"),t=p.querySelector("tbody"),u=g.querySelector("tbody"),v=q.querySelector("tfoot"),w=g.querySelector("tfoot");r&&s&&t&&u&&(p.replaceChild(s,r),g.insertBefore(r,u)),v&&w&&t&&u&&(q.replaceChild(w,v),g.insertBefore(v,u.nextSibling)),p.width=g.clientWidth+"px",p.removeChild(p.getElementsByTagName("tbody")[0]),p.deleteTFoot(),q.width=g.offsetWidth+"px",q.removeChild(q.getElementsByTagName("tbody")[0]),q.deleteTHead();var x=null,y=g.getElementsByTagName("thead"),z=p.getElementsByTagName("th"),A=q.getElementsByTagName("td");if(y[0])for(var B=y[0].getElementsByTagName("th"),C=0;C<B.length;C++)!function(b){var c=B[b],d=c.offsetWidth;null==x&&(x=h.backgroundcolor||a(c,null)),"rgba(0, 0, 0, 0)"!==x&&"transparent"!==x||(x="#fff"),c.style.width=d+"px",z[b]&&(z[b].onclick=function(){c.click()},z[b].style.width=d+"px"),A[b]&&(A[b].onclick=function(){c.click()},A[b].style.width=d+"px")}(C);var D=document.createElement("div");D.style.cssText="overflow: hidden; position: relative; background-color: "+x+"; width: "+k+"px",p.style.cssText="table-layout: fixed; background-color: "+x,q.style.cssText="table-layout: fixed; background-color: "+x,g.style.tableLayout="fixed";var E=document.createElement("div");E.addEventListener("scroll",function(){o.scrollLeft=E.scrollLeft,D.scrollLeft=E.scrollLeft}),g.parentNode.insertBefore(n,g),g.remove(),p.children.length?o.appendChild(p)&&n.appendChild(o):o.remove(),E.appendChild(g),n.appendChild(E),q.children.length?D.appendChild(q)&&n.appendChild(D):D.remove();g.offsetHeight+o.offsetHeight+D.offsetHeight>=l&&(o.style.width=o.offsetWidth-m+"px",D.style.width=D.offsetWidth-m+"px");var F=parseFloat(E.style.marginTop||0);F-=o.offsetHeight;var G=parseFloat(E.style.marginBottom||0);G-=D.offsetHeight,g.offsetWidth+m>=k&&(G-=m),E.style.cssText="position: relative; overflow: auto; margin-top: "+F+"px; margin-bottom: "+G+"px; width: "+k+"px; height: "+l+"px",h.reactive&&function(){window.addEventListener("resize",function(){if(j!==i.offsetWidth){var a=i.offsetWidth;if(h.width&&a>h.width)return;n.style.cssText="overflow: hidden; width: "+a+"px; height: "+l+"px",o.style.cssText="overflow: hidden; position: relative; width: "+(a-m)+"px",E.style.cssText="overflow: auto; margin-top: "+F+"px; margin-bottom: "+G+"px; width: "+a+"px; height: "+(l-m)+"px",D.style.cssText="overflow: hidden; position: relative; width: "+(a-m)+"px",j=a}})}()}}})}function c(a,b){return window.getComputedStyle(a,null).getPropertyValue(b)}var d=function(){var a=document.createElement("div");a.style.background="none",a.style.display="none",document.body.appendChild(a);var b=c(a,"background-color");return document.body.removeChild(a),b}();return{link:b,restrict:"A"}}angular.module("bb.tableScroll",[]).directive("bbTableScroll",a),a.$inject=["$timeout"]}(),function(){"use strict";angular.module("bb.table.tmpl",[]).run(["$templateCache",function(a){a.put("bb/filterRow.html",'<tr ng-show="show_filter" class="ng-table-filters">\n    <th \ndata-title-text="{{$column.titleAlt(this) || $column.title(this)}}" \nng-repeat="$column in $columns" ng-if="$column.show(this)" \nclass="filter {{$column.class(this)}}" \nng-class="params.settings().filterOptions.filterLayout === \'horizontal\' ?\n            \'filter-horizontal\' : \'\'">\n        <div ng-repeat="(name, filter) in $column.filter(this)" \nng-include="config.getTemplateUrl(filter)" class="filter-cell" \nng-class="[\n                getFilterCellCss($column.filter(this),\n                params.settings().filterOptions.filterLayout), $last ? \'last\' : \'\'\n            ]">\n</div>\n    </th>\n</tr>\n'),a.put("bb/groupRow.html",'<tr ng-if="params.hasGroup()" ng-show="$groupRow.show" \nclass="ng-table-group-header">\n    <th \ncolspan="{{getVisibleColumns().length}}" class="sortable" \nng-class="{\n            \'sort-asc\': params.hasGroup($selGroup, \'asc\'),\n            \'sort-desc\':params.hasGroup($selGroup, \'desc\')\n        }">\n        <a href ng-click="isSelectorOpen = !isSelectorOpen" \nclass="ng-table-group-selector">\n            <strong class="sort-indicator">\n{{$selGroupTitle}}</strong>\n            <button \nclass="btn btn--default btn--xs ng-table-group-close" \nng-click="\n                    $groupRow.show = false;\n                    $event.preventDefault();\n                    $event.stopPropagation();\n                ">\n                <span class="glyphicon glyphicon-remove"></span>\n            \n</button>\n            <button \nclass="btn btn--default btn--xs ng-table-group-toggle" \nng-click="\n                    toggleDetail();\n                    $event.preventDefault();\n                    $event.stopPropagation();\n                ">\n                <span class="glyphicon" \nng-class="{\n                        \'glyphicon-resize-small\':\n                            params.settings().groupOptions.isExpanded,\n                        \'glyphicon-resize-full\':\n                            !params.settings().groupOptions.isExpanded\n                    }">\n</span>\n            </button>\n        </a>\n        <div class="list-group" \nng-if="isSelectorOpen">\n            <a href class="list-group-item" \nng-repeat="group in getGroupables()" ng-click="groupBy(group)">\n                <strong>{{getGroupTitle(group)}}</strong>\n                \n<strong ng-class="isSelectedGroup(group) && \'sort-indicator\'"></strong>\n\n            </a>\n        </div>\n    </th>\n</tr>\n'),a.put("bb/header.html","<ng-table-group-row></ng-table-group-row>\n<ng-table-sorter-row>\n</ng-table-sorter-row>\n<ng-table-filter-row></ng-table-filter-row>\n"),a.put("bb/pager.html",'<div class="row" ng-if="params.data.length">\n    <div class="col-sm-8 ta-left" \nng-if="params.settings().counts.length">\n        Visualizar&nbsp;\n        <div \nclass="btn-group">\n            <button type="button" class="btn btn--primary" \nng-repeat="count in params.settings().counts" \nng-class="{\'is-active\': params.count()==count}" ng-click="params.count(count)">\n                <span ng-bind="count"></span>\n            </button>\n        \n</div>\n        &nbsp;registros\n    </div>\n    <div class="col-sm-16 ta-right">\n        <ul class="pagination">\n            <li \nng-class="{\n                    \'is-disabled\': !page.active && !page.current,\n                    \'is-active\': page.current\n                }" \nng-repeat="page in pages" ng-switch="page.type">\n                <a href \nng-switch-when="prev" ng-click="params.page(page.number)">&laquo;</a>\n                <a href ng-switch-when="first" \nng-click="params.page(page.number)">\n                    <span \nng-bind="page.number"></span>\n                </a>\n                <a href \nng-switch-when="page" ng-click="params.page(page.number)">\n                    \n<span ng-bind="page.number"></span>\n                </a>\n                <a \nhref ng-switch-when="more" ng-click="params.page(page.number)">&#8230;</a>\n                <a href ng-switch-when="last" \nng-click="params.page(page.number)">\n                    <span \nng-bind="page.number"></span>\n                </a>\n                <a href \nng-switch-when="next" ng-click="params.page(page.number)">&raquo;</a>\n\n            </li>\n        </ul>\n    </div>\n</div>\n'),a.put("bb/sorterRow.html",'<tr class="ng-table-sort-header">\n    <th class="{{$column.class(this)}}" \ntitle="{{$column.headerTitle(this)}}" ng-repeat="$column in $columns" \nng-class="{\n            \'sortable\': $column.sortable(this),\n            \'sort-asc\': params.sorting()[$column.sortable(this)]==\'asc\',\n            \'sort-desc\': params.sorting()[$column.sortable(this)]==\'desc\'\n        }" \nng-click="sortBy($column, $event)" ng-if="$column.show(this)" \nng-init="template = $column.headerTemplateURL(this)">\n        <div \nng-if="!template" class="ng-table-header" \nng-class="{\'sort-indicator\': params.settings().sortingIndicator == \'div\'}">\n            <span ng-bind="$column.title(this)" \nng-class="{\'sort-indicator\': params.settings().sortingIndicator == \'span\'}">\n</span>\n        </div>\n        <div ng-if="template" ng-include="template">\n</div>\n    </th>\n</tr>\n')}])}(),function(){"use strict";function a(a){a.params.page=1,a.params.count=5,a.settings.counts=[5,10]}angular.module("bb.table",["ngTable","bb.table.tmpl"]).run(a),a.$inject=["ngTableDefaults"]}(),function(){"use strict";function a(){return{restrict:"A",controller:b}}function b(a,b,c){function d(a){g.push(a)}function e(){angular.isDefined(c.bbOneAtOnce)&&g.forEach(function(a){a.elem.removeClass("is-expanded"),a.elemToBeExpanded.removeClass("is-expanded")})}var f=this,g=[];b.addClass("table--expandable"),f.register=d,f.oneAtOnceHandler=e}function c(a){function b(b,c,d,e){c.addClass("table--expandable__trigger");var f;a(function(){f=angular.element(document.querySelectorAll(d.bbExpandableTrigger)),f.addClass("table--expandable__container"),e.register({elem:c,elemToBeExpanded:f})}),c.bind("click",function(){c.hasClass("is-expanded")?(c.removeClass("is-expanded"),f.removeClass("is-expanded")):(e.oneAtOnceHandler(),c.addClass("is-expanded"),f.addClass("is-expanded"))}),c.attr("tabindex","0"),c.bind("focus focusin",function(){c.attr("aria-expanded","false")}),
c.bind("keydown",function(a){13!==a.keyCode&&32!==a.keyCode||(c.hasClass("is-expanded")?(c.removeClass("is-expanded"),f.removeClass("is-expanded"),c.attr("aria-expanded","false")):(e.oneAtOnceHandler(),c.addClass("is-expanded"),f.addClass("is-expanded"),c.attr("aria-expanded","true")))})}return{restrict:"A",link:b,require:"^bbExpandableTable"}}angular.module("bb.table").directive("bbExpandableTable",a).directive("bbExpandableTrigger",c),b.$inject=["$scope","$element","$attrs"],c.$inject=["$timeout"]}(),function(){"use strict";angular.module("bb.tabs.tmpl",[]).run(["$templateCache",function(a){a.put("bb/tabs-tab.html",'<li class="tabs__tab" \nng-class="{\'is-active\': active, \'is-disabled\': disabled}" role="presentation">\n    <a href class="tabs__link" ng-click="select()" bb-tab-heading-transclude \nrole="tab" aria-selected="{{active ? true : false}}" \ntabindex="{{ disabled ? \'-1\' : \'\' }}">{{heading}}</a>\n</li>\n'),a.put("bb/tabs.html",'<div class="tabs">\n    <ul class="tabs__nav tabs--{{tabs.type || \'tabs\'}}" \nng-class="{\'tabs--justified\': justified, \'tabs--inner\': inner}" role="tablist" \nng-transclude></ul>\n    <div class="tabs__content">\n        <div \nclass="tabs__pane" ng-repeat="tab in tabs.tabs" \nng-class="{\'is-visible\': tabs.active === tab.index}" \nbb-tab-content-transclude="tab" \ntabindex="{{ tabs.active === tab.index ? \'0\' : \'-1\' }}" \naria-hidden="{{ tabs.active === tab.index ? false : true }}" role="tabpanel">\n</div>\n    </div>\n</div>\n')}])}(),function(){"use strict";function a(a){function b(a){for(var b=0;b<e.tabs.length;b+=1)if(e.tabs[b].index===a)return b}var c,d,e=this;e.tabs=[],e.select=function(a){if(!d){var f=b(c),g=e.tabs[f];g&&(g.tab.onDeselect(),g.tab.active=!1);var h=e.tabs[a];h?(h.tab.onSelect(),h.tab.active=!0,e.active=h.index,c=h.index):!h&&angular.isNumber(c)&&(e.active=null,c=null)}},e.addTab=function(a){if(e.tabs.push({tab:a,index:a.index}),e.tabs.sort(function(a,b){return a.index>b.index?1:a.index<b.index?-1:0}),a.index===e.active||!angular.isNumber(e.active)&&1===e.tabs.length){var c=b(a.index);e.select(c)}},e.removeTab=function(a){var c=b(a.index);if(a.index===e.active){var d=c===e.tabs.length-1?c-1:c+1%e.tabs.length;e.select(d)}e.tabs.splice(c,1)},a.$watch("tabs.active",function(a){angular.isNumber(a)&&a!==c&&e.select(b(a))}),a.$on("$destroy",function(){d=!0})}function b(){function a(a,b,c){a.justified=!!angular.isDefined(c.bbJustified)&&a.$parent.$eval(c.bbJustified),a.inner=!!angular.isDefined(c.bbInner)&&a.$parent.$eval(c.bbInner),angular.isUndefined(c.bbActive)&&(a.active=0)}return{bindToController:{active:"=?bbActive",type:"@bbType"},controller:"bbTabsController",controllerAs:"tabs",link:a,replace:!0,scope:{},templateUrl:function(a,b){return b.templateUrl||"bb/tabs.html"},transclude:!0}}function c(a){function b(b,c,d,e,f){b.disabled=!1,d.bbDisable&&b.$parent.$watch(a(d.bbDisable),function(a){b.disabled=!!a}),angular.isUndefined(d.bbIndex)&&(e.tabs&&e.tabs.length?b.index=Math.max.apply(null,e.tabs.map(function(a){return a.index}))+1:b.index=0),b.select=function(){if(!b.disabled){for(var a,c=0;c<e.tabs.length;c+=1)if(e.tabs[c].tab===b){a=c;break}e.select(a)}},e.addTab(b),b.$on("$destroy",function(){e.removeTab(b)}),b.$transcludeFn=f}return{controller:function(){},controllerAs:"tab",link:b,replace:!0,require:"^bbTabs",scope:{index:"=?bbIndex",heading:"@?bbHeading",onSelect:"&bbOnSelect",onDeselect:"&bbOnDeselect"},templateUrl:function(a,b){return b.templateUrl||"bb/tabs-tab.html"},transclude:!0}}function d(){function a(a,b){a.$watch("headingElement",function(a){a&&(b.html(""),b.append(a))})}return{link:a,require:"^bbTab",restrict:"A"}}function e(){function a(a,c,d){var e=a.$eval(d.bbTabContentTransclude).tab;e.$transcludeFn(e.$parent,function(a){angular.forEach(a,function(a){b(a)?e.headingElement=a:c.append(a)})})}function b(a){return a.tagName&&(a.hasAttribute("bb-tab-heading")||a.hasAttribute("data-bb-tab-heading")||a.hasAttribute("x-bb-tab-heading")||"bb-tab-heading"===a.tagName.toLowerCase()||"data-bb-tab-heading"===a.tagName.toLowerCase()||"x-bb-tab-heading"===a.tagName.toLowerCase())}return{link:a,require:"^bbTabs",restrict:"A"}}angular.module("bb.tabs",["bb.tabs.tmpl"]).controller("bbTabsController",a).directive("bbTabs",b).directive("bbTab",c).directive("bbTabHeadingTransclude",d).directive("bbTabContentTransclude",e),a.$inject=["$scope"],c.$inject=["$parse"]}(),function(){"use strict";angular.module("bb.timeline.tmpl",[]).run(["$templateCache",function(a){a.put("bb/timeline-item.html",'<li ng-class="{ \'timeline--{{status}}\' : status}" role="listitem" tabindex="0" \naria-label="Data: {{dateTime}} {{ref}}. {{desc}}. {{ details ? \'Mais informaes: \' + details : \'\'}}">\n    <time ng-hide="mode === \'compact\'">\n        {{date}}  s <small>{{time}}\n</small>\n    </time>\n    <article ng-class="{\'is-open\': isOpened}">\n        <i \nclass="{{ icon }}" ng-if="icon"></i>\n        <img ng-if="imageUrl" \nng-src="{{ imageUrl }}">\n\n        <time ng-show="mode === \'compact\'">\n{{dateTime}}</time>\n\n        <h5>{{title}}</h5>\n        <p>{{desc}}</p>\n        <small>{{ref}}</small>\n\n        <span ng-show="details" \naria-hidden="true">\n        - <a href \nclass="timeline__icon timeline__moreinfo" ng-click="isOpened = !isOpened" \naria-hidden="true"> {{isOpened ? \'Menos\' : \'Mais\' }} informaes</a>\n        \n</span>\n\n        <div ng-bind-html="details" class="timeline__details" \ntabindex="{{ isOpened ? \'0\' : \'-1\' }}"></div>\n    </article>\n</li>\n'),a.put("bb/timeline.html",'<ul class="timeline" ng-transclude tabindex="0" role="list" \naria-label="{{ title ? title + \'.\' : \'Linha do tempo.\'}}"></ul>')}])}(),function(){"use strict";function a(){return{replace:!0,restrict:"E",templateUrl:"bb/timeline.html",transclude:!0,scope:{title:"@?bbTitle"}}}function b(){return{replace:!0,restrict:"E",scope:{date:"@?bbDate",time:"@?bbTime",desc:"@?bbDesc",title:"@?bbTitle",ref:"@?bbRef",status:"@?bbStatus",details:"@?bbDetails",imageUrl:"@?bbImageUrl",icon:"@?bbIcon",mode:"@?bbMode"},templateUrl:"bb/timeline-item.html",link:function(a,b){function c(b){var c=new Date,d=Math.floor((c.getTime()-b.getTime())/864e5),e=a.time?"  s "+a.time:"";if(0===d)return"Hoje"+e;if(1===d)return"Ontem";if(d<7)return"H "+d+" dias";if(d>=7&&d<=28){var f=Math.floor(d/7);return"H "+f+" "+(1===f?"semana":"semanas")}if(d>28&&c.getMonth()===b.getMonth()&&c.getFullYear()===b.getFullYear())return"H "+Math.floor(d/7)+" semanas";if(d>28&&d<366){var g=Math.floor(d/30);return"H "+g+" "+(1===g?"ms":"meses")}return a.date+e}if((a.imageUrl||a.icon)&&b.parent().addClass("timeline--spaced"),"compact"===a.mode?(b.parent().addClass("timeline--compact"),a.imageUrl||a.icon||b.addClass("timeline--compact--no-image")):b.parent().addClass("timeline--default"),a.imageUrl||a.icon){var d=a.imageUrl?"timeline__image":"timeline__icon",e=b[0].querySelector("article"),f=b[0].querySelector("time");e.classList.add(d),f.classList.add(d)}!function(){if(a.date){var b=a.date.split("/"),d=new Date(b.pop(),b.pop()-1,b.pop());a.dateTime=c(d)}}()}}}angular.module("bb.timeline",["bb.timeline.tmpl","ngSanitize"]).directive("bbTimeline",a).directive("bbTimelineItem",b)}(),function(){"use strict";angular.module("bb.toast.tmpl",[]).run(["$templateCache",function(a){a.put("bb/toast.html","<div \nclass=\"toast toast--{{ size === 'sm' || size === 'md' || size === 'lg' ? size : 'md' }}{{ position ? ' toast__position toast__position--'+position: '' }}{{ onCloseExists ? ' toast--cursor': '' }}\" \nng-class=\"{ 'toast--notitle' : !title }\" ng-click=\"go()\" tabindex=\"0\" \nng-mouseenter=\"cancelDismiss()\" ng-mouseleave=\"startDismiss()\">\n    <div \nclass=\"toast__icon\" ng-class=\" type ? 'toast--'+type : 'toast--default' \">\n        <i class=\"{{ icon ? icon : 'mi mi--notifications' }}\"></i>\n    </div>\n    <span class=\"sr-only\">\nNotificao{{ type === 'primary' ? ' primria': type === 'warning' ? ' de alerta': type === 'sucesso' ? ' de sucesso': type === 'info' ? ' informativa': type === 'danger' ? ' de alerta': type === 'primary' ? ' de funcionalidade': '' }}.\n</span>\n"+'    <div class="toast__title" ng-if="title">\n        <span \nclass="sr-only">Ttulo.</span>\n        <span>{{ title }}</span>\n    </div>\n    \n<div class="toast__message" ng-if="message" \nng-class=" { \'toast--noaction\' : !action } " \naria-label="Mensagem: {{ message }}">\n            <span class="sr-only">\nMensagem.</span>\n            <span>{{ message }}</span>\n    </div>\n    <div \nclass="toast__action" ng-if="action">\n        <button class="btn btn--link" \nng-click="go();$event.stopPropagation()">{{ action }}<span class="sr-only">\n.  Clique para ir para a ao da notificao.</span></button>\n    </div>\n    \n<div class="toast__close" ng-click="close();$event.stopPropagation()" \ntabindex="0" aria-label="Fechar notificao.">\n        <i class="mi mi--close">\n</i>\n    </div>\n</div>\n')}])}(),function(){"use strict";function a(a,b){var c;a.size||(a.size="md"),a.cancelDismiss=function(){a.timer&&clearTimeout(c)},a.hide=function(){b.addClass("toast--close"),setTimeout(function(){b.addClass("toast--hidden")},500)},a.startDismiss=function(){a.timer&&(b.hasClass("toast--close")||(c=setTimeout(function(){a.hide(),a.onDismiss()},a.timer)))},a.timer&&a.startDismiss(),a.close=function(){a.hide(),a.onDismiss()},a.go=function(){a.hide(),a.onClose(),a.onDismiss()}}function b(){return{restrict:"E",replace:!0,scope:{type:"@?bbType",icon:"@?bbIcon",title:"@?bbTitle",message:"@?bbMessage",action:"@?bbAction",position:"@?bbPosition",size:"@?bbSize",timer:"=?bbTimer",onClose:"&bbOnClose",onCloseExists:"@bbOnClose",onDismiss:"&bbOnDismiss"},templateUrl:"bb/toast.html",controller:"bbToastController"}}angular.module("bb.toast",["bb.toast.tmpl"]).controller("bbToastController",a).directive("bbToast",b),a.$inject=["$scope","$element"]}(),function(){"use strict";angular.module("bb.toggleSwitch.tmpl",[]).run(["$templateCache",function(a){a.put("bb/toggle-switch.html",'<label class="toggle-switch">\n    <input role="switch" \naria-checked="{{value}}" type="checkbox" ng-model="value" \nclass="toggle-switch__checkbox">\n    <span class="toggle-switch__label">\n\n        {{label}}\n    </span>\n</label>')}])}(),function(){"use strict";function a(){return{restrict:"E",replace:!0,templateUrl:"bb/toggle-switch.html",scope:{label:"@bbLabel",value:"=bbValue"}}}angular.module("bb.toggleSwitch",["bb.toggleSwitch.tmpl"]).directive("bbToggleSwitch",a)}(),function(){"use strict";angular.module("bb.tooltip.tmpl",[]).run(["$templateCache",function(a){a.put("bb/tooltip-popup.html",'<div role="tooltip" class="tooltip" bb-tooltip-classes \nbb-animation-class="fade" ng-class="{\'is-open\': isOpen()}">\n    <div \nclass="tooltip__arrow"></div>\n    <div class="tooltip__inner" \nng-bind-html="contentExp()"></div>\n</div>\n'),a.put("bb/tooltip-template.html",'<div role="tooltip" class="tooltip" bb-tooltip-classes \nbb-animation-class="fade" ng-class="{\'is-open\': isOpen()}">\n    <div \nclass="tooltip__arrow"></div>\n    <div class="tooltip__inner" \nbb-tooltip-template-transclude="contentExp()" \nbb-template-transclude-scope="originScope()"></div>\n</div>\n'),a.put("bb/tooltip.html",'<div role="tooltip" class="tooltip" bb-tooltip-classes \nbb-animation-class="fade" ng-class="{\'is-open\': isOpen()}">\n    <div \nclass="tooltip__arrow"></div>\n    <div class="tooltip__inner" \nng-bind="content"></div>\n</div>\n')}])}(),function(){"use strict";function a(){function a(a){var b=/[A-Z]/g;return a.replace(b,function(a,b){return(b?"-":"")+a.toLowerCase()})}var b={placement:"top",placementClassPrefix:"tooltip--",animation:!0,popupDelay:0,popupCloseDelay:0,useContentExp:!1,insertAriaAttr:!0},c={mouseenter:"mouseleave",click:"click",outsideClick:"outsideClick",focus:"blur",none:""},d={};this.options=function(a){angular.extend(d,a)},this.setTriggers=function(a){angular.extend(c,a)},this.$get=["$window","$compile","$timeout","$document","$bbPosition","$interpolate","$rootScope","$parse","$$stackedMap",function(e,f,g,h,i,j,k,l,m){var n=m.createNew();return function(e,m,o,p){function q(a){var b=(a||p.trigger||o).split(" ");return{show:b,hide:b.map(function(a){return c[a]||a})}}p=angular.extend({},b,d,p);var r=a(e),s=j.startSymbol(),t=j.endSymbol(),u="<div "+r+'-popup bb-title="'+s+"title"+t+'" '+(p.useContentExp?'bb-content-exp="contentExp()" ':'bb-content="'+s+"content"+t+'" ')+'bb-placement="'+s+"placement"+t+'" bb-popup-class="'+s+"popupClass"+t+'" bb-animation="animation" bb-is-open="isOpen"bb-origin-scope="origScope" style="visibility: hidden; display: block; top: -9999px; left: -9999px;"></div>';return{compile:function(){var a=f(u);return function(b,c,d){function f(){L.isOpen?o():j()}function j(){K&&!b.$eval(d[m+"Enable"])||(u(),x(),L.popupDelay?F||(F=g(r,L.popupDelay,!1)):r())}function o(){s(),L.popupCloseDelay?G||(G=g(t,L.popupCloseDelay,!1)):t()}function r(){if(s(),u(),!L.content)return angular.noop;v(),L.$evalAsync(function(){L.isOpen=!0,y(!0),Q()})}function s(){F&&(g.cancel(F),F=null),H&&(g.cancel(H),H=null)}function t(){L&&L.$evalAsync(function(){L&&(L.isOpen=!1,y(!1),L.animation?E||(E=g(w,150,!1)):w())})}function u(){G&&(g.cancel(G),G=null),E&&(g.cancel(E),E=null)}function v(){C||(D=L.$new(),C=a(D,function(a){I?h.find("body").append(a):c.after(a)}),z(),k.$emit("tooltip-show",c),p.insertAriaAttr&&setTimeout(function(){c.attr("aria-describedby","idtooltip"+L.$id),c[0].nextSibling&&angular.element(c[0].nextSibling).attr("id","idtooltip"+L.$id)},10))}function w(){s(),u(),A(),C&&(C.remove(),C=null),D&&(D.$destroy(),D=null)}function x(){L.title=d[m+"Title"],L.content=O?O(b):d[e],L.popupClass=d[m+"Class"],L.placement=angular.isDefined(d[m+"Placement"])?d[m+"Placement"]:p.placement;var a=parseInt(d[m+"PopupDelay"],10),c=parseInt(d[m+"PopupCloseDelay"],10);L.popupDelay=isNaN(a)?p.popupDelay:a,L.popupCloseDelay=isNaN(c)?p.popupCloseDelay:c}function y(a){N&&angular.isFunction(N.assign)&&N.assign(b,a)}function z(){P.length=0,O?(P.push(b.$watch(O,function(a){L.content=a,!a&&L.isOpen&&t()})),P.push(D.$watch(function(){M||(M=!0,D.$$postDigest(function(){M=!1,L&&L.isOpen&&Q()}))}))):P.push(d.$observe(e,function(a){L.content=a,!a&&L.isOpen?t():Q()})),P.push(d.$observe(m+"Title",function(a){L.title=a,L.isOpen&&Q()})),P.push(d.$observe(m+"Placement",function(a){L.placement=a||p.placement,L.isOpen&&Q()}))}function A(){P.length&&(angular.forEach(P,function(a){a()}),P.length=0)}function B(a){L&&L.isOpen&&C&&(c[0].contains(a.target)||C[0].contains(a.target)||o())}k.$emit("tooltip-directive-on",c),setTimeout(function(){c[0].getAttribute("tabindex")||c.attr("tabindex","0")},10);var C,D,E,F,G,H,I=!!angular.isDefined(p.appendToBody)&&p.appendToBody,J=q(void 0),K=angular.isDefined(d[m+"Enable"]),L=b.$new(!0),M=!1,N=!!angular.isDefined(d[m+"IsOpen"])&&l(d[m+"IsOpen"]),O=!!p.useContentExp&&l(d[e]),P=[],Q=function(){C&&C.html()&&(H||(H=g(function(){C.css({top:0,left:0});var a=i.positionElements(c,C,L.placement,I);C.css({top:a.top+"px",left:a.left+"px",visibility:"visible"}),p.placementClassPrefix&&C.removeClass("top bottom left right"),C.removeClass(p.placementClassPrefix+"top "+p.placementClassPrefix+"top-left "+p.placementClassPrefix+"top-right "+p.placementClassPrefix+"bottom "+p.placementClassPrefix+"bottom-left "+p.placementClassPrefix+"bottom-right "+p.placementClassPrefix+"left "+p.placementClassPrefix+"left-top "+p.placementClassPrefix+"left-bottom "+p.placementClassPrefix+"right "+p.placementClassPrefix+"right-top "+p.placementClassPrefix+"right-bottom");var b=a.placement.split("-");C.addClass(b[0]+" "+p.placementClassPrefix+a.placement),i.positionArrow(C,a.placement),H=null},0,!1)))};L.origScope=b,L.isOpen=!1,n.add(L,{close:t}),p.insertAriaAttr||c.on("keydown",function(a){27===a.which?o():13===a.which&&f()}),L.contentExp=function(){return L.content},d.$observe("disabled",function(a){a&&s(),a&&L.isOpen&&t()}),N&&b.$watch(N,function(a){L&&!a===L.isOpen&&f()});var R=function(){J.show.forEach(function(a){"outsideClick"===a?c.off("click",f):(c.off(a,j),c.off(a,f))}),J.hide.forEach(function(a){"outsideClick"===a?h.off("click",B):c.off(a,o)})};!function(){var a=d[m+"Trigger"];R(),J=q(a),"none"!==J.show&&J.show.forEach(function(a,b){"outsideClick"===a?(c.on("click",f),h.on("click",B)):a===J.hide[b]?c.on(a,f):a&&(c.on(a,j),c.on(J.hide[b],o))})}();var S=b.$eval(d[m+"Animation"]);L.animation=angular.isDefined(S)?!!S:p.animation;var T=!1,U=m+"AppendToBody";U in d&&(T=""==d[U]||b.$eval(d[U])),I=T||I,b.$on("$destroy",function(){R(),w(),n.remove(L),L=null})}}}}}]}function b(a,b,c,d){function e(e,f,g){var h,i,j,k=e.$eval(g.bbTemplateTranscludeScope),l=0,m=function(){i&&(i.remove(),i=null),h&&(h.$destroy(),h=null),j&&(a.leave(j).then(function(){i=null}),i=j,j=null)};e.$watch(b.parseAsResourceUrl(g.bbTooltipTemplateTransclude),function(b){var g=++l;b?(d(b,!0).then(function(d){if(g===l){var e=k.$new(),i=d,n=c(i)(e,function(b){m(),a.enter(b,f)});h=e,j=n,h.$emit("$includeContentLoaded",b)}},function(){g===l&&(m(),e.$emit("$includeContentError",b))}),e.$emit("$includeContentRequested",b)):m()}),e.$on("$destroy",m)}return{link:e}}function c(a){function b(b,c,d){if(b.placement){var e=a.parsePlacement(b.placement);c.addClass(e[0])}else c.addClass("top");b.popupClass&&c.addClass(b.popupClass),b.animation()&&c.addClass(d.bbAnimationClass)}return{link:b,restrict:"A"}}function d(){return{replace:!0,scope:{content:"@?bbContent",placement:"@?bbPlacement",popupClass:"@?bbPopupClass",animation:"&?bbAnimation",isOpen:"&?bbIsOpen"},templateUrl:"bb/tooltip.html"}}function e(a){return a("bbTooltip","bb","mouseenter focus")}function f(){return{replace:!0,scope:{contentExp:"&?bbContentExp",placement:"@?bbPlacement",popupClass:"@?bbPopupClass",animation:"&?bbAnimation",isOpen:"&?bbIsOpen",originScope:"&?bbOriginScope"},templateUrl:"bb/tooltip-template.html"}}function g(a){return a("bbTooltipTemplate","bb","mouseenter focus",{useContentExp:!0})}function h(){return{replace:!0,scope:{contentExp:"&?bbContentExp",placement:"@?bbPlacement",popupClass:"@?bbPopupClass",animation:"&?bbAnimation",isOpen:"&?bbIsOpen"},templateUrl:"bb/tooltip-popup.html"}}function i(a){return a("bbTooltipHtml","bb","mouseenter focus",{useContentExp:!0})}angular.module("bb.tooltip",["ngSanitize","bb.tooltip.tmpl","bb.position","bb.stackedMap"]).provider("$bbTooltip",a).directive("bbTooltipTemplateTransclude",b).directive("bbTooltipClasses",c).directive("bbTooltipPopup",d).directive("bbTooltip",e).directive("bbTooltipTemplatePopup",f).directive("bbTooltipTemplate",g).directive("bbTooltipHtmlPopup",h).directive("bbTooltipHtml",i),b.$inject=["$animate","$sce","$compile","$templateRequest"],c.$inject=["$bbPosition"],e.$inject=["$bbTooltip"],g.$inject=["$bbTooltip"],i.$inject=["$bbTooltip"]}(),function(){"use strict";angular.module("bb.treeView.tmpl",[]).run(["$templateCache",function(a){a.put("bb/tree-view.html",'<script type="text/ng-template" id="nodes_renderer.html">\n    <div ui-tree-handle ng-class="{\'bb-no-drag\': config.noDrag}" class="tree-node tree-node-content fx jc-sb">\n        <div class="fx" style="flex: 1">\n            <a href ng-enter="toggle(this)" aria-label="{{node.title}}" aria-expanded="{{!collapsed}}" class="btn btn--link btn--xs m-n p-n" ng-if="node.nodes && node.nodes.length > 0" data-nodrag ng-click="toggle(this)">\n                <i class="mi fz-xl" ng-class="{ \'mi--keyboard-arrow-down\':  collapsed, \'mi--keyboard-arrow-up\': !collapsed }"></i>\n            </a>\n            \x3c!-- Leitor de tela --\x3e\n            <div aria-label="{{node.title}}" tabindex="0" style="flex: 1" ng-if="config.templateUrl && !(node.nodes && node.nodes.length > 0)" ng-include="config.templateUrl"></div>\n            <div style="flex: 1" ng-if="config.templateUrl && node.nodes && node.nodes.length > 0" ng-include="config.templateUrl"></div>\n            <div aria-label="{{node.title}}" tabindex="0" ng-if="!config.templateUrl && !(node.nodes && node.nodes.length > 0)" ng-model="node.title" class="node-title">{{node.title}}</div>\n            <div ng-if="!config.templateUrl && node.nodes && node.nodes.length > 0" ng-model="node.title" class="node-title">{{node.title}}</div>\n            \x3c!-- Leitor de tela --\x3e\n        </div>\n        <div class="fx ai-c">\n            <span ng-repeat="item in config.options track by $index">\n                <span data-nodrag ng-click="item.callback(this)" ng-if="showRules(item.showRule, node, node.nodes)" class="node-action">\n                    <i role="{{item.type}}" aria-label="{{item.info}}" ng-class="item.classes" style="cursor: pointer;" bb-tooltip="{{item.info}}"></i>\n                </span>\n            </span>\n        </div>\n    </div>\n    <ol role="group" ui-tree-nodes="" ng-model="node.nodes" ng-class="{hidden: collapsed}">\n        <li role="treeitem" ng-repeat="node in node.nodes" ui-tree-node ng-include="\'nodes_renderer.html\'">\n        </li>\n    </ol>\n\n<\/script>\n\n<div class="row tree-view">\n    <div class="col-sm-24">\n        \n<button ng-if="config.expandAll" \nclass="btn tree-view__btn btn--primary btn--xs" ng-click="expandAll()">\nExpandir todos</button>\n        <button ng-if="config.collapseAll" \nclass="btn tree-view__btn btn--primary btn--xs" ng-click="collapseAll()">\nRecolher todos</button>\n    </div>\n</div>\n<div class="row tree-view">\n    <div \nclass="col-sm-24">\n        <div ui-tree data-nodrag="{{config.noDrag}}" \nid="tree-root" role="tree">\n            <ol role="group" ui-tree-nodes \nng-model="config.data">\n                <li role="treeitem" \nng-repeat="node in config.data | filter: config.model" ui-tree-node \ndata-collapsed="!config.startExpanded" ng-include="\'nodes_renderer.html\'"></li>\n                <div ng-class="{\'angular-ui-tree-dropzone\': drag.start}">\n</div>\n            </ol>\n        </div>\n    </div>\n</div>\n\n')}])}(),function(){"use strict";function a(){return{restrict:"EA",templateUrl:"bb/tree-view.html",scope:{btnExpandAll:"=?bbButtonExpandAll",btnCollapseAll:"=?bbButtonCollapseAll",startExpanded:"=?bbStartExpanded",options:"=?bbOptions",data:"=bbData",model:"=?bbTreeViewModel",noDrag:"=?bbNoDrag",templateUrl:"@?bbTemplateUrl"},controller:"bbTreeViewCtrl",link:function(a,b){function c(b){var c=[];return a.data.forEach(function(a){c.push(a.id)}),c}if(a.config={expandAll:"",collapseAll:"",startExpanded:"",options:a.options,model:a.model,data:a.data,noDrag:"",dragEventStart:!1,templateUrl:""},a.config.options&&a.config.options.forEach(function(a){a.showRule||(a.showRule="all"),a.classes=a.icon}),!a.data)throw"Erro de definio: informe um objeto para construir a rvore!";b[0].attributes["bb-template-url"]&&a.$watch("templateUrl",function(b){a.config.templateUrl=a.templateUrl||!1}),b[0].attributes["bb-no-drag"]&&a.$watch("noDrag",function(b){a.config.noDrag=a.noDrag||!1},!0),b[0].attributes["bb-start-expanded"]&&a.$watch("startExpanded",function(b){a.config.startExpanded=a.startExpanded},!0),b[0].attributes["bb-tree-view-model"]&&a.$watch("model",function(b){a.config.model=a.model,a.expandAll(),""===a.config.model&&a.collapseAll()},!0),a.$watch("btnExpandAll",function(b){a.config.expandAll=void 0===a.btnExpandAll||a.btnExpandAll},!0),a.$watch("btnCollapseAll",function(b){a.config.collapseAll=void 0===a.btnCollapseAll||a.btnCollapseAll},!0),a.showRules=function(b,d,e){var f;switch(f=c(a.data),b){case"all":return!!e;case"parent-only":return e&&e.length>0;case"first-parent-only":return-1!==f.indexOf(d.id);case"children-only":return-1===f.indexOf(d.id);case"last-child-only":return!e||0===e.length}},a.drag={start:!1},b.on("mousedown",function(b){a.drag.start=!0}),b.on("mouseup",function(b){a.drag.start=!1})}}}angular.module("bb.treeView",["bb.treeView.tmpl","ui.tree","bb.tooltip"]).directive("bbTreeView",a).directive("ngEnter",function(){return function(a,b,c){b.bind("keydown",function(b){13!==b.which&&32!==b.which||(a.$apply(function(){a.$eval(c.ngEnter,{event:b})}),b.preventDefault())})}})}(),function(){function a(a){a.toggle=function(a){a.toggle()},a.moveLastToTheBeginning=function(){var b=a.minhaArvore.pop();a.minhaArvore.splice(0,0,b)},a.collapseAll=function(){a.$broadcast("angular-ui-tree:collapse-all")},a.expandAll=function(){a.$broadcast("angular-ui-tree:expand-all")}}angular.module("bb.treeView").controller("bbTreeViewCtrl",a),a.$inject=["$scope"]}(),function(){"use strict";angular.module("bb.typeahead.tmpl",[]).run(["$templateCache",function(a){a.put("bb/typeahead-match.html",'<a href tabindex="-1" ng-bind-html="match.label | bbTypeaheadHighlight:query" \nng-attr-title="{{match.label}}"></a>\n\n'),a.put("bb/typeahead-popup.html",'<ul class="dropdown__menu" ng-show="isOpen() && !moveInProgress" \nng-style="{\'top\': position().top + \'px\', \'left\': position().left + \'px\'}" \nrole="listbox" aria-hidden="{{!isOpen()}}">\n    <li id="{{::match.id}}" \nng-repeat="match in matches track by $index" \nng-class="{\'is-active\': isActive($index)}" \nng-mouseenter="selectActive($index)" ng-click="selectMatch($index, $event)" \nrole="option">\n        <div bb-typeahead-match bb-index="$index" \nbb-match="match" bb-query="query" bb-template-url="templateUrl"></div>\n    \n</li>\n</ul>\n'),a.put("bb/typeahead-search.html",'<ul class="dropdown__menu dropdown__menu--search" \nng-show="isOpen() && !moveInProgress" \nng-style="{\'top\': position().top + \'px\', \'left\': position().left + \'px\'}" \nrole="listbox" aria-hidden="{{!isOpen()}}">\n\n    <li class="is-heading">\nResultados</li>\n    <li id="{{::match.id}}" \nng-repeat="match in matches track by $index" \nng-class="{\'is-active\': isActive($index)}" \nng-mouseenter="selectActive($index)" ng-click="selectMatch($index, $event)" \nrole="option">\n\n        <div bb-typeahead-match bb-index="$index" \nbb-match="match" bb-query="query" bb-template-url="templateUrl"></div>\n    \n</li>\n</ul>\n\n')}])}(),function(){"use strict";function a(a,b,c,d,e,f,g,h,i,j,k,l,m){function n(){M.moveInProgress||(M.moveInProgress=!0,M.$digest()),X()}function o(){M.position=C?l.offset(b):l.position(b),M.position.top+=b.prop("offsetHeight")}var p,q,r=[9,13,27,38,40],s=a.$eval(c.bbMinLength);s||0===s||(s=1),a.$watch(c.bbMinLength,function(a){s=a||0===a?a:1});var t=a.$eval(c.bbWaitMs)||0,u=!1!==a.$eval(c.bbEditable);a.$watch(c.bbEditable,function(a){u=!1!==a});var v,w,x=e(c.bbLoading).assign||angular.noop,y=e(c.bbOnSelect),z=!!angular.isDefined(c.bbSelectOnBlur)&&a.$eval(c.bbSelectOnBlur),A=e(c.bbNoResults).assign||angular.noop,B=c.bbInputFormatter?e(c.bbInputFormatter):void 0,C=!!c.bbAppendToBody&&a.$eval(c.bbAppendToBody),D=c.bbAppendTo?a.$eval(c.bbAppendTo):null,E=!1!==a.$eval(c.bbFocusFirst),F=!!c.bbSelectOnExact&&a.$eval(c.bbSelectOnExact),G=e(c.bbIsOpen).assign||angular.noop,H=a.$eval(c.bbShowHint)||!1,I=e(c.ngModel),J=e(c.ngModel+"($$$p)"),K=function(b,c){return angular.isFunction(I(a))&&q&&q.$options&&q.$options.getterSetter?J(b,{$$$p:c}):I.assign(b,c)},L=m.parse(c.bbTypeahead),M=a.$new(),N=a.$on("$destroy",function(){M.$destroy()});M.$on("$destroy",N);var O="typeahead-"+M.$id+"-"+Math.floor(1e4*Math.random());b.attr({"aria-autocomplete":"list","aria-expanded":!1,"aria-owns":O});var P,Q;H&&(P=angular.element("<span></span>"),P.css({display:"block",position:"relative"}),b.after(P),b.css({position:"relative"}),Q=b.clone(),Q.attr("placeholder",""),Q.attr("tabindex","-1"),Q.val(""),Q.css({"background-color":"transparent","border-color":"transparent",color:"#999",left:"0",position:"absolute",top:"0"}),P.append(Q),Q.after(b));var R=angular.element("<div bb-typeahead-popup></div>");R.attr({id:O,"bb-matches":"matches","bb-active":"activeIdx","bb-typeahead-select":"select(activeIdx, evt)","bb-move-in-progress":"moveInProgress","bb-query":"query","bb-typeahead-position":"position","bb-assign-is-open":"assignIsOpen(isOpen)","bb-debounce":"debounceUpdate"}),angular.isDefined(c.bbTemplateUrl)&&R.attr("bb-template-url",c.bbTemplateUrl),angular.isDefined(c.bbPopupTemplateUrl)&&R.attr("bb-popup-template-url",c.bbPopupTemplateUrl),angular.isDefined(c.bbTypeaheadSearch)&&R.attr("bb-popup-template-url","bb/typeahead-search.html");var S=function(){H&&Q.val("")},T=function(){M.matches=[],M.activeIdx=-1,b.attr("aria-expanded",!1),S()},U=function(a){return O+"-option-"+a};M.$watch("activeIdx",function(a){a<0?b.removeAttr("aria-activedescendant"):b.attr("aria-activedescendant",U(a))});var V=function(a,b){return!!(M.matches.length>b&&a)&&a.toUpperCase()===M.matches[b].label.toUpperCase()},W=function(c,d){var e={$viewValue:c};x(a,!0),A(a,!1),f.when(L.source(a,e)).then(function(f){var g=c===p.$viewValue;if(g&&v)if(f&&f.length>0){M.activeIdx=E?0:-1,A(a,!1),M.matches.length=0;for(var h=0;h<f.length;h+=1)e[L.itemName]=f[h],M.matches.push({id:U(h),label:L.viewMapper(M,e),model:f[h]});if(M.query=c,o(),b.attr("aria-expanded",!0),F&&1===M.matches.length&&V(c,0)&&(angular.isNumber(M.debounceUpdate)||angular.isObject(M.debounceUpdate)?k(function(){M.select(0,d)},angular.isNumber(M.debounceUpdate)?M.debounceUpdate:M.debounceUpdate.default):M.select(0,d)),H){var i=M.matches[0].label;angular.isString(c)&&c.length>0&&i.slice(0,c.length).toUpperCase()===c.toUpperCase()?Q.val(c+i.slice(c.length)):Q.val("")}}else T(),A(a,!0);g&&x(a,!1)},function(){T(),x(a,!1),A(a,!0)})};C&&(angular.element(i).on("resize",n),h.find("body").on("scroll",n));var X=k(function(){M.matches.length&&o(),M.moveInProgress=!1},200);M.moveInProgress=!1,M.query=void 0;var Y,Z=function(a){Y=g(function(){W(a)},t)},$=function(){Y&&g.cancel(Y)};T(),M.assignIsOpen=function(b){G(a,b)},M.select=function(d,e){var f,h,i={};w=!0,i[L.itemName]=h=M.matches[d].model,f=L.modelMapper(a,i),K(a,f),p.$setValidity("editable",!0),p.$setValidity("parse",!0),y(a,{$item:h,$model:f,$label:L.viewMapper(a,i),$event:e}),T(),!1!==M.$eval(c.bbFocusOnSelect)&&g(function(){b[0].focus()},0,!1)},b.on("keydown",function(a){if(0!==M.matches.length&&-1!==r.indexOf(a.which)){if(-1===M.activeIdx&&(9===a.which||13===a.which)||9===a.which&&a.shiftKey)return T(),void M.$digest();a.preventDefault();var b;switch(a.which){case 9:case 13:M.$apply(function(){angular.isNumber(M.debounceUpdate)||angular.isObject(M.debounceUpdate)?k(function(){M.select(M.activeIdx,a)},angular.isNumber(M.debounceUpdate)?M.debounceUpdate:M.debounceUpdate.default):M.select(M.activeIdx,a)});break;case 27:a.stopPropagation(),T(),M.$digest();break;case 38:M.activeIdx=(M.activeIdx>0?M.activeIdx:M.matches.length)-1,M.$digest(),b=R.find("li")[M.activeIdx],b.parentNode.scrollTop=b.offsetTop;break;case 40:M.activeIdx=(M.activeIdx+1)%M.matches.length,M.$digest(),b=R.find("li")[M.activeIdx],b.parentNode.scrollTop=b.offsetTop}}}),b.bind("focus",function(a){v=!0,0!==s||p.$viewValue||g(function(){W(p.$viewValue,a)},0)}),b.bind("blur",function(a){z&&M.matches.length&&-1!==M.activeIdx&&!w&&(w=!0,M.$apply(function(){angular.isObject(M.debounceUpdate)&&angular.isNumber(M.debounceUpdate.blur)?k(function(){M.select(M.activeIdx,a)},M.debounceUpdate.blur):M.select(M.activeIdx,a)})),!u&&p.$error.editable&&(p.$viewValue="",b.val("")),v=!1,w=!1});var _=function(a){b[0]!==a.target&&3!==a.which&&0!==M.matches.length&&(T(),j.$$phase||M.$digest())};h.on("click",_);var aa=d(R)(M);a.$on("$destroy",function(){h.off("click",_),(C||D)&&aa.remove(),C&&(angular.element(i).off("resize",n),h.find("body").off("scroll",n)),R.remove(),H&&P.remove()}),C?h.find("body").append(aa):D?angular.element(D).eq(0).append(aa):b.after(aa),this.init=function(b,c){p=b,q=c,M.debounceUpdate=p.$options&&e(p.$options.debounce)(a),p.$parsers.unshift(function(b){return v=!0,0===s||b&&b.length>=s?t>0?($(),Z(b)):W(b):(x(a,!1),$(),T()),u?b:b?void p.$setValidity("editable",!1):(p.$setValidity("editable",!0),null)}),p.$formatters.push(function(b){var c,d,e={};return u||p.$setValidity("editable",!0),B?(e.$model=b,B(a,e)):(e[L.itemName]=b,c=L.viewMapper(a,e),e[L.itemName]=void 0,d=L.viewMapper(a,e),c!==d?c:b)})}}function b(a){
var b=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w\d]*))\s+in\s+([\s\S]+?)$/;return{parse:function(c){var d=c.match(b);if(!d)throw new Error('Expected typeahead specification in form of "_modelValue_ (as _label_)? for _item_ in _collection_" but got "'+c+'".');return{itemName:d[3],source:a(d[4]),viewMapper:a(d[2]||d[1]),modelMapper:a(d[1])}}}}function c(a,b,c){function d(a){return a.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}function e(a){return/<.*>/g.test(a)}var f;return f=b.has("$sanitize"),function(b,g){return!f&&e(b)&&c.warn("Unsafe use of typeahead please use ngSanitize"),b=g?(""+b).replace(new RegExp(d(g),"gi"),"<strong>$&</strong>"):b,f||(b=a.trustAsHtml(b)),b}}function d(){function a(a,b,c,d){d[2].init(d[0],d[1])}return{controller:"bbTypeaheadController",link:a,require:["ngModel","^?ngModelOptions","bbTypeahead"]}}function e(a){function b(b,c,d){b.templateUrl=d.bbTemplateUrl,b.isOpen=function(){var a=b.matches.length>0;return b.assignIsOpen({isOpen:a}),a},b.isActive=function(a){return b.active===a},b.selectActive=function(a){b.active=a},b.selectMatch=function(c,d){var e=b.debounce();angular.isNumber(e)||angular.isObject(e)?a(function(){b.select({activeIdx:c,evt:d})},angular.isNumber(e)?e:e.default):b.select({activeIdx:c,evt:d})}}return{link:b,replace:!0,scope:{matches:"=?bbMatches",query:"=?bbQuery",active:"=?bbActive",position:"&?bbTypeaheadPosition",moveInProgress:"=?bbMoveInProgress",select:"&?bbTypeaheadSelect",assignIsOpen:"&?bbAssignIsOpen",debounce:"&?bbDebounce"},templateUrl:function(a,b){return b.bbPopupTemplateUrl||"bb/typeahead-popup.html"}}}function f(a,b,c){function d(d,e,f){var g=c(f.bbTemplateUrl)(d.$parent)||"bb/typeahead-match.html";a(g).then(function(a){var c=angular.element(a.trim());e.replaceWith(c),b(c)(d)})}return{link:d,scope:{index:"=?bbIndex",match:"=?bbMatch",query:"=?bbQuery"}}}angular.module("bb.typeahead",["bb.debounce","bb.position","bb.typeahead.tmpl"]).controller("bbTypeaheadController",a).factory("bbTypeaheadParser",b).filter("bbTypeaheadHighlight",c).directive("bbTypeahead",d).directive("bbTypeaheadPopup",e).directive("bbTypeaheadMatch",f),a.$inject=["$scope","$element","$attrs","$compile","$parse","$q","$timeout","$document","$window","$rootScope","$$debounce","$bbPosition","bbTypeaheadParser"],b.$inject=["$parse"],c.$inject=["$sce","$injector","$log"],e.$inject=["$$debounce"],f.$inject=["$templateRequest","$compile","$parse"]}();
